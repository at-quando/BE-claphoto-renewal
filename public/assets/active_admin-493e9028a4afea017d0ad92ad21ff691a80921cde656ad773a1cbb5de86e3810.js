!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){"use strict";function g(e,t){var i=(t=t||ie).createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}function a(e){var t=!!e&&"length"in e&&e.length,i=ge.type(e);return"function"!==i&&!ge.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}function c(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function t(e,i,n){return ge.isFunction(i)?ge.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?ge.grep(e,function(e){return e===i!==n}):"string"!=typeof i?ge.grep(e,function(e){return-1<ae.call(i,e)!==n}):Ae.test(i)?ge.filter(i,e,n):(i=ge.filter(i,e),ge.grep(e,function(e){return-1<ae.call(i,e)!==n&&1===e.nodeType}))}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function d(e){var i={};return ge.each(e.match(Le)||[],function(e,t){i[t]=!0}),i}function f(e){return e}function u(e){throw e}function l(e,t,i,n){var r;try{e&&ge.isFunction(r=e.promise)?r.call(e).done(t).fail(i):e&&ge.isFunction(r=e.then)?r.call(e,t,i):t.apply(undefined,[e].slice(n))}catch(e){i.apply(undefined,[e])}}function n(){ie.removeEventListener("DOMContentLoaded",n),w.removeEventListener("load",n),ge.ready()}function r(){this.expando=ge.expando+r.uid++}function s(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:$e.test(e)?JSON.parse(e):e)}function p(e,t,i){var n;if(i===undefined&&1===e.nodeType)if(n="data-"+t.replace(Pe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=s(i)}catch(r){}Me.set(e,t,i)}else i=undefined;return i}function h(e,t,i,n){var r,s=1,o=20,a=n?function(){return n.cur()}:function(){return ge.css(e,t,"")},l=a(),c=i&&i[3]||(ge.cssNumber[t]?"":"px"),d=(ge.cssNumber[t]||"px"!==c&&+l)&&He.exec(ge.css(e,t));if(d&&d[3]!==c)for(c=c||d[3],i=i||[],d=+l||1;d/=s=s||".5",ge.style(e,t,d+c),s!==(s=a()/l)&&1!==s&&--o;);return i&&(d=+d||+l||0,r=i[1]?d+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=d,n.end=r)),r}function m(e){var t,i=e.ownerDocument,n=e.nodeName,r=ze[n];return r||(t=i.body.appendChild(i.createElement(n)),r=ge.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),ze[n]=r)}function v(e,t){for(var i,n,r=[],s=0,o=e.length;s<o;s++)(n=e[s]).style&&(i=n.style.display,t?("none"===i&&(r[s]=Fe.get(n,"display")||null,r[s]||(n.style.display="")),""===n.style.display&&Ue(n)&&(r[s]=m(n))):"none"!==i&&(r[s]="none",Fe.set(n,"display",i)));for(s=0;s<o;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}function b(e,t){var i;return i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],t===undefined||t&&c(e,t)?ge.merge([e],i):i}function E(e,t){for(var i=0,n=e.length;i<n;i++)Fe.set(e[i],"globalEval",!t||Fe.get(t[i],"globalEval"))}function y(e,t,i,n,r){for(var s,o,a,l,c,d,f=t.createDocumentFragment(),u=[],p=0,h=e.length;p<h;p++)if((s=e[p])||0===s)if("object"===ge.type(s))ge.merge(u,s.nodeType?[s]:s);else if(Qe.test(s)){for(o=o||f.appendChild(t.createElement("div")),a=(je.exec(s)||["",""])[1].toLowerCase(),l=qe[a]||qe._default,o.innerHTML=l[1]+ge.htmlPrefilter(s)+l[2],d=l[0];d--;)o=o.lastChild;ge.merge(u,o.childNodes),(o=f.firstChild).textContent=""}else u.push(t.createTextNode(s));for(f.textContent="",p=0;s=u[p++];)if(n&&-1<ge.inArray(s,n))r&&r.push(s);else if(c=ge.contains(s.ownerDocument,s),o=b(f.appendChild(s),"script"),c&&E(o),i)for(d=0;s=o[d++];)Ge.test(s.type||"")&&i.push(s);return f}function o(){return!0}function _(){return!1}function T(){try{return ie.activeElement}catch(e){}}function C(e,t,i,n,r,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof i&&(n=n||i,i=undefined),t)C(e,a,i,n,t[a],s);return e}if(null==n&&null==r?(r=i,n=i=undefined):null==r&&("string"==typeof i?(r=n,n=undefined):(r=n,n=i,i=undefined)),!1===r)r=_;else if(!r)return e;return 1===s&&(o=r,(r=function(e){return ge().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=ge.guid++)),e.each(function(){ge.event.add(this,t,r,n,i)})}function A(e,t){return c(e,"table")&&c(11!==t.nodeType?t:t.firstChild,"tr")&&ge(">tbody",e)[0]||e}function S(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function x(e){var t=st.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function R(e,t){var i,n,r,s,o,a,l,c;if(1===t.nodeType){if(Fe.hasData(e)&&(s=Fe.access(e),o=Fe.set(t,s),c=s.events))for(r in delete o.handle,o.events={},c)for(i=0,n=c[r].length;i<n;i++)ge.event.add(t,r,c[r][i]);Me.hasData(e)&&(a=Me.access(e),l=ge.extend({},a),Me.set(t,l))}}function k(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Ye.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function L(i,n,r,s){n=se.apply([],n);var e,t,o,a,l,c,d=0,f=i.length,u=f-1,p=n[0],h=ge.isFunction(p);if(h||1<f&&"string"==typeof p&&!pe.checkClone&&rt.test(p))return i.each(function(e){var t=i.eq(e);h&&(n[0]=p.call(this,e,t.html())),L(t,n,r,s)});if(f&&(t=(e=y(n,i[0].ownerDocument,!1,i,s)).firstChild,1===e.childNodes.length&&(e=t),t||s)){for(a=(o=ge.map(b(e,"script"),S)).length;d<f;d++)l=e,d!==u&&(l=ge.clone(l,!0,!0),a&&ge.merge(o,b(l,"script"))),r.call(i[d],l,d);if(a)for(c=o[o.length-1].ownerDocument,ge.map(o,x),d=0;d<a;d++)l=o[d],Ge.test(l.type||"")&&!Fe.access(l,"globalEval")&&ge.contains(c,l)&&(l.src?ge._evalUrl&&ge._evalUrl(l.src):g(l.textContent.replace(ot,""),c))}return i}function D(e,t,i){for(var n,r=t?ge.filter(t,e):e,s=0;null!=(n=r[s]);s++)i||1!==n.nodeType||ge.cleanData(b(n)),n.parentNode&&(i&&ge.contains(n.ownerDocument,n)&&E(b(n,"script")),n.parentNode.removeChild(n));return e}function I(e,t,i){var n,r,s,o,a=e.style;return(i=i||ct(e))&&(""!==(o=i.getPropertyValue(t)||i[t])||ge.contains(e.ownerDocument,e)||(o=ge.style(e,t)),!pe.pixelMarginRight()&&lt.test(o)&&at.test(t)&&(n=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=r,a.maxWidth=s)),o!==undefined?o+"":o}function N(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function O(e){if(e in gt)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=ht.length;i--;)if((e=ht[i]+t)in gt)return e}function F(e){var t=ge.cssProps[e];return t||(t=ge.cssProps[e]=O(e)||e),t}function M(e,t,i){var n=He.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function $(e,t,i,n,r){var s,o=0;for(s=i===(n?"border":"content")?4:"width"===t?1:0;s<4;s+=2)"margin"===i&&(o+=ge.css(e,i+We[s],!0,r)),n?("content"===i&&(o-=ge.css(e,"padding"+We[s],!0,r)),"margin"!==i&&(o-=ge.css(e,"border"+We[s]+"Width",!0,r))):(o+=ge.css(e,"padding"+We[s],!0,r),"padding"!==i&&(o+=ge.css(e,"border"+We[s]+"Width",!0,r)));return o}function P(e,t,i){var n,r=ct(e),s=I(e,t,r),o="border-box"===ge.css(e,"boxSizing",!1,r);return lt.test(s)?s:(n=o&&(pe.boxSizingReliable()||s===e.style[t]),"auto"===s&&(s=e["offset"+t[0].toUpperCase()+t.slice(1)]),(s=parseFloat(s)||0)+$(e,t,i||(o?"border":"content"),n,r)+"px")}function B(e,t,i,n,r){return new B.prototype.init(e,t,i,n,r)}function H(){vt&&(!1===ie.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(H):w.setTimeout(H,ge.fx.interval),ge.fx.tick())}function W(){return w.setTimeout(function(){mt=undefined}),mt=ge.now()}function U(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=We[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function K(e,t,i){for(var n,r=(j.tweeners[t]||[]).concat(j.tweeners["*"]),s=0,o=r.length;s<o;s++)if(n=r[s].call(i,t,e))return n}function z(e,t,i){var n,r,s,o,a,l,c,d,f="width"in t||"height"in t,u=this,p={},h=e.style,g=e.nodeType&&Ue(e),m=Fe.get(e,"fxshow");for(n in i.queue||(null==(o=ge._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,u.always(function(){u.always(function(){o.unqueued--,ge.queue(e,"fx").length||o.empty.fire()})})),t)if(r=t[n],yt.test(r)){if(delete t[n],s=s||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||m[n]===undefined)continue;g=!0}p[n]=m&&m[n]||ge.style(e,n)}if((l=!ge.isEmptyObject(t))||!ge.isEmptyObject(p))for(n in f&&1===e.nodeType&&(i.overflow=[h.overflow,h.overflowX,h.overflowY],null==(c=m&&m.display)&&(c=Fe.get(e,"display")),"none"===(d=ge.css(e,"display"))&&(c?d=c:(v([e],!0),c=e.style.display||c,d=ge.css(e,"display"),v([e]))),("inline"===d||"inline-block"===d&&null!=c)&&"none"===ge.css(e,"float")&&(l||(u.done(function(){h.display=c}),null==c&&(d=h.display,c="none"===d?"":d)),h.display="inline-block")),i.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=i.overflow[0],h.overflowX=i.overflow[1],h.overflowY=i.overflow[2]})),l=!1,p)l||(m?"hidden"in m&&(g=m.hidden):m=Fe.access(e,"fxshow",{display:c}),s&&(m.hidden=!g),g&&v([e],!0),u.done(function(){for(n in g||v([e]),Fe.remove(e,"fxshow"),p)ge.style(e,n,p[n])})),l=K(g?m[n]:0,n,u),n in m||(m[n]=l.start,g&&(l.end=l.start,l.start=0))}function Y(e,t){var i,n,r,s,o;for(i in e)if(r=t[n=ge.camelCase(i)],s=e[i],Array.isArray(s)&&(r=s[1],s=e[i]=s[0]),i!==n&&(e[n]=s,delete e[i]),(o=ge.cssHooks[n])&&"expand"in o)for(i in s=o.expand(s),delete e[n],s)i in e||(e[i]=s[i],t[i]=r);else t[n]=r}function j(s,e,t){var i,o,n=0,r=j.prefilters.length,a=ge.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=mt||W(),t=Math.max(0,c.startTime+c.duration-e),i=1-(t/c.duration||0),n=0,r=c.tweens.length;n<r;n++)c.tweens[n].run(i);return a.notifyWith(s,[c,i,t]),i<1&&r?t:(r||a.notifyWith(s,[c,1,0]),a.resolveWith(s,[c]),!1)},c=a.promise({elem:s,props:ge.extend({},e),opts:ge.extend(!0,{specialEasing:{},easing:ge.easing._default},t),originalProperties:e,originalOptions:t,startTime:mt||W(),duration:t.duration,tweens:[],createTween:function(e,t){var i=ge.Tween(s,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var t=0,i=e?c.tweens.length:0;if(o)return this;for(o=!0;t<i;t++)c.tweens[t].run(1);return e?(a.notifyWith(s,[c,1,0]),a.resolveWith(s,[c,e])):a.rejectWith(s,[c,e]),this}}),d=c.props;for(Y(d,c.opts.specialEasing);n<r;n++)if(i=j.prefilters[n].call(c,s,d,c.opts))return ge.isFunction(i.stop)&&(ge._queueHooks(c.elem,c.opts.queue).stop=ge.proxy(i.stop,i)),i;return ge.map(d,K,c),ge.isFunction(c.opts.start)&&c.opts.start.call(s,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),ge.fx.timer(ge.extend(l,{elem:s,anim:c,queue:c.opts.queue})),c}function G(e){return(e.match(Le)||[]).join(" ")}function q(e){return e.getAttribute&&e.getAttribute("class")||""}function V(i,e,n,r){var t;if(Array.isArray(e))ge.each(e,function(e,t){n||Dt.test(i)?r(i,t):V(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,n,r)});else if(n||"object"!==ge.type(e))r(i,e);else for(t in e)V(i+"["+t+"]",e[t],n,r)}function X(s){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(Le)||[];if(ge.isFunction(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(s[i]=s[i]||[]).unshift(t)):(s[i]=s[i]||[]).push(t)}}function Q(t,r,s,o){function a(e){var n;return l[e]=!0,ge.each(t[e]||[],function(e,t){var i=t(r,s,o);return"string"!=typeof i||c||l[i]?c?!(n=i):void 0:(r.dataTypes.unshift(i),a(i),!1)}),n}var l={},c=t===Kt;return a(r.dataTypes[0])||!l["*"]&&a("*")}function Z(e,t){var i,n,r=ge.ajaxSettings.flatOptions||{};for(i in t)t[i]!==undefined&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&ge.extend(!0,e,n),e}function J(e,t,i){for(var n,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),n===undefined&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){l.unshift(r);break}if(l[0]in i)s=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),i[s]}function ee(e,t,i,n){var r,s,o,a,l,c={},d=e.dataTypes.slice();if(d[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=d.shift();s;)if(e.responseFields[s]&&(i[e.responseFields[s]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=d.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=c[l+" "+s]||c["* "+s]))for(r in c)if((a=r.split(" "))[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[r]:!0!==c[r]&&(s=a[0],d.unshift(a[1]));break}if(!0!==o)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(f){return{state:"parsererror",error:o?f:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}var te=[],ie=w.document,ne=Object.getPrototypeOf,re=te.slice,se=te.concat,oe=te.push,ae=te.indexOf,le={},ce=le.toString,de=le.hasOwnProperty,fe=de.toString,ue=fe.call(Object),pe={},he="3.2.1",ge=function(e,t){return new ge.fn.init(e,t)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ve=/^-ms-/,be=/-([a-z])/g,Ee=function(e,t){return t.toUpperCase()};ge.fn=ge.prototype={jquery:he,constructor:ge,length:0,toArray:function(){return re.call(this)},get:function(e){return null==e?re.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ge.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ge.each(this,e)},map:function(i){return this.pushStack(ge.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:oe,sort:te.sort,splice:te.splice},ge.extend=ge.fn.extend=function(e){var t,i,n,r,s,o,a=e||{},l=1,c=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[l]||{},l++),"object"==typeof a||ge.isFunction(a)||(a={}),l===c&&(a=this,l--);l<c;l++)if(null!=(t=arguments[l]))for(i in t)n=a[i],a!==(r=t[i])&&(d&&r&&(ge.isPlainObject(r)||(s=Array.isArray(r)))?(s?(s=!1,o=n&&Array.isArray(n)?n:[]):o=n&&ge.isPlainObject(n)?n:{},a[i]=ge.extend(d,o,r)):r!==undefined&&(a[i]=r));return a},ge.extend({expando:"jQuery"+(he+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ge.type(e)},isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ge.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==ce.call(e))&&(!(t=ne(e))||"function"==typeof(i=de.call(t,"constructor")&&t.constructor)&&fe.call(i)===ue)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?le[ce.call(e)]||"object":typeof e},globalEval:function(e){g(e)},camelCase:function(e){return e.replace(ve,"ms-").replace(be,Ee)},each:function(e,t){var i,n=0;if(a(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(a(Object(e))?ge.merge(i,"string"==typeof e?[e]:e):oe.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:ae.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,s=e.length,o=!i;r<s;r++)!t(e[r],r)!==o&&n.push(e[r]);return n},map:function(e,t,i){var n,r,s=0,o=[];if(a(e))for(n=e.length;s<n;s++)null!=(r=t(e[s],s,i))&&o.push(r);else for(s in e)null!=(r=t(e[s],s,i))&&o.push(r);return se.apply([],o)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(i=e[t],t=e,e=i),ge.isFunction(e)?(n=re.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(re.call(arguments)))}).guid=e.guid=e.guid||ge.guid++,r):undefined},now:Date.now,support:pe}),"function"==typeof Symbol&&(ge.fn[Symbol.iterator]=te[Symbol.iterator]),ge.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){le["[object "+t+"]"]=t.toLowerCase()});var ye=function(i){function y(e,t,i,n){var r,s,o,a,l,c,d,f=t&&t.ownerDocument,u=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return i;if(!n&&((t?t.ownerDocument||t:W)!==N&&I(t),t=t||N,F)){if(11!==u&&(l=ve.exec(e)))if(r=l[1]){if(9===u){if(!(o=t.getElementById(r)))return i;if(o.id===r)return i.push(o),i}else if(f&&(o=f.getElementById(r))&&B(t,o)&&o.id===r)return i.push(o),i}else{if(l[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((r=l[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(r)),i}if(T.qsa&&!j[e+" "]&&(!M||!M.test(e))){if(1!==u)f=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(_e,Te):t.setAttribute("id",a=H),s=(c=S(e)).length;s--;)c[s]="#"+a+" "+g(c[s]);d=c.join(","),f=be.test(e)&&h(t.parentNode)||t}if(d)try{return Z.apply(i,f.querySelectorAll(d)),i}catch(p){}finally{a===H&&t.removeAttribute("id")}}}return R(e.replace(ae,"$1"),t,i,n)}function e(){function i(e,t){return n.push(e+" ")>C.cacheLength&&delete i[n.shift()],i[e+" "]=t}var n=[];return i}function l(e){return e[H]=!0,e}function r(e){var t=N.createElement("fieldset");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function t(e,t){for(var i=e.split("|"),n=i.length;n--;)C.attrHandle[i[n]]=t}function c(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function n(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function s(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}function o(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&we(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function a(o){return l(function(s){return s=+s,l(function(e,t){for(var i,n=o([],e.length,s),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function h(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function g(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function f(a,e,t){var l=e.dir,c=e.next,d=c||l,f=t&&"parentNode"===d,u=K++;return e.first?function(e,t,i){for(;e=e[l];)if(1===e.nodeType||f)return a(e,t,i);return!1}:function(e,t,i){var n,r,s,o=[U,u];if(i){for(;e=e[l];)if((1===e.nodeType||f)&&a(e,t,i))return!0}else for(;e=e[l];)if(1===e.nodeType||f)if(r=(s=e[H]||(e[H]={}))[e.uniqueID]||(s[e.uniqueID]={}),c&&c===e.nodeName.toLowerCase())e=e[l]||e;else{if((n=r[d])&&n[0]===U&&n[1]===u)return o[2]=n[2];if((r[d]=o)[2]=a(e,t,i))return!0}return!1}}function u(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function b(e,t,i){for(var n=0,r=t.length;n<r;n++)y(e,t[n],i);return i}function _(e,t,i,n,r){for(var s,o=[],a=0,l=e.length,c=null!=t;a<l;a++)(s=e[a])&&(i&&!i(s,n,r)||(o.push(s),c&&t.push(a)));return o}function E(p,h,g,m,v,e){return m&&!m[H]&&(m=E(m)),v&&!v[H]&&(v=E(v,e)),l(function(e,t,i,n){var r,s,o,a=[],l=[],c=t.length,d=e||b(h||"*",i.nodeType?[i]:i,[]),f=!p||!e&&h?d:_(d,a,p,i,n),u=g?v||(e?p:c||m)?[]:t:f;if(g&&g(f,u,i,n),m)for(r=_(u,l),m(r,[],i,n),s=r.length;s--;)(o=r[s])&&(u[l[s]]=!(f[l[s]]=o));if(e){if(v||p){if(v){for(r=[],s=u.length;s--;)(o=u[s])&&r.push(f[s]=o);v(null,u=[],r,n)}for(s=u.length;s--;)(o=u[s])&&-1<(r=v?ee(e,o):a[s])&&(e[r]=!(t[r]=o))}}else u=_(u===t?u.splice(c,u.length):u),v?v(null,t,u,n):Z.apply(t,u)})}function p(e){for(var r,t,i,n=e.length,s=C.relative[e[0].type],o=s||C.relative[" "],a=s?1:0,l=f(function(e){return e===r},o,!0),c=f(function(e){return-1<ee(r,e)},o,!0),d=[function(e,t,i){var n=!s&&(i||t!==k)||((r=t).nodeType?l(e,t,i):c(e,t,i));return r=null,n}];a<n;a++)if(t=C.relative[e[a].type])d=[f(u(d),t)];else{if((t=C.filter[e[a].type].apply(null,e[a].matches))[H]){for(i=++a;i<n&&!C.relative[e[i].type];i++);return E(1<a&&u(d),1<a&&g(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),t,a<i&&p(e.slice(a,i)),i<n&&p(e=e.slice(i)),i<n&&g(e))}d.push(t)}return u(d)}function m(m,v){var b=0<v.length,E=0<m.length,e=function(e,t,i,n,r){var s,o,a,l=0,c="0",d=e&&[],f=[],u=k,p=e||E&&C.find.TAG("*",r),h=U+=null==u?1:Math.random()||.1,g=p.length;for(r&&(k=t===N||t||r);c!==g&&null!=(s=p[c]);c++){if(E&&s){for(o=0,t||s.ownerDocument===N||(I(s),i=!F);a=m[o++];)if(a(s,t||N,i)){n.push(s);break}r&&(U=h)}b&&((s=!a&&s)&&l--,e&&d.push(s))}if(l+=c,b&&c!==l){for(o=0;a=v[o++];)a(d,f,t,i);if(e){if(0<l)for(;c--;)d[c]||f[c]||(f[c]=X.call(n));f=_(f)}Z.apply(n,f),r&&!e&&0<f.length&&1<l+v.length&&y.uniqueSort(n)}return r&&(U=h,k=u),d};return b?l(e):e}var v,T,C,w,A,S,x,R,k,L,D,I,N,O,F,M,$,P,B,H="sizzle"+1*new Date,W=i.document,U=0,K=0,z=e(),Y=e(),j=e(),G=function(e,t){return e===t&&(D=!0),0},q={}.hasOwnProperty,V=[],X=V.pop,Q=V.push,Z=V.push,J=V.slice,ee=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",re="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ne+"))|)"+ie+"*\\]",se=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",oe=new RegExp(ie+"+","g"),ae=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),fe=new RegExp(se),ue=new RegExp("^"+ne+"$"),pe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,Ee=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),ye=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},_e=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Te=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Ce=function(){I()},we=f(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Z.apply(V=J.call(W.childNodes),W.childNodes),V[W.childNodes.length].nodeType}catch(Ae){Z={apply:V.length?function(e,t){Q.apply(e,J.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}for(v in T=y.support={},A=y.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=y.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:W;return n!==N&&9===n.nodeType&&n.documentElement&&(O=(N=n).documentElement,F=!A(N),W!==N&&(i=N.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",Ce,!1):i.attachEvent&&i.attachEvent("onunload",Ce)),T.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=r(function(e){return e.appendChild(N.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=me.test(N.getElementsByClassName),T.getById=r(function(e){return O.appendChild(e).id=H,!N.getElementsByName||!N.getElementsByName(H).length}),T.getById?(C.filter.ID=function(e){var t=e.replace(Ee,ye);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&F){var i=t.getElementById(e);return i?[i]:[]}}):(C.filter.ID=function(e){var i=e.replace(Ee,ye);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===i}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&F){var i,n,r,s=t.getElementById(e);if(s){if((i=s.getAttributeNode("id"))&&i.value===e)return[s];for(r=t.getElementsByName(e),n=0;s=r[n++];)if((i=s.getAttributeNode("id"))&&i.value===e)return[s]}return[]}}),C.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;i=s[r++];)1===i.nodeType&&n.push(i);return n}return s},C.find.CLASS=T.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&F)return t.getElementsByClassName(e)},$=[],M=[],(T.qsa=me.test(N.querySelectorAll))&&(r(function(e){O.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ie+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||M.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=N.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ie+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&M.push(":enabled",":disabled"),O.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(T.matchesSelector=me.test(P=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){T.disconnectedMatch=P.call(e,"*"),P.call(e,"[s!='']:x"),$.push("!=",se)}),M=M.length&&new RegExp(M.join("|")),$=$.length&&new RegExp($.join("|")),t=me.test(O.compareDocumentPosition),B=t||me.test(O.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return D=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!T.sortDetached&&t.compareDocumentPosition(e)===i?e===N||e.ownerDocument===W&&B(W,e)?-1:t===N||t.ownerDocument===W&&B(W,t)?1:L?ee(L,e)-ee(L,t):0:4&i?-1:1)}:function(e,t){if(e===t)return D=!0,0;var i,n=0,r=e.parentNode,s=t.parentNode,o=[e],a=[t];if(!r||!s)return e===N?-1:t===N?1:r?-1:s?1:L?ee(L,e)-ee(L,t):0;if(r===s)return c(e,t);for(i=e;i=i.parentNode;)o.unshift(i);for(i=t;i=i.parentNode;)a.unshift(i);for(;o[n]===a[n];)n++;return n?c(o[n],a[n]):o[n]===W?-1:a[n]===W?1:0}),N},y.matches=function(e,t){return y(e,null,null,t)},y.matchesSelector=function(e,t){if((e.ownerDocument||e)!==N&&I(e),t=t.replace(de,"='$1']"),T.matchesSelector&&F&&!j[t+" "]&&(!$||!$.test(t))&&(!M||!M.test(t)))try{var i=P.call(e,t);if(i||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(Ae){}return 0<y(t,N,null,[e]).length},y.contains=function(e,t){return(e.ownerDocument||e)!==N&&I(e),B(e,t)},y.attr=function(e,t){(e.ownerDocument||e)!==N&&I(e);var i=C.attrHandle[t.toLowerCase()],n=i&&q.call(C.attrHandle,t.toLowerCase())?i(e,t,!F):undefined;return n!==undefined?n:T.attributes||!F?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},y.escape=function(e){return(e+"").replace(_e,Te)},y.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},y.uniqueSort=function(e){var t,i=[],n=0,r=0;if(D=!T.detectDuplicates,L=!T.sortStable&&e.slice(0),e.sort(G),D){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return L=null,e},w=y.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=w(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=w(t);return i},(C=y.selectors={cacheLength:50,createPseudo:l,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ee,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(Ee,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||y.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&y.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&fe.test(i)&&(t=S(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ee,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(e){var t=y.attr(e,i);return null==t?"!="===n:!n||(t+="","="===n?t===r:"!="===n?t!==r:"^="===n?r&&0===t.indexOf(r):"*="===n?r&&-1<t.indexOf(r):"$="===n?r&&t.slice(-r.length)===r:"~="===n?-1<(" "+t.replace(oe," ")+" ").indexOf(r):"|="===n&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(h,e,t,g,m){var v="nth"!==h.slice(0,3),b="last"!==h.slice(-4),E="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,i){var n,r,s,o,a,l,c=v!==b?"nextSibling":"previousSibling",d=e.parentNode,f=E&&e.nodeName.toLowerCase(),u=!i&&!E,p=!1;if(d){if(v){for(;c;){for(o=e;o=o[c];)if(E?o.nodeName.toLowerCase()===f:1===o.nodeType)return!1;l=c="only"===h&&!l&&"nextSibling"}return!0}if(l=[b?d.firstChild:d.lastChild],b&&u){for(p=(a=(n=(r=(s=(o=d)[H]||(o[H]={}))[o.uniqueID]||(s[o.uniqueID]={}))[h]||[])[0]===U&&n[1])&&n[2],o=a&&d.childNodes[a];o=++a&&o&&o[c]||(p=a=0)||l.pop();)if(1===o.nodeType&&++p&&o===e){r[h]=[U,a,p];break}}else if(u&&(p=a=(n=(r=(s=(o=e)[H]||(o[H]={}))[o.uniqueID]||(s[o.uniqueID]={}))[h]||[])[0]===U&&n[1]),!1===p)for(;(o=++a&&o&&o[c]||(p=a=0)||l.pop())&&((E?o.nodeName.toLowerCase()!==f:1!==o.nodeType)||!++p||(u&&((r=(s=o[H]||(o[H]={}))[o.uniqueID]||(s[o.uniqueID]={}))[h]=[U,p]),o!==e)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,s){var t,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||y.error("unsupported pseudo: "+e);return o[H]?o(s):1<o.length?(t=[e,e,"",s],C.setFilters.hasOwnProperty(e.toLowerCase())?l(function(e,t){for(var i,n=o(e,s),r=n.length;r--;)e[i=ee(e,n[r])]=!(t[i]=n[r])}):function(e){return o(e,0,t)}):o}},pseudos:{not:l(function(e){var n=[],r=[],a=x(e.replace(ae,"$1"));return a[H]?l(function(e,t,i,n){for(var r,s=a(e,null,n,[]),o=e.length;o--;)(r=s[o])&&(e[o]=!(t[o]=r))}):function(e,t,i){return n[0]=e,a(n,null,i,r),n[0]=null,!r.pop()}}),has:l(function(t){return function(e){return 0<y(t,e).length}}),contains:l(function(t){return t=t.replace(Ee,ye),function(e){return-1<(e.textContent||e.innerText||w(e)).indexOf(t)}}),lang:l(function(i){return ue.test(i||"")||y.error("unsupported lang: "+i),i=i.replace(Ee,ye).toLowerCase(),function(e){var t;do{if(t=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===O},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:o(!1),disabled:o(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase()
;return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,i){return[i<0?i+t:i]}),even:a(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:a(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:a(function(e,t,i){for(var n=i<0?i+t:i;0<=--n;)e.push(n);return e}),gt:a(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=C.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[v]=n(v);for(v in{submit:!0,reset:!0})C.pseudos[v]=s(v);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,S=y.tokenize=function(e,t){var i,n,r,s,o,a,l,c=Y[e+" "];if(c)return t?0:c.slice(0);for(o=e,a=[],l=C.preFilter;o;){for(s in i&&!(n=le.exec(o))||(n&&(o=o.slice(n[0].length)||o),a.push(r=[])),i=!1,(n=ce.exec(o))&&(i=n.shift(),r.push({value:i,type:n[0].replace(ae," ")}),o=o.slice(i.length)),C.filter)!(n=pe[s].exec(o))||l[s]&&!(n=l[s](n))||(i=n.shift(),r.push({value:i,type:s,matches:n}),o=o.slice(i.length));if(!i)break}return t?o.length:o?y.error(e):Y(e,a).slice(0)},x=y.compile=function(e,t){var i,n=[],r=[],s=j[e+" "];if(!s){for(t||(t=S(e)),i=t.length;i--;)(s=p(t[i]))[H]?n.push(s):r.push(s);(s=j(e,m(r,n))).selector=e}return s},R=y.select=function(e,t,i,n){var r,s,o,a,l,c="function"==typeof e&&e,d=!n&&S(e=c.selector||e);if(i=i||[],1===d.length){if(2<(s=d[0]=d[0].slice(0)).length&&"ID"===(o=s[0]).type&&9===t.nodeType&&F&&C.relative[s[1].type]){if(!(t=(C.find.ID(o.matches[0].replace(Ee,ye),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=pe.needsContext.test(e)?0:s.length;r--&&(o=s[r],!C.relative[a=o.type]);)if((l=C.find[a])&&(n=l(o.matches[0].replace(Ee,ye),be.test(s[0].type)&&h(t.parentNode)||t))){if(s.splice(r,1),!(e=n.length&&g(s)))return Z.apply(i,n),i;break}}return(c||x(e,d))(n,t,!F,i,!t||be.test(e)&&h(t.parentNode)||t),i},T.sortStable=H.split("").sort(G).join("")===H,T.detectDuplicates=!!D,I(),T.sortDetached=r(function(e){return 1&e.compareDocumentPosition(N.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||t("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||t("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||t(te,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),y}(w);ge.find=ye,ge.expr=ye.selectors,ge.expr[":"]=ge.expr.pseudos,ge.uniqueSort=ge.unique=ye.uniqueSort,ge.text=ye.getText,ge.isXMLDoc=ye.isXML,ge.contains=ye.contains,ge.escapeSelector=ye.escape;var _e=function(e,t,i){for(var n=[],r=i!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&ge(e).is(i))break;n.push(e)}return n},Te=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},Ce=ge.expr.match.needsContext,we=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Ae=/^.[^:#\[\.,]*$/;ge.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ge.find.matchesSelector(n,e)?[n]:[]:ge.find.matches(e,ge.grep(t,function(e){return 1===e.nodeType}))},ge.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(ge(e).filter(function(){for(t=0;t<n;t++)if(ge.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)ge.find(e,r[t],i);return 1<n?ge.uniqueSort(i):i},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&Ce.test(e)?ge(e):e||[],!1).length}});var Se,xe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ge.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||Se,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:xe.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ge?t[0]:t,ge.merge(this,ge.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),we.test(n[1])&&ge.isPlainObject(t))for(n in t)ge.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=ie.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ge.isFunction(e)?i.ready!==undefined?i.ready(e):e(ge):ge.makeArray(e,this)}).prototype=ge.fn,Se=ge(ie);var Re=/^(?:parents|prev(?:Until|All))/,ke={children:!0,contents:!0,next:!0,prev:!0};ge.fn.extend({has:function(e){var t=ge(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(ge.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,s=[],o="string"!=typeof e&&ge(e);if(!Ce.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(o?-1<o.index(i):1===i.nodeType&&ge.find.matchesSelector(i,e))){s.push(i);break}return this.pushStack(1<s.length?ge.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?ae.call(ge(e),this[0]):ae.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ge.uniqueSort(ge.merge(this.get(),ge(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ge.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return _e(e,"parentNode")},parentsUntil:function(e,t,i){return _e(e,"parentNode",i)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return _e(e,"nextSibling")},prevAll:function(e){return _e(e,"previousSibling")},nextUntil:function(e,t,i){return _e(e,"nextSibling",i)},prevUntil:function(e,t,i){return _e(e,"previousSibling",i)},siblings:function(e){return Te((e.parentNode||{}).firstChild,e)},children:function(e){return Te(e.firstChild)},contents:function(e){return c(e,"iframe")?e.contentDocument:(c(e,"template")&&(e=e.content||e),ge.merge([],e.childNodes))}},function(n,r){ge.fn[n]=function(e,t){var i=ge.map(this,r,e);return"Until"!==n.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=ge.filter(t,i)),1<this.length&&(ke[n]||ge.uniqueSort(i),Re.test(n)&&i.reverse()),this.pushStack(i)}});var Le=/[^\x20\t\r\n\f]+/g;ge.Callbacks=function(n){n="string"==typeof n?d(n):ge.extend({},n);var r,e,t,i,s=[],o=[],a=-1,l=function(){for(i=i||n.once,t=r=!0;o.length;a=-1)for(e=o.shift();++a<s.length;)!1===s[a].apply(e[0],e[1])&&n.stopOnFalse&&(a=s.length,e=!1);n.memory||(e=!1),r=!1,i&&(s=e?[]:"")},c={add:function(){return s&&(e&&!r&&(a=s.length-1,o.push(e)),function i(e){ge.each(e,function(e,t){ge.isFunction(t)?n.unique&&c.has(t)||s.push(t):t&&t.length&&"string"!==ge.type(t)&&i(t)})}(arguments),e&&!r&&l()),this},remove:function(){return ge.each(arguments,function(e,t){for(var i;-1<(i=ge.inArray(t,s,i));)s.splice(i,1),i<=a&&a--}),this},has:function(e){return e?-1<ge.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=e="",this},disabled:function(){return!s},lock:function(){return i=o=[],e||r||(s=e=""),this},locked:function(){return!!i},fireWith:function(e,t){return i||(t=[e,(t=t||[]).slice?t.slice():t],o.push(t),r||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!t}};return c},ge.extend({Deferred:function(e){var s=[["notify","progress",ge.Callbacks("memory"),ge.Callbacks("memory"),2],["resolve","done",ge.Callbacks("once memory"),ge.Callbacks("once memory"),0,"resolved"],["reject","fail",ge.Callbacks("once memory"),ge.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},"catch":function(e){return o.then(null,e)},pipe:function(){var r=arguments;return ge.Deferred(function(n){ge.each(s,function(e,t){var i=ge.isFunction(r[t[4]])&&r[t[4]];a[t[1]](function(){var e=i&&i.apply(this,arguments);e&&ge.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){function c(s,o,a,l){return function(){var i=this,n=arguments,t=function(){var e,t;if(!(s<d)){if((e=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,ge.isFunction(t)?l?t.call(e,c(d,o,f,l),c(d,o,u,l)):(d++,t.call(e,c(d,o,f,l),c(d,o,u,l),c(d,o,f,o.notifyWith))):(a!==f&&(i=undefined,n=[e]),(l||o.resolveWith)(i,n))}},r=l?t:function(){try{t()}catch(e){ge.Deferred.exceptionHook&&ge.Deferred.exceptionHook(e,r.stackTrace),d<=s+1&&(a!==u&&(i=undefined,n=[e]),o.rejectWith(i,n))}};s?r():(ge.Deferred.getStackHook&&(r.stackTrace=ge.Deferred.getStackHook()),w.setTimeout(r))}}var d=0;return ge.Deferred(function(e){s[0][3].add(c(0,e,ge.isFunction(n)?n:f,e.notifyWith)),s[1][3].add(c(0,e,ge.isFunction(t)?t:f)),s[2][3].add(c(0,e,ge.isFunction(i)?i:u))}).promise()},promise:function(e){return null!=e?ge.extend(e,o):o}},a={};return ge.each(s,function(e,t){var i=t[2],n=t[5];o[t[1]]=i.add,n&&i.add(function(){r=n},s[3-e][2].disable,s[0][2].lock),i.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?undefined:this,arguments),this},a[t[0]+"With"]=i.fireWith}),o.promise(a),e&&e.call(a,a),a},when:function(e){var i=arguments.length,t=i,n=Array(t),r=re.call(arguments),s=ge.Deferred(),o=function(t){return function(e){n[t]=this,r[t]=1<arguments.length?re.call(arguments):e,--i||s.resolveWith(n,r)}};if(i<=1&&(l(e,s.done(o(t)).resolve,s.reject,!i),"pending"===s.state()||ge.isFunction(r[t]&&r[t].then)))return s.then();for(;t--;)l(r[t],o(t),s.reject);return s.promise()}});var De=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ge.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&De.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ge.readyException=function(e){w.setTimeout(function(){throw e})};var Ie=ge.Deferred();ge.fn.ready=function(e){return Ie.then(e)["catch"](function(e){ge.readyException(e)}),this},ge.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ge.readyWait:ge.isReady)||(ge.isReady=!0)!==e&&0<--ge.readyWait||Ie.resolveWith(ie,[ge])}}),ge.ready.then=Ie.then,"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll?w.setTimeout(ge.ready):(ie.addEventListener("DOMContentLoaded",n),w.addEventListener("load",n));var Ne=function(e,t,i,n,r,s,o){var a=0,l=e.length,c=null==i;if("object"===ge.type(i))for(a in r=!0,i)Ne(e,t,a,i[a],!0,s,o);else if(n!==undefined&&(r=!0,ge.isFunction(n)||(o=!0),c&&(o?(t.call(e,n),t=null):(c=t,t=function(e,t,i){return c.call(ge(e),i)})),t))for(;a<l;a++)t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)));return r?e:c?t.call(e):l?t(e[0],i):s},Oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};r.uid=1,r.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[ge.camelCase(t)]=i;else for(n in t)r[ge.camelCase(n)]=t[n];return r},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][ge.camelCase(t)]},access:function(e,t,i){return t===undefined||t&&"string"==typeof t&&i===undefined?this.get(e,t):(this.set(e,t,i),i!==undefined?i:t)},remove:function(e,t){var i,n=e[this.expando];if(n!==undefined){if(t!==undefined){i=(t=Array.isArray(t)?t.map(ge.camelCase):(t=ge.camelCase(t))in n?[t]:t.match(Le)||[]).length;for(;i--;)delete n[t[i]]}(t===undefined||ge.isEmptyObject(n))&&(e.nodeType?e[this.expando]=undefined:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!ge.isEmptyObject(t)}};var Fe=new r,Me=new r,$e=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pe=/[A-Z]/g;ge.extend({hasData:function(e){return Me.hasData(e)||Fe.hasData(e)},data:function(e,t,i){return Me.access(e,t,i)},removeData:function(e,t){Me.remove(e,t)},_data:function(e,t,i){return Fe.access(e,t,i)},_removeData:function(e,t){Fe.remove(e,t)}}),ge.fn.extend({data:function(i,e){var t,n,r,s=this[0],o=s&&s.attributes;if(i===undefined){if(this.length&&(r=Me.get(s),1===s.nodeType&&!Fe.get(s,"hasDataAttrs"))){for(t=o.length;t--;)o[t]&&0===(n=o[t].name).indexOf("data-")&&(n=ge.camelCase(n.slice(5)),p(s,n,r[n]));Fe.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof i?this.each(function(){Me.set(this,i)}):Ne(this,function(e){var t;if(s&&e===undefined)return(t=Me.get(s,i))!==undefined?t:(t=p(s,i))!==undefined?t:void 0;this.each(function(){Me.set(this,i,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Me.remove(this,e)})}}),ge.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=Fe.get(e,t),i&&(!n||Array.isArray(i)?n=Fe.access(e,t,ge.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=ge.queue(e,t),n=i.length,r=i.shift(),s=ge._queueHooks(e,t),o=function(){ge.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Fe.get(e,i)||Fe.access(e,i,{empty:ge.Callbacks("once memory").add(function(){Fe.remove(e,[t+"queue",i])})})}}),ge.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?ge.queue(this[0],t):i===undefined?this:this.each(function(){var e=ge.queue(this,t,i);ge._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ge.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ge.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=ge.Deferred(),s=this,o=this.length,a=function(){--n||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";o--;)(i=Fe.get(s[o],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(t)}});var Be=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,He=new RegExp("^(?:([+-])=|)("+Be+")([a-z%]*)$","i"),We=["Top","Right","Bottom","Left"],Ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ge.contains(e.ownerDocument,e)&&"none"===ge.css(e,"display")},Ke=function(e,t,i,n){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];for(s in r=i.apply(e,n||[]),t)e.style[s]=o[s];return r},ze={};ge.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ue(this)?ge(this).show():ge(this).hide()})}});var Ye=/^(?:checkbox|radio)$/i,je=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ge=/^$|\/(?:java|ecma)script/i,qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};qe.optgroup=qe.option,qe.tbody=qe.tfoot=qe.colgroup=qe.caption=qe.thead,qe.th=qe.td;var Ve,Xe,Qe=/<|&#?\w+;/;Ve=ie.createDocumentFragment().appendChild(ie.createElement("div")),(Xe=ie.createElement("input")).setAttribute("type","radio"),Xe.setAttribute("checked","checked"),Xe.setAttribute("name","t"),Ve.appendChild(Xe),pe.checkClone=Ve.cloneNode(!0).cloneNode(!0).lastChild.checked,Ve.innerHTML="<textarea>x</textarea>",pe.noCloneChecked=!!Ve.cloneNode(!0).lastChild.defaultValue;var Ze=ie.documentElement,Je=/^key/,et=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,tt=/^([^.]*)(?:\.(.+)|)/;ge.event={global:{},add:function(t,e,i,n,r){var s,o,a,l,c,d,f,u,p,h,g,m=Fe.get(t);if(m)for(i.handler&&(i=(s=i).handler,r=s.selector),r&&ge.find.matchesSelector(Ze,r),i.guid||(i.guid=ge.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(e){return void 0!==ge&&ge.event.triggered!==e.type?ge.event.dispatch.apply(t,arguments):undefined}),c=(e=(e||"").match(Le)||[""]).length;c--;)p=g=(a=tt.exec(e[c])||[])[1],h=(a[2]||"").split(".").sort(),p&&(f=ge.event.special[p]||{},p=(r?f.delegateType:f.bindType)||p,f=ge.event.special[p]||{},d=ge.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&ge.expr.match.needsContext.test(r),namespace:h.join(".")},s),(u=l[p])||((u=l[p]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,n,h,o)||t.addEventListener&&t.addEventListener(p,o)),f.add&&(f.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),r?u.splice(u.delegateCount++,0,d):u.push(d),ge.event.global[p]=!0)},remove:function(e,t,i,n,r){var s,o,a,l,c,d,f,u,p,h,g,m=Fe.hasData(e)&&Fe.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(Le)||[""]).length;c--;)if(p=g=(a=tt.exec(t[c])||[])[1],h=(a[2]||"").split(".").sort(),p){for(f=ge.event.special[p]||{},u=l[p=(n?f.delegateType:f.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=u.length;s--;)d=u[s],!r&&g!==d.origType||i&&i.guid!==d.guid||a&&!a.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(u.splice(s,1),d.selector&&u.delegateCount--,f.remove&&f.remove.call(e,d));o&&!u.length&&(f.teardown&&!1!==f.teardown.call(e,h,m.handle)||ge.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)ge.event.remove(e,p+t[c],i,n,!0);ge.isEmptyObject(l)&&Fe.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,s,o,a=ge.event.fix(e),l=new Array(arguments.length),c=(Fe.get(this,"events")||{})[a.type]||[],d=ge.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!d.preDispatch||!1!==d.preDispatch.call(this,a)){for(o=ge.event.handlers.call(this,a,c),t=0;(r=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,i=0;(s=r.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,(n=((ge.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l))!==undefined&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,a),a.result}},handlers:function(e,t){var i,n,r,s,o,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&1<=e.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],o={},i=0;i<l;i++)o[r=(n=t[i]).selector+" "]===undefined&&(o[r]=n.needsContext?-1<ge(r,this).index(c):ge.find(r,this,null,[c]).length),o[r]&&s.push(n);s.length&&a.push({elem:c,handlers:s})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(t,e){Object.defineProperty(ge.Event.prototype,t,{enumerable:!0,configurable:!0,get:ge.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[ge.expando]?e:new ge.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&c(this,"input"))return this.click(),!1},_default:function(e){return c(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ge.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},ge.Event=function(e,t){if(!(this instanceof ge.Event))return new ge.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?o:_,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ge.extend(this,t),this.timeStamp=e&&e.timeStamp||ge.now(),this[ge.expando]=!0},ge.Event.prototype={constructor:ge.Event,isDefaultPrevented:_,isPropagationStopped:_,isImmediatePropagationStopped:_,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=o,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=o,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=o,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ge.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Je.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&t!==undefined&&et.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ge.event.addProp),ge.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,s){ge.event.special[e]={delegateType:s,bindType:s,handle:function(e){var t,i=this,n=e.relatedTarget,r=e.handleObj;return n&&(n===i||ge.contains(i,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=s),t}}}),ge.fn.extend({on:function(e,t,i,n){return C(this,e,t,i,n)},one:function(e,t,i,n){return C(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ge(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=undefined),!1===i&&(i=_),this.each(function(){ge.event.remove(this,e,i,t)})}});var it=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,nt=/<script|<style|<link/i,rt=/checked\s*(?:[^=]|=\s*.checked.)/i,st=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ge.extend({htmlPrefilter:function(e){return e.replace(it,"<$1></$2>")},clone:function(e,t,i){var n,r,s,o,a=e.cloneNode(!0),l=ge.contains(e.ownerDocument,e);if(!(pe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ge.isXMLDoc(e)))for(o=b(a),n=0,r=(s=b(e)).length;n<r;n++)k(s[n],o[n]);if(t)if(i)for(s=s||b(e),o=o||b(a),n=0,r=s.length;n<r;n++)R(s[n],o[n]);else R(e,a);return 0<(o=b(a,"script")).length&&E(o,!l&&b(e,"script")),a},cleanData:function(e){for(var t,i,n,r=ge.event.special,s=0;(i=e[s])!==undefined;s++)if(Oe(i)){if(t=i[Fe.expando]){if(t.events)for(n in t.events)r[n]?ge.event.remove(i,n):ge.removeEvent(i,n,t.handle);i[Fe.expando]=undefined}i[Me.expando]&&(i[Me.expando]=undefined)}}}),ge.fn.extend({detach:function(e){return D(this,e,!0)},remove:function(e){return D(this,e)},text:function(e){return Ne(this,function(e){return e===undefined?ge.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return L(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||A(this,e).appendChild(e)})},prepend:function(){return L(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=A(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return L(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ge.cleanData(b(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ge.clone(this,e,t)})},html:function(e){return Ne(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!nt.test(e)&&!qe[(je.exec(e)||["",""])[1].toLowerCase()]){e=ge.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(ge.cleanData(b(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return L(this,arguments,function(e){var t=this.parentNode;ge.inArray(this,i)<0&&(ge.cleanData(b(this)),t&&t.replaceChild(e,this))},i)}}),ge.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){ge.fn[e]=function(e){for(var t,i=[],n=ge(e),r=n.length-1,s=0;s<=r;s++)t=s===r?this:this.clone(!0),ge(n[s])[o](t),oe.apply(i,t.get());return this.pushStack(i)}});var at=/^margin/,lt=new RegExp("^("+Be+")(?!px)[a-z%]+$","i"),ct=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=w),t.getComputedStyle(e)};!function(){function e(){if(o){o.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",o.innerHTML="",Ze.appendChild(s);var e=w.getComputedStyle(o);t="1%"!==e.top,r="2px"===e.marginLeft,i="4px"===e.width,o.style.marginRight="50%",n="4px"===e.marginRight,Ze.removeChild(s),o=null}}var t,i,n,r,s=ie.createElement("div"),o=ie.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",pe.clearCloneStyle="content-box"===o.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(o),ge.extend(pe,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),n},reliableMarginLeft:function(){return e(),r}}))}();var dt=/^(none|table(?!-c[ea]).+)/,ft=/^--/,ut={position:"absolute",visibility:"hidden",display:"block"},pt={letterSpacing:"0",fontWeight:"400"},ht=["Webkit","Moz","ms"],gt=ie.createElement("div").style;ge.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=I(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=ge.camelCase(t),l=ft.test(t),c=e.style;if(l||(t=F(a)),o=ge.cssHooks[t]||ge.cssHooks[a],i===undefined)return o&&"get"in o&&(r=o.get(e,!1,n))!==undefined?r:c[t];"string"===(s=typeof i)&&(r=He.exec(i))&&r[1]&&(i=h(e,t,r),s="number"),null!=i&&i==i&&("number"===s&&(i+=r&&r[3]||(ge.cssNumber[a]?"":"px")),pe.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&(i=o.set(e,i,n))===undefined||(l?c.setProperty(t,i):c[t]=i))}},css:function(e,t,i,n){var r,s,o,a=ge.camelCase(t);return ft.test(t)||(t=F(a)),(o=ge.cssHooks[t]||ge.cssHooks[a])&&"get"in o&&(r=o.get(e,!0,i)),r===undefined&&(r=I(e,t,n)),"normal"===r&&t in pt&&(r=pt[t]),""===i||i?(s=parseFloat(r),!0===i||isFinite(s)?s||0:r):r}}),ge.each(["height","width"],function(e,o){ge.cssHooks[o]={get:function(e,t,i){if(t)return!dt.test(ge.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?P(e,o,i):Ke(e,ut,function(){return P(e,o,i)})},set:function(e,t,i){var n,r=i&&ct(e),s=i&&$(e,o,i,"border-box"===ge.css(e,"boxSizing",!1,r),r);return s&&(n=He.exec(t))&&"px"!==(n[3]||"px")&&(e.style[o]=t,t=ge.css(e,o)),M(e,t,s)}}}),ge.cssHooks.marginLeft=N(pe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(I(e,"marginLeft"))||e.getBoundingClientRect().left-Ke(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ge.each({margin:"",padding:"",border:"Width"},function(r,s){ge.cssHooks[r+s]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+We[t]+s]=n[t]||n[t-2]||n[0];return i}},at.test(r)||(ge.cssHooks[r+s].set=M)}),ge.fn.extend({css:function(e,t){return Ne(this,function(e,t,i){var n,r,s={},o=0;if(Array.isArray(t)){for(n=ct(e),r=t.length;o<r;o++)s[t[o]]=ge.css(e,t[o],!1,n);return s}return i!==undefined?ge.style(e,t,i):ge.css(e,t)},e,t,1<arguments.length)}}),(ge.Tween=B).prototype={constructor:B,init:function(e,t,i,n,r,s){this.elem=e,this.prop=i,this.easing=r||ge.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(ge.cssNumber[i]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,i=B.propHooks[this.prop];return this.options.duration?this.pos=t=ge.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ge.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){ge.fx.step[e.prop]?ge.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ge.cssProps[e.prop]]&&!ge.cssHooks[e.prop]?e.elem[e.prop]=e.now:ge.style(e.elem,e.prop,e.now+e.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ge.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ge.fx=B.prototype.init,ge.fx.step={};var mt,vt,bt,Et,yt=/^(?:toggle|show|hide)$/,_t=/queueHooks$/;ge.Animation=ge.extend(j,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return h(i.elem,e,He.exec(t),i),i}]},tweener:function(e,t){ge.isFunction(e)?(t=e,e=["*"]):e=e.match(Le);for(var i,n=0,r=e.length;n<r;n++)i=e[n],j.tweeners[i]=j.tweeners[i]||[],j.tweeners[i].unshift(t)},prefilters:[z],prefilter:function(e,t){t?j.prefilters.unshift(e):j.prefilters.push(e)}}),ge.speed=function(e,t,i){var n=e&&"object"==typeof e?ge.extend({},e):{complete:i||!i&&t||ge.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ge.isFunction(t)&&t};return ge.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in ge.fx.speeds?n.duration=ge.fx.speeds[n.duration]:n.duration=ge.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ge.isFunction(n.old)&&n.old.call(this),n.queue&&ge.dequeue(this,n.queue)},n},ge.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Ue).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){var r=ge.isEmptyObject(t),s=ge.speed(e,i,n),o=function(){var e=j(this,ge.extend({},t),s);(r||Fe.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(r,e,s){var o=function(e){var t=e.stop;delete e.stop,t(s)};return"string"!=typeof r&&(s=e,e=r,r=undefined),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=ge.timers,n=Fe.get(this);if(t)n[t]&&n[t].stop&&o(n[t]);else for(t in n)n[t]&&n[t].stop&&_t.test(t)&&o(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(s),e=!1,i.splice(t,1));!e&&s||ge.dequeue(this,r)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e,t=Fe.get(this),i=t[o+"queue"],n=t[o+"queueHooks"],r=ge.timers,s=i?i.length:0;for(t.finish=!0,ge.queue(this,o,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===o&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<s;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),ge.each(["toggle","show","hide"],function(e,n){var r=ge.fn[n];ge.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(U(n,!0),e,t,i)}}),ge.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){ge.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),ge.timers=[],ge.fx.tick=function(){var e,t=0,i=ge.timers;for(mt=ge.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||ge.fx.stop(),mt=undefined},ge.fx.timer=function(e){ge.timers.push(e),ge.fx.start()},ge.fx.interval=13,ge.fx.start=function(){vt||(vt=!0,H())},ge.fx.stop=function(){vt=null},ge.fx.speeds={slow:600,fast:200,_default:400},ge.fn.delay=function(n,e){return n=ge.fx&&ge.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){
var i=w.setTimeout(e,n);t.stop=function(){w.clearTimeout(i)}})},bt=ie.createElement("input"),Et=ie.createElement("select").appendChild(ie.createElement("option")),bt.type="checkbox",pe.checkOn=""!==bt.value,pe.optSelected=Et.selected,(bt=ie.createElement("input")).value="t",bt.type="radio",pe.radioValue="t"===bt.value;var Tt,Ct=ge.expr.attrHandle;ge.fn.extend({attr:function(e,t){return Ne(this,ge.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ge.removeAttr(this,e)})}}),ge.extend({attr:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"==typeof e.getAttribute?ge.prop(e,t,i):(1===s&&ge.isXMLDoc(e)||(r=ge.attrHooks[t.toLowerCase()]||(ge.expr.match.bool.test(t)?Tt:undefined)),i!==undefined?null===i?void ge.removeAttr(e,t):r&&"set"in r&&(n=r.set(e,i,t))!==undefined?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=ge.find.attr(e,t))?undefined:n)},attrHooks:{type:{set:function(e,t){if(!pe.radioValue&&"radio"===t&&c(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(Le);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),Tt={set:function(e,t,i){return!1===t?ge.removeAttr(e,i):e.setAttribute(i,i),i}},ge.each(ge.expr.match.bool.source.match(/\w+/g),function(e,t){var o=Ct[t]||ge.find.attr;Ct[t]=function(e,t,i){var n,r,s=t.toLowerCase();return i||(r=Ct[s],Ct[s]=n,n=null!=o(e,t,i)?s:null,Ct[s]=r),n}});var wt=/^(?:input|select|textarea|button)$/i,At=/^(?:a|area)$/i;ge.fn.extend({prop:function(e,t){return Ne(this,ge.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[ge.propFix[e]||e]})}}),ge.extend({prop:function(e,t,i){var n,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&ge.isXMLDoc(e)||(t=ge.propFix[t]||t,r=ge.propHooks[t]),i!==undefined?r&&"set"in r&&(n=r.set(e,i,t))!==undefined?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ge.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),pe.optSelected||(ge.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ge.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ge.propFix[this.toLowerCase()]=this}),ge.fn.extend({addClass:function(t){var e,i,n,r,s,o,a,l=0;if(ge.isFunction(t))return this.each(function(e){ge(this).addClass(t.call(this,e,q(this)))});if("string"==typeof t&&t)for(e=t.match(Le)||[];i=this[l++];)if(r=q(i),n=1===i.nodeType&&" "+G(r)+" "){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r!==(a=G(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,r,s,o,a,l=0;if(ge.isFunction(t))return this.each(function(e){ge(this).removeClass(t.call(this,e,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Le)||[];i=this[l++];)if(r=q(i),n=1===i.nodeType&&" "+G(r)+" "){for(o=0;s=e[o++];)for(;-1<n.indexOf(" "+s+" ");)n=n.replace(" "+s+" "," ");r!==(a=G(n))&&i.setAttribute("class",a)}return this},toggleClass:function(r,t){var s=typeof r;return"boolean"==typeof t&&"string"===s?t?this.addClass(r):this.removeClass(r):ge.isFunction(r)?this.each(function(e){ge(this).toggleClass(r.call(this,e,q(this),t),t)}):this.each(function(){var e,t,i,n;if("string"===s)for(t=0,i=ge(this),n=r.match(Le)||[];e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else r!==undefined&&"boolean"!==s||((e=q(this))&&Fe.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":Fe.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+G(q(i))+" ").indexOf(t))return!0;return!1}});var St=/\r/g;ge.fn.extend({val:function(i){var n,e,r,t=this[0];return arguments.length?(r=ge.isFunction(i),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?i.call(this,e,ge(this).val()):i)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ge.map(t,function(e){return null==e?"":e+""})),(n=ge.valHooks[this.type]||ge.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&n.set(this,t,"value")!==undefined||(this.value=t))})):t?(n=ge.valHooks[t.type]||ge.valHooks[t.nodeName.toLowerCase()])&&"get"in n&&(e=n.get(t,"value"))!==undefined?e:"string"==typeof(e=t.value)?e.replace(St,""):null==e?"":e:void 0}}),ge.extend({valHooks:{option:{get:function(e){var t=ge.find.attr(e,"value");return null!=t?t:G(ge.text(e))}},select:{get:function(e){var t,i,n,r=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?s+1:r.length;for(n=s<0?l:o?s:0;n<l;n++)if(((i=r[n]).selected||n===s)&&!i.disabled&&(!i.parentNode.disabled||!c(i.parentNode,"optgroup"))){if(t=ge(i).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var i,n,r=e.options,s=ge.makeArray(t),o=r.length;o--;)((n=r[o]).selected=-1<ge.inArray(ge.valHooks.option.get(n),s))&&(i=!0);return i||(e.selectedIndex=-1),s}}}}),ge.each(["radio","checkbox"],function(){ge.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<ge.inArray(ge(e).val(),t)}},pe.checkOn||(ge.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt=/^(?:focusinfocus|focusoutblur)$/;ge.extend(ge.event,{trigger:function(e,t,i,n){var r,s,o,a,l,c,d,f=[i||ie],u=de.call(e,"type")?e.type:e,p=de.call(e,"namespace")?e.namespace.split("."):[];if(s=o=i=i||ie,3!==i.nodeType&&8!==i.nodeType&&!xt.test(u+ge.event.triggered)&&(-1<u.indexOf(".")&&(u=(p=u.split(".")).shift(),p.sort()),l=u.indexOf(":")<0&&"on"+u,(e=e[ge.expando]?e:new ge.Event(u,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=i),t=null==t?[e]:ge.makeArray(t,[e]),d=ge.event.special[u]||{},n||!d.trigger||!1!==d.trigger.apply(i,t))){if(!n&&!d.noBubble&&!ge.isWindow(i)){for(a=d.delegateType||u,xt.test(a+u)||(s=s.parentNode);s;s=s.parentNode)f.push(s),o=s;o===(i.ownerDocument||ie)&&f.push(o.defaultView||o.parentWindow||w)}for(r=0;(s=f[r++])&&!e.isPropagationStopped();)e.type=1<r?a:d.bindType||u,(c=(Fe.get(s,"events")||{})[e.type]&&Fe.get(s,"handle"))&&c.apply(s,t),(c=l&&s[l])&&c.apply&&Oe(s)&&(e.result=c.apply(s,t),!1===e.result&&e.preventDefault());return e.type=u,n||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!Oe(i)||l&&ge.isFunction(i[u])&&!ge.isWindow(i)&&((o=i[l])&&(i[l]=null),i[ge.event.triggered=u](),ge.event.triggered=undefined,o&&(i[l]=o)),e.result}},simulate:function(e,t,i){var n=ge.extend(new ge.Event,i,{type:e,isSimulated:!0});ge.event.trigger(n,null,t)}}),ge.fn.extend({trigger:function(e,t){return this.each(function(){ge.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return ge.event.trigger(e,t,i,!0)}}),ge.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){ge.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),ge.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),pe.focusin="onfocusin"in w,pe.focusin||ge.each({focus:"focusin",blur:"focusout"},function(i,n){var r=function(e){ge.event.simulate(n,e.target,ge.event.fix(e))};ge.event.special[n]={setup:function(){var e=this.ownerDocument||this,t=Fe.access(e,n);t||e.addEventListener(i,r,!0),Fe.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Fe.access(e,n)-1;t?Fe.access(e,n,t):(e.removeEventListener(i,r,!0),Fe.remove(e,n))}}});var Rt=w.location,kt=ge.now(),Lt=/\?/;ge.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(i){t=undefined}return t&&!t.getElementsByTagName("parsererror").length||ge.error("Invalid XML: "+e),t};var Dt=/\[\]$/,It=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Ot=/^(?:input|select|textarea|keygen)/i;ge.param=function(e,t){var i,n=[],r=function(e,t){var i=ge.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!ge.isPlainObject(e))ge.each(e,function(){r(this.name,this.value)});else for(i in e)V(i,e[i],t,r);return n.join("&")},ge.fn.extend({serialize:function(){return ge.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ge.prop(this,"elements");return e?ge.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ge(this).is(":disabled")&&Ot.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!Ye.test(e))}).map(function(e,t){var i=ge(this).val();return null==i?null:Array.isArray(i)?ge.map(i,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:i.replace(It,"\r\n")}}).get()}});var Ft=/%20/g,Mt=/#.*$/,$t=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Wt=/^\/\//,Ut={},Kt={},zt="*/".concat("*"),Yt=ie.createElement("a");Yt.href=Rt.href,ge.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rt.href,type:"GET",isLocal:Bt.test(Rt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ge.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Z(Z(e,ge.ajaxSettings),t):Z(ge.ajaxSettings,e)},ajaxPrefilter:X(Ut),ajaxTransport:X(Kt),ajax:function(e,t){function i(e,t,i,n){var r,s,o,a,l,c=t;h||(h=!0,p&&w.clearTimeout(p),d=undefined,u=n||"",T.readyState=0<e?4:0,r=200<=e&&e<300||304===e,i&&(a=J(m,T,i)),a=ee(m,a,T,r),r?(m.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(ge.lastModified[f]=l),(l=T.getResponseHeader("etag"))&&(ge.etag[f]=l)),204===e||"HEAD"===m.type?c="nocontent":304===e?c="notmodified":(c=a.state,s=a.data,r=!(o=a.error))):(o=c,!e&&c||(c="error",e<0&&(e=0))),T.status=e,T.statusText=(t||c)+"",r?E.resolveWith(v,[s,c,T]):E.rejectWith(v,[T,c,o]),T.statusCode(_),_=undefined,g&&b.trigger(r?"ajaxSuccess":"ajaxError",[T,m,r?s:o]),y.fireWith(v,[T,c]),g&&(b.trigger("ajaxComplete",[T,m]),--ge.active||ge.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var d,f,u,n,p,r,h,g,s,o,m=ge.ajaxSetup({},t),v=m.context||m,b=m.context&&(v.nodeType||v.jquery)?ge(v):ge.event,E=ge.Deferred(),y=ge.Callbacks("once memory"),_=m.statusCode||{},a={},l={},c="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n)for(n={};t=Pt.exec(u);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?u:null},setRequestHeader:function(e,t){return null==h&&(e=l[e.toLowerCase()]=l[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||c;return d&&d.abort(t),i(0,t),this}};if(E.promise(T),m.url=((e||m.url||Rt.href)+"").replace(Wt,Rt.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(Le)||[""],null==m.crossDomain){r=ie.createElement("a");try{r.href=m.url,r.href=r.href,m.crossDomain=Yt.protocol+"//"+Yt.host!=r.protocol+"//"+r.host}catch(C){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ge.param(m.data,m.traditional)),Q(Ut,m,t,T),h)return T;for(s in(g=ge.event&&m.global)&&0==ge.active++&&ge.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Ht.test(m.type),f=m.url.replace(Mt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Ft,"+")):(o=m.url.slice(f.length),m.data&&(f+=(Lt.test(f)?"&":"?")+m.data,delete m.data),!1===m.cache&&(f=f.replace($t,"$1"),o=(Lt.test(f)?"&":"?")+"_="+kt+++o),m.url=f+o),m.ifModified&&(ge.lastModified[f]&&T.setRequestHeader("If-Modified-Since",ge.lastModified[f]),ge.etag[f]&&T.setRequestHeader("If-None-Match",ge.etag[f])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&T.setRequestHeader("Content-Type",m.contentType),T.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+zt+"; q=0.01":""):m.accepts["*"]),m.headers)T.setRequestHeader(s,m.headers[s]);if(m.beforeSend&&(!1===m.beforeSend.call(v,T,m)||h))return T.abort();if(c="abort",y.add(m.complete),T.done(m.success),T.fail(m.error),d=Q(Kt,m,t,T)){if(T.readyState=1,g&&b.trigger("ajaxSend",[T,m]),h)return T;m.async&&0<m.timeout&&(p=w.setTimeout(function(){T.abort("timeout")},m.timeout));try{h=!1,d.send(a,i)}catch(C){if(h)throw C;i(-1,C)}}else i(-1,"No Transport");return T},getJSON:function(e,t,i){return ge.get(e,t,i,"json")},getScript:function(e,t){return ge.get(e,undefined,t,"script")}}),ge.each(["get","post"],function(e,r){ge[r]=function(e,t,i,n){return ge.isFunction(t)&&(n=n||i,i=t,t=undefined),ge.ajax(ge.extend({url:e,type:r,dataType:n,data:t,success:i},ge.isPlainObject(e)&&e))}}),ge._evalUrl=function(e){return ge.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ge.fn.extend({wrapAll:function(e){var t;return this[0]&&(ge.isFunction(e)&&(e=e.call(this[0])),t=ge(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return ge.isFunction(i)?this.each(function(e){ge(this).wrapInner(i.call(this,e))}):this.each(function(){var e=ge(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=ge.isFunction(t);return this.each(function(e){ge(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ge(this).replaceWith(this.childNodes)}),this}}),ge.expr.pseudos.hidden=function(e){return!ge.expr.pseudos.visible(e)},ge.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ge.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var jt={0:200,1223:204},Gt=ge.ajaxSettings.xhr();pe.cors=!!Gt&&"withCredentials"in Gt,pe.ajax=Gt=!!Gt,ge.ajaxTransport(function(s){var o,a;if(pe.cors||Gt&&!s.crossDomain)return{send:function(e,t){var i,n=s.xhr();if(n.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(i in s.xhrFields)n[i]=s.xhrFields[i];for(i in s.mimeType&&n.overrideMimeType&&n.overrideMimeType(s.mimeType),s.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);o=function(e){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(jt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=o("error"),n.onabort!==undefined?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&w.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(s.hasContent&&s.data||null)}catch(r){if(o)throw r}},abort:function(){o&&o()}}}),ge.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ge.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ge.globalEval(e),e}}}),ge.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ge.ajaxTransport("script",function(i){var n,r;if(i.crossDomain)return{send:function(e,t){n=ge("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),ie.head.appendChild(n[0])},abort:function(){r&&r()}}});var qt,Vt=[],Xt=/(=)\?(?=&|$)|\?\?/;ge.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||ge.expando+"_"+kt++;return this[e]=!0,e}}),ge.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,s,o=!1!==e.jsonp&&(Xt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=ge.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Xt,"$1"+n):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return s||ge.error(n+" was not called"),s[0]},e.dataTypes[0]="json",r=w[n],w[n]=function(){s=arguments},i.always(function(){r===undefined?ge(w).removeProp(n):w[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Vt.push(n)),s&&ge.isFunction(r)&&r(s[0]),s=r=undefined}),"script"}),pe.createHTMLDocument=((qt=ie.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qt.childNodes.length),ge.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(pe.createHTMLDocument?((n=(t=ie.implementation.createHTMLDocument("")).createElement("base")).href=ie.location.href,t.head.appendChild(n)):t=ie),s=!i&&[],(r=we.exec(e))?[t.createElement(r[1])]:(r=y([e],t,s),s&&s.length&&ge(s).remove(),ge.merge([],r.childNodes)));var n,r,s},ge.fn.load=function(e,t,i){var n,r,s,o=this,a=e.indexOf(" ");return-1<a&&(n=G(e.slice(a)),e=e.slice(0,a)),ge.isFunction(t)?(i=t,t=undefined):t&&"object"==typeof t&&(r="POST"),0<o.length&&ge.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(n?ge("<div>").append(ge.parseHTML(e)).find(n):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,s||[e.responseText,t,e])})}),this},ge.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ge.fn[t]=function(e){return this.on(t,e)}}),ge.expr.pseudos.animated=function(t){return ge.grep(ge.timers,function(e){return t===e.elem}).length},ge.offset={setOffset:function(e,t,i){var n,r,s,o,a,l,c=ge.css(e,"position"),d=ge(e),f={};"static"===c&&(e.style.position="relative"),a=d.offset(),s=ge.css(e,"top"),l=ge.css(e,"left"),("absolute"===c||"fixed"===c)&&-1<(s+l).indexOf("auto")?(o=(n=d.position()).top,r=n.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),ge.isFunction(t)&&(t=t.call(e,i,ge.extend({},a))),null!=t.top&&(f.top=t.top-a.top+o),null!=t.left&&(f.left=t.left-a.left+r),"using"in t?t.using.call(e,f):d.css(f)}},ge.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){ge.offset.setOffset(this,t,e)});var e,i,n,r,s=this[0];return s?s.getClientRects().length?(n=s.getBoundingClientRect(),i=(e=s.ownerDocument).documentElement,r=e.defaultView,{top:n.top+r.pageYOffset-i.clientTop,left:n.left+r.pageXOffset-i.clientLeft}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===ge.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),c(e[0],"html")||(n=e.offset()),n={top:n.top+ge.css(e[0],"borderTopWidth",!0),left:n.left+ge.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-ge.css(i,"marginTop",!0),left:t.left-n.left-ge.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ge.css(e,"position");)e=e.offsetParent;return e||Ze})}}),ge.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var s="pageYOffset"===r;ge.fn[t]=function(e){return Ne(this,function(e,t,i){var n;if(ge.isWindow(e)?n=e:9===e.nodeType&&(n=e.defaultView),i===undefined)return n?n[r]:e[t];n?n.scrollTo(s?n.pageXOffset:i,s?i:n.pageYOffset):e[t]=i},t,e,arguments.length)}}),ge.each(["top","left"],function(e,i){ge.cssHooks[i]=N(pe.pixelPosition,function(e,t){if(t)return t=I(e,i),lt.test(t)?ge(e).position()[i]+"px":t})}),ge.each({Height:"height",Width:"width"},function(o,a){ge.each({padding:"inner"+o,content:a,"":"outer"+o},function(n,s){ge.fn[s]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return Ne(this,function(e,t,i){var n;return ge.isWindow(e)?0===s.indexOf("outer")?e["inner"+o]:e.document.documentElement["client"+o]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+o],n["scroll"+o],e.body["offset"+o],n["offset"+o],n["client"+o])):i===undefined?ge.css(e,t,r):ge.style(e,t,i,r)},a,i?e:undefined,i)}})}),ge.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),ge.holdReady=function(e){e?ge.readyWait++:ge.ready(!0)},ge.isArray=Array.isArray,ge.parseJSON=JSON.parse,ge.nodeName=c,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ge});var Qt=w.jQuery,Zt=w.$;return ge.noConflict=function(e){return w.$===ge&&(w.$=Zt),e&&w.jQuery===ge&&(w.jQuery=Qt),ge},e||(w.jQuery=w.$=ge),ge}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),function(e){"function"==typeof define&&define.amd?define(["jquery","../version","../keycode"],e):e(jQuery)}(function(C){function l(e){for(var t,i;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},C.extend(this._defaults,this.regional[""]),this.regional.en=C.extend(!0,{},this.regional[""]),this.regional["en-US"]=C.extend(!0,{},this.regional.en),this.dpDiv=i(C("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){C(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",t,o)}function o(){C.datepicker._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])||(C(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),C(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).addClass("ui-datepicker-next-hover"))}function f(e,t){for(var i in C.extend(e,t),t)null==t[i]&&(e[i]=t[i]);return e}var a;return C.extend(C.ui,{datepicker:{version:"1.12.1"}}),C.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return f(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var i,n,r;n="div"===(i=e.nodeName.toLowerCase())||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(r=this._newInst(C(e),n)).settings=C.extend({},t||{}),"input"===i?this._connectDatepicker(e,r):n&&this._inlineDatepicker(e,r)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?i(C("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var i=C(e);t.append=C([]),t.trigger=C([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(t),C.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i,n,r,s=this._get(t,"appendText"),o=this._get(t,"isRTL");t.append&&t.append.remove(),s&&(t.append=C("<span class='"+this._appendClass+"'>"+s+"</span>"),e[o?"before":"after"](t.append)),e.off("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(i=this._get(t,"showOn"))&&"both"!==i||e.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(n=this._get(t,"buttonText"),r=this._get(t,"buttonImage"),t.trigger=C(this._get(t,"buttonImageOnly")?C("<img/>").addClass(this._triggerClass).attr({src:r,alt:n,title:n}):C("<button type='button'></button>").addClass(this._triggerClass).html(r?C("<img/>").attr({src:r,alt:n,title:n}):n)),e[o?"before":"after"](t.trigger),t.trigger.on("click",function(){return C.datepicker._datepickerShowing&&C.datepicker._lastInput===e[0]?C.datepicker._hideDatepicker():(C.datepicker._datepickerShowing&&C.datepicker._lastInput!==e[0]&&C.datepicker._hideDatepicker(),C.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,r,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(r=n=i=0;r<e.length;r++)e[r].length>i&&(i=e[r].length,n=r);return n},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(e,t){var i=C(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv),C.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,n,r){var s,o,a,l,c,d=this._dialogInst;return d||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=C("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),C("body").append(this._dialogInput),(d=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},C.data(this._dialogInput[0],"datepicker",d)),f(d.settings,n||{}),t=t&&t.constructor===Date?this._formatDate(d,t):t,this._dialogInput.val(t),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(o=document.documentElement.clientWidth,a=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[o/2-100+l,a/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),C.blockUI&&C.blockUI(this.dpDiv),C.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var t,i=C(e),n=C.data(e,"datepicker");i.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),C.removeData(e,"datepicker"),"input"===t?(n.append.remove(),n.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||i.removeClass(this.markerClassName).empty(),a===n&&(a=null))},_enableDatepicker:function(t){var e,i,n=C(t),r=C.data(t,"datepicker");n.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,r.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((i=n.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=C.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,i,n=C(t),r=C.data(t,"datepicker");n.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,r.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((i=n.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=C.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return C.data(e,"datepicker")}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var n,r,s,o,a=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?C.extend({},C.datepicker._defaults):a?"all"===t?C.extend({},a.settings):this._get(a,t):null;n=t||{},"string"==typeof t&&((n={})[t]=i),a&&(this._curInst===a&&this._hideDatepicker(),r=this._getDateDatepicker(e,!0),s=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max"),f(a.settings,n),null!==s&&n.dateFormat!==undefined&&n.minDate===undefined&&(a.settings.minDate=this._formatDate(a,s)),null!==o&&n.dateFormat!==undefined&&n.maxDate===undefined&&(a.settings.maxDate=this._formatDate(a,o)),"disabled"in n&&(n.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(C(e),a),this._autoSize(a),this._setDate(a,r),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t,i,n,r=C.datepicker._getInst(e.target),s=!0,o=r.dpDiv.is(".ui-datepicker-rtl");if(r._keyEvent=!0,C.datepicker._datepickerShowing)switch(e.keyCode){case 9:C.datepicker._hideDatepicker(),s=!1;break;case 13:
return(n=C("td."+C.datepicker._dayOverClass+":not(."+C.datepicker._currentClass+")",r.dpDiv))[0]&&C.datepicker._selectDay(e.target,r.selectedMonth,r.selectedYear,n[0]),(t=C.datepicker._get(r,"onSelect"))?(i=C.datepicker._formatDate(r),t.apply(r.input?r.input[0]:null,[i,r])):C.datepicker._hideDatepicker(),!1;case 27:C.datepicker._hideDatepicker();break;case 33:C.datepicker._adjustDate(e.target,e.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 34:C.datepicker._adjustDate(e.target,e.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&C.datepicker._clearDate(e.target),s=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&C.datepicker._gotoToday(e.target),s=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,o?1:-1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&C.datepicker._adjustDate(e.target,e.ctrlKey?-C.datepicker._get(r,"stepBigMonths"):-C.datepicker._get(r,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,-7,"D"),s=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,o?-1:1,"D"),s=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&C.datepicker._adjustDate(e.target,e.ctrlKey?+C.datepicker._get(r,"stepBigMonths"):+C.datepicker._get(r,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,7,"D"),s=e.ctrlKey||e.metaKey;break;default:s=!1}else 36===e.keyCode&&e.ctrlKey?C.datepicker._showDatepicker(this):s=!1;s&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,i,n=C.datepicker._getInst(e.target);if(C.datepicker._get(n,"constrainInput"))return t=C.datepicker._possibleChars(C.datepicker._get(n,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||i<" "||!t||-1<t.indexOf(i)},_doKeyUp:function(e){var t=C.datepicker._getInst(e.target);if(t.input.val()!==t.lastVal)try{C.datepicker.parseDate(C.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,C.datepicker._getFormatConfig(t))&&(C.datepicker._setDateFromField(t),C.datepicker._updateAlternate(t),C.datepicker._updateDatepicker(t))}catch(i){}return!0},_showDatepicker:function(e){var t,i,n,r,s,o,a;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=C("input",e.parentNode)[0]),C.datepicker._isDisabledDatepicker(e)||C.datepicker._lastInput===e)||(t=C.datepicker._getInst(e),C.datepicker._curInst&&C.datepicker._curInst!==t&&(C.datepicker._curInst.dpDiv.stop(!0,!0),t&&C.datepicker._datepickerShowing&&C.datepicker._hideDatepicker(C.datepicker._curInst.input[0])),!1!==(n=(i=C.datepicker._get(t,"beforeShow"))?i.apply(e,[e,t]):{})&&(f(t.settings,n),t.lastVal=null,C.datepicker._lastInput=e,C.datepicker._setDateFromField(t),C.datepicker._inDialog&&(e.value=""),C.datepicker._pos||(C.datepicker._pos=C.datepicker._findPos(e),C.datepicker._pos[1]+=e.offsetHeight),r=!1,C(e).parents().each(function(){return!(r|="fixed"===C(this).css("position"))}),s={left:C.datepicker._pos[0],top:C.datepicker._pos[1]},C.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),C.datepicker._updateDatepicker(t),s=C.datepicker._checkOffset(t,s,r),t.dpDiv.css({position:C.datepicker._inDialog&&C.blockUI?"static":r?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),t.inline||(o=C.datepicker._get(t,"showAnim"),a=C.datepicker._get(t,"duration"),t.dpDiv.css("z-index",l(C(e))+1),C.datepicker._datepickerShowing=!0,C.effects&&C.effects.effect[o]?t.dpDiv.show(o,C.datepicker._get(t,"showOptions"),a):t.dpDiv[o||"show"](o?a:null),C.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),C.datepicker._curInst=t)))},_updateDatepicker:function(e){this.maxRows=4,(a=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,i=this._getNumberOfMonths(e),n=i[1],r=17,s=e.dpDiv.find("."+this._dayOverClass+" a");0<s.length&&o.apply(s.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<n&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",r*n+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===C.datepicker._curInst&&C.datepicker._datepickerShowing&&C.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),r=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,a=document.documentElement.clientWidth+(i?0:C(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:C(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-s:0,t.left-=i&&t.left===e.input.offset().left?C(document).scrollLeft():0,t.top-=i&&t.top===e.input.offset().top+o?C(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>a&&n<a?Math.abs(t.left+n-a):0),t.top-=Math.min(t.top,t.top+r>l&&r<l?Math.abs(r+o):0),t},_findPos:function(e){for(var t,i=this._getInst(e),n=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||C.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];return[(t=C(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,i,n,r,s=this._curInst;!s||e&&s!==C.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(s,"showAnim"),i=this._get(s,"duration"),n=function(){C.datepicker._tidyDialog(s)},C.effects&&(C.effects.effect[t]||C.effects[t])?s.dpDiv.hide(t,C.datepicker._get(s,"showOptions"),i,n):s.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?i:null,n),t||n(),this._datepickerShowing=!1,(r=this._get(s,"onClose"))&&r.apply(s.input?s.input[0]:null,[s.input?s.input.val():"",s]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),C.blockUI&&(C.unblockUI(),C("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(C.datepicker._curInst){var t=C(e.target),i=C.datepicker._getInst(t[0]);(t[0].id===C.datepicker._mainDivId||0!==t.parents("#"+C.datepicker._mainDivId).length||t.hasClass(C.datepicker.markerClassName)||t.closest("."+C.datepicker._triggerClass).length||!C.datepicker._datepickerShowing||C.datepicker._inDialog&&C.blockUI)&&(!t.hasClass(C.datepicker.markerClassName)||C.datepicker._curInst===i)||C.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var n=C(e),r=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(r,t+("M"===i?this._get(r,"showCurrentAtPos"):0),i),this._updateDatepicker(r))},_gotoToday:function(e){var t,i=C(e),n=this._getInst(i[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(t=new Date,n.selectedDay=t.getDate(),n.drawMonth=n.selectedMonth=t.getMonth(),n.drawYear=n.selectedYear=t.getFullYear()),this._notifyChange(n),this._adjustDate(i)},_selectMonthYear:function(e,t,i){var n=C(e),r=this._getInst(n[0]);r["selected"+("M"===i?"Month":"Year")]=r["draw"+("M"===i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(r),this._adjustDate(n)},_selectDay:function(e,t,i,n){var r,s=C(e);C(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(s[0])||((r=this._getInst(s[0])).selectedDay=r.currentDay=C("a",n).html(),r.selectedMonth=r.currentMonth=t,r.selectedYear=r.currentYear=i,this._selectDate(e,this._formatDate(r,r.currentDay,r.currentMonth,r.currentYear)))},_clearDate:function(e){var t=C(e);this._selectDate(t,"")},_selectDate:function(e,t){var i,n=C(e),r=this._getInst(n[0]);t=null!=t?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r),(i=this._get(r,"onSelect"))?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var t,i,n,r=this._get(e,"altField");r&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),n=this.formatDate(t,i,this._getFormatConfig(e)),C(r).val(n))},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,s,e){if(null==i||null==s)throw"Invalid arguments";if(""===(s="object"==typeof s?s.toString():s+""))return null;var n,t,r,o,a=0,l=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,c="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,f=(e?e.dayNames:null)||this._defaults.dayNames,u=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,h=-1,g=-1,m=-1,v=-1,b=!1,E=function(e){var t=n+1<i.length&&i.charAt(n+1)===e;return t&&n++,t},y=function(e){var t=E(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n=new RegExp("^\\d{"+("y"===e?i:1)+","+i+"}"),r=s.substring(a).match(n);if(!r)throw"Missing number at position "+a;return a+=r[0].length,parseInt(r[0],10)},_=function(e,t,i){var n=-1,r=C.map(E(e)?i:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(C.each(r,function(e,t){var i=t[1];if(s.substr(a,i.length).toLowerCase()===i.toLowerCase())return n=t[0],a+=i.length,!1}),-1!==n)return n+1;throw"Unknown name at position "+a},T=function(){if(s.charAt(a)!==i.charAt(n))throw"Unexpected literal at position "+a;a++};for(n=0;n<i.length;n++)if(b)"'"!==i.charAt(n)||E("'")?T():b=!1;else switch(i.charAt(n)){case"d":m=y("d");break;case"D":_("D",d,f);break;case"o":v=y("o");break;case"m":g=y("m");break;case"M":g=_("M",u,p);break;case"y":h=y("y");break;case"@":h=(o=new Date(y("@"))).getFullYear(),g=o.getMonth()+1,m=o.getDate();break;case"!":h=(o=new Date((y("!")-this._ticksTo1970)/1e4)).getFullYear(),g=o.getMonth()+1,m=o.getDate();break;case"'":E("'")?T():b=!0;break;default:T()}if(a<s.length&&(r=s.substr(a),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===h?h=(new Date).getFullYear():h<100&&(h+=(new Date).getFullYear()-(new Date).getFullYear()%100+(h<=c?0:-100)),-1<v)for(g=1,m=v;;){if(m<=(t=this._getDaysInMonth(h,g-1)))break;g++,m-=t}if((o=this._daylightSavingAdjust(new Date(h,g-1,m))).getFullYear()!==h||o.getMonth()+1!==g||o.getDate()!==m)throw"Invalid date";return o},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(i,e,t){if(!e)return"";var n,r=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,s=(t?t.dayNames:null)||this._defaults.dayNames,o=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,a=(t?t.monthNames:null)||this._defaults.monthNames,l=function(e){var t=n+1<i.length&&i.charAt(n+1)===e;return t&&n++,t},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},d=function(e,t,i,n){return l(e)?n[t]:i[t]},f="",u=!1;if(e)for(n=0;n<i.length;n++)if(u)"'"!==i.charAt(n)||l("'")?f+=i.charAt(n):u=!1;else switch(i.charAt(n)){case"d":f+=c("d",e.getDate(),2);break;case"D":f+=d("D",e.getDay(),r,s);break;case"o":f+=c("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":f+=c("m",e.getMonth()+1,2);break;case"M":f+=d("M",e.getMonth(),o,a);break;case"y":f+=l("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":f+=e.getTime();break;case"!":f+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?f+="'":u=!0;break;default:f+=i.charAt(n)}return f},_possibleChars:function(i){var n,e="",t=!1,r=function(e){var t=n+1<i.length&&i.charAt(n+1)===e;return t&&n++,t};for(n=0;n<i.length;n++)if(t)"'"!==i.charAt(n)||r("'")?e+=i.charAt(n):t=!1;else switch(i.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":r("'")?e+="'":t=!0;break;default:e+=i.charAt(n)}return e},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,r=this._getDefaultDate(e),s=r,o=this._getFormatConfig(e);try{s=this.parseDate(i,n,o)||r}catch(a){n=t?"":n}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=n?s.getDate():0,e.currentMonth=n?s.getMonth():0,e.currentYear=n?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(l,e,t){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=null==e||""===e?t:"string"==typeof e?function(e){try{return C.datepicker.parseDate(C.datepicker._get(l,"dateFormat"),e,C.datepicker._getFormatConfig(l))}catch(a){}for(var t=(e.toLowerCase().match(/^c/)?C.datepicker._getDate(l):null)||new Date,i=t.getFullYear(),n=t.getMonth(),r=t.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,o=s.exec(e);o;){switch(o[2]||"d"){case"d":case"D":r+=parseInt(o[1],10);break;case"w":case"W":r+=7*parseInt(o[1],10);break;case"m":case"M":n+=parseInt(o[1],10),r=Math.min(r,C.datepicker._getDaysInMonth(i,n));break;case"y":case"Y":i+=parseInt(o[1],10),r=Math.min(r,C.datepicker._getDaysInMonth(i,n))}o=s.exec(e)}return new Date(i,n,r)}(e):"number"==typeof e?isNaN(e)?t:i(e):new Date(e.getTime());return(n=n&&"Invalid Date"===n.toString()?t:n)&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,r=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),r===e.selectedMonth&&s===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){C.datepicker._adjustDate(i,-t,"M")},next:function(){C.datepicker._adjustDate(i,+t,"M")},hide:function(){C.datepicker._hideDatepicker()},today:function(){C.datepicker._gotoToday(i)},selectDay:function(){return C.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return C.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return C.datepicker._selectMonthYear(i,this,"Y"),!1}};C(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,r,s,o,a,l,c,d,f,u,p,h,g,m,v,b,E,y,_,T,C,w,A,S,x,R,k,L,D,I,N,O,F,M,$,P,B,H=new Date,W=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),U=this._get(e,"isRTL"),K=this._get(e,"showButtonPanel"),z=this._get(e,"hideIfNoPrevNext"),Y=this._get(e,"navigationAsDateFormat"),j=this._getNumberOfMonths(e),G=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),V=1!==j[0]||1!==j[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),Z=this._getMinMaxDate(e,"max"),J=e.drawMonth-G,ee=e.drawYear;if(J<0&&(J+=12,ee--),Z)for(t=this._daylightSavingAdjust(new Date(Z.getFullYear(),Z.getMonth()-j[0]*j[1]+1,Z.getDate())),t=Q&&t<Q?Q:t;this._daylightSavingAdjust(new Date(ee,J,1))>t;)--J<0&&(J=11,ee--);for(e.drawMonth=J,e.drawYear=ee,i=this._get(e,"prevText"),i=Y?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,J-q,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,J)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+i+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+i+"</span></a>",r=this._get(e,"nextText"),r=Y?this.formatDate(r,this._daylightSavingAdjust(new Date(ee,J+q,1)),this._getFormatConfig(e)):r,s=this._canAdjustMonth(e,1,ee,J)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+r+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+r+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+r+"</span></a>",o=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?X:W,o=Y?this.formatDate(o,a,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=K?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,f=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),h=this._get(e,"monthNames"),g=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),b=this._get(e,"selectOtherMonths"),E=this._getDefaultDate(e),y="",T=0;T<j[0];T++){for(C="",this.maxRows=4,w=0;w<j[1];w++){if(A=this._daylightSavingAdjust(new Date(ee,J,e.selectedDay)),S=" ui-corner-all",x="",V){if(x+="<div class='ui-datepicker-group",1<j[1])switch(w){case 0:x+=" ui-datepicker-group-first",S=" ui-corner-"+(U?"right":"left");break;case j[1]-1:x+=" ui-datepicker-group-last",S=" ui-corner-"+(U?"left":"right");break;default:x+=" ui-datepicker-group-middle",S=""}x+="'>"}for(x+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===T?U?s:n:"")+(/all|right/.test(S)&&0===T?U?n:s:"")+this._generateMonthYearHeader(e,J,ee,Q,Z,0<T||0<w,h,g)+"</div><table class='ui-datepicker-calendar'><thead><tr>",R=f?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",_=0;_<7;_++)R+="<th scope='col'"+(5<=(_+d+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+u[k=(_+d)%7]+"'>"+p[k]+"</span></th>";for(x+=R+"</tr></thead><tbody>",L=this._getDaysInMonth(ee,J),ee===e.selectedYear&&J===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,L)),D=(this._getFirstDayOfMonth(ee,J)-d+7)%7,I=Math.ceil((D+L)/7),N=V&&this.maxRows>I?this.maxRows:I,this.maxRows=N,O=this._daylightSavingAdjust(new Date(ee,J,1-D)),F=0;F<N;F++){for(x+="<tr>",M=f?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(O)+"</td>":"",_=0;_<7;_++)$=m?m.apply(e.input?e.input[0]:null,[O]):[!0,""],B=(P=O.getMonth()!==J)&&!b||!$[0]||Q&&O<Q||Z&&Z<O,M+="<td class='"+(5<=(_+d+6)%7?" ui-datepicker-week-end":"")+(P?" ui-datepicker-other-month":"")+(O.getTime()===A.getTime()&&J===e.selectedMonth&&e._keyEvent||E.getTime()===O.getTime()&&E.getTime()===A.getTime()?" "+this._dayOverClass:"")+(B?" "+this._unselectableClass+" ui-state-disabled":"")+(P&&!v?"":" "+$[1]+(O.getTime()===X.getTime()?" "+this._currentClass:"")+(O.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(P&&!v||!$[2]?"":" title='"+$[2].replace(/'/g,"&#39;")+"'")+(B?"":" data-handler='selectDay' data-event='click' data-month='"+O.getMonth()+"' data-year='"+O.getFullYear()+"'")+">"+(P&&!v?"&#xa0;":B?"<span class='ui-state-default'>"+O.getDate()+"</span>":"<a class='ui-state-default"+(O.getTime()===W.getTime()?" ui-state-highlight":"")+(O.getTime()===X.getTime()?" ui-state-active":"")+(P?" ui-priority-secondary":"")+"' href='#'>"+O.getDate()+"</a>")+"</td>",O.setDate(O.getDate()+1),O=this._daylightSavingAdjust(O);x+=M+"</tr>"}11<++J&&(J=0,ee++),C+=x+="</tbody></table>"+(V?"</div>"+(0<j[0]&&w===j[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}y+=C}return y+=c,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,i,n,r,s,o,a){var l,c,d,f,u,p,h,g,m=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),b=this._get(e,"showMonthAfterYear"),E="<div class='ui-datepicker-title'>",y="";if(s||!m)y+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=r&&r.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=n.getMonth())&&(!c||d<=r.getMonth())&&(y+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+a[d]+"</option>");y+="</select>"}if(b||(E+=y+(!s&&m&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!v)E+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(f=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),h=(p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t})(f[0]),g=Math.max(h,p(f[1]||"")),h=n?Math.max(h,n.getFullYear()):h,g=r?Math.min(g,r.getFullYear()):g,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";h<=g;h++)e.yearshtml+="<option value='"+h+"'"+(h===i?" selected='selected'":"")+">"+h+"</option>";e.yearshtml+="</select>",E+=e.yearshtml,e.yearshtml=null}return E+=this._get(e,"yearSuffix"),b&&(E+=(!s&&m&&v?"":"&#xa0;")+y),E+="</div>"},_adjustInstDate:function(e,t,i){var n=e.selectedYear+("Y"===i?t:0),r=e.selectedMonth+("M"===i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,r))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,r,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=i&&t<i?i:t;return n&&n<r?n:r},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var r=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(t<0?t:r[0]*r[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i,n,r=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),o=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!r||t.getTime()>=r.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var r=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),r,this._getFormatConfig(e))}}),C.fn.datepicker=function(e,t){if(!this.length)return this;C.datepicker.initialized||(C(document).on("mousedown",C.datepicker._checkExternalClick),C.datepicker.initialized=!0),0===C("#"+C.datepicker._mainDivId).length&&C("body").append(C.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof t?C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof e?C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this].concat(i)):C.datepicker._attachDatepicker(this,e)}):C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this[0]].concat(i))},C.datepicker=new e,C.datepicker.initialized=!1,C.datepicker.uuid=(new Date).getTime(),C.datepicker.version="1.12.1",C.datepicker}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(d){var s,i=0,a=Array.prototype.slice;return d.cleanData=(s=d.cleanData,function(e){var t,i,n;for(n=0;null!=(i=e[n]);n++)try{(t=d._data(i,"events"))&&t.remove&&d(i).triggerHandler("remove")}catch(r){}s(e)}),d.widget=function(e,i,t){var n,r,s,o={},a=e.split(".")[0],l=a+"-"+(e=e.split(".")[1]);return t||(t=i,i=d.Widget),d.isArray(t)&&(t=d.extend.apply(null,[{}].concat(t))),d.expr[":"][l.toLowerCase()]=function(e){return!!d.data(e,l)},d[a]=d[a]||{},n=d[a][e],r=d[a][e]=function(e,t){if(!this._createWidget)return new r(e,t);arguments.length&&this._createWidget(e,t)},d.extend(r,n,{version:t.version,_proto:d.extend({},t),_childConstructors:[]}),(s=new i).options=d.widget.extend({},s.options),d.each(t,function(t,s){d.isFunction(s)?o[t]=function(){function n(){return i.prototype[t].apply(this,arguments)}function r(e){return i.prototype[t].apply(this,e)}return function(){var e,t=this._super,i=this._superApply;return this._super=n,this._superApply=r,e=s.apply(this,arguments),this._super=t,this._superApply=i,e}}():o[t]=s}),r.prototype=d.widget.extend(s,{widgetEventPrefix:n&&s.widgetEventPrefix||e},o,{constructor:r,namespace:a,widgetName:e,widgetFullName:l}),n?(d.each(n._childConstructors,function(e,t){var i=t.prototype;d.widget(i.namespace+"."+i.widgetName,r,t._proto)}),delete n._childConstructors):i._childConstructors.push(r),d.widget.bridge(e,r),r},d.widget.extend=function(e){for(var t,i,n=a.call(arguments,1),r=0,s=n.length;r<s;r++)for(t in n[r])i=n[r][t],n[r].hasOwnProperty(t)&&i!==undefined&&(d.isPlainObject(i)?e[t]=d.isPlainObject(e[t])?d.widget.extend({},e[t],i):d.widget.extend({},i):e[t]=i);return e},d.widget.bridge=function(s,t){var o=t.prototype.widgetFullName||s;d.fn[s]=function(i){var e="string"==typeof i,n=a.call(arguments,1),r=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=d.data(this,o);return"instance"===i?(r=t,!1):t?d.isFunction(t[i])&&"_"!==i.charAt(0)?(e=t[i].apply(t,n))!==t&&e!==undefined?(r=e&&e.jquery?r.pushStack(e.get()):e,!1):void 0:d.error("no such method '"+i+"' for "+s+" widget instance"):d.error("cannot call methods on "+s+" prior to initialization; attempted to call method '"+i+"'")}):r=undefined:(n.length&&(i=d.widget.extend.apply(null,[i].concat(n))),this.each(function(){var e=d.data(this,o);e?(e.option(i||{}),e._init&&e._init()):d.data(this,o,new t(i,this))})),r}},d.Widget=function(){},d.Widget._childConstructors=[],d.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=d(t||this.defaultElement||this)[0],this.element=d(t),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=d(),this.hoverable=d(),this.focusable=d(),this.classesElementLookup={},t!==this&&(d.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=d(t.style?t.ownerDocument:t.document||t),this.window=d(this.document[0].defaultView||this.document[0].parentWindow)),this.options=d.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:d.noop,_create:d.noop,_init:d.noop,destroy:function(){var i=this;this._destroy(),d.each(this.classesElementLookup,function(e,t){i._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:d.noop,widget:function(){return this.element},option:function(e,t){var i,n,r,s=e;if(0===arguments.length)return d.widget.extend({},this.options);if("string"==typeof e)if(s={},e=(i=e.split(".")).shift(),i.length){for(n=s[e]=d.widget.extend({},this.options[e]),r=0;r<i.length-1;r++)n[i[r]]=n[i[r]]||{},n=n[i[r]];if(e=i.pop(),1===arguments.length)return n[e]===undefined?null:n[e];n[e]=t}else{if(1===arguments.length)return this.options[e]===undefined?null:this.options[e];s[e]=t}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,i,n;for(t in e)n=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&n&&n.length&&(i=d(n.get()),this._removeClass(n,t),i.addClass(this._classes({element:i,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(r){function e(e,t){var i,n;for(n=0;n<e.length;n++)i=o.classesElementLookup[e[n]]||d(),i=r.add?d(d.unique(i.get().concat(r.element.get()))):d(i.not(r.element).get()),o.classesElementLookup[e[n]]=i,s.push(e[n]),t&&r.classes[e[n]]&&s.push(r.classes[e[n]])}var s=[],o=this;return r=d.extend({element:this.element,classes:this.options.classes||{}},r),this._on(r.element,{remove:"_untrackClassesElement"}),r.keys&&e(r.keys.match(/\S+/g)||[],!0),r.extra&&e(r.extra.match(/\S+/g)||[]),s.join(" ")},_untrackClassesElement:function(i){var n=this;d.each(n.classesElementLookup,function(e,t){-1!==d.inArray(i.target,t)&&(n.classesElementLookup[e]=d(t.not(i.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var r="string"==typeof e||null===e,s={extra:r?t:i,keys:r?e:t,element:r?this.element:e,add:n};return s.element.toggleClass(this._classes(s),n),this},_on:function(o,a,e){var l,c=this;"boolean"!=typeof o&&(e=a,a=o,o=!1),e?(a=l=d(a),this.bindings=this.bindings.add(a)):(e=a,a=this.element,l=this.widget()),d.each(e,function(e,t){function i(){if(o||!0!==c.options.disabled&&!d(this).hasClass("ui-state-disabled"))return("string"==typeof t?c[t]:t).apply(c,arguments)}"string"!=typeof t&&(i.guid=t.guid=t.guid||i.guid||d.guid++);var n=e.match(/^([\w:-]*)\s*(.*)$/),r=n[1]+c.eventNamespace,s=n[2];s?l.on(r,s,i):a.on(r,i)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t).off(t),this.bindings=d(this.bindings.not(e).get()),this.focusable=d(this.focusable.not(e).get()),this.hoverable=d(this.hoverable.not(e).get())},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(d(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){
this._removeClass(d(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(d(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(d(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,i){var n,r,s=this.options[e];if(i=i||{},(t=d.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],r=t.originalEvent)for(n in r)n in t||(t[n]=r[n]);return this.element.trigger(t,i),!(d.isFunction(s)&&!1===s.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}},d.each({show:"fadeIn",hide:"fadeOut"},function(s,o){d.Widget.prototype["_"+s]=function(t,e,i){var n;"string"==typeof e&&(e={effect:e});var r=e?!0===e||"number"==typeof e?o:e.effect||o:s;"number"==typeof(e=e||{})&&(e={duration:e}),n=!d.isEmptyObject(e),e.complete=i,e.delay&&t.delay(e.delay),n&&d.effects&&d.effects.effect[r]?t[s](e):r!==s&&t[r]?t[r](e.duration,e.easing,i):t.queue(function(e){d(this)[s](),i&&i.call(t[0]),e()})}}),d.widget}),function(e){"function"==typeof define&&define.amd?define(["jquery","../widget"],e):e(jQuery)}(function(l){var s=/ui-corner-([a-z]){2,6}/g;return l.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var o=this,a=[];l.each(this.options.items,function(r,e){var t,s={};if(e)return"controlgroupLabel"===r?((t=o.element.find(e)).each(function(){var e=l(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),o._addClass(t,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(t.get()))):void(l.fn[r]&&(s=o["_"+r+"Options"]?o["_"+r+"Options"]("middle"):{classes:{}},o.element.find(e).each(function(){var e=l(this),t=e[r]("instance"),i=l.widget.extend({},s);if("button"!==r||!e.parent(".ui-spinner").length){t||(t=e[r]()[r]("instance")),t&&(i.classes=o._resolveClassesValues(i.classes,t)),e[r](i);var n=e[r]("widget");l.data(n[0],"ui-controlgroup-data",t||e[r]("instance")),a.push(n[0])}})))}),this.childWidgets=l(l.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var e=l(this).data("ui-controlgroup-data");e&&e[t]&&e[t]()})},_updateCornerClass:function(e,t){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,i),this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(i,n){var r={};return l.each(i,function(e){var t=n.options.classes[e]||"";t=l.trim(t.replace(s,"")),r[e]=(t+" "+i[e]).replace(/\s+/g," ")}),r},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var r,s=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),r=this.childWidgets,this.options.onlyVisible&&(r=r.filter(":visible")),r.length&&(l.each(["first","last"],function(e,t){var i=r[t]().data("ui-controlgroup-data");if(i&&s["_"+i.widgetName+"Options"]){var n=s["_"+i.widgetName+"Options"](1===r.length?"only":t);n.classes=s._resolveClassesValues(n.classes,i),i.element[i.widgetName](n)}else s._updateCornerClass(r[t](),t)}),this._callChildMethod("refresh"))}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","../widget"],e):e(jQuery)}(function(l){var s=/ui-corner-([a-z]){2,6}/g;return l.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var o=this,a=[];l.each(this.options.items,function(r,e){var t,s={};if(e)return"controlgroupLabel"===r?((t=o.element.find(e)).each(function(){var e=l(this);e.children(".ui-controlgroup-label-contents").length||e.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),o._addClass(t,null,"ui-widget ui-widget-content ui-state-default"),void(a=a.concat(t.get()))):void(l.fn[r]&&(s=o["_"+r+"Options"]?o["_"+r+"Options"]("middle"):{classes:{}},o.element.find(e).each(function(){var e=l(this),t=e[r]("instance"),i=l.widget.extend({},s);if("button"!==r||!e.parent(".ui-spinner").length){t||(t=e[r]()[r]("instance")),t&&(i.classes=o._resolveClassesValues(i.classes,t)),e[r](i);var n=e[r]("widget");l.data(n[0],"ui-controlgroup-data",t||e[r]("instance")),a.push(n[0])}})))}),this.childWidgets=l(l.unique(a)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var e=l(this).data("ui-controlgroup-data");e&&e[t]&&e[t]()})},_updateCornerClass:function(e,t){var i="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",n=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,i),this._addClass(e,null,n)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(i,n){var r={};return l.each(i,function(e){var t=n.options.classes[e]||"";t=l.trim(t.replace(s,"")),r[e]=(t+" "+i[e]).replace(/\s+/g," ")}),r},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var r,s=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),r=this.childWidgets,this.options.onlyVisible&&(r=r.filter(":visible")),r.length&&(l.each(["first","last"],function(e,t){var i=r[t]().data("ui-controlgroup-data");if(i&&s["_"+i.widgetName+"Options"]){var n=s["_"+i.widgetName+"Options"](1===r.length?"only":t);n.classes=s._resolveClassesValues(n.classes,i),i.element[i.widgetName](n)}else s._updateCornerClass(r[t](),t)}),this._callChildMethod("refresh"))}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],e):e(jQuery)}(function(s){var e;return s.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(e){e.keyCode===s.ui.keyCode.SPACE&&(e.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(e,t){var i="iconPosition"!==e,n=i?this.options.iconPosition:t,r="top"===n||"bottom"===n;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=s("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,t),this._attachIcon(n),r?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=s("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(n))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=e.showLabel===undefined?this.options.showLabel:e.showLabel,i=e.icon===undefined?this.options.icon:e.icon;t||i||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),(this.element[0].disabled=t)&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==s.uiBackCompat&&(s.widget("ui.button",s.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),s.fn.button=(e=s.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?e.apply(this,arguments):(s.ui.checkboxradio||s.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),s.fn.buttonset=function(e,t,i){return s.ui.controlgroup||s.error("Controlgroup widget missing"),"option"===e&&"items"===t&&i?this.controlgroup.apply(this,[e,"items.button",i]):"option"===e&&"items"===t?this.controlgroup.apply(this,[e,"items.button"]):("object"==typeof e&&e.items&&(e.items={button:e.items}),this.controlgroup.apply(this,arguments))}),s.ui.button}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}),function(e){"function"==typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(r){var s=!1;return r(document).on("mouseup",function(){s=!1}),r.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(e){if(!0===r.data(e.target,t.widgetName+".preventClickEvent"))return r.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,i=1===e.which,n=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&r(e.target).closest(this.options.cancel).length;return!(i&&!n&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===r.data(e.target,this.widgetName+".preventClickEvent")&&r.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(r.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&r.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,e.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(n){return n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(e){return!!n.data(e,t)}}):function(e,t,i){return!!n.data(e,i[3])}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(s){return s.ui.plugin={add:function(e,t,i){var n,r=s.ui[e].prototype;for(n in i)r.plugins[n]=r.plugins[n]||[],r.plugins[n].push([t,i[n]])},call:function(e,t,i,n){var r,s=e.plugins[t];if(s&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)e.options[s[r][0]]&&s[r][1].apply(e.element,i)}}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(s){return s.fn.scrollParent=function(e){var t=this.css("position"),i="absolute"===t,n=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=s(this);return(!i||"static"!==e.css("position"))&&n.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&r.length?r:s(this[0].ownerDocument||document)}}),function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(E){return E.widget("ui.draggable",E.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return!(this.helper||t.disabled||0<E(e.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=E(this);return E("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=E.ui.safeActiveElement(this.document[0]);E(e.target).closest(t).length||E.ui.safeBlur(t)},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),E.ui.ddmanager&&(E.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===E(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),E.ui.ddmanager&&!t.dropBehaviour&&E.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),E.ui.ddmanager&&E.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var i=this._uiHash();if(!1===this._trigger("drag",e,i))return this._mouseUp(new E.Event("mouseup",e)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",E.ui.ddmanager&&E.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,i=!1;return E.ui.ddmanager&&!this.options.dropBehaviour&&(i=E.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||E.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?E(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),E.ui.ddmanager&&E.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),E.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new E.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!E(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var t=this.options,i=E.isFunction(t.helper),n=i?E(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),i&&n[0]===this.element[0]&&this._setPositionRelative(),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),E.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&E.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,n=this.options,r=this.document[0];this.relativeContainer=null,n.containment?"window"!==n.containment?"document"!==n.containment?n.containment.constructor!==Array?("parent"===n.containment&&(n.containment=this.helper[0].parentNode),(i=(t=E(n.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)):this.containment=n.containment:this.containment=[0,0,E(r).width()-this.helperProportions.width-this.margins.left,(E(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[E(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,E(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,E(window).scrollLeft()+E(window).width()-this.helperProportions.width-this.margins.left,E(window).scrollTop()+(E(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,r,s,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,t,i){return i=i||this._uiHash(),E.ui.plugin.call(this,e,[t,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),E.Widget.prototype._trigger.call(this,e,t,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),E.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,i){var n=E.extend({},e,{item:i.element});i.sortables=[],E(i.options.connectToSortable).each(function(){var e=E(this).sortable("instance");e&&!e.options.disabled&&(i.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,n))})},stop:function(t,e,i){var n=E.extend({},e,{item:i.element});i.cancelHelperRemoval=!1,E.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,n))})},drag:function(i,n,r){E.each(r.sortables,function(){var e=!1,t=this;t.positionAbs=r.positionAbs,t.helperProportions=r.helperProportions,t.offset.click=r.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,E.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==t&&this._intersectsWith(this.containerCache)&&E.contains(t.element[0],this.element[0])&&(e=!1),e})),e?(t.isOver||(t.isOver=1,r._parent=n.helper.parent(),t.currentItem=n.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return n.helper[0]},i.target=t.currentItem[0],t._mouseCapture(i,!0),t._mouseStart(i,!0,!0),t.offset.click.top=r.offset.click.top,t.offset.click.left=r.offset.click.left,
t.offset.parent.left-=r.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=r.offset.parent.top-t.offset.parent.top,r._trigger("toSortable",i),r.dropped=t.element,E.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,t.fromOutside=r),t.currentItem&&(t._mouseDrag(i),n.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",i,t._uiHash(t)),t._mouseStop(i,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(i),n.position=r._generatePosition(i,!0),r._trigger("fromSortable",i),r.dropped=!1,E.each(r.sortables,function(){this.refreshPositions()}))})}}),E.ui.plugin.add("draggable","cursor",{start:function(e,t,i){var n=E("body"),r=i.options;n.css("cursor")&&(r._cursor=n.css("cursor")),n.css("cursor",r.cursor)},stop:function(e,t,i){var n=i.options;n._cursor&&E("body").css("cursor",n._cursor)}}),E.ui.plugin.add("draggable","opacity",{start:function(e,t,i){var n=E(t.helper),r=i.options;n.css("opacity")&&(r._opacity=n.css("opacity")),n.css("opacity",r.opacity)},stop:function(e,t,i){var n=i.options;n._opacity&&E(t.helper).css("opacity",n._opacity)}}),E.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,t,i){var n=i.options,r=!1,s=i.scrollParentNotHidden[0],o=i.document[0];s!==o&&"HTML"!==s.tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+s.offsetHeight-e.pageY<n.scrollSensitivity?s.scrollTop=r=s.scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(s.scrollTop=r=s.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+s.offsetWidth-e.pageX<n.scrollSensitivity?s.scrollLeft=r=s.scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(s.scrollLeft=r=s.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-E(o).scrollTop()<n.scrollSensitivity?r=E(o).scrollTop(E(o).scrollTop()-n.scrollSpeed):E(window).height()-(e.pageY-E(o).scrollTop())<n.scrollSensitivity&&(r=E(o).scrollTop(E(o).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-E(o).scrollLeft()<n.scrollSensitivity?r=E(o).scrollLeft(E(o).scrollLeft()-n.scrollSpeed):E(window).width()-(e.pageX-E(o).scrollLeft())<n.scrollSensitivity&&(r=E(o).scrollLeft(E(o).scrollLeft()+n.scrollSpeed)))),!1!==r&&E.ui.ddmanager&&!n.dropBehaviour&&E.ui.ddmanager.prepareOffsets(i,e)}}),E.ui.plugin.add("draggable","snap",{start:function(e,t,i){var n=i.options;i.snapElements=[],E(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var e=E(this),t=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,i){var n,r,s,o,a,l,c,d,f,u,p=i.options,h=p.snapTolerance,g=t.offset.left,m=g+i.helperProportions.width,v=t.offset.top,b=v+i.helperProportions.height;for(f=i.snapElements.length-1;0<=f;f--)l=(a=i.snapElements[f].left-i.margins.left)+i.snapElements[f].width,d=(c=i.snapElements[f].top-i.margins.top)+i.snapElements[f].height,m<a-h||l+h<g||b<c-h||d+h<v||!E.contains(i.snapElements[f].item.ownerDocument,i.snapElements[f].item)?(i.snapElements[f].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,E.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=!1):("inner"!==p.snapMode&&(n=Math.abs(c-b)<=h,r=Math.abs(d-v)<=h,s=Math.abs(a-m)<=h,o=Math.abs(l-g)<=h,n&&(t.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),r&&(t.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),s&&(t.position.left=i._convertPositionTo("relative",{top:0,left:a-i.helperProportions.width}).left),o&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l}).left)),u=n||r||s||o,"outer"!==p.snapMode&&(n=Math.abs(c-v)<=h,r=Math.abs(d-b)<=h,s=Math.abs(a-g)<=h,o=Math.abs(l-m)<=h,n&&(t.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),r&&(t.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),s&&(t.position.left=i._convertPositionTo("relative",{top:0,left:a}).left),o&&(t.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left)),!i.snapElements[f].snapping&&(n||r||s||o||u)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,E.extend(i._uiHash(),{snapItem:i.snapElements[f].item})),i.snapElements[f].snapping=n||r||s||o||u)}}),E.ui.plugin.add("draggable","stack",{start:function(e,t,i){var n,r=i.options,s=E.makeArray(E(r.stack)).sort(function(e,t){return(parseInt(E(e).css("zIndex"),10)||0)-(parseInt(E(t).css("zIndex"),10)||0)});s.length&&(n=parseInt(E(s[0]).css("zIndex"),10)||0,E(s).each(function(e){E(this).css("zIndex",n+e)}),this.css("zIndex",n+s.length))}}),E.ui.plugin.add("draggable","zIndex",{start:function(e,t,i){var n=E(t.helper),r=i.options;n.css("zIndex")&&(r._zIndex=n.css("zIndex")),n.css("zIndex",r.zIndex)},stop:function(e,t,i){var n=i.options;n._zIndex&&E(t.helper).css("zIndex",n._zIndex)}}),E.ui.draggable}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t}),function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(b){return b.widget("ui.resizable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(e,t){if("hidden"===b(e).css("overflow"))return!1;var i=t&&"left"===t?"scrollLeft":"scrollTop",n=!1;return 0<e[i]||(e[i]=1,n=0<e[i],e[i]=0,n)},_create:function(){var e,t=this.options,i=this;this._addClass("ui-resizable"),b.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),t.autoHide&&b(this.element).on("mouseenter",function(){t.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){t.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,t=function(e){b(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,t,i,n,r,s=this.options,o=this;if(this.handles=s.handles||(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=b(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},t=0;t<i.length;t++)n="ui-resizable-"+(e=b.trim(i[t])),r=b("<div>"),this._addClass(r,"ui-resizable-handle "+n),r.css({zIndex:s.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(r);this._renderAxis=function(e){var t,i,n,r;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String?this.handles[t]=this.element.children(this.handles[t]).first().show():(this.handles[t].jquery||this.handles[t].nodeType)&&(this.handles[t]=b(this.handles[t]),this._on(this.handles[t],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=b(this.handles[t],this.element),r=/sw|ne|nw|se|n|s/.test(t)?i.outerHeight():i.outerWidth(),n=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(n,r),this._proportionallyResize()),this._handles=this._handles.add(this.handles[t])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){o.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=r&&r[1]?r[1]:"se")}),s.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var t,i,n=!1;for(t in this.handles)((i=b(this.handles[t])[0])===e.target||b.contains(i,e.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(e){var t,i,n,r=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),t=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),r.containment&&(t+=b(r.containment).scrollLeft()||0,i+=b(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:t,top:i},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=b(".ui-resizable-"+this.axis).css("cursor"),b("body").css("cursor","auto"===n?this.axis+"-resize":n),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t,i,n=this.originalMousePosition,r=this.axis,s=e.pageX-n.left||0,o=e.pageY-n.top||0,a=this._change[r];return this._updatePrevProperties(),a&&(t=a.apply(this,[e,s,o]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),b.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var t,i,n,r,s,o,a,l=this.options,c=this;return this._helper&&(n=(i=(t=this._proportionallyResizeElements).length&&/textarea/i.test(t[0].nodeName))&&this._hasScroll(t[0],"left")?0:c.sizeDiff.height,r=i?0:c.sizeDiff.width,s={width:c.helper.width()-r,height:c.helper.height()-n},o=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,a=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,l.animate||this.element.css(b.extend(s,{top:a,left:o})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!l.animate&&this._proportionallyResize()),b("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,r,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,n=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),n>s.minHeight&&(s.minHeight=n),i<s.maxWidth&&(s.maxWidth=i),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),s&&c&&(e.left=a-t.minWidth),n&&c&&(e.left=a-t.maxWidth),o&&d&&(e.top=l-t.minHeight),r&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(r[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){b.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),b.ui.plugin.add("resizable","animate",{stop:function(t){var i=b(this).resizable("instance"),e=i.options,n=i._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),s=r&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,o=r?0:i.sizeDiff.width,a={width:i.size.width-o,height:i.size.height-s},l=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(b.extend(a,c&&l?{top:c,left:l}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};n&&n.length&&b(n[0]).css({width:e.width,height:e.height}),i._updateCache(e),i._propagate("resize",t)}})}}),b.ui.plugin.add("resizable","containment",{start:function(){var i,n,e,t,r,s,o,a=b(this).resizable("instance"),l=a.options,c=a.element,d=l.containment,f=d instanceof b?d.get(0):/parent/.test(d)?c.parent().get(0):d;f&&(a.containerElement=b(f),/document/.test(d)||d===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:b(document),left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight}):(i=b(f),n=[],b(["Top","Right","Left","Bottom"]).each(function(e,t){n[e]=a._num(i.css("padding"+t))}),a.containerOffset=i.offset(),a.containerPosition=i.position(),a.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},e=a.containerOffset,t=a.containerSize.height,r=a.containerSize.width,s=a._hasScroll(f,"left")?f.scrollWidth:r,o=a._hasScroll(f)?f.scrollHeight:t,a.parentData={element:f,left:e.left,top:e.top,width:s,height:o}))},resize:function(e){var t,i,n,r,s=b(this).resizable("instance"),o=s.options,a=s.containerOffset,l=s.position,c=s._aspectRatio||e.shiftKey,d={top:0,left:0},f=s.containerElement,u=!0;f[0]!==document&&/static/.test(f.css("position"))&&(d=a),l.left<(s._helper?a.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-a.left:s.position.left-d.left),c&&(s.size.height=s.size.width/s.aspectRatio,u=!1),s.position.left=o.helper?a.left:0),l.top<(s._helper?a.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-a.top:s.position.top),c&&(s.size.width=s.size.height*s.aspectRatio,u=!1),s.position.top=s._helper?a.top:0),n=s.containerElement.get(0)===s.element.parent().get(0),r=/relative|absolute/.test(s.containerElement.css("position")),n&&r?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),t=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-d.left:s.offset.left-a.left)),i=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-d.top:s.offset.top-a.top)),t+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-t,c&&(s.size.height=s.size.width/s.aspectRatio,u=!1)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,c&&(s.size.width=s.size.height*s.aspectRatio,u=!1)),u||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var e=b(this).resizable("instance"),t=e.options,i=e.containerOffset,n=e.containerPosition,r=e.containerElement,s=b(e.helper),o=s.offset(),a=s.outerWidth()-e.sizeDiff.width,l=s.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(r.css("position"))&&b(this).css({left:o.left-n.left-i.left,width:a,height:l}),e._helper&&!t.animate&&/static/.test(r.css("position"))&&b(this).css({left:o.left-n.left-i.left,width:a,height:l})}}),b.ui.plugin.add("resizable","alsoResize",{start:function(){var e=b(this).resizable("instance").options;b(e.alsoResize).each(function(){var e=b(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var t=b(this).resizable("instance"),n=t.options,r=t.originalSize,s=t.originalPosition,o={height:t.size.height-r.height||0,width:t.size.width-r.width||0,top:t.position.top-s.top||0,left:t.position.left-s.left||0};b(n.alsoResize).each(function(){var e=b(this),n=b(this).data("ui-resizable-alsoresize"),r={},t=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(t,function(e,t){var i=(n[t]||0)+(o[t]||0);i&&0<=i&&(r[t]=i||null)}),e.css(r)})},stop:function(){b(this).removeData("ui-resizable-alsoresize")}}),b.ui.plugin.add("resizable","ghost",{start:function(){var e=b(this).resizable("instance"),t=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:t.height,width:t.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==b.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=b(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=b(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),b.ui.plugin.add("resizable","grid",{resize:function(){var e,t=b(this).resizable("instance"),i=t.options,n=t.size,r=t.originalSize,s=t.originalPosition,o=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,d=Math.round((n.width-r.width)/l)*l,f=Math.round((n.height-r.height)/c)*c,u=r.width+d,p=r.height+f,h=i.maxWidth&&i.maxWidth<u,g=i.maxHeight&&i.maxHeight<p,m=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>p;i.grid=a,m&&(u+=l),v&&(p+=c),h&&(u-=l),g&&(p-=c),/^(se|s|e)$/.test(o)?(t.size.width=u,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=u,t.size.height=p,t.position.top=s.top-f):/^(sw)$/.test(o)?(t.size.width=u,t.size.height=p,t.position.left=s.left-d):((p-c<=0||u-l<=0)&&(e=t._getPaddingPlusBorderDimensions(this)),0<p-c?(t.size.height=p,t.position.top=s.top-f):(p=c-e.height,t.size.height=p,t.position.top=s.top+r.height-p),0<u-l?(t.size.width=u,t.position.left=s.left-d):(u=l-e.width,t.size.width=u,t.position.left=s.left+r.width-u))}}),b.ui.resizable}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(l){function c(e){for(var t=e.css("visibility");"inherit"===t;)t=(e=e.parent()).css("visibility");return"hidden"!==t}return l.ui.focusable=function(e,t){var i,n,r,s,o,a=e.nodeName.toLowerCase();return"area"===a?(n=(i=e.parentNode).name,!(!e.href||!n||"map"!==i.nodeName.toLowerCase())&&(0<(r=l("img[usemap='#"+n+"']")).length&&r.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(a)?(s=!e.disabled)&&(o=l(e).closest("fieldset")[0])&&(s=!o.disabled):s="a"===a&&e.href||t,s&&l(e).is(":visible")&&c(l(e)))},l.extend(l.expr[":"],{focusable:function(e){return l.ui.focusable(e,null!=l.attr(e,"tabindex"))}}),l.ui.focusable}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(S){return function(){function T(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function C(e,t){return parseInt(S.css(e,t),10)||0}function t(e){var t=e[0];return 9===t.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:S.isWindow(t)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:t.preventDefault?{width:0,height:0,offset:{top:t.pageY,left:t.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}var r,w=Math.max,A=Math.abs,n=/left|center|right/,s=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,i=S.fn.position;S.position={scrollbarWidth:function(){if(r!==undefined)return r;var e,t,i=S("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=i.children()[0];return S("body").append(i),e=n.offsetWidth,i.css("overflow","scroll"),e===(t=n.offsetWidth)&&(t=i[0].clientWidth),i.remove(),r=e-t},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),n="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight?S.position.scrollbarWidth():0,height:n?S.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=S(e||window),i=S.isWindow(t[0]),n=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:i,isDocument:n,offset:!i&&!n?S(e).offset():{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:t.outerWidth(),height:t.outerHeight()}}},S.fn.position=function(f){if(!f||!f.of)return i.apply(this,arguments);f=S.extend({},f);var u,p,h,g,m,e,v=S(f.of),b=S.position.getWithinInfo(f.within),E=S.position.getScrollInfo(b),y=(f.collision||"flip").split(" "),_={};return e=t(v),v[0].preventDefault&&(f.at="left top"),p=e.width,h=e.height,g=e.offset,m=S.extend({},g),S.each(["my","at"],function(){var e,t,i=(f[this]||"").split(" ");1===i.length&&(i=n.test(i[0])?i.concat(["center"]):s.test(i[0])?["center"].concat(i):["center","center"]),i[0]=n.test(i[0])?i[0]:"center",i[1]=s.test(i[1])?i[1]:"center",e=o.exec(i[0]),t=o.exec(i[1]),_[this]=[e?e[0]:0,t?t[0]:0],f[this]=[a.exec(i[0])[0],a.exec(i[1])[0]]}),1===y.length&&(y[1]=y[0]),"right"===f.at[0]?m.left+=p:"center"===f.at[0]&&(m.left+=p/2),"bottom"===f.at[1]?m.top+=h:"center"===f.at[1]&&(m.top+=h/2),u=T(_.at,p,h),m.left+=u[0],m.top+=u[1],this.each(function(){var i,e,o=S(this),a=o.outerWidth(),l=o.outerHeight(),t=C(this,"marginLeft"),n=C(this,"marginTop"),r=a+t+C(this,"marginRight")+E.width,s=l+n+C(this,"marginBottom")+E.height,c=S.extend({},m),d=T(_.my,o.outerWidth(),o.outerHeight());"right"===f.my[0]?c.left-=a:"center"===f.my[0]&&(c.left-=a/2),"bottom"===f.my[1]?c.top-=l:"center"===f.my[1]&&(c.top-=l/2),c.left+=d[0],c.top+=d[1],i={marginLeft:t,marginTop:n},S.each(["left","top"],function(e,t){S.ui.position[y[e]]&&S.ui.position[y[e]][t](c,{targetWidth:p,targetHeight:h,elemWidth:a,elemHeight:l,collisionPosition:i,collisionWidth:r,collisionHeight:s,offset:[u[0]+d[0],u[1]+d[1]],my:f.my,at:f.at,within:b,elem:o})}),f.using&&(e=function(e){var t=g.left-c.left,i=t+p-a,n=g.top-c.top,r=n+h-l,s={target:{element:v,left:g.left,top:g.top,width:p,height:h},element:{element:o,left:c.left,top:c.top,width:a,height:l},horizontal:i<0?"left":0<t?"right":"center",vertical:r<0?"top":0<n?"bottom":"middle"};p<a&&A(t+i)<p&&(s.horizontal="center"),h<l&&A(n+r)<h&&(s.vertical="middle"),w(A(t),A(i))>w(A(n),A(r))?s.important="horizontal":s.important="vertical",f.using.call(this,e,s)}),o.offset(S.extend(c,{using:e}))})},S.ui.position={fit:{left:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,a=r-o,l=o+t.collisionWidth-s-r;t.collisionWidth>s?0<a&&l<=0?(i=e.left+a+t.collisionWidth-s-r,e.left+=a-i):e.left=0<l&&a<=0?r:l<a?r+s-t.collisionWidth:r:0<a?e.left+=a:0<l?e.left-=l:e.left=w(e.left-o,e.left)},top:function(e,t){var i,n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,a=r-o,l=o+t.collisionHeight-s-r;t.collisionHeight>s?0<a&&l<=0?(i=e.top+a+t.collisionHeight-s-r,e.top+=a-i):e.top=0<l&&a<=0?r:l<a?r+s-t.collisionHeight:r:0<a?e.top+=a:0<l?e.top-=l:e.top=w(e.top-o,e.top)}},flip:{left:function(e,t){var i,n,r=t.within,s=r.offset.left+r.scrollLeft,o=r.width,a=r.isWindow?r.scrollLeft:r.offset.left,l=e.left-t.collisionPosition.marginLeft,c=l-a,d=l+t.collisionWidth-o-a,f="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,u="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];c<0?((i=e.left+f+u+p+t.collisionWidth-o-s)<0||i<A(c))&&(e.left+=f+u+p):0<d&&(0<(n=e.left-t.collisionPosition.marginLeft+f+u+p-a)||A(n)<d)&&(e.left+=f+u+p)},top:function(e,t){var i,n,r=t.within,s=r.offset.top+r.scrollTop,o=r.height,a=r.isWindow?r.scrollTop:r.offset.top,l=e.top-t.collisionPosition.marginTop,c=l-a,d=l+t.collisionHeight-o-a,f="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,u="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];c<0?((n=e.top+f+u+p+t.collisionHeight-o-s)<0||n<A(c))&&(e.top+=f+u+p):0<d&&(0<(i=e.top-t.collisionPosition.marginTop+f+u+p-a)||A(i)<d)&&(e.top+=f+u+p)}},flipfit:{left:function(){S.ui.position.flip.left.apply(this,arguments),S.ui.position.fit.left.apply(this,arguments)},top:function(){S.ui.position.flip.top.apply(this,arguments),S.ui.position.fit.top.apply(this,arguments)}}}}(),S.ui.position}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version","./focusable"],e):e(jQuery)}(function(n){return n.extend(n.expr[":"],{tabbable:function(e){var t=n.attr(e,"tabindex"),i=null!=t;return(!i||0<=t)&&n.ui.focusable(e,i)}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({uniqueId:(t=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}});var t}),function(e){"function"==typeof define&&define.amd?define(["jquery","./button","./draggable","./mouse","./resizable","../focusable","../keycode","../position","../safe-active-element","../safe-blur","../tabbable","../unique-id","../version","../widget"],e):e(jQuery)}(function(l){return l.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=l(this).css(e).offset().top;t<0&&l(this).css("top",e.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),
this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&l.fn.draggable&&this._makeDraggable(),this.options.resizable&&l.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?l(e):this.document.find(e||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:l.noop,enable:l.noop,close:function(e){var t=this;this._isOpen&&!1!==this._trigger("beforeClose",e)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||l.ui.safeBlur(l.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){t._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+l(this).css("z-index")}).get(),r=Math.max.apply(null,n);return r>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",r+1),i=!0),i&&!t&&this._trigger("focus",e),i},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=l(l.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(e){function t(){var e=l.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===e||l.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),t.call(this),this._delay(t)},_createWrapper:function(){this.uiDialog=l("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===l.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===l.ui.keyCode.TAB&&!e.isDefaultPrevented()){var t=this.uiDialog.find(":tabbable"),i=t.filter(":first"),n=t.filter(":last");e.target!==n[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){n.trigger("focus")}),e.preventDefault()):(this._delay(function(){i.trigger("focus")}),e.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=l("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(e){l(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=l("<button type='button'></button>").button({label:l("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),e=l("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(e,"ui-dialog-title"),this._title(e),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=l("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=l("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var r=this,e=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),l.isEmptyObject(e)||l.isArray(e)&&!e.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(l.each(e,function(e,t){var i,n;t=l.isFunction(t)?{click:t,text:e}:t,t=l.extend({type:"button"},t),i=t.click,n={icon:t.icon,iconPosition:t.iconPosition,showLabel:t.showLabel,icons:t.icons,text:t.text},delete t.click,delete t.icon,delete t.iconPosition,delete t.showLabel,delete t.icons,"boolean"==typeof t.text&&delete t.text,l("<button></button>",t).button(n).appendTo(r.uiButtonSet).on("click",function(){i.apply(r.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var s=this,o=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){s._addClass(l(this),"ui-dialog-dragging"),s._blockFrames(),s._trigger("dragStart",e,r(t))},drag:function(e,t){s._trigger("drag",e,r(t))},stop:function(e,t){var i=t.offset.left-s.document.scrollLeft(),n=t.offset.top-s.document.scrollTop();o.position={my:"left top",at:"left"+(0<=i?"+":"")+i+" top"+(0<=n?"+":"")+n,of:s.window},s._removeClass(l(this),"ui-dialog-dragging"),s._unblockFrames(),s._trigger("dragStop",e,r(t))}})},_makeResizable:function(){function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var o=this,a=this.options,e=a.resizable,t=this.uiDialog.css("position"),i="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:i,start:function(e,t){o._addClass(l(this),"ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",e,s(t))},resize:function(e,t){o._trigger("resize",e,s(t))},stop:function(e,t){var i=o.uiDialog.offset(),n=i.left-o.document.scrollLeft(),r=i.top-o.document.scrollTop();a.height=o.uiDialog.height(),a.width=o.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=r?"+":"")+r,of:o.window},o._removeClass(l(this),"ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",e,s(t))}}).css("position",t)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=l(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),t=l.inArray(this,e);-1!==t&&e.splice(t,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(e){var i=this,n=!1,r={};l.each(e,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(n=!0),e in i.resizableRelatedOptions&&(r[e]=t)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,n,r=this.uiDialog;"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:l("<a>").text(""+this.options.closeText).html()}),"draggable"===e&&((i=r.is(":data(ui-draggable)"))&&!t&&r.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((n=r.is(":data(ui-resizable)"))&&!t&&r.resizable("destroy"),n&&"string"==typeof t&&r.resizable("option","handles",t),n||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=l(this);return l("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!l(e.target).closest(".ui-dialog").length||!!l(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=l("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==l.uiBackCompat&&l.widget("ui.dialog",l.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),l.ui.dialog}),function(e){"function"==typeof define&&define.amd?define(["jquery","./mouse","../data","../ie","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(p){return p.widget("ui.sortable",p.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return t<=e&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),p.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var i=null,n=!1,r=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),p(e.target).parents().each(function(){if(p.data(this,r.widgetName+"-item")===r)return i=p(this),!1}),p.data(e.target,r.widgetName+"-item")===r&&(i=p(e.target)),!!i&&(!(this.options.handle&&!t&&(p(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(n=!0)}),!n))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,t,i){var n,r,s=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},p.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=p("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(n=this.containers.length-1;0<=n;n--)this.containers[n]._trigger("activate",e,this._uiHash(this));return p.ui.ddmanager&&(p.ui.ddmanager.current=this),p.ui.ddmanager&&!s.dropBehaviour&&p.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var t,i,n,r,s=this.options,o=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-this.document.scrollTop()<s.scrollSensitivity?o=this.document.scrollTop(this.document.scrollTop()-s.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<s.scrollSensitivity&&(o=this.document.scrollTop(this.document.scrollTop()+s.scrollSpeed)),e.pageX-this.document.scrollLeft()<s.scrollSensitivity?o=this.document.scrollLeft(this.document.scrollLeft()-s.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<s.scrollSensitivity&&(o=this.document.scrollLeft(this.document.scrollLeft()+s.scrollSpeed))),!1!==o&&p.ui.ddmanager&&!s.dropBehaviour&&p.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t=this.items.length-1;0<=t;t--)if(n=(i=this.items[t]).item[0],(r=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(n===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===n||p.contains(this.placeholder[0],n)||"semi-dynamic"===this.options.type&&p.contains(this.element[0],n))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),p.ui.ddmanager&&p.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){if(e){if(p.ui.ddmanager&&!this.options.dropBehaviour&&p.ui.ddmanager.drop(this,e),this.options.revert){var i=this,n=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,p(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,t);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new p.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),p.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?p(this.domPosition.prev).after(this.currentItem):p(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},p(e).each(function(){var e=(p(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&i.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t.each(function(){i.push(p(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,r=n+this.helperProportions.height,s=e.left,o=s+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,d=this.offset.click.left,f="x"===this.options.axis||a<n+c&&n+c<l,u="y"===this.options.axis||s<t+d&&t+d<o,p=f&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),r="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!n||!r)&&(t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&i||"left"===r&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){function t(){o.push(this)}var i,n,r,s,o=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;0<=i;i--)for(n=(r=p(l[i],this.document[0])).length-1;0<=n;n--)(s=p.data(r[n],this.widgetFullName))&&s!==this&&!s.options.disabled&&a.push([p.isFunction(s.options.items)?s.options.items.call(s.element):p(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(a.push([p.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):p(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;0<=i;i--)a[i][0].each(t);return p(o)},_removeCurrentsFromItems:function(){var i=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=p.grep(this.items,function(e){for(var t=0;t<i.length;t++)if(i[t]===e.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,i,n,r,s,o,a,l,c=this.items,d=[[p.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):p(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(t=f.length-1;0<=t;t--)for(i=(n=p(f[t],this.document[0])).length-1;0<=i;i--)(r=p.data(n[i],this.widgetFullName))&&r!==this&&!r.options.disabled&&(d.push([p.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):p(r.options.items,r.element),r]),this.containers.push(r));for(t=d.length-1;0<=t;t--)for(s=d[t][1],i=0,l=(o=d[t][0]).length;i<l;i++)(a=p(o[i])).data(this.widgetName+"-item",s),c.push({item:a,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var t,i,n,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),t=this.items.length-1;0<=t;t--)(i=this.items[t]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?p(this.options.toleranceElement,i.item):i.item,e||(i.width=n.outerWidth(),i.height=n.outerHeight()),r=n.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--)r=this.containers[t].element.offset(),this.containers[t].containerCache.left=r.left,this.containers[t].containerCache.top=r.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(i){var n,r=(i=i||this).options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var e=i.currentItem[0].nodeName.toLowerCase(),t=p("<"+e+">",i.document[0]);return i._addClass(t,"ui-sortable-placeholder",n||i.currentItem[0].className)._removeClass(t,"ui-sortable-helper"),"tbody"===e?i._createTrPlaceholder(i.currentItem.find("tr").eq(0),p("<tr>",i.document[0]).appendTo(t)):"tr"===e?i._createTrPlaceholder(i.currentItem,t):"img"===e&&t.attr("src",i.currentItem.attr("src")),n||t.css("visibility","hidden"),t},update:function(e,t){n&&!r.forcePlaceholderSize||(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}),i.placeholder=p(r.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),r.placeholder.update(i,i.placeholder)},_createTrPlaceholder:function(e,t){var i=this;e.children().each(function(){p("<td>&#160;</td>",i.document[0]).attr("colspan",p(this).attr("colspan")||1).appendTo(t)})},_contactContainers:function(e){var t,i,n,r,s,o,a,l,c,d,f=null,u=null;for(t=this.containers.length-1;0<=t;t--)if(!p.contains(this.currentItem[0],this.containers[t].element[0]))if(this._intersectsWith(this.containers[t].containerCache)){if(f&&p.contains(this.containers[t].element[0],f.element[0]))continue;f=this.containers[t],u=t}else this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",e,this._uiHash(this)),this.containers[t].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[u].containerCache.over||(this.containers[u]._trigger("over",e,this._uiHash(this)),this.containers[u].containerCache.over=1);else{for(n=1e4,r=null,s=(c=f.floating||this._isFloating(this.currentItem))?"left":"top",o=c?"width":"height",d=c?"pageX":"pageY",i=this.items.length-1;0<=i;i--)p.contains(this.containers[u].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(a=this.items[i].item.offset()[s],l=!1,e[d]-a>this.items[i][o]/2&&(l=!0),Math.abs(e[d]-a)<n&&(n=Math.abs(e[d]-a),r=this.items[i],this.direction=l?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[u])return void(this.currentContainer.containerCache.over||(this.containers[u]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[u].element,!0),this._trigger("change",e,this._uiHash()),this.containers[u]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[u],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[u]._trigger("over",e,this._uiHash(this)),this.containers[u].containerCache.over=1}},_createHelper:function(e){var t=this.options,i=p.isFunction(t.helper)?p(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"===t.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||p("parent"!==t.appendTo?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!t.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!t.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),p.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&p.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&p.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,i,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),"document"!==n.containment&&"window"!==n.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===n.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===n.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(e=p(n.containment)[0],t=p(n.containment).offset(),i="hidden"!==p(e).css("overflow"),this.containment=[t.left+(parseInt(p(e).css("borderLeftWidth"),10)||0)+(parseInt(p(e).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(p(e).css("borderTopWidth"),10)||0)+(parseInt(p(e).css("paddingTop"),10)||0)-this.margins.top,t.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(p(e).css("borderLeftWidth"),10)||0)-(parseInt(p(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(p(e).css("borderTopWidth"),10)||0)-(parseInt(p(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&p.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(n[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:n.scrollTop())*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:n.scrollLeft())*i}},_generatePosition:function(e){var t,i,n=this.options,r=e.pageX,s=e.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&p.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),n.grid&&(t=this.originalPageY+Math.round((s-this.originalPageY)/n.grid[1])*n.grid[1],s=this.containment?t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-n.grid[1]:t+n.grid[1]:t,i=this.originalPageX+Math.round((r-this.originalPageX)/n.grid[0])*n.grid[0],
r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-n.grid[0]:i+n.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:o.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:o.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(t,i,n){return function(e){n._trigger(t,e,i._uiHash(i))}}this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===p.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||p([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}})}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")});var t}),function(e){"function"==typeof define&&define.amd?define(["jquery","../escape-selector","../keycode","../safe-active-element","../unique-id","../version","../widget"],e):e(jQuery)}(function(c){var r;return c.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:(r=/#.*$/,function(e){var t,i;t=e.href.replace(r,""),i=location.href.replace(r,"");try{t=decodeURIComponent(t)}catch(n){}try{i=decodeURIComponent(i)}catch(n){}return 1<e.hash.length&&t===i}),_create:function(){var t=this,e=this.options;this.running=!1,this._addClass("ui-tabs","ui-widget ui-widget-content"),this._toggleClass("ui-tabs-collapsible",null,e.collapsible),this._processTabs(),e.active=this._initialActive(),c.isArray(e.disabled)&&(e.disabled=c.unique(e.disabled.concat(c.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(e.active):this.active=c(),this._refresh(),this.active.length&&this.load(e.active)},_initialActive:function(){var i=this.options.active,e=this.options.collapsible,n=location.hash.substring(1);return null===i&&(n&&this.tabs.each(function(e,t){if(c(t).attr("aria-controls")===n)return i=e,!1}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==i&&-1!==i||(i=!!this.tabs.length&&0)),!1!==i&&-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!e&&0),!e&&!1===i&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):c()}},_tabKeydown:function(e){var t=c(c.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(t),n=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:i++;break;case c.ui.keyCode.UP:case c.ui.keyCode.LEFT:n=!1,i--;break;case c.ui.keyCode.END:i=this.anchors.length-1;break;case c.ui.keyCode.HOME:i=0;break;case c.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i);case c.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}e.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,n),e.ctrlKey||e.metaKey||(t.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===c.ui.keyCode.UP&&(e.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(e){return e.altKey&&e.keyCode===c.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===c.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,t){function i(){return n<e&&(e=0),e<0&&(e=n),e}for(var n=this.tabs.length-1;-1!==c.inArray(i(),this.options.disabled);)e=t?e+1:e-1;return e},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).trigger("focus"),e},_setOption:function(e,t){"active"!==e?(this._super(e,t),"collapsible"===e&&(this._toggleClass("ui-tabs-collapsible",null,t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._activate(t)},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,t=this.tablist.children(":has(a[href])");e.disabled=c.map(t.filter(".ui-state-disabled"),function(e){return t.index(e)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!c.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=c()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=c()),this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"}),this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var l=this,e=this.tabs,t=this.anchors,i=this.panels;this.tablist=this._getList().attr("role","tablist"),this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header"),this.tablist.on("mousedown"+this.eventNamespace,"> li",function(e){c(this).is(".ui-state-disabled")&&e.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){c(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1}),this._addClass(this.tabs,"ui-tabs-tab","ui-state-default"),this.anchors=this.tabs.map(function(){return c("a",this)[0]}).attr({role:"presentation",tabIndex:-1}),this._addClass(this.anchors,"ui-tabs-anchor"),this.panels=c(),this.anchors.each(function(e,t){var i,n,r,s=c(t).uniqueId().attr("id"),o=c(t).closest("li"),a=o.attr("aria-controls");l._isLocal(t)?(r=(i=t.hash).substring(1),n=l.element.find(l._sanitizeSelector(i))):(i="#"+(r=o.attr("aria-controls")||c({}).uniqueId()[0].id),(n=l.element.find(i)).length||(n=l._createPanel(r)).insertAfter(l.panels[e-1]||l.tablist),n.attr("aria-live","polite")),n.length&&(l.panels=l.panels.add(n)),a&&o.data("ui-tabs-aria-controls",a),o.attr({"aria-controls":r,"aria-labelledby":s}),n.attr("aria-labelledby",s)}),this.panels.attr("role","tabpanel"),this._addClass(this.panels,"ui-tabs-panel","ui-widget-content"),e&&(this._off(e.not(this.tabs)),this._off(t.not(this.anchors)),this._off(i.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(e){return c("<div>").attr("id",e).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(e){var t,i,n;for(c.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1),n=0;i=this.tabs[n];n++)t=c(i),!0===e||-1!==c.inArray(n,e)?(t.attr("aria-disabled","true"),this._addClass(t,null,"ui-state-disabled")):(t.removeAttr("aria-disabled"),this._removeClass(t,null,"ui-state-disabled"));this.options.disabled=e,this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===e)},_setupEvents:function(e){var i={};e&&c.each(e.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(!0,this.anchors,{click:function(e){e.preventDefault()}}),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,t=this.element.parent();"fill"===e?(i=t.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var e=c(this),t=e.css("position");"absolute"!==t&&"fixed"!==t&&(i-=e.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=c(this).outerHeight(!0)}),this.panels.each(function(){c(this).height(Math.max(0,i-c(this).innerHeight()+c(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,c(this).height("").height())}).height(i))},_eventHandler:function(e){var t=this.options,i=this.active,n=c(e.currentTarget).closest("li"),r=n[0]===i[0],s=r&&t.collapsible,o=s?c():this._getPanelForTab(n),a=i.length?this._getPanelForTab(i):c(),l={oldTab:i,oldPanel:a,newTab:s?c():n,newPanel:o};e.preventDefault(),n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||r&&!t.collapsible||!1===this._trigger("beforeActivate",e,l)||(t.active=!s&&this.tabs.index(n),this.active=r?c():n,this.xhr&&this.xhr.abort(),a.length||o.length||c.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(n),e),this._toggle(e,l))},_toggle:function(e,t){function i(){r.running=!1,r._trigger("activate",e,t)}function n(){r._addClass(t.newTab.closest("li"),"ui-tabs-active","ui-state-active"),s.length&&r.options.show?r._show(s,r.options.show,i):(s.show(),i())}var r=this,s=t.newPanel,o=t.oldPanel;this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){r._removeClass(t.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),n()}):(this._removeClass(t.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),o.hide(),n()),o.attr("aria-hidden","true"),t.oldTab.attr({"aria-selected":"false","aria-expanded":"false"}),s.length&&o.length?t.oldTab.attr("tabIndex",-1):s.length&&this.tabs.filter(function(){return 0===c(this).attr("tabIndex")}).attr("tabIndex",-1),s.attr("aria-hidden","false"),t.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(e){var t,i=this._findActive(e);i[0]!==this.active[0]&&(i.length||(i=this.active),t=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:t,currentTarget:t,preventDefault:c.noop}))},_findActive:function(e){return!1===e?c():this.tabs.eq(e)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+c.ui.escapeSelector(e)+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.tablist.removeAttr("role").off(this.eventNamespace),this.anchors.removeAttr("role tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){c.data(this,"ui-tabs-destroy")?c(this).remove():c(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")}),this.tabs.each(function(){var e=c(this),t=e.data("ui-tabs-aria-controls");t?e.attr("aria-controls",t).removeData("ui-tabs-aria-controls"):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var e=this.options.disabled;!1!==e&&(i===undefined?e=!1:(i=this._getIndex(i),e=c.isArray(e)?c.map(e,function(e){return e!==i?e:null}):c.map(this.tabs,function(e,t){return t!==i?t:null})),this._setOptionDisabled(e))},disable:function(e){var t=this.options.disabled;if(!0!==t){if(e===undefined)t=!0;else{if(e=this._getIndex(e),-1!==c.inArray(e,t))return;t=c.isArray(t)?c.merge([e],t).sort():[e]}this._setOptionDisabled(t)}},load:function(e,n){e=this._getIndex(e);var r=this,i=this.tabs.eq(e),t=i.find(".ui-tabs-anchor"),s=this._getPanelForTab(i),o={tab:i,panel:s},a=function(e,t){"abort"===t&&r.panels.stop(!1,!0),r._removeClass(i,"ui-tabs-loading"),s.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr};this._isLocal(t[0])||(this.xhr=c.ajax(this._ajaxSettings(t,n,o)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(i,"ui-tabs-loading"),s.attr("aria-busy","true"),this.xhr.done(function(e,t,i){setTimeout(function(){s.html(e),r._trigger("load",n,o),a(i,t)},1)}).fail(function(e,t){setTimeout(function(){a(e,t)},1)})))},_ajaxSettings:function(e,i,n){var r=this;return{url:e.attr("href").replace(/#.*$/,""),beforeSend:function(e,t){return r._trigger("beforeLoad",i,c.extend({jqXHR:e,ajaxSettings:t},n))}}},_getPanelForTab:function(e){var t=c(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+t))}}),!1!==c.uiBackCompat&&c.widget("ui.tabs",c.ui.tabs,{_processTabs:function(){this._superApply(arguments),this._addClass(this.tabs,"ui-tab")}}),c.ui.tabs}),function(d,l){"use strict";var c;d.rails!==l&&d.error("jquery-ujs has already been loaded!");var e=d(document);d.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return d("meta[name=csrf-token]").attr("content")},csrfParam:function(){return d("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=c.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){d('form input[name="'+c.csrfParam()+'"]').val(c.csrfToken())},fire:function(e,t,i){var n=d.Event(t);return e.trigger(n,i),!1!==n.result},confirm:function(e){return confirm(e)},ajax:function(e){return d.ajax(e)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==l&&!1!==e.data("remote")},handleRemote:function(n){var e,t,i,r,s,o;if(c.fire(n,"ajax:before")){if(r=n.data("with-credentials")||null,s=n.data("type")||d.ajaxSettings&&d.ajaxSettings.dataType,n.is("form")){e=n.data("ujs:submit-button-formmethod")||n.attr("method"),t=n.data("ujs:submit-button-formaction")||n.attr("action"),i=d(n[0]).serializeArray();var a=n.data("ujs:submit-button");a&&(i.push(a),n.data("ujs:submit-button",null)),n.data("ujs:submit-button-formmethod",null),n.data("ujs:submit-button-formaction",null)}else n.is(c.inputChangeSelector)?(e=n.data("method"),t=n.data("url"),i=n.serialize(),n.data("params")&&(i=i+"&"+n.data("params"))):n.is(c.buttonClickSelector)?(e=n.data("method")||"get",t=n.data("url"),i=n.serialize(),n.data("params")&&(i=i+"&"+n.data("params"))):(e=n.data("method"),t=c.href(n),i=n.data("params")||null);return o={type:e||"GET",data:i,dataType:s,beforeSend:function(e,t){if(t.dataType===l&&e.setRequestHeader("accept","*/*;q=0.5, "+t.accepts.script),!c.fire(n,"ajax:beforeSend",[e,t]))return!1;n.trigger("ajax:send",e)},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:c.isCrossDomain(t)},r&&(o.xhrFields={withCredentials:r}),t&&(o.url=t),c.ajax(o)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var i=document.createElement("a");try{return i.href=e,i.href=i.href,!((!i.protocol||":"===i.protocol)&&!i.host||t.protocol+"//"+t.host==i.protocol+"//"+i.host)}catch(n){return!0}},handleMethod:function(e){var t=c.href(e),i=e.data("method"),n=e.attr("target"),r=c.csrfToken(),s=c.csrfParam(),o=d('<form method="post" action="'+t+'"></form>'),a='<input name="_method" value="'+i+'" type="hidden" />';s===l||r===l||c.isCrossDomain(t)||(a+='<input name="'+s+'" value="'+r+'" type="hidden" />'),n&&o.attr("target",n),o.hide().append(a).appendTo("body"),o.submit()},formElements:function(e,t){return e.is("form")?d(e[0].elements).filter(t):e.find(t)},disableFormElements:function(e){c.formElements(e,c.disableSelector).each(function(){c.disableFormElement(d(this))})},disableFormElement:function(e){var t,i;t=e.is("button")?"html":"val",(i=e.data("disable-with"))!==l&&(e.data("ujs:enable-with",e[t]()),e[t](i)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(e){c.formElements(e,c.enableSelector).each(function(){c.enableFormElement(d(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")!==l&&(e[t](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,i=e.data("confirm"),n=!1;if(!i)return!0;if(c.fire(e,"confirm")){try{n=c.confirm(i)}catch(r){(console.error||console.log).call(console,r.stack||r)}t=c.fire(e,"confirm:complete",[n])}return n&&t},blankInputs:function(e,t,i){var n,r,s,o=d(),a=t||"input,textarea",l=e.find(a),c={};return l.each(function(){(n=d(this)).is("input[type=radio]")?(s=n.attr("name"),c[s]||(0===e.find('input[type=radio]:checked[name="'+s+'"]').length&&(r=e.find('input[type=radio][name="'+s+'"]'),o=o.add(r)),c[s]=s)):(n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):!!n.val())===i&&(o=o.add(n))}),!!o.length&&o},nonBlankInputs:function(e,t){return c.blankInputs(e,t,!0)},stopEverything:function(e){return d(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(e){var t=e.data("disable-with");t!==l&&(e.data("ujs:enable-with",e.html()),e.html(t)),e.bind("click.railsDisable",function(e){return c.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==l&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},c.fire(e,"rails:attachBindings")&&(d.ajaxPrefilter(function(e,t,i){e.crossDomain||c.CSRFProtection(i)}),d(window).on("pageshow.rails",function(){d(d.rails.enableSelector).each(function(){var e=d(this);e.data("ujs:disabled")&&d.rails.enableFormElement(e)}),d(d.rails.linkDisableSelector).each(function(){var e=d(this);e.data("ujs:disabled")&&d.rails.enableElement(e)})}),e.on("ajax:complete",c.linkDisableSelector,function(){c.enableElement(d(this))}),e.on("ajax:complete",c.buttonDisableSelector,function(){c.enableFormElement(d(this))}),e.on("click.rails",c.linkClickSelector,function(e){var t=d(this),i=t.data("method"),n=t.data("params"),r=e.metaKey||e.ctrlKey;if(!c.allowAction(t))return c.stopEverything(e);if(!r&&t.is(c.linkDisableSelector)&&c.disableElement(t),c.isRemote(t)){if(r&&(!i||"GET"===i)&&!n)return!0;var s=c.handleRemote(t);return!1===s?c.enableElement(t):s.fail(function(){c.enableElement(t)}),!1}return i?(c.handleMethod(t),!1):void 0}),e.on("click.rails",c.buttonClickSelector,function(e){var t=d(this);if(!c.allowAction(t)||!c.isRemote(t))return c.stopEverything(e);t.is(c.buttonDisableSelector)&&c.disableFormElement(t);var i=c.handleRemote(t);return!1===i?c.enableFormElement(t):i.fail(function(){c.enableFormElement(t)}),!1}),e.on("change.rails",c.inputChangeSelector,function(e){var t=d(this);return c.allowAction(t)&&c.isRemote(t)?(c.handleRemote(t),!1):c.stopEverything(e)}),e.on("submit.rails",c.formSubmitSelector,function(e){var t,i,n=d(this),r=c.isRemote(n);if(!c.allowAction(n))return c.stopEverything(e);if(n.attr("novalidate")===l)if(n.data("ujs:formnovalidate-button")===l){if((t=c.blankInputs(n,c.requiredInputSelector,!1))&&c.fire(n,"ajax:aborted:required",[t]))return c.stopEverything(e)}else n.data("ujs:formnovalidate-button",l);if(r){if(i=c.nonBlankInputs(n,c.fileInputSelector)){setTimeout(function(){c.disableFormElements(n)},13);var s=c.fire(n,"ajax:aborted:file",[i]);return s||setTimeout(function(){c.enableFormElements(n)},13),s}return c.handleRemote(n),!1}setTimeout(function(){c.disableFormElements(n)},13)}),e.on("click.rails",c.formInputClickSelector,function(e){var t=d(this);if(!c.allowAction(t))return c.stopEverything(e);var i=t.attr("name"),n=i?{name:i,value:t.val()}:null,r=t.closest("form");0===r.length&&(r=d("#"+t.attr("form"))),r.data("ujs:submit-button",n),r.data("ujs:formnovalidate-button",t.attr("formnovalidate")),r.data("ujs:submit-button-formaction",t.attr("formaction")),r.data("ujs:submit-button-formmethod",t.attr("formmethod"))}),e.on("ajax:send.rails",c.formSubmitSelector,function(e){this===e.target&&c.disableFormElements(d(this))}),e.on("ajax:complete.rails",c.formSubmitSelector,function(e){this===e.target&&c.enableFormElements(d(this))}),d(function(){c.refreshCSRFTokens()}))}(jQuery),function(){window.ActiveAdmin={}}.call(this),function(){var e;e=function(){if($(".batch_actions_selector li a").click(function(e){var t,i;return e.stopPropagation(),e.preventDefault(),(t=$(this).data("confirm"))?ActiveAdmin.modal_dialog(t,$(this).data("inputs"),(i=this,function(e){return $(i).trigger("confirm:complete",e)})):$(this).trigger("confirm:complete")}),$(".batch_actions_selector li a").on("confirm:complete",function(e,t){var i;return(i=JSON.stringify(t))?$("#batch_action_inputs").removeAttr("disabled").val(i):$("#batch_action_inputs").attr("disabled","disabled"),$("#batch_action").val($(this).data("action")),$("#collection_selection").submit()}),$(".batch_actions_selector").length&&$(":checkbox.toggle_all").length)return $(".paginated_collection table.index_table").length?$(".paginated_collection table.index_table").tableCheckboxToggler():$(".paginated_collection").checkboxToggler(),$(document).on("change",".paginated_collection :checkbox",function(){return $(".paginated_collection :checkbox:checked").length?$(".batch_actions_selector").each(function(){return $(this).aaDropdownMenu("enable")}):$(".batch_actions_selector").each(function(){return $(this).aaDropdownMenu("disable")})})},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){ActiveAdmin.CheckboxToggler=function(){function e(e,t){var i;this.options=e,this.container=t,i={},this.options=$.extend(i,this.options),this._init(),this._bind()}return e.prototype._init=function(){if(!this.container)throw new Error("Container element not found");if(this.$container=$(this.container),!this.$container.find(".toggle_all").length)throw new Error('"toggle all" checkbox not found');return this.toggle_all_checkbox=this.$container.find(".toggle_all"),this.checkboxes=this.$container.find(":checkbox").not(this.toggle_all_checkbox)},e.prototype._bind=function(){var t,e;return this.checkboxes.change((t=this,function(e){return t._didChangeCheckbox(e.target)})),this.toggle_all_checkbox.change((e=this,function(){return e._didChangeToggleAllCheckbox()}))},e.prototype._didChangeCheckbox=function(){var e,t,i;return e=(t=this.checkboxes.filter(":checked").length)===this.checkboxes.length,i=0<t&&t<this.checkboxes.length,this.toggle_all_checkbox.prop({checked:e,indeterminate:i})},e.prototype._didChangeToggleAllCheckbox=function(){var e;return e=this.toggle_all_checkbox.prop("checked"),this.checkboxes.prop({checked:e}),e},e.prototype.option=function(e,t){return $.isPlainObject(e)?this.options=$.extend(!0,this.options,e):null!=e?this.options[e]:this.options[e]=t},e}(),$.widget.bridge("checkboxToggler",ActiveAdmin.CheckboxToggler)}.call(this),function(){var e;ActiveAdmin.DropdownMenu=function(){function e(e,t){var i;this.options=e,this.element=t,this.$element=$(this.element),i={fadeInDuration:20,fadeOutDuration:100,onClickActionItemCallback:null},this.options=$.extend(i,this.options),this.isOpen=!1,this.$menuButton=this.$element.find(".dropdown_menu_button"),this.$menuList=this.$element.find(".dropdown_menu_list_wrapper"),this._buildMenuList(),this._bind()}return e.prototype.open=function(){return this.isOpen=!0,this.$menuList.fadeIn(this.options.fadeInDuration),this._position(),this},e.prototype.close=function(){return this.isOpen=!1,this.$menuList.fadeOut(this.options.fadeOutDuration),this},e.prototype.destroy=function(){return this.$element=null,this},e.prototype.isDisabled=function(){return this.$menuButton.hasClass("disabled")},e.prototype.disable=function(){return this.$menuButton.addClass("disabled")},e.prototype.enable=function(){return this.$menuButton.removeClass("disabled")},e.prototype.option=function(e,t){return $.isPlainObject(e)?this.options=$.extend(!0,this.options,e):null!=e?this.options[e]:this.options[e]=t},e.prototype._buildMenuList=function(){return this.$nipple=$('<div class="dropdown_menu_nipple"></div>'),this.$menuList.prepend(this.$nipple),this.$menuList.hide()},e.prototype._bind=function(){var e,t;return $("body").click((e=this,function(){if(e.isOpen)return e.close()})),this.$menuButton.click((t=this,function(){return t.isDisabled()||(t.isOpen?t.close():t.open()),!1}))},e.prototype._position=function(){var e,t,i,n,r,s,o,a;return this.$menuList.css("top",this.$menuButton.position().top+this.$menuButton.outerHeight()+10),i=(t=this.$menuButton.position().left)+2*(e=this.$menuButton.outerWidth()/2),s=this.$menuList.outerWidth()/2,o=this.$nipple.outerWidth()/2,a=$(window).width(),r=t+e+s,(n=t+e-s)<0?(this.$menuList.css("left",t),this.$nipple.css("left",e-o)):a<r?(this.$menuList.css("right",a-i),this.$nipple.css("right",e-o)):(this.$menuList.css("left",n),this.$nipple.css("left",s-o))},e}(),$.widget.bridge("aaDropdownMenu",ActiveAdmin.DropdownMenu),e=function(){return $(".dropdown_menu").aaDropdownMenu()},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){ActiveAdmin.flash=function(){function e(e,t,i){this.message=e,this.type=null!=t?t:"notice",this.reference=jQuery("<div>").addClass("flash flash_"+this.type).text(this.message),jQuery(".flashes").append(this.reference),null!=i&&this.close_after(i)}return e.error=function(e,t){return new this(e,"error",t)},e.notice=function(e,t){return new this(e,"notice",t)},e.prototype.reference=function(){return this.reference},e.prototype.close_after=function(e){return setTimeout((t=this,function(){return t.close()}),1e3*e);var t},e.prototype.close=function(){return this.reference.remove()},e}()}.call(this),function(){var e,a;$(function(){return $(document).on("click","a.button.has_many_remove",function(e){var t,i;return e.preventDefault(),t=$(this).closest(".has_many_container"),i=$(this).closest("fieldset"),a(t),t.trigger("has_many_remove:before",[i,t]),i.remove(),t.trigger("has_many_remove:after",[i,t])}),$(document).on("click","a.button.has_many_add",function(e){var t,i,n,r,s,o;if(e.preventDefault(),(s=$(this).closest(".has_many_container")).trigger(t=$.Event("has_many_add:before"),[s]),!t.isDefaultPrevented())return r=s.data("has_many_index")||s.children("fieldset").length-1,s.data({has_many_index:++r}),o=new RegExp($(this).data("placeholder"),"g"),n=$(this).data("html").replace(o,r),i=$(n).insertBefore(this),a(s),s.trigger("has_many_add:after",[i,s])}),$(document).on("change",'.has_many_container[data-sortable] :input[name$="[_destroy]"]',function(){return a($(this).closest(".has_many"))}),e(),$(document).on("has_many_add:after",".has_many_container",e)}),e=function(){var e;return(e=$(".has_many_container[data-sortable]:not(.ui-sortable)")).sortable({items:"> fieldset",handle:"> ol > .handle",stop:a}),e.each(a)},a=function(e){var i,n;return e=e instanceof jQuery?e:$(this),i=e.data("sortable"),n=parseInt(e.data("sortable-start")||0,10),e.children("fieldset").each(function(){var e,t;if(e=$(this).find("> ol > .input > :input[name$='[_destroy]']"),(t=$(this).find("> ol > .input > :input[name$='["+i+"]']")).length)return t.val(e.is(":checked")?"":n++)})}}.call(this),function(){ActiveAdmin.modal_dialog=function(e,t,i){var n,r,s,o,a,l,c,d,f,u,p,h;for(l in o='<form id="dialog_confirm" title="'+e+'"><ul>',t){if(u=t[l],/^(datepicker|checkbox|text|number)$/.test(u))h="input";else if("textarea"===u)h="textarea";else{if(!$.isArray(u))throw new Error("Unsupported input type: {"+l+": "+u+"}");h=(d=["select","option",u,""])[0],r=d[1],c=d[2],u=d[3]}a="datepicker"===u?u:"",o+="<li>\n<label>"+(l.charAt(0).toUpperCase()+l.slice(1))+"</label>\n<"+h+' name="'+l+'" class="'+a+'" type="'+u+'">'+(c?function(){var e,t,i;for(i=[],e=0,t=c.length;e<t;e++)p=c[e],n=$("<"+r+"/>"),$.isArray(p)?n.text(p[0]).val(p[1]):n.text(p),i.push(n.wrap("<div>").parent().html());return i}().join(""):"")+"</"+h+"></li>",h=(f=[])[0],r=f[1],c=f[2],u=f[3],a=f[4]}return o+="</ul></form>",s=$(o).appendTo("body"),$("body").trigger("modal_dialog:before_open",[s]),s.dialog({modal:!0,open:function(){return $("body").trigger("modal_dialog:after_open",[s])},dialogClass:"active_admin_dialog",buttons:{OK:function(){return i($(this).serializeObject()),$(this).dialog("close")},Cancel:function(){return $(this).dialog("close").remove()}}})}}.call(this),function(){var e;ActiveAdmin.PerPage=function(){function e(e,t){this.options=e,this.element=t,this.$element=$(this.element),this._init(),this._bind()}return e.prototype._init=function(){return this.$params=this._queryParams()},e.prototype._bind=function(){return this.$element.change((e=this,function(){return e.$params.per_page=e.$element.val(),delete e.$params.page,"undefined"!=typeof Turbolinks?Turbolinks.visit(window.location.href.split("?")[0]+"?"+$.param(e.$params)):location.search=$.param(e.$params)}));var e},e.prototype._queryParams=function(){var e,t,i,n;for(i=window.location.search.substring(1),t={},n=/([^&=]+)=([^&]*)/g;e=n.exec(i);)t[this._decode(e[1])]=this._decode(e[2]);return t},e.prototype._decode=function(e){
return decodeURIComponent(e.replace(/\+/g,"%20"))},e.prototype.option=function(e,t){return $.isPlainObject(e)?this.options=$.extend(!0,this.options,e):null!=e?this.options[e]:this.options[e]=t},e}(),$.widget.bridge("perPage",ActiveAdmin.PerPage),e=function(){return $(".pagination_per_page select").perPage()},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){var t=function(e,t){function i(){this.constructor=e}for(var n in t)r.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},r={}.hasOwnProperty;ActiveAdmin.TableCheckboxToggler=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype._init=function(){return i.__super__._init.apply(this,arguments)},i.prototype._bind=function(){return i.__super__._bind.apply(this,arguments),this.$container.find("tbody td").click((t=this,function(e){if("checkbox"!==e.target.type)return t._didClickCell(e.target)}));var t},i.prototype._didChangeCheckbox=function(e){return i.__super__._didChangeCheckbox.apply(this,arguments),$(e).parents("tr").toggleClass("selected",e.checked)},i.prototype._didChangeToggleAllCheckbox=function(){return this.$container.find("tbody tr").toggleClass("selected",i.__super__._didChangeToggleAllCheckbox.apply(this,arguments))},i.prototype._didClickCell=function(e){return $(e).parent("tr").find(":checkbox").click()},i}(ActiveAdmin.CheckboxToggler),$.widget.bridge("tableCheckboxToggler",ActiveAdmin.TableCheckboxToggler)}.call(this),function(){$.ui.dialog.prototype._focusTabbable=function(){return this.uiDialog.focus()}}.call(this),function(){$.fn.serializeObject=function(){var e,t,i,n,r;for(n={},e=0,t=(r=this.serializeArray()).length;e<t;e++)n[(i=r[e]).name]=i.value;return n}}.call(this),function(){var e;e=function(){var e;if((e=$(".table_tools .batch_actions_selector")).length)return e.next().css({width:"calc(100% - 10px - "+e.outerWidth()+"px)","float":"right"})},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){var e;e=function(){return $(document).on("focus","input.datepicker:not(.hasDatepicker)",function(){var e,t,i;if("date"!==(t=$(this))[0].type)return e={dateFormat:"yy-mm-dd"},i=t.data("datepicker-options"),t.datepicker($.extend(e,i))})},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){var e;e=function(){return $(".clear_filters_btn").click(function(e){var n,r,s;return r=window.location.search.slice(1).split("&"),s=/^(q\[|q%5B|q%5b|page|commit)/,"undefined"!=typeof Turbolinks?(Turbolinks.visit(window.location.href.split("?")[0]+"?"+function(){var e,t,i;for(i=[],e=0,t=r.length;e<t;e++)(n=r[e]).match(s)||i.push(n);return i}().join("&")),e.preventDefault()):window.location.search=function(){var e,t,i;for(i=[],e=0,t=r.length;e<t;e++)(n=r[e]).match(s)||i.push(n);return i}().join("&")}),$(".filter_form").submit(function(e){if($(this).find(":input").filter(function(){return""===this.value}).prop("disabled",!0),"undefined"!=typeof Turbolinks)return Turbolinks.visit(window.location.href.split("?")[0]+"?"+$(this).serialize()),e.preventDefault()}),$(".filter_form_field.select_and_search select").change(function(){return $(this).siblings("input").prop({name:"q["+this.value+"]"})})},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(){var e;e=function(){return $("#active_admin_content .tabs").tabs()},$(document).ready(e).on("page:load turbolinks:load",e)}.call(this),function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),i(t)}:i(window.jQuery)}(function(ze){var a=function(e,t){this.id=++ze.FE.ID,this.opts=ze.extend(!0,{},ze.extend({},a.DEFAULTS,"object"==typeof t&&t));var i=JSON.stringify(this.opts);ze.FE.OPTS_MAPPING[i]=ze.FE.OPTS_MAPPING[i]||this.id,this.sid=ze.FE.OPTS_MAPPING[i],ze.FE.SHARED[this.sid]=ze.FE.SHARED[this.sid]||{},this.shared=ze.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=ze(e),this.$oel.data("froala.editor",this),this.o_doc=e.ownerDocument,this.o_win="defaultView"in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var n=ze(this.o_win).scrollTop();this.$oel.on("froala.doInit",ze.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=ze(this.doc),this.$win=ze(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(ze.FE.PLUGINS)),this.opts.initOnClick?(this.load(ze.FE.MODULES),this.$el.on("touchstart.init",function(){ze(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){ze(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",ze.proxy(function(e){if("touchend"==e.type&&!this.$el.data("touched"))return!0;if(1===e.which||!e.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(ze.FE.MODULES),this.load(ze.FE.PLUGINS);var t=e.originalEvent&&e.originalEvent.originalTarget;t&&"IMG"==t.tagName&&ze(t).trigger("mousedown"),void 0===this.ul&&this.destroy(),"touchend"==e.type&&this.image&&e.originalEvent&&e.originalEvent.target&&ze(e.originalEvent.target).is("img")&&setTimeout(ze.proxy(function(){this.image.edit(ze(e.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this)),this.events.trigger("initializationDelayed")):(this.load(ze.FE.MODULES),this.load(ze.FE.PLUGINS),ze(this.o_win).scrollTop(n),void 0===this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};a.DEFAULTS={initOnClick:!1,pluginsEnabled:null},a.MODULES={},a.PLUGINS={},a.VERSION="2.7.1",a.INSTANCES=[],a.OPTS_MAPPING={},a.SHARED={},a.ID=0,a.prototype._init=function(){var e=this.$oel.prop("tagName");this.$oel.closest("label").length;var t=ze.proxy(function(){"TEXTAREA"!=e&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=ze('<iframe src="about:blank" frameBorder="0">'),this.$wp=ze("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document):(this.$el=ze("<div></div>"),this.el=this.$el.get(0),this.$wp=ze("<div></div>").append(this.$el),this.$box.html(this.$wp)),this.$oel.trigger("froala.doInit")},this),i=ze.proxy(function(){this.$box=ze("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,ze.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,ze.proxy(function(){this.events.trigger("form.reset")},this)),t()},this),n=ze.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),r=ze.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),s=ze.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(e){e.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?s():"TEXTAREA"==e?i():"A"==e?n():"IMG"==e?r():"BUTTON"==e||"INPUT"==e?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,s()):t()},a.prototype.load=function(e){for(var t in e)if(e.hasOwnProperty(t)){if(this[t])continue;if(ze.FE.PLUGINS[t]&&this.opts.pluginsEnabled.indexOf(t)<0)continue;if(this[t]=new e[t](this),this[t]._init&&(this[t]._init(),this.opts.initOnClick&&"core"==t))return!1}},a.prototype.destroy=function(){this.shared.count--,this.events.$off();var e=this.html.get();if(this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",void 0,!0),0===this.shared.count){for(var t in this.shared)this.shared.hasOwnProperty(t)&&(this.shared[t],ze.FE.SHARED[this.sid][t]=null);ze.FE.SHARED[this.sid]={}}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(e),ze.FE.INSTANCES.splice(ze.FE.INSTANCES.indexOf(this),1)},ze.fn.froalaEditor=function(r){for(var s=[],e=0;e<arguments.length;e++)s.push(arguments[e]);if("string"==typeof r){var o=[];return this.each(function(){var e=ze(this).data("froala.editor");if(e){var t,i;if(0<r.indexOf(".")&&e[r.split(".")[0]]?(e[r.split(".")[0]]&&(t=e[r.split(".")[0]]),i=r.split(".")[1]):(t=e,i=r.split(".")[0]),!t[i])return ze.error("Method "+r+" does not exist in Froala Editor.");var n=t[i].apply(e,s.slice(1));void 0===n?o.push(this):0===o.length&&o.push(n)}}),1==o.length?o[0]:o}if("object"==typeof r||!r)return this.each(function(){ze(this).data("froala.editor")||new a(this,r)})},ze.fn.froalaEditor.Constructor=a,ze.FroalaEditor=a,ze.FE=a,ze.FE.XS=0,ze.FE.SM=1,ze.FE.MD=2,ze.FE.LG=3;var e="a-z\\u0080-\\u009f\\u00a1-\\uffff0-9";if(ze.FE.LinkRegExCommon="((["+e+"])|(["+e+"](\\.|-|_))){1,}["+e+"]{1,}",ze.FE.LinkRegExEnd="((:[0-9]{1,5})|)(((\\/|\\?|#)[a-z\\u00a1-\\uffff0-9@?\\|!^=%&amp;/~+#-_{}]*)|())",ze.FE.LinkRegExTLD="(("+ze.FE.LinkRegExCommon+")(\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))",ze.FE.LinkRegExHTTP="((ftp|http|https):\\/\\/"+ze.FE.LinkRegExCommon+")",ze.FE.LinkRegExAuth="((ftp|http|https):\\/\\/[\\u0021-\\uffff]{1,}@"+ze.FE.LinkRegExCommon+")",ze.FE.LinkRegExWWW="(www\\."+ze.FE.LinkRegExCommon+"\\.[a-z0-9-]{2,24})",ze.FE.LinkRegEx="("+ze.FE.LinkRegExTLD+"|"+ze.FE.LinkRegExHTTP+"|"+ze.FE.LinkRegExWWW+"|"+ze.FE.LinkRegExAuth+")"+ze.FE.LinkRegExEnd,ze.FE.LinkProtocols=["mailto","tel","sms","notes","data"],ze.FE.MAIL_REGEX=/.+@.+\..+/i,ze.FE.MODULES.helpers=function(s){function o(){var e,t=-1;return"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,null!==new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))),t}function e(){var e={},t=o();if(0<t)e.msie=!0;else{var i=navigator.userAgent.toLowerCase(),n=/(edge)[ \/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[],r={browser:n[1]||"",version:n[2]||"0"};n[1]&&(e[r.browser]=!0),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return e.msie&&(e.version=t),e}function t(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!r()}function i(){return/(Android)/g.test(navigator.userAgent)&&!r()}function n(){return/(Blackberry)/g.test(navigator.userAgent)}function r(){return/(Windows Phone)/gi.test(navigator.userAgent)}function a(){return i()||t()||n()}function l(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}function c(e){return parseInt(e,10)||0}function d(){var e=ze('<div class="fr-visibility-helper"></div>').appendTo("body:first"),t=c(e.css("margin-left"));return e.remove(),t}function f(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function u(e){return!!/^(https?:|ftps?:|)\/\//i.test(e)&&(e=String(e).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20"),new RegExp("^"+ze.FE.LinkRegEx+"$","gi").test(e))}function p(e){if(/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(e))return e;if(/^(https?:|ftps?:|)\/\//i.test(e)){if(!u(e)&&!u("http:"+e))return""}else{if(new RegExp("^("+ze.FE.LinkProtocols.join("|")+"):\\/\\/","i").test(e))return e;e=encodeURIComponent(e).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}")}return e}function h(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length}function g(e){function t(e){return("0"+parseInt(e,10).toString(16)).slice(-2)}try{return e&&"transparent"!==e?/^#[0-9A-F]{6}$/i.test(e)?e:("#"+t((e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+t(e[2])+t(e[3])).toUpperCase():""}catch(o){return null}}function m(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")":""}function v(e){var t=(e.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(t)<0){if(!w){var i=ze('<div dir="'+("rtl"==s.opts.direction?"rtl":"auto")+'" style="text-align: '+s.$el.css("text-align")+'; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');ze("body:first").append(i);var n=i.find("#s1").get(0).getBoundingClientRect().left,r=i.find("#s2").get(0).getBoundingClientRect().left;i.remove(),w=n<r?"left":"right"}t=w}return t}function b(){return null==A&&(A=0<=navigator.platform.toUpperCase().indexOf("MAC")),A}function E(){function e(e,t){var s=e[t];e[t]=function(e){var t,i=!1,n=!1;if(e&&e.match(a)){e=e.replace(a,""),this.parentNode||(o.appendChild(this),n=!0);var r=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),i=!0),t=s.call(r,"#"+this.id+" "+e),i&&(this.id=""),n&&o.removeChild(this),t}return s.call(this,e)}}var o=s.o_doc.createElement("div");try{o.querySelectorAll(":scope *")}catch(t){var a=/^\s*:scope/gi;e(Element.prototype,"querySelector"),e(Element.prototype,"querySelectorAll"),e(HTMLElement.prototype,"querySelector"),e(HTMLElement.prototype,"querySelectorAll")}}function y(){return s.o_win.pageYOffset?s.o_win.pageYOffset:s.o_doc.documentElement&&s.o_doc.documentElement.scrollTop?s.o_doc.documentElement.scrollTop:s.o_doc.body.scrollTop?s.o_doc.body.scrollTop:0}function _(){return s.o_win.pageXOffset?s.o_win.pageXOffset:s.o_doc.documentElement&&s.o_doc.documentElement.scrollLeft?s.o_doc.documentElement.scrollLeft:s.o_doc.body.scrollLeft?s.o_doc.body.scrollLeft:0}function T(){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this,i=this;if(!document.documentElement.contains(t))return null;do{if(i.matches(e))return i;i=i.parentElement}while(null!==i);return null})}function C(){s.browser=e(),E(),T()}var w,A=null;return{_init:C,isIOS:t,isMac:b,isAndroid:i,isBlackberry:n,isWindowsPhone:r,isMobile:a,requestAnimationFrame:l,getPX:c,screenSize:d,isTouch:f,sanitizeURL:p,isArray:h,RGBToHex:g,HEXtoRGB:m,isURL:u,getAlignment:v,scrollTop:y,scrollLeft:_}},ze.FE.MODULES.events=function(a){function e(e,t,i){v(e,t,i)}function t(){e(a.$el,"cut copy paste beforepaste",function(e){y(e.type,[e])})}function i(){e(a.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(e){y(e.type,[e])}),m("mousedown",function(){for(var e=0;e<ze.FE.INSTANCES.length;e++)ze.FE.INSTANCES[e]!=a&&ze.FE.INSTANCES[e].popups&&ze.FE.INSTANCES[e].popups.areVisible()&&ze.FE.INSTANCES[e].$el.find(".fr-marker").remove()})}function n(){e(a.$el,"keydown keypress keyup input",function(e){y(e.type,[e])})}function r(){e(a.$win,a._mousedown,function(e){y("window.mousedown",[e]),u()}),e(a.$win,a._mouseup,function(e){y("window.mouseup",[e])}),e(a.$win,"cut copy keydown keyup touchmove touchend",function(e){y("window."+e.type,[e])})}function s(){e(a.$doc,"dragend drop",function(e){y("document."+e.type,[e])})}function o(e){if(void 0===e&&(e=!0),!a.$wp)return!1;if(a.helpers.isIOS()&&a.$win.get(0).focus(),!a.core.hasFocus()&&e){var t=a.$win.scrollTop();return a.browser.msie&&a.$box&&a.$box.css("position","fixed"),a.browser.msie&&a.$wp&&a.$wp.css("overflow","visible"),p(),a.$el.focus(),u(),a.browser.msie&&a.$box&&a.$box.css("position",""),a.browser.msie&&a.$wp&&a.$wp.css("overflow","auto"),t!=a.$win.scrollTop()&&a.$win.scrollTop(t),!1}if(!a.core.hasFocus()||0<a.$el.find(".fr-marker").length)return!1;if(a.selection.info(a.el).atStart&&a.selection.isCollapsed()&&null!=a.html.defaultTag()){var i=a.markers.insert();if(i&&!a.node.blockParent(i)){ze(i).remove();var n=a.$el.find(a.html.blockTagsQuery()).get(0);n&&(ze(n).prepend(ze.FE.MARKERS),a.selection.restore())}else i&&ze(i).remove()}}function l(){e(a.$el,"focus",function(e){h()&&(o(!1),!1===x&&y(e.type,[e]))}),e(a.$el,"blur",function(e){h()&&!0===x&&(y(e.type,[e]),u())}),m("focus",function(){x=!0}),m("blur",function(){x=!1})}function c(){a.helpers.isMobile()?(a._mousedown="touchstart",a._mouseup="touchend",a._move="touchmove",a._mousemove="touchmove"):(a._mousedown="mousedown",a._mouseup="mouseup",a._move="",a._mousemove="mousemove")}function d(e){var t=ze(e.currentTarget);return a.edit.isDisabled()||a.node.hasClass(t.get(0),"fr-disabled")?(e.preventDefault(),!1):"mousedown"===e.type&&1!==e.which||(a.helpers.isMobile()||e.preventDefault(),(a.helpers.isAndroid()||a.helpers.isWindowsPhone())&&0===t.parents(".fr-dropdown-menu").length&&(e.preventDefault(),e.stopPropagation()),t.addClass("fr-selected"),void a.events.trigger("commands.mousedown",[t]))}function f(e,t){var i=ze(e.currentTarget);if(a.edit.isDisabled()||a.node.hasClass(i.get(0),"fr-disabled"))return e.preventDefault(),!1;if("mouseup"===e.type&&1!==e.which)return!0;if(!a.node.hasClass(i.get(0),"fr-selected"))return!0;if("touchmove"!=e.type){if(e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!a.node.hasClass(i.get(0),"fr-selected"))return a.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),!1;if(a.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),i.data("dragging")||i.attr("disabled"))return i.removeData("dragging"),!1;var n=i.data("timeout");n&&(clearTimeout(n),i.removeData("timeout")),t.apply(a,[e])}else i.data("timeout")||i.data("timeout",setTimeout(function(){i.data("dragging",!0)},100))}function u(){A=!0}function p(){A=!1}function h(){return A}function g(e,t,i){v(e,a._mousedown,t,function(e){a.edit.isDisabled()||d(e)},!0),v(e,a._mouseup+" "+a._move,t,function(e){a.edit.isDisabled()||f(e,i)},!0),v(e,"mousedown click mouseup",t,function(e){a.edit.isDisabled()||e.stopPropagation()},!0),m("window.mouseup",function(){a.edit.isDisabled()||(e.find(t).removeClass("fr-selected"),u())})}function m(e,t,i){var n,r=e.split(" ");if(1<r.length){for(var s=0;s<r.length;s++)m(r[s],t,i);return!0}void 0===i&&(i=!1),n=0!==e.indexOf("shared.")?S[e]=S[e]||[]:a.shared._events[e]=a.shared._events[e]||[],i?n.unshift(t):n.push(t)}function v(e,t,i,n,r){"function"==typeof i&&(r=n,n=i,i=!1);var s=r?a.shared.$_events:R,o=r?a.sid:a.id;i?e.on(t.split(" ").join(".ed"+o+" ")+".ed"+o,i,n):e.on(t.split(" ").join(".ed"+o+" ")+".ed"+o,n),s.push([e,t.split(" ").join(".ed"+o+" ")+".ed"+o])}function b(e){for(var t=0;t<e.length;t++)e[t][0].off(e[t][1])}function E(){b(R),R=[],0===a.shared.count&&(b(a.shared.$_events),a.shared.$_events=[])}function y(e,t,i){if(!a.edit.isDisabled()||i){var n,r;if(0!==e.indexOf("shared."))n=S[e];else{if(0<a.shared.count)return!1;n=a.shared._events[e]}if(n)for(var s=0;s<n.length;s++)if(!1===(r=n[s].apply(a,t)))return!1;return!1!==(r=a.$oel.triggerHandler("froalaEditor."+e,ze.merge([a],t||[])))&&r}}function _(e,t,i){if(!a.edit.isDisabled()||i){var n,r;if(0!==e.indexOf("shared."))n=S[e];else{if(0<a.shared.count)return!1;n=a.shared._events[e]}if(n)for(var s=0;s<n.length;s++)void 0!==(r=n[s].apply(a,[t]))&&(t=r);return void 0!==(r=a.$oel.triggerHandler("froalaEditor."+e,ze.merge([a],[t])))&&(t=r),t}}function T(){for(var e in S)S.hasOwnProperty(e)&&delete S[e]}function C(){for(var e in a.shared._events)a.shared._events.hasOwnProperty(e)&&delete a.shared._events[e]}function w(){a.shared.$_events=a.shared.$_events||[],a.shared._events={},c(),i(),r(),s(),n(),l(),u(),t(),m("destroy",T),m("shared.destroy",C)}var A,S={},x=!1,R=[];return{_init:w,on:m,trigger:y,bindClick:g,disableBlur:p,enableBlur:u,blurActive:h,focus:o,chainTrigger:_,$on:v,$off:E}},ze.FE.MODULES.node=function(o){function a(e){return e&&"IFRAME"!=e.tagName?Array.prototype.slice.call(e.childNodes||[]):[]}function l(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&0<=ze.FE.BLOCK_TAGS.indexOf(e.tagName.toLowerCase())}function e(e){return!!e&&e.nodeType==Node.ELEMENT_NODE&&"a"==e.tagName.toLowerCase()}function t(e,t){if(!e)return!0;if(e.querySelector("table"))return!1;var i=a(e);1==i.length&&l(i[0])&&(i=a(i[0]));for(var n=!1,r=0;r<i.length;r++){var s=i[r];if(!(t&&o.node.hasClass(s,"fr-marker")||s.nodeType==Node.TEXT_NODE&&0===s.textContent.length)){if("BR"!=s.tagName&&0<(s.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length)return!1;if(n)return!1;"BR"==s.tagName&&(n=!0)}}return!(e.querySelectorAll(ze.FE.VOID_ELEMENTS.join(",")).length-e.querySelectorAll("br").length||e.querySelector(o.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||1<e.querySelectorAll(ze.FE.BLOCK_TAGS.join(",")).length||e.querySelector(o.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))}function i(e){for(;e&&e.parentNode!==o.el&&(!e.parentNode||!o.node.hasClass(e.parentNode,"fr-inner"));)if(l(e=e.parentNode))return e;return null}function n(e,t,i){if(void 0===t&&(t=[]),void 0===i&&(i=!0),t.push(o.el),0<=t.indexOf(e.parentNode)||e.parentNode&&o.node.hasClass(e.parentNode,"fr-inner")||e.parentNode&&0<=ze.FE.SIMPLE_ENTER_TAGS.indexOf(e.parentNode.tagName)&&i)return null;for(;t.indexOf(e.parentNode)<0&&e.parentNode&&!o.node.hasClass(e.parentNode,"fr-inner")&&(ze.FE.SIMPLE_ENTER_TAGS.indexOf(e.parentNode.tagName)<0||!i)&&(!l(e)||!l(e.parentNode)||!i);)e=e.parentNode;return e}function c(e){var t={},i=e.attributes;if(i)for(var n=0;n<i.length;n++){var r=i[n];t[r.nodeName]=r.value}return t}function r(e){for(var t="",i=c(e),n=Object.keys(i).sort(),r=0;r<n.length;r++){var s=n[r],o=i[s];o.indexOf("'")<0&&0<=o.indexOf('"')?t+=" "+s+"='"+o+"'":(0<=o.indexOf('"')&&0<=o.indexOf("'")&&(o=o.replace(/"/g,"&quot;")),t+=" "+s+'="'+o+'"')}return t}function s(e){for(var t=e.attributes,i=t.length-1;0<=i;i--){var n=t[i];e.removeAttribute(n.nodeName)}}function d(e){return"<"+e.tagName.toLowerCase()+r(e)+">"}function f(e){return"</"+e.tagName.toLowerCase()+">"}function u(e,t){void 0===t&&(t=!0);for(var i=e.previousSibling;i&&t&&o.node.hasClass(i,"fr-marker");)i=i.previousSibling;return!i||i.nodeType==Node.TEXT_NODE&&""===i.textContent&&u(i)}function p(e,t){void 0===t&&(t=!0);for(var i=e.nextSibling;i&&t&&o.node.hasClass(i,"fr-marker");)i=i.nextSibling;return!i||i.nodeType==Node.TEXT_NODE&&""===i.textContent&&p(i)}function h(e){return e&&e.nodeType==Node.ELEMENT_NODE&&0<=ze.FE.VOID_ELEMENTS.indexOf((e.tagName||"").toLowerCase())}function g(e){return!!e&&0<=["UL","OL"].indexOf(e.tagName)}function m(e){return e===o.el}function v(e){return e&&e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&0<=(e.getAttribute("class")||"").indexOf("fr-deletable")}function b(e){return e===o.doc.activeElement&&(!o.doc.hasFocus||o.doc.hasFocus())&&!!(m(e)||e.type||e.href||~e.tabIndex)}function E(e){return(!e.getAttribute||"false"!=e.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(e.tagName)<0}function y(e,t){return e instanceof ze&&(e=e.get(0)),e&&e.classList&&e.classList.contains(t)}function _(e){return o.browser.msie?e:{acceptNode:e}}return{isBlock:l,isEmpty:t,blockParent:i,deepestParent:n,rawAttributes:c,attributes:r,clearAttributes:s,openTagString:d,closeTagString:f,isFirstSibling:u,isLastSibling:p,isList:g,isLink:e,isElement:m,contents:a,isVoid:h,hasFocus:b,isEditable:E,isDeletable:v,hasClass:y,filter:_}},ze.FE.INVISIBLE_SPACE="&#8203;",ze.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+ze.FE.INVISIBLE_SPACE+"</span>",ze.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+ze.FE.INVISIBLE_SPACE+"</span>",ze.FE.MARKERS=ze.FE.START_MARKER+ze.FE.END_MARKER,ze.FE.MODULES.markers=function(c){function d(e,t){return ze('<span class="fr-marker" data-id="'+t+'" data-type="'+e+'" style="display: '+(c.browser.safari?"none":"inline-block")+'; line-height: 0;">'+ze.FE.INVISIBLE_SPACE+"</span>",c.doc)[0]}function e(e,t,i){var n,r,s;try{var o=e.cloneRange();if(o.collapse(t),o.insertNode(d(t,i)),!0===t)for(s=(n=c.$el.find('span.fr-marker[data-type="true"][data-id="'+i+'"]').get(0)).nextSibling;s&&s.nodeType===Node.TEXT_NODE&&0===s.textContent.length;)ze(s).remove(),s=n.nextSibling;if(!0===t&&!e.collapsed){for(;!c.node.isElement(n.parentNode)&&!s;)ze(n.parentNode).after(n),s=n.nextSibling;if(s&&s.nodeType===Node.ELEMENT_NODE&&c.node.isBlock(s)){for(r=[s];s=r[0],(r=c.node.contents(s))[0]&&c.node.isBlock(r[0]););ze(s).prepend(ze(n))}}if(!1===t&&!e.collapsed){if((s=(n=c.$el.find('span.fr-marker[data-type="false"][data-id="'+i+'"]').get(0)).previousSibling)&&s.nodeType===Node.ELEMENT_NODE&&c.node.isBlock(s)){for(r=[s];s=r[r.length-1],(r=c.node.contents(s))[r.length-1]&&c.node.isBlock(r[r.length-1]););ze(s).append(ze(n))}n.parentNode&&0<=["TD","TH"].indexOf(n.parentNode.tagName)&&n.parentNode.previousSibling&&!n.previousSibling&&ze(n.parentNode.previousSibling).append(n)}var a=c.$el.find('span.fr-marker[data-type="'+t+'"][data-id="'+i+'"]').get(0);return a&&(a.style.display="none"),a}catch(l){return null}}function l(){if(!c.$wp)return null;try{var e=c.selection.ranges(0),t=e.commonAncestorContainer;if(t!=c.el&&0===c.$el.find(t).length)return null;var i=e.cloneRange(),n=e.cloneRange();i.collapse(!0);var r=ze('<span class="fr-marker" style="display: none; line-height: 0;">'+ze.FE.INVISIBLE_SPACE+"</span>",c.doc)[0];if(i.insertNode(r),r=c.$el.find("span.fr-marker").get(0)){for(var s=r.nextSibling;s&&s.nodeType===Node.TEXT_NODE&&0===s.textContent.length;)ze(s).remove(),s=c.$el.find("span.fr-marker").get(0).nextSibling;return c.selection.clear(),c.selection.get().addRange(n),r}return null}catch(o){}}function t(){c.selection.isCollapsed()||c.selection.remove();var e=c.$el.find(".fr-marker").get(0);if(null==e&&(e=l()),null==e)return null;var t=c.node.deepestParent(e);if(t||(t=c.node.blockParent(e))&&"LI"!=t.tagName&&(t=null),t)if(c.node.isBlock(t)&&c.node.isEmpty(t))"LI"!=t.tagName||t.parentNode.firstElementChild!=t||c.node.isEmpty(t.parentNode)?ze(t).replaceWith('<span class="fr-marker"></span>'):ze(t).append('<span class="fr-marker"></span>');else if(c.cursor.isAtStart(e,t))ze(t).before('<span class="fr-marker"></span>'),ze(e).remove();else if(c.cursor.isAtEnd(e,t))ze(t).after('<span class="fr-marker"></span>'),ze(e).remove();else{for(var i=e,n="",r="";i=i.parentNode,n+=c.node.closeTagString(i),r=c.node.openTagString(i)+r,i!=t;);ze(e).replaceWith('<span id="fr-break"></span>');var s=c.node.openTagString(t)+ze(t).html()+c.node.closeTagString(t);s=s.replace(/<span id="fr-break"><\/span>/g,n+'<span class="fr-marker"></span>'+r),ze(t).replaceWith(s)}return c.$el.find(".fr-marker").get(0)}function i(e){var t=e.clientX,i=e.clientY;f();var n,r=null;if(void 0!==c.doc.caretPositionFromPoint?(n=c.doc.caretPositionFromPoint(t,i),(r=c.doc.createRange()).setStart(n.offsetNode,n.offset),r.setEnd(n.offsetNode,n.offset)):void 0!==c.doc.caretRangeFromPoint&&(n=c.doc.caretRangeFromPoint(t,i),(r=c.doc.createRange()).setStart(n.startContainer,n.startOffset),r.setEnd(n.startContainer,n.startOffset)),null!==r&&void 0!==c.win.getSelection){var s=c.win.getSelection();s.removeAllRanges(),s.addRange(r)}else if(void 0!==c.doc.body.createTextRange)try{(r=c.doc.body.createTextRange()).moveToPoint(t,i);var o=r.duplicate();o.moveToPoint(t,i),r.setEndPoint("EndToEnd",o),r.select()}catch(a){return!1}l()}function f(){c.$el.find(".fr-marker").remove()}return{place:e,insert:l,split:t,insertAtPoint:i,remove:f}},ze.FE.MODULES.selection=function(E){function o(){var e="";return E.win.getSelection?e=E.win.getSelection():E.doc.getSelection?e=E.doc.getSelection():E.doc.selection&&(e=E.doc.selection.createRange().text),e.toString()}function y(){return E.win.getSelection?E.win.getSelection():E.doc.getSelection?E.doc.getSelection():E.doc.selection.createRange()}function d(e){var t=y(),i=[];if(t&&t.getRangeAt&&t.rangeCount){i=[];for(var n=0;n<t.rangeCount;n++)i.push(t.getRangeAt(n))}else i=E.doc.createRange?[E.doc.createRange()]:[];return void 0!==e?i[e]:i}function _(){var e=y();try{e.removeAllRanges?e.removeAllRanges():e.empty?e.empty():e.clear&&e.clear()}catch(E){}}function e(){var e=y();try{if(e.rangeCount){var t,i=d(0),n=i.startContainer;if(n.nodeType==Node.TEXT_NODE&&i.startOffset==(n.textContent||"").length&&n.nextSibling&&(n=n.nextSibling),n.nodeType==Node.ELEMENT_NODE){var r=!1;if(0<n.childNodes.length&&n.childNodes[i.startOffset]){for(t=n.childNodes[i.startOffset];t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;)t=t.nextSibling;if(t&&t.textContent.replace(/\u200B/g,"")===o().replace(/\u200B/g,"")&&(n=t,r=!0),!r&&1<n.childNodes.length&&0<i.startOffset&&n.childNodes[i.startOffset-1]){for(t=n.childNodes[i.startOffset-1];t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;)t=t.nextSibling;t&&t.textContent.replace(/\u200B/g,"")===o().replace(/\u200B/g,"")&&(n=t,r=!0)}}else!i.collapsed&&n.nextSibling&&n.nextSibling.nodeType==Node.ELEMENT_NODE&&(t=n.nextSibling)&&t.textContent.replace(/\u200B/g,"")===o().replace(/\u200B/g,"")&&(n=t,r=!0);!r&&0<n.childNodes.length&&ze(n.childNodes[0]).text().replace(/\u200B/g,"")===o().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(n.childNodes[0].tagName)<0&&(n=n.childNodes[0])}for(;n.nodeType!=Node.ELEMENT_NODE&&n.parentNode;)n=n.parentNode;for(var s=n;s&&"HTML"!=s.tagName;){if(s==E.el)return n;s=ze(s).parent()[0]}}}catch(C){}return E.el}function t(){var e=y();try{if(e.rangeCount){var t,i=d(0),n=i.endContainer;if(n.nodeType==Node.ELEMENT_NODE){var r=!1;0<n.childNodes.length&&n.childNodes[i.endOffset]&&ze(n.childNodes[i.endOffset]).text()===o()?(n=n.childNodes[i.endOffset],r=!0):!i.collapsed&&n.previousSibling&&n.previousSibling.nodeType==Node.ELEMENT_NODE?(t=n.previousSibling)&&t.textContent.replace(/\u200B/g,"")===o().replace(/\u200B/g,"")&&(n=t,r=!0):!i.collapsed&&0<n.childNodes.length&&n.childNodes[i.endOffset]&&((t=n.childNodes[i.endOffset].previousSibling).nodeType==Node.ELEMENT_NODE&&t&&t.textContent.replace(/\u200B/g,"")===o().replace(/\u200B/g,"")&&(n=t,r=!0)),!r&&0<n.childNodes.length&&ze(n.childNodes[n.childNodes.length-1]).text()===o()&&["BR","IMG","HR"].indexOf(n.childNodes[n.childNodes.length-1].tagName)<0&&(n=n.childNodes[n.childNodes.length-1])}for(n.nodeType==Node.TEXT_NODE&&0===i.endOffset&&n.previousSibling&&n.previousSibling.nodeType==Node.ELEMENT_NODE&&(n=n.previousSibling);n.nodeType!=Node.ELEMENT_NODE&&n.parentNode;)n=n.parentNode;for(var s=n;s&&"HTML"!=s.tagName;){if(s==E.el)return n;s=ze(s).parent()[0]}}}catch(C){}return E.el}function f(e,t){var i=e;return i.nodeType==Node.ELEMENT_NODE&&0<i.childNodes.length&&i.childNodes[t]&&(i=i.childNodes[t]),i.nodeType==Node.TEXT_NODE&&(i=i.parentNode),i}function i(){var e,t=[],i=y();if(u()&&i.rangeCount){var n=d();for(e=0;e<n.length;e++){var r,s=n[e],o=f(s.startContainer,s.startOffset),a=f(s.endContainer,s.endOffset);E.node.isBlock(o)&&t.indexOf(o)<0&&t.push(o),(r=E.node.blockParent(o))&&t.indexOf(r)<0&&t.push(r);for(var l=[],c=o;c!==a&&c!==E.el;)l.indexOf(c)<0&&c.children&&c.children.length?(l.push(c),c=c.children[0]):c.nextSibling?c=c.nextSibling:c.parentNode&&(c=c.parentNode,l.push(c)),E.node.isBlock(c)&&l.indexOf(c)<0&&t.indexOf(c)<0&&(c!==a||0<s.endOffset)&&t.push(c);E.node.isBlock(a)&&t.indexOf(a)<0&&0<s.endOffset&&t.push(a),(r=E.node.blockParent(a))&&t.indexOf(r)<0&&t.push(r)}}
for(e=t.length-1;0<e;e--)ze(t[e]).find(t).length&&("LI"!=t[e].tagName||0<t[e].children.length&&0<=t.indexOf(t[e].children[0]))&&t.splice(e,1);return t}function T(){if(E.$wp){E.markers.remove();var e,t,i=d(),n=[];for(t=0;t<i.length;t++)if(i[t].startContainer!==E.doc||E.browser.msie){var r=(e=i[t]).collapsed,s=E.markers.place(e,!0,t),o=E.markers.place(e,!1,t);void 0!==s&&s||!r||(ze(".fr-marker").remove(),E.selection.setAtEnd(E.el)),E.el.normalize(),E.browser.safari&&!r&&((e=E.doc.createRange()).setStartAfter(s),e.setEndBefore(o),n.push(e))}if(E.browser.safari&&n.length)for(E.selection.clear(),t=0;t<n.length;t++)E.selection.get().addRange(n[t])}}function C(){var e,t=E.el.querySelectorAll('.fr-marker[data-type="true"]');if(!E.$wp)return E.markers.remove(),!1;if(0===t.length)return!1;if(E.browser.msie||E.browser.edge)for(e=0;e<t.length;e++)t[e].style.display="inline-block";E.core.hasFocus()||E.browser.msie||E.browser.webkit||E.$el.focus(),_();var i=y();for(e=0;e<t.length;e++){var n=ze(t[e]).data("id"),r=t[e],s=E.doc.createRange(),o=E.$el.find('.fr-marker[data-type="false"][data-id="'+n+'"]');(E.browser.msie||E.browser.edge)&&o.css("display","inline-block");var a=null;if(0<o.length){o=o[0];try{for(var l,c=!1,d=r.nextSibling;d&&d.nodeType==Node.TEXT_NODE&&0===d.textContent.length;)d=(l=d).nextSibling,ze(l).remove();for(var f=o.nextSibling;f&&f.nodeType==Node.TEXT_NODE&&0===f.textContent.length;)f=(l=f).nextSibling,ze(l).remove();if(r.nextSibling==o||o.nextSibling==r){for(var u=r.nextSibling==o?r:o,p=u==r?o:r,h=u.previousSibling;h&&h.nodeType==Node.TEXT_NODE&&0===h.length;)h=(l=h).previousSibling,ze(l).remove();if(h&&h.nodeType==Node.TEXT_NODE)for(;h&&h.previousSibling&&h.previousSibling.nodeType==Node.TEXT_NODE;)h.previousSibling.textContent=h.previousSibling.textContent+h.textContent,h=h.previousSibling,ze(h.nextSibling).remove();for(var g=p.nextSibling;g&&g.nodeType==Node.TEXT_NODE&&0===g.length;)g=(l=g).nextSibling,ze(l).remove();if(g&&g.nodeType==Node.TEXT_NODE)for(;g&&g.nextSibling&&g.nextSibling.nodeType==Node.TEXT_NODE;)g.nextSibling.textContent=g.textContent+g.nextSibling.textContent,g=g.nextSibling,ze(g.previousSibling).remove();if(h&&(E.node.isVoid(h)||E.node.isBlock(h))&&(h=null),g&&(E.node.isVoid(g)||E.node.isBlock(g))&&(g=null),h&&g&&h.nodeType==Node.TEXT_NODE&&g.nodeType==Node.TEXT_NODE){ze(r).remove(),ze(o).remove();var m=h.textContent.length;h.textContent=h.textContent+g.textContent,ze(g).remove(),E.spaces.normalize(h),s.setStart(h,m),s.setEnd(h,m),c=!0}else!h&&g&&g.nodeType==Node.TEXT_NODE?(ze(r).remove(),ze(o).remove(),E.spaces.normalize(g),a=ze(E.doc.createTextNode("\u200b")),ze(g).before(a),s.setStart(g,0),s.setEnd(g,0),c=!0):!g&&h&&h.nodeType==Node.TEXT_NODE&&(ze(r).remove(),ze(o).remove(),E.spaces.normalize(h),a=ze(E.doc.createTextNode("\u200b")),ze(h).after(a),s.setStart(h,h.textContent.length),s.setEnd(h,h.textContent.length),c=!0)}var v,b;if(!c)(E.browser.chrome||E.browser.edge)&&r.nextSibling==o?(v=w(o,s,!0)||s.setStartAfter(o),b=w(r,s,!1)||s.setEndBefore(r)):(r.previousSibling==o&&(o=(r=o).nextSibling),o.nextSibling&&"BR"===o.nextSibling.tagName||!o.nextSibling&&E.node.isBlock(r.previousSibling)||r.previousSibling&&"BR"==r.previousSibling.tagName||(r.style.display="inline",o.style.display="inline",a=ze(E.doc.createTextNode("\u200b"))),v=w(r,s,!0)||ze(r).before(a)&&s.setStartBefore(r),b=w(o,s,!1)||ze(o).after(a)&&s.setEndAfter(o)),"function"==typeof v&&v(),"function"==typeof b&&b()}catch(R){}}a&&a.remove();try{i.addRange(s)}catch(R){}}E.markers.remove()}function w(e,t,i){var n,r=e.previousSibling,s=e.nextSibling;return r&&s&&r.nodeType==Node.TEXT_NODE&&s.nodeType==Node.TEXT_NODE?(n=r.textContent.length,i?(s.textContent=r.textContent+s.textContent,ze(r).remove(),ze(e).remove(),E.spaces.normalize(s),function(){t.setStart(s,n)}):(r.textContent=r.textContent+s.textContent,ze(s).remove(),ze(e).remove(),E.spaces.normalize(r),function(){t.setEnd(r,n)})):r&&!s&&r.nodeType==Node.TEXT_NODE?(n=r.textContent.length,i?(E.spaces.normalize(r),function(){t.setStart(r,n)}):(E.spaces.normalize(r),function(){t.setEnd(r,n)})):!(!s||r||s.nodeType!=Node.TEXT_NODE)&&(i?(E.spaces.normalize(s),function(){t.setStart(s,0)}):(E.spaces.normalize(s),function(){t.setEnd(s,0)}))}function A(){return!0}function S(){for(var e=d(),t=0;t<e.length;t++)if(!e[t].collapsed)return!1;return!0}function n(e){var t,i,n=!1,r=!1;if(E.win.getSelection){var s=E.win.getSelection();s.rangeCount&&((i=(t=s.getRangeAt(0)).cloneRange()).selectNodeContents(e),i.setEnd(t.startContainer,t.startOffset),n=""===i.toString(),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),r=""===i.toString())}else E.doc.selection&&"Control"!=E.doc.selection.type&&((i=(t=E.doc.selection.createRange()).duplicate()).moveToElementText(e),i.setEndPoint("EndToStart",t),n=""===i.text,i.moveToElementText(e),i.setEndPoint("StartToEnd",t),r=""===i.text);return{atStart:n,atEnd:r}}function r(){if(S())return!1;E.$el.find("td, th, img, br:not(:last)").prepend('<span class="fr-mk">'+ze.FE.INVISIBLE_SPACE+"</span>");var e=!1,t=n(E.el);return t.atStart&&t.atEnd&&(e=!0),E.$el.find(".fr-mk").remove(),e}function s(e,t){void 0===t&&(t=!0);var i=ze(e).html();i&&i.replace(/\u200b/g,"").length!=i.length&&ze(e).html(i.replace(/\u200b/g,""));for(var n=E.node.contents(e),r=0;r<n.length;r++)n[r].nodeType!=Node.ELEMENT_NODE?ze(n[r]).remove():(s(n[r],0===r),0===r&&(t=!1));e.nodeType==Node.TEXT_NODE?ze(e).replaceWith('<span data-first="true" data-text="true"></span>'):t&&ze(e).attr("data-first",!0)}function a(){return 0===ze(this).find("fr-inner").length}function x(e,t){var i=E.node.contents(e.get(0));0<=["TD","TH"].indexOf(e.get(0).tagName)&&1==e.find(".fr-marker").length&&E.node.hasClass(i[0],"fr-marker")&&e.attr("data-del-cell",!0);for(var n=0;n<i.length;n++){var r=i[n];E.node.hasClass(r,"fr-marker")?t=(t+1)%2:t?0<ze(r).find(".fr-marker").length?t=x(ze(r),t):["TD","TH"].indexOf(r.tagName)<0&&!E.node.hasClass(r,"fr-inner")?!E.opts.keepFormatOnDelete||0<E.$el.find("[data-first]").length?ze(r).remove():s(r):E.node.hasClass(r,"fr-inner")?0===ze(r).find(".fr-inner").length?ze(r).html("<br>"):ze(r).find(".fr-inner").filter(a).html("<br>"):(ze(r).empty(),ze(r).attr("data-del-cell",!0)):0<ze(r).find(".fr-marker").length&&(t=x(ze(r),t))}return t}function u(){try{if(!E.$wp)return!1;for(var e=d(0).commonAncestorContainer;e&&!E.node.isElement(e);)e=e.parentNode;return!!E.node.isElement(e)}catch(y){return!1}}function l(){if(S())return!0;var e;T();var t=function(e){for(var t=e.previousSibling;t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;){var i=t;t=t.previousSibling,ze(i).remove()}return t},i=function(e){for(var t=e.nextSibling;t&&t.nodeType==Node.TEXT_NODE&&0===t.textContent.length;){var i=t;t=t.nextSibling,ze(i).remove()}return t},n=E.$el.find('.fr-marker[data-type="true"]');for(e=0;e<n.length;e++)for(var r=n[e];!(t(r)||E.node.isBlock(r.parentNode)||E.$el.is(r.parentNode)||E.node.hasClass(r.parentNode,"fr-inner"));)ze(r.parentNode).before(r);var s=E.$el.find('.fr-marker[data-type="false"]');for(e=0;e<s.length;e++){for(var o=s[e];!(i(o)||E.node.isBlock(o.parentNode)||E.$el.is(o.parentNode)||E.node.hasClass(o.parentNode,"fr-inner"));)ze(o.parentNode).after(o);o.parentNode&&E.node.isBlock(o.parentNode)&&E.node.isEmpty(o.parentNode)&&!E.$el.is(o.parentNode)&&!E.node.hasClass(o.parentNode,"fr-inner")&&E.opts.keepFormatOnDelete&&ze(o.parentNode).after(o)}if(A()){x(E.$el,0);var a=E.$el.find('[data-first="true"]');if(a.length)E.$el.find(".fr-marker").remove(),a.append(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS).removeAttr("data-first"),a.attr("data-text")&&a.replaceWith(a.html());else for(E.$el.find("table").filter(function(){return 0<ze(this).find("[data-del-cell]").length&&ze(this).find("[data-del-cell]").length==ze(this).find("td, th").length}).remove(),E.$el.find("[data-del-cell]").removeAttr("data-del-cell"),n=E.$el.find('.fr-marker[data-type="true"]'),e=0;e<n.length;e++){var l=n[e],c=l.nextSibling,d=E.$el.find('.fr-marker[data-type="false"][data-id="'+ze(l).data("id")+'"]').get(0);if(d){if(l&&(!c||c!=d)){var f=E.node.blockParent(l),u=E.node.blockParent(d),p=!1,h=!1;if(f&&0<=["UL","OL"].indexOf(f.tagName)&&(f=null,p=!0),u&&0<=["UL","OL"].indexOf(u.tagName)&&(u=null,h=!0),ze(l).after(d),f!=u)if(null!=f||p)if(null!=u||h||0!==ze(f).parentsUntil(E.$el,"table").length)f&&u&&0===ze(f).parentsUntil(E.$el,"table").length&&0===ze(u).parentsUntil(E.$el,"table").length&&(ze(f).append(ze(u).html()),ze(u).remove());else{for(c=f;!c.nextSibling&&c.parentNode!=E.el;)c=c.parentNode;for(c=c.nextSibling;c&&"BR"!=c.tagName;){var g=c.nextSibling;ze(f).append(c),c=g}c&&"BR"==c.tagName&&ze(c).remove()}else{var m=E.node.deepestParent(l);m?(ze(m).after(ze(u).html()),ze(u).remove()):0===ze(u).parentsUntil(E.$el,"table").length&&(ze(l).next().after(ze(u).html()),ze(u).remove())}}}else d=ze(l).clone().attr("data-type",!1),ze(l).after(d)}}E.opts.keepFormatOnDelete||E.html.fillEmptyBlocks(),E.html.cleanEmptyTags(!0),E.clean.lists(),E.spaces.normalize();var v=E.$el.find(".fr-marker:last").get(0),b=E.$el.find(".fr-marker:first").get(0);void 0!==v&&void 0!==b&&!v.nextSibling&&b.previousSibling&&"BR"==b.previousSibling.tagName&&E.node.isElement(v.parentNode)&&E.node.isElement(b.parentNode)&&E.$el.append("<br>"),C()}function c(e,t){if(!e||0<e.getElementsByClassName("fr-marker").length)return!1;for(var i=e.firstChild;i&&(E.node.isBlock(i)||t&&!E.node.isVoid(i)&&i.nodeType==Node.ELEMENT_NODE);)i=(e=i).firstChild;e.innerHTML=ze.FE.MARKERS+e.innerHTML}function p(e,t){if(!e||0<e.getElementsByClassName("fr-marker").length)return!1;for(var i=e.lastChild;i&&(E.node.isBlock(i)||t&&!E.node.isVoid(i)&&i.nodeType==Node.ELEMENT_NODE);)i=(e=i).lastChild;var n=E.doc.createElement("SPAN");n.setAttribute("id","fr-sel-markers"),n.innerHTML=ze.FE.MARKERS,e.appendChild(n);var r=e.querySelector("#fr-sel-markers");r.outerHTML=r.innerHTML}function R(e,t){void 0===t&&(t=!0);for(var i=e.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;)i=i.previousSibling;return i?(E.node.isBlock(i)?p(i):"BR"==i.tagName?ze(i).before(ze.FE.MARKERS):ze(i).after(ze.FE.MARKERS),!0):!!t&&(E.node.isBlock(e)?c(e):ze(e).before(ze.FE.MARKERS),!0)}function h(e,t){void 0===t&&(t=!0);for(var i=e.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;)i=i.nextSibling;return i?(E.node.isBlock(i)?c(i):ze(i).before(ze.FE.MARKERS),!0):!!t&&(E.node.isBlock(e)?p(e):ze(e).after(ze.FE.MARKERS),!0)}return{text:o,get:y,ranges:d,clear:_,element:e,endElement:t,save:T,restore:C,isCollapsed:S,isFull:r,inEditor:u,remove:l,blocks:i,info:n,setAtEnd:p,setAtStart:c,setBefore:R,setAfter:h,rangeElement:f}},ze.extend(ze.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","name","novalidate","open","optimum","pattern","ping","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowedStyleProps:[".*"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),ze.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},ze.FE.MODULES.clean=function(l){function r(e){if(e.nodeType==Node.ELEMENT_NODE&&e.getAttribute("class")&&0<=e.getAttribute("class").indexOf("fr-marker"))return!1;var t,i=l.node.contents(e),n=[];for(t=0;t<i.length;t++)i[t].nodeType!=Node.ELEMENT_NODE||l.node.isVoid(i[t])?i[t].nodeType==Node.TEXT_NODE&&(i[t].textContent=i[t].textContent.replace(/\u200b/g,"")):i[t].textContent.replace(/\u200b/g,"").length!=i[t].textContent.length&&r(i[t]);if(e.nodeType==Node.ELEMENT_NODE&&!l.node.isVoid(e)&&(e.normalize(),i=l.node.contents(e),n=e.querySelectorAll(".fr-marker"),i.length-n.length==0)){for(t=0;t<i.length;t++)if((i[t].getAttribute("class")||"").indexOf("fr-marker")<0)return!1;for(t=0;t<n.length;t++)e.parentNode.insertBefore(n[t].cloneNode(!0),e);return e.parentNode.removeChild(e),!1}}function a(e,t){if(e.nodeType==Node.COMMENT_NODE)return"<!--"+e.nodeValue+"-->";if(e.nodeType==Node.TEXT_NODE)return t?e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&nbsp;").replace(/\u0009/g,"");if(e.nodeType!=Node.ELEMENT_NODE)return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&0<=["STYLE","SCRIPT","NOSCRIPT"].indexOf(e.tagName))return e.outerHTML;if(e.nodeType==Node.ELEMENT_NODE&&"svg"==e.tagName){var i=document.createElement("div"),n=e.cloneNode(!0);return i.appendChild(n),i.innerHTML}if("IFRAME"==e.tagName)return e.outerHTML.replace(/\&lt;/g,"<").replace(/\&gt;/g,">");var r=e.childNodes;if(0===r.length)return e.outerHTML;for(var s="",o=0;o<r.length;o++)"PRE"==e.tagName&&(t=!0),s+=a(r[o],t);return l.node.openTagString(e)+s+l.node.closeTagString(e)}function s(e){return F=[],(e=(e=(e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(e){return F.push(e),"[FROALA.EDITOR.SCRIPT "+(F.length-1)+"]"})).replace(/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi,function(e){return F.push(e),"[FROALA.EDITOR.NOSCRIPT "+(F.length-1)+"]"})).replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,function(e){return F.push(e),"[FROALA.EDITOR.IFRAME "+(F.length-1)+"]"})).replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="')}function o(e){return(e=(e=(e=e.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(e,t){return 0<=l.opts.htmlRemoveTags.indexOf("script")?"":F[parseInt(t,10)]})).replace(/\[FROALA\.EDITOR\.NOSCRIPT ([\d]*)\]/gi,function(e,t){return 0<=l.opts.htmlRemoveTags.indexOf("noscript")?"":F[parseInt(t,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")})).replace(/\[FROALA\.EDITOR\.IFRAME ([\d]*)\]/gi,function(e,t){return 0<=l.opts.htmlRemoveTags.indexOf("iframe")?"":F[parseInt(t,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")})).replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function c(e){var t=e.replace(/;;/gi,";");return";"!=(t=t.replace(/^;/gi,"")).charAt(t.length)&&(t+=";"),t}function d(e){var t;for(t in e)if(e.hasOwnProperty(t)){var i=t.match(N),n=null;"style"==t&&l.opts.htmlAllowedStyleProps.length&&(n=e[t].match(O)),i&&n?e[t]=c(n.join(";")):i&&("style"!=t||n)||delete e[t]}for(var r="",s=Object.keys(e).sort(),o=0;o<s.length;o++)e[t=s[o]].indexOf('"')<0?r+=" "+t+'="'+e[t]+'"':r+=" "+t+"='"+e[t]+"'";return r}function f(e,t,i){if(l.opts.fullPage){var n=l.html.extractDoctype(i),r=d(l.html.extractNodeAttrs(i,"html"));return t=null==t?l.html.extractNode(i,"head")||"<title></title>":t,n+"<html"+r+"><head"+d(l.html.extractNodeAttrs(i,"head"))+">"+t+"</head><body"+d(l.html.extractNodeAttrs(i,"body"))+">"+e+"</body></html>"}return e}function u(e,t){var i,n=ze("<div>"+e+"</div>"),r="";if(n){var s=l.node.contents(n.get(0));for(i=0;i<s.length;i++)t(s[i]);for(s=l.node.contents(n.get(0)),i=0;i<s.length;i++)r+=a(s[i])}return r}function p(e,t,i){var n=e=s(e),r=null;return l.opts.fullPage&&(n=l.html.extractNode(e,"body")||(0<=e.indexOf("<body")?"":e),i&&(r=l.html.extractNode(e,"head")||"")),n=u(n,t),r&&(r=u(r,t)),o(f(n,r,e))}function e(e){return e.replace(/\u200b/g,"").length==e.length?e:l.clean.exec(e,r)}function t(){var e=l.el.querySelectorAll(Object.keys(ze.FE.HTML5Map).join(","));if(e.length){var t=!1;l.el.querySelector(".fr-marker")||(l.selection.save(),t=!0);for(var i=0;i<e.length;i++)""===l.node.attributes(e[i])&&ze(e[i]).replaceWith("<"+ze.FE.HTML5Map[e[i].tagName]+">"+e[i].innerHTML+"</"+ze.FE.HTML5Map[e[i].tagName]+">");t&&l.selection.restore()}}function h(e){var t=l.doc.createElement("DIV");return t.innerText=e,t.textContent}function n(e){if("SPAN"==e.tagName&&0<=(e.getAttribute("class")||"").indexOf("fr-marker"))return!1;if("PRE"==e.tagName&&m(e),e.nodeType==Node.ELEMENT_NODE&&(e.getAttribute("data-fr-src")&&0!==e.getAttribute("data-fr-src").indexOf("blob:")&&e.setAttribute("data-fr-src",l.helpers.sanitizeURL(h(e.getAttribute("data-fr-src")))),e.getAttribute("href")&&e.setAttribute("href",l.helpers.sanitizeURL(h(e.getAttribute("href")))),e.getAttribute("src")&&e.setAttribute("src",l.helpers.sanitizeURL(h(e.getAttribute("src")))),0<=["TABLE","TBODY","TFOOT","TR"].indexOf(e.tagName)&&(e.innerHTML=e.innerHTML.trim())),!l.opts.pasteAllowLocalImages&&e.nodeType==Node.ELEMENT_NODE&&"IMG"==e.tagName&&e.getAttribute("data-fr-src")&&0===e.getAttribute("data-fr-src").indexOf("file://"))return e.parentNode.removeChild(e),!1;if(e.nodeType==Node.ELEMENT_NODE&&ze.FE.HTML5Map[e.tagName]&&""===l.node.attributes(e)){var t=ze.FE.HTML5Map[e.tagName],i="<"+t+">"+e.innerHTML+"</"+t+">";e.insertAdjacentHTML("beforebegin",i),(e=e.previousSibling).parentNode.removeChild(e.nextSibling)}if(l.opts.htmlAllowComments||e.nodeType!=Node.COMMENT_NODE)if(e.tagName&&e.tagName.match(I))e.parentNode.removeChild(e);else if(e.tagName&&!e.tagName.match(D))"svg"===e.tagName?e.parentNode.removeChild(e):l.browser.safari&&"path"==e.tagName&&e.parentNode&&"svg"==e.parentNode.tagName||(e.outerHTML=e.innerHTML);else{var n=e.attributes;if(n)for(var r=n.length-1;0<=r;r--){var s=n[r],o=s.nodeName.match(N),a=null;"style"==s.nodeName&&l.opts.htmlAllowedStyleProps.length&&(a=s.value.match(O)),o&&a?s.value=c(a.join(";")):o&&("style"!=s.nodeName||a)||e.removeAttribute(s.nodeName)}}else 0!==e.data.indexOf("[FROALA.EDITOR")&&e.parentNode.removeChild(e)}function g(e){for(var t=l.node.contents(e),i=0;i<t.length;i++)t[i].nodeType!=Node.TEXT_NODE&&g(t[i]);n(e)}function m(e){var t=e.innerHTML;0<=t.indexOf("\n")&&(e.innerHTML=t.replace(/\n/g,"<br>"))}function i(e,t,i,n){void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===n&&(n=!1),e=e.replace(/<br> */g,"<br>");var r,s=ze.merge([],l.opts.htmlAllowedTags);for(r=0;r<t.length;r++)0<=s.indexOf(t[r])&&s.splice(s.indexOf(t[r]),1);var o=ze.merge([],l.opts.htmlAllowedAttrs);for(r=0;r<i.length;r++)0<=o.indexOf(i[r])&&o.splice(o.indexOf(i[r]),1);return o.push("data-fr-.*"),o.push("fr-.*"),D=new RegExp("^"+s.join("$|^")+"$","gi"),N=new RegExp("^"+o.join("$|^")+"$","gi"),I=new RegExp("^"+l.opts.htmlRemoveTags.join("$|^")+"$","gi"),O=l.opts.htmlAllowedStyleProps.length?new RegExp("((^|;|\\s)"+l.opts.htmlAllowedStyleProps.join(":.+?(?=;|$))|((^|;|\\s)")+":.+?(?=(;)|$))","gi"):null,p(e,g,!0)}function v(){for(var e=l.el.querySelectorAll("blockquote + blockquote"),t=0;t<e.length;t++){var i=e[t];l.node.attributes(i)==l.node.attributes(i.previousSibling)&&(ze(i).prev().append(ze(i).html()),ze(i).remove())}}function b(){for(var e=l.el.querySelectorAll("tr"),t=0;t<e.length;t++){for(var i=e[t].children,n=!0,r=0;r<i.length;r++)if("TH"!=i[r].tagName){n=!1;break}if(!1!==n&&0!==i.length){for(var s=e[t];s&&"TABLE"!=s.tagName&&"THEAD"!=s.tagName;)s=s.parentNode;var o=s;"THEAD"!=o.tagName&&(o=l.doc.createElement("THEAD"),s.insertBefore(o,s.firstChild)),o.appendChild(e[t])}}}function E(){var e=l.html.defaultTag();if(e)for(var t=l.el.querySelectorAll("td > "+e+", th > "+e),i=0;i<t.length;i++)""===l.node.attributes(t[i])&&ze(t[i]).replaceWith(t[i].innerHTML+"<br>")}function y(){b(),E()}function _(){var e=[],t=function(e){return!l.node.isList(e.parentNode)};do{if(e.length){var i=e[0],n=l.doc.createElement("ul");i.parentNode.insertBefore(n,i);do{var r=i;i=i.nextSibling,n.appendChild(r)}while(i&&"LI"==i.tagName)}e=[];for(var s=l.el.querySelectorAll("li"),o=0;o<s.length;o++)t(s[o])&&e.push(s[o])}while(0<e.length)}function T(){for(var e=l.el.querySelectorAll("ol + ol, ul + ul"),t=0;t<e.length;t++){var i=e[t];if(l.node.isList(i.previousSibling)&&l.node.openTagString(i)==l.node.openTagString(i.previousSibling)){for(var n=l.node.contents(i),r=0;r<n.length;r++)i.previousSibling.appendChild(n[r]);i.parentNode.removeChild(i)}}}function C(){var e,t,i=function(e){e.querySelector("LI")||(t=!0,e.parentNode.removeChild(e))};do{t=!1;var n=l.el.querySelectorAll("li:empty");for(e=0;e<n.length;e++)n[e].parentNode.removeChild(n[e]);var r=l.el.querySelectorAll("ul, ol");for(e=0;e<r.length;e++)i(r[e])}while(!0===t)}function w(){for(var e=l.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),t=0;t<e.length;t++){var i=e[t],n=i.previousSibling;n&&("LI"==n.tagName?n.appendChild(i):ze(i).wrap("<li></li>"))}}function A(){for(var e=l.el.querySelectorAll("li > ul, li > ol"),t=0;t<e.length;t++){var i=e[t];if(i.nextSibling){var n=i.nextSibling,r=ze("<li>");ze(i.parentNode).after(r);do{var s=n;n=n.nextSibling,r.append(s)}while(n)}}}function S(){for(var e=l.el.querySelectorAll("li > ul, li > ol"),t=0;t<e.length;t++){var i=e[t];if(l.node.isFirstSibling(i))ze(i).before("<br/>");else if(i.previousSibling&&"BR"==i.previousSibling.tagName){for(var n=i.previousSibling.previousSibling;n&&l.node.hasClass(n,"fr-marker");)n=n.previousSibling;n&&"BR"!=n.tagName&&ze(i.previousSibling).remove()}}}function x(){for(var e=l.el.querySelectorAll("li:empty"),t=0;t<e.length;t++)ze(e[t]).remove()}function R(){for(var e=l.el.querySelectorAll("ul, ol"),t=0;t<e.length;t++)for(var i=l.node.contents(e[t]),n=null,r=i.length-1;0<=r;r--)"LI"!=i[r].tagName?(n||(n=ze("<li>")).insertBefore(i[r]),n.prepend(i[r])):n=null}function k(){_(),T(),R(),C(),w(),A(),S(),x()}function L(){l.opts.fullPage&&ze.merge(l.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])}var D,I,N,O,F=[];return{_init:L,html:i,toHTML5:t,tables:y,lists:k,quotes:v,invisibleSpaces:e,exec:p}},ze.FE.MODULES.spaces=function(l){function n(e,t){var i=e.previousSibling,n=e.nextSibling,r=e.textContent,s=e.parentNode;if(!l.html.isPreformatted(s)){t&&(r=r.replace(/[\f\n\r\t\v ]{2,}/g," "),n&&"BR"!==n.tagName&&!l.node.isBlock(n)||!l.node.isBlock(s)&&!l.node.isLink(s)||(r=r.replace(/[\f\n\r\t\v ]{1,}$/g,"")),i&&"BR"!==i.tagName&&!l.node.isBlock(i)||!l.node.isBlock(s)&&!l.node.isLink(s)||(r=r.replace(/^[\f\n\r\t\v ]{1,}/g,""))," "===r&&(i&&i.nodeType!=Node.TEXT_NODE||n&&n.nodeType!=Node.TEXT_NODE)&&(r="")),r=r.replace(new RegExp(ze.FE.UNICODE_NBSP,"g")," ");for(var o="",a=0;a<r.length;a++)32!=r.charCodeAt(a)||0!==a&&32!=o.charCodeAt(a-1)?o+=r[a]:o+=ze.FE.UNICODE_NBSP;(!n||n&&l.node.isBlock(n)||n&&n.nodeType==Node.ELEMENT_NODE&&l.win.getComputedStyle(n)&&"block"==l.win.getComputedStyle(n).display)&&(o=o.replace(/ $/,ze.FE.UNICODE_NBSP)),!i||l.node.isVoid(i)||l.node.isBlock(i)||(1!==(o=o.replace(/^\u00A0([^ $])/," $1")).length||160!==o.charCodeAt(0)||!n||l.node.isVoid(n)||l.node.isBlock(n)||(o=" ")),o=o.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2"),e.textContent!=o&&(e.textContent=o)}}function a(e,t){if(void 0!==e&&e||(e=l.el),void 0===t&&(t=!1),!e.getAttribute||"false"!=e.getAttribute("contenteditable"))if(e.nodeType==Node.TEXT_NODE)n(e,t);else if(e.nodeType==Node.ELEMENT_NODE)for(var i=l.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,l.node.filter(function(e){for(var t=e.parentNode;t&&t!==l.el;){if("STYLE"==t.tagName||"IFRAME"==t.tagName)return!1;if("PRE"===t.tagName)return!1;t=t.parentNode}return null!=e.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!l.node.hasClass(e.parentNode,"fr-marker")}),!1);i.nextNode();)n(i.currentNode,t)}function e(){for(var e=[],t=l.el.querySelectorAll(".fr-marker"),i=0;i<t.length;i++){for(var n=null,r=(n=l.node.blockParent(t[i])||t[i]).nextSibling,s=n.previousSibling;r&&"BR"==r.tagName;)r=r.nextSibling;for(;s&&"BR"==s.tagName;)s=s.previousSibling;n&&e.indexOf(n)<0&&e.push(n),s&&e.indexOf(s)<0&&e.push(s),r&&e.indexOf(r)<0&&e.push(r)}for(var o=0;o<e.length;o++)a(e[o])}return{normalize:a,normalizeAroundCursor:e}},ze.FE.UNICODE_NBSP=String.fromCharCode(160),ze.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],ze.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],ze.extend(ze.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon",".fr-inner"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),ze.FE.MODULES.html=function(T){function d(){return T.opts.enter==ze.FE.ENTER_P?"p":T.opts.enter==ze.FE.ENTER_DIV?"div":T.opts.enter==ze.FE.ENTER_BR?null:void 0}function a(e,t){return!(!e||e===T.el)&&(t?-1!=["PRE","SCRIPT","STYLE"].indexOf(e.tagName)||a(e.parentNode,t):-1!=["PRE","SCRIPT","STYLE"].indexOf(e.tagName))}function s(e){var t,i=[],n=[];if(e){var r=T.el.querySelectorAll(".fr-marker");for(t=0;t<r.length;t++){var s=T.node.blockParent(r[t])||r[t];if(s){var o=s.nextSibling,a=s.previousSibling;s&&n.indexOf(s)<0&&T.node.isBlock(s)&&n.push(s),a&&T.node.isBlock(a)&&n.indexOf(a)<0&&n.push(a),o&&T.node.isBlock(o)&&n.indexOf(o)<0&&n.push(o)}}}else n=T.el.querySelectorAll(u());var l=u();for(l+=","+ze.FE.VOID_ELEMENTS.join(","),l+=", .fr-inner",l+=","+T.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)",t=n.length-1;0<=t;t--)if(!(n[t].textContent&&0<n[t].textContent.replace(/\u200B|\n/g,"").length||0<n[t].querySelectorAll(l).length)){for(var c=T.node.contents(n[t]),d=!1,f=0;f<c.length;f++)if(c[f].nodeType!=Node.COMMENT_NODE&&c[f].textContent&&0<c[f].textContent.replace(/\u200B|\n/g,"").length){d=!0;break}d||i.push(n[t])}return i}function e(){return ze.FE.BLOCK_TAGS.join(":empty, ")+":empty"}function u(){return ze.FE.BLOCK_TAGS.join(", ")}function t(e){var t,i,n=ze.merge([],ze.FE.VOID_ELEMENTS);n=ze.merge(n,T.opts.htmlAllowedEmptyTags),void 0===e&&(n=ze.merge(n,ze.FE.BLOCK_TAGS)),t=T.el.querySelectorAll("*:empty:not("+n.join("):not(")+"):not(.fr-marker)");do{i=!1;for(var r=0;r<t.length;r++)0!==t[r].attributes.length&&void 0===t[r].getAttribute("href")||(t[r].parentNode.removeChild(t[r]),i=!0);t=T.el.querySelectorAll("*:empty:not("+n.join("):not(")+"):not(.fr-marker)")}while(t.length&&i)}function o(e,t){var i=d();if(t&&(i="div"),i){for(var n=T.doc.createDocumentFragment(),r=null,s=!1,o=e.firstChild,a=!1;o;){var l=o.nextSibling;if(o.nodeType==Node.ELEMENT_NODE&&(T.node.isBlock(o)||0<=T.opts.htmlDoNotWrapTags.indexOf(o.tagName.toLowerCase())&&!T.node.hasClass(o,"fr-marker")))r=null,n.appendChild(o.cloneNode(!0));else if(o.nodeType!=Node.ELEMENT_NODE&&o.nodeType!=Node.TEXT_NODE)r=null,n.appendChild(o.cloneNode(!0));else if("BR"==o.tagName)null==r?(r=T.doc.createElement(i),t&&r.setAttribute("class","fr-temp-div"),r.setAttribute("data-empty",!0),r.appendChild(o.cloneNode(!0)),n.appendChild(r),a=!0):!1===s&&(r.appendChild(T.doc.createElement("br")),t&&r.setAttribute("class","fr-temp-div"),r.setAttribute("data-empty",!0)),r=null;else{var c=o.textContent;o.nodeType==Node.TEXT_NODE&&0===c.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||(null==r&&(r=T.doc.createElement(i),t&&r.setAttribute("class","fr-temp-div"),n.appendChild(r),s=!1,a=!0),r.appendChild(o.cloneNode(!0)),s||T.node.hasClass(o,"fr-marker")||o.nodeType==Node.TEXT_NODE&&0===c.replace(/ /g,"").length||(s=!0))}o=l}a&&(e.innerHTML="",e.appendChild(n))}}function l(e,t){for(var i=0;i<e.length;i++)o(e[i],t)}function i(e,t,i,n){if(!T.$wp)return!1;void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=T.$wp.scrollTop();o(T.el,e),n&&l(T.el.querySelectorAll(".fr-inner"),e),t&&l(T.el.querySelectorAll("td, th"),e),i&&l(T.el.querySelectorAll("blockquote"),e),r!=T.$wp.scrollTop()&&T.$wp.scrollTop(r)}function n(){T.$el.find("div.fr-temp-div").each(function(){ze(this).attr("data-empty")||0<=["LI"].indexOf(this.parentNode.tagName)||T.node.isBlock(this.nextSibling)&&!ze(this.nextSibling).hasClass("fr-temp-div")?ze(this).replaceWith(ze(this).html()):ze(this).replaceWith(ze(this).html()+"<br>")}),T.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""===ze(this).attr("class")}).removeAttr("class")}function r(e){for(var t=s(e),i=0;i<t.length;i++){var n=t[i];"false"===n.getAttribute("contenteditable")||n.querySelector(T.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||T.node.isVoid(n)||"TABLE"!=n.tagName&&"TBODY"!=n.tagName&&"TR"!=n.tagName&&"UL"!=n.tagName&&"OL"!=n.tagName&&n.appendChild(T.doc.createElement("br"))}if(T.browser.msie&&T.opts.enter==ze.FE.ENTER_BR){var r=T.node.contents(T.el);r.length&&r[r.length-1].nodeType==Node.TEXT_NODE&&T.$el.append("<br>")}}function c(){return T.$el.get(0).querySelectorAll(u())}function f(e){if(void 0===e&&(e=T.el),e&&0<=["SCRIPT","STYLE","PRE"].indexOf(e.tagName))return!1;for(var t=T.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,T.node.filter(function(e){return null!=e.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);t.nextNode();){var i=t.currentNode;if(!a(i.parentNode,!0)){var n=T.node.isBlock(i.parentNode)||T.node.isElement(i.parentNode),r=i.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(n){var s=i.previousSibling,o=i.nextSibling;s&&o&&" "==r?r=T.node.isBlock(s)&&T.node.isBlock(o)?"":"\n":(s||(r=r.replace(/^ */,"")),o||(r=r.replace(/ *$/,"")))}i.textContent=r}}}function p(e,t,i){var n=new RegExp(t,"gi").exec(e);return n?n[i]:null}function h(e,t){var i=e.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i);return i?t.implementation.createDocumentType(i[1],i[3],i[4]):t.implementation.createDocumentType("html")}function C(e){var t=e.doctype,i="<!DOCTYPE html>";return t&&(i="<!DOCTYPE "+t.name+(t.publicId?' PUBLIC "'+t.publicId+'"':"")+(!t.publicId&&t.systemId?" SYSTEM":"")+(t.systemId?' "'+t.systemId+'"':"")+">"),i}function g(e,t){var i=e.parentNode;if(i&&(T.node.isBlock(i)||T.node.isElement(i))&&["TD","TH"].indexOf(i.tagName)<0){for(var n=e.previousSibling,r=e.nextSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.replace(/\n|\r/g,"").length;)n=n.previousSibling;n&&i&&"BR"!=n.tagName&&!T.node.isBlock(n)&&!r&&0<i.textContent.replace(/\u200B/g,"").length&&0<n.textContent.length&&!T.node.hasClass(n,"fr-marker")&&(T.el==i&&!r&&T.opts.enter==ze.FE.ENTER_BR&&T.browser.msie||(t&&T.selection.save(),e.parentNode.removeChild(e),t&&T.selection.restore()))}else!i||T.node.isBlock(i)||T.node.isElement(i)||e.previousSibling||e.nextSibling||g(e.parentNode,t)}function m(){var e,t,i=T.selection.element(),n=[];if(e=T.node.isBlock(i)?i:T.node.blockParent(i)){var r=e.nextSibling,s=e.previousSibling;e&&n.indexOf(e)<0&&n.push(e),s&&T.node.isBlock(s)&&n.indexOf(s)<0&&n.push(s),r&&T.node.isBlock(r)&&n.indexOf(r)<0&&n.push(r)}var o=[];for(t=0;t<n.length;t++)for(var a=n[t].querySelectorAll("br"),l=0;l<a.length;l++)o.indexOf(a[l])<0&&o.push(a[l]);if(i.parentNode==T.el){var c=T.el.children;for(t=0;t<c.length;t++)"BR"==c[t].tagName&&o.indexOf(c[t])<0&&o.push(c[t])}return o}function v(e,t){var i,n=null;if(e)for(n=m(),i=0;i<n.length;i++)g(n[i],t);else for(n=T.el.getElementsByTagName("br"),i=0;i<n.length;i++)g(n[i],t)}function b(){T.opts.htmlUntouched||(t(),i()),f(),T.opts.htmlUntouched||(T.spaces.normalize(null,!0),T.html.fillEmptyBlocks(),T.clean.quotes(),T.clean.lists(),T.clean.tables(),T.clean.toHTML5(),T.html.cleanBRs()),T.selection.restore(),
E(),T.placeholder.refresh()}function E(){T.core.isEmpty()&&(null!=d()?T.el.querySelector(u())||T.el.querySelector(T.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(T.core.hasFocus()?(T.$el.html("<"+d()+">"+ze.FE.MARKERS+"<br/></"+d()+">"),T.selection.restore()):T.$el.html("<"+d()+"><br/></"+d()+">")):T.el.querySelector("*:not(.fr-marker):not(br)")||(T.core.hasFocus()?(T.$el.html(ze.FE.MARKERS+"<br/>"),T.selection.restore()):T.$el.html("<br/>")))}function y(e,t){return p(e,"<"+t+"[^>]*?>([\\w\\W]*)</"+t+">",1)}function w(e,t){var i=ze("<div "+(p(e,"<"+t+"([^>]*?)>",1)||"")+">");return T.node.rawAttributes(i.get(0))}function _(e){return p(e,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>"}function A(e,t){T.opts.htmlExecuteScripts?e.html(t):e.get(0).innerHTML=t}function S(e){var t=T.clean.html(e||"",[],[],T.opts.fullPage);if(T.opts.fullPage){var i=y(t,"body")||(0<=t.indexOf("<body")?"":t),n=w(t,"body"),r=y(t,"head")||"<title></title>",s=w(t,"head"),o=ze("<div>").append(r).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||0<=["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName))&&this.parentNode.removeChild(this)}).end().html().trim();r=ze("<div>").append(r).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"<!--"+this.nodeValue+"-->":0<=["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)?this.outerHTML:""}).toArray().join("");var a=_(t),l=w(t,"html");A(T.$el,o+"\n"+i),T.node.clearAttributes(T.el),T.$el.attr(n),T.$el.addClass("fr-view"),T.$el.attr("spellcheck",T.opts.spellcheck),T.$el.attr("dir",T.opts.direction),A(T.$head,r),T.node.clearAttributes(T.$head.get(0)),T.$head.attr(s),T.node.clearAttributes(T.$html.get(0)),T.$html.attr(l),T.iframe_document.doctype.parentNode.replaceChild(h(a,T.iframe_document),T.iframe_document.doctype)}else A(T.$el,t);var c=T.edit.isDisabled();T.edit.on(),T.core.injectStyle(T.opts.iframeStyle),b(),T.opts.useClasses||(T.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),T.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),c&&T.edit.off(),T.events.trigger("html.set")}function x(e){var t,i=/(#[^\s\+>~\.\[:]+)/g,n=/(\[[^\]]+\])/g,r=/(\.[^\s\+>~\.\[:]+)/g,s=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,o=/(:[\w-]+\([^\)]*\))/gi,a=/(:[^\s\+>~\.\[:]+)/g,l=/([^\s\+>~\.\[:]+)/g;return(t=/:not\(([^\)]*)\)/g).test(e)&&(e=e.replace(t,"     $1 ")),100*(e.match(i)||[]).length+10*(e.match(n)||[]).length+10*(e.match(r)||[]).length+10*(e.match(o)||[]).length+10*(e.match(a)||[]).length+(e.match(s)||[]).length+((e=(e=e.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).match(l)||[]).length}function R(e){if(T.events.trigger("html.processGet",[e]),e&&e.getAttribute&&""===e.getAttribute("class")&&e.removeAttribute("class"),e&&e.getAttribute&&""===e.getAttribute("style")&&e.removeAttribute("style"),e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll('[class=""],[style=""]'),i=0;i<t.length;i++){var n=t[i];""===n.getAttribute("class")&&n.removeAttribute("class"),""===n.getAttribute("style")&&n.removeAttribute("style")}}function k(e,t){return e[3]-t[3]}function L(e,t){if(!T.$wp)return T.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML;var i="";T.events.trigger("html.beforeGet");var n,r,s=[],o={},a=[];if(!T.opts.useClasses&&!t){var l=new RegExp("^"+T.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(n=0;n<T.doc.styleSheets.length;n++){var c,d=0;try{c=T.doc.styleSheets[n].cssRules,T.doc.styleSheets[n].ownerNode&&"STYLE"==T.doc.styleSheets[n].ownerNode.nodeType&&(d=1)}catch(w){}if(c)for(var f=0,u=c.length;f<u;f++)if(c[f].selectorText&&0<c[f].style.cssText.length){var p,h=c[f].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{p=T.el.querySelectorAll(h)}catch(w){p=[]}for(r=0;r<p.length;r++){!p[r].getAttribute("fr-original-style")&&p[r].getAttribute("style")?(p[r].setAttribute("fr-original-style",p[r].getAttribute("style")),s.push(p[r])):p[r].getAttribute("fr-original-style")||s.push(p[r]),o[p[r]]||(o[p[r]]={});for(var g=1e3*d+x(c[f].selectorText),m=c[f].style.cssText.split(";"),v=0;v<m.length;v++){var b=m[v].trim().split(":")[0];b.match(l)||(o[p[r]][b]||(o[p[r]][b]=0)<=(p[r].getAttribute("fr-original-style")||"").indexOf(b+":")&&(o[p[r]][b]=1e4),g>=o[p[r]][b]&&(o[p[r]][b]=g,m[v].trim().length&&a.push([p[r],b.trim(),m[v].trim().split(":")[1].trim(),g])))}}}}for(a.sort(k),n=0;n<a.length;n++){var E=a[n];E[0].style[E[1]]=E[2]}for(n=0;n<s.length;n++)if(s[n].getAttribute("class")&&(s[n].setAttribute("fr-original-class",s[n].getAttribute("class")),s[n].removeAttribute("class")),0<(s[n].getAttribute("fr-original-style")||"").trim().length){var y=s[n].getAttribute("fr-original-style").split(";");for(r=0;r<y.length;r++)0<y[r].indexOf(":")&&(s[n].style[y[r].split(":")[0].trim()]=y[r].split(":")[1].trim())}}if(T.core.isEmpty()?T.opts.fullPage&&(i=C(T.iframe_document),i+="<html"+T.node.attributes(T.$html.get(0))+">"+T.$html.find("head").get(0).outerHTML+"<body></body></html>"):(void 0===e&&(e=!1),T.opts.fullPage?(i=C(T.iframe_document),T.$el.removeClass("fr-view"),i+="<html"+T.node.attributes(T.$html.get(0))+">"+T.$html.html()+"</html>",T.$el.addClass("fr-view")):i=T.$el.html()),!T.opts.useClasses&&!t)for(n=0;n<s.length;n++)s[n].getAttribute("fr-original-class")&&(s[n].setAttribute("class",s[n].getAttribute("fr-original-class")),s[n].removeAttribute("fr-original-class")),s[n].getAttribute("fr-original-style")?(s[n].setAttribute("style",s[n].getAttribute("fr-original-style")),s[n].removeAttribute("fr-original-style")):s[n].removeAttribute("style");T.opts.fullPage&&(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,"")).replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,"")).replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,"")).replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")).replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>")).replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>")).replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>')).replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),T.opts.htmlSimpleAmpersand&&(i=i.replace(/\&amp;/gi,"&")),T.events.trigger("html.afterGet"),e||(i=i.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),i=T.clean.invisibleSpaces(i),i=T.clean.exec(i,R);var _=T.events.chainTrigger("html.get",i);return"string"==typeof _&&(i=_),i.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(e){return e.replace(/<br>/g,"\n")})}function D(){var e=function(e,t){for(;t&&(t.nodeType==Node.TEXT_NODE||!T.node.isBlock(t))&&!T.node.isElement(t);)t&&t.nodeType!=Node.TEXT_NODE&&ze(e).wrapInner(T.node.openTagString(t)+T.node.closeTagString(t)),t=t.parentNode;t&&e.innerHTML==t.innerHTML&&(e.innerHTML=t.outerHTML)},t=function(){var e,t=null;return T.win.getSelection?(e=T.win.getSelection())&&e.rangeCount&&((t=e.getRangeAt(0).commonAncestorContainer).nodeType!=Node.ELEMENT_NODE&&(t=t.parentNode)):(e=T.doc.selection)&&"Control"!=e.type&&(t=e.createRange().parentElement()),null!=t&&(0<=ze.inArray(T.el,ze(t).parents())||t==T.el)?t:null},i="";if(void 0!==T.win.getSelection){T.browser.mozilla&&(T.selection.save(),1<T.$el.find('.fr-marker[data-type="false"]').length&&(T.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),T.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),T.$el.find(".fr-marker").not('[data-id="0"]').remove()),T.selection.restore());for(var n=T.selection.ranges(),r=0;r<n.length;r++){var s=document.createElement("div");s.appendChild(n[r].cloneContents());var o=s.children;if(o.length){var a=o[o.length-1];("P"==a.tagName&&T.opts.enter==ze.FroalaEditor.ENTER_P||"DIV"==a.tagName&&T.opts.enter==ze.FroalaEditor.ENTER_DIV)&&T.node.isEmpty(a)&&s.removeChild(a)}e(s,t()),0<ze(s).find(".fr-element").length&&(s=T.el),i+=s.innerHTML}}else void 0!==T.doc.selection&&"Text"==T.doc.selection.type&&(i=T.doc.selection.createRange().htmlText);return i}function I(e){var t=T.doc.createElement("div");return t.innerHTML=e,null!==t.querySelector(u())}function N(e){var t=T.doc.createElement("div");return t.innerHTML=e,T.selection.setAtEnd(t),t.innerHTML}function O(e){return e.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")}function F(e){if(!T.html.defaultTag())return e;var t=T.doc.createElement("div");t.innerHTML=e;for(var i=t.querySelectorAll(":scope > "+T.html.defaultTag()),n=i.length-1;0<=n;n--){var r=i[n];T.node.isBlock(r.previousSibling)||(r.previousSibling&&!T.node.isEmpty(r)&&ze("<br>").insertAfter(r.previousSibling),r.outerHTML=r.innerHTML)}return t.innerHTML}function M(e,t,i){var n;if(T.selection.isCollapsed()||T.selection.remove(),n=(n=t?e:T.clean.html(e)).replace(/\r|\n/g," "),e.indexOf('class="fr-marker"')<0&&(n=N(n)),T.core.isEmpty()&&!T.opts.keepFormatOnDelete&&I(n))T.el.innerHTML=n;else{var r=T.markers.insert();if(r){T.node.isLastSibling(r)&&ze(r).parent().hasClass("fr-deletable")&&ze(r).insertAfter(ze(r).parent());var s=T.node.blockParent(r);if((I(n)||i)&&(T.node.deepestParent(r)||s&&"LI"==s.tagName)){if(s&&"LI"==s.tagName&&(n=F(n)),!(r=T.markers.split()))return!1;r.outerHTML=n}else r.outerHTML=n}else T.el.innerHTML=T.el.innerHTML+n}b(),T.keys.positionCaret(),T.events.trigger("html.inserted")}function $(e){var t=null;if(void 0===e&&(t=T.selection.element()),T.opts.keepFormatOnDelete)return!1;var i,n,r=t?(t.textContent.match(/\u200B/g)||[]).length-t.querySelectorAll(".fr-marker").length:0;if((T.el.textContent.match(/\u200B/g)||[]).length-T.el.querySelectorAll(".fr-marker").length==r)return!1;do{n=!1,i=T.el.querySelectorAll("*:not(.fr-marker)");for(var s=0;s<i.length;s++){var o=i[s];if(t!=o){var a=o.textContent;0===o.children.length&&1===a.length&&8203==a.charCodeAt(0)&&"TD"!==o.tagName&&(ze(o).remove(),n=!0)}}}while(n)}function P(){if(T.$wp){var e=function(){$(),T.placeholder&&setTimeout(T.placeholder.refresh,0)};T.events.on("mouseup",e),T.events.on("keydown",e),T.events.on("contentChanged",E)}}return{defaultTag:d,isPreformatted:a,emptyBlocks:s,emptyBlockTagsQuery:e,blockTagsQuery:u,fillEmptyBlocks:r,cleanEmptyTags:t,cleanWhiteTags:$,cleanBlankSpaces:f,blocks:c,getDoctype:C,set:S,get:L,getSelected:D,insert:M,wrap:i,unwrap:n,escapeEntities:O,checkIfEmpty:E,extractNode:y,extractNodeAttrs:w,extractDoctype:_,cleanBRs:v,_init:P}},ze.extend(ze.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),ze.FE.MODULES.size=function(e){function t(){i(),e.opts.height&&e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom"))),e.$iframe.height(e.$el.outerHeight(!0))}function i(){e.opts.heightMin?e.$el.css("minHeight",e.opts.heightMin):e.$el.css("minHeight",""),e.opts.heightMax?(e.$wp.css("maxHeight",e.opts.heightMax),e.$wp.css("overflow","auto")):(e.$wp.css("maxHeight",""),e.$wp.css("overflow","")),e.opts.height?(e.$wp.height(e.opts.height),e.$wp.css("overflow","auto"),e.$el.css("minHeight",e.opts.height-e.helpers.getPX(e.$el.css("padding-top"))-e.helpers.getPX(e.$el.css("padding-bottom")))):(e.$wp.css("height",""),e.opts.heightMin||e.$el.css("minHeight",""),e.opts.heightMax||e.$wp.css("overflow","")),e.opts.width&&e.$box.width(e.opts.width)}function n(){if(!e.$wp)return!1;i(),e.$iframe&&(e.events.on("keyup keydown",function(){setTimeout(t,0)},!0),e.events.on("commands.after html.set init initialized paste.after",t))}return{_init:n,syncIframe:t,refresh:i}},ze.extend(ze.FE.DEFAULTS,{language:null}),ze.FE.LANGUAGE={},ze.FE.MODULES.language=function(e){function t(e){return n&&n.translation[e]&&n.translation[e].length?n.translation[e]:e}function i(){ze.FE.LANGUAGE&&(n=ze.FE.LANGUAGE[e.opts.language]),n&&n.direction&&(e.opts.direction=n.direction)}var n;return{_init:i,translate:t}},ze.extend(ze.FE.DEFAULTS,{placeholderText:"Type something"}),ze.FE.MODULES.placeholder=function(d){function e(){d.$placeholder||f();var e=d.opts.iframe?d.$iframe.prev().outerHeight(!0):d.$el.prev().outerHeight(!0),t=0,i=0,n=0,r=0,s=0,o=0,a=d.node.contents(d.el),l=ze(d.selection.element()).css("text-align");if(a.length&&a[0].nodeType==Node.ELEMENT_NODE){var c=ze(a[0]);(!d.opts.toolbarInline||0<d.$el.prev().length)&&d.ready&&(t=d.helpers.getPX(c.css("margin-top")),r=d.helpers.getPX(c.css("padding-top")),i=d.helpers.getPX(c.css("margin-left")),n=d.helpers.getPX(c.css("margin-right")),s=d.helpers.getPX(c.css("padding-left")),o=d.helpers.getPX(c.css("padding-right"))),d.$placeholder.css("font-size",c.css("font-size")),d.$placeholder.css("line-height",c.css("line-height"))}else d.$placeholder.css("font-size",d.$el.css("font-size")),d.$placeholder.css("line-height",d.$el.css("line-height"));d.$wp.addClass("show-placeholder"),d.$placeholder.css({marginTop:Math.max(d.helpers.getPX(d.$el.css("margin-top")),t)+e,paddingTop:Math.max(d.helpers.getPX(d.$el.css("padding-top")),r),paddingLeft:Math.max(d.helpers.getPX(d.$el.css("padding-left")),s),marginLeft:Math.max(d.helpers.getPX(d.$el.css("margin-left")),i),paddingRight:Math.max(d.helpers.getPX(d.$el.css("padding-right")),o),marginRight:Math.max(d.helpers.getPX(d.$el.css("margin-right")),n),textAlign:l}).text(d.language.translate(d.opts.placeholderText||d.$oel.attr("placeholder")||"")),d.$placeholder.html(d.$placeholder.text().replace(/\n/g,"<br>"))}function t(){d.$wp.removeClass("show-placeholder")}function i(){return!d.$wp||d.node.hasClass(d.$wp.get(0),"show-placeholder")}function n(){if(!d.$wp)return!1;d.core.isEmpty()?e():t()}function f(){d.$placeholder=ze('<span class="fr-placeholder"></span>'),d.$wp.append(d.$placeholder)}function r(){if(!d.$wp)return!1;d.events.on("init input keydown keyup contentChanged initialized",n)}return{_init:r,show:e,hide:t,refresh:n,isVisible:i}},ze.FE.MODULES.edit=function(e){function t(){if(e.browser.mozilla)try{e.doc.execCommand("enableObjectResizing",!1,"false"),e.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(t){}if(e.browser.msie)try{e.doc.body.addEventListener("mscontrolselect",function(e){return e.preventDefault(),!1})}catch(t){}}function i(){e.$wp?(e.$el.attr("contenteditable",!0),e.$el.removeClass("fr-disabled").attr("aria-disabled",!1),e.$tb&&e.$tb.removeClass("fr-disabled").attr("aria-disabled",!1),t()):e.$el.is("a")&&e.$el.attr("contenteditable",!0),o=!1}function n(){e.$wp?(e.$el.attr("contenteditable",!1),e.$el.addClass("fr-disabled").attr("aria-disabled",!0),e.$tb&&e.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):e.$el.is("a")&&e.$el.attr("contenteditable",!1),o=!0}function r(){return o}function s(){e.events.on("focus",function(){r()?e.edit.off():e.edit.on()})}var o=!1;return{_init:s,on:i,off:n,disableDesign:t,isDisabled:r}},ze.extend(ze.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}',iframeStyleFiles:[],direction:"auto",zIndex:1,tabIndex:null,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),ze.FE.MODULES.core=function(r){function e(e){if(r.opts.iframe){r.$head.find("style[data-fr-style], link[data-fr-style]").remove(),r.$head.append('<style data-fr-style="true">'+e+"</style>");for(var t=0;t<r.opts.iframeStyleFiles.length;t++){var i=ze('<link data-fr-style="true" rel="stylesheet" href="'+r.opts.iframeStyleFiles[t]+'">');i.get(0).addEventListener("load",r.size.syncIframe),r.$head.append(i)}}}function s(){r.opts.iframe||r.$el.addClass("fr-element fr-view")}function t(){if(r.$box.addClass("fr-box"+(r.opts.editorClass?" "+r.opts.editorClass:"")),r.$wp.addClass("fr-wrapper"),s(),r.opts.iframe){r.$iframe.addClass("fr-iframe"),r.$el.addClass("fr-view");for(var e=0;e<r.o_doc.styleSheets.length;e++){var t;try{t=r.o_doc.styleSheets[e].cssRules}catch(o){}if(t)for(var i=0,n=t.length;i<n;i++)!t[i].selectorText||0!==t[i].selectorText.indexOf(".fr-view")&&0!==t[i].selectorText.indexOf(".fr-element")||0<t[i].style.cssText.length&&(0===t[i].selectorText.indexOf(".fr-view")?r.opts.iframeStyle+=t[i].selectorText.replace(/\.fr-view/g,"body")+"{"+t[i].style.cssText+"}":r.opts.iframeStyle+=t[i].selectorText.replace(/\.fr-element/g,"body")+"{"+t[i].style.cssText+"}")}}"auto"!=r.opts.direction&&r.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+r.opts.direction),r.$el.attr("dir",r.opts.direction),r.$wp.attr("dir",r.opts.direction),1<r.opts.zIndex&&r.$box.css("z-index",r.opts.zIndex),r.opts.theme&&r.$box.addClass(r.opts.theme+"-theme"),r.opts.tabIndex=r.opts.tabIndex||r.$oel.attr("tabIndex"),r.opts.tabIndex&&r.$el.attr("tabIndex",r.opts.tabIndex)}function i(){return r.node.isEmpty(r.el)}function o(){r.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!r.win.FormData,progress:"upload"in new XMLHttpRequest}}function n(e,t){var i=new XMLHttpRequest;for(var n in i.open(t,e,!0),r.opts.requestWithCredentials&&(i.withCredentials=!0),r.opts.requestHeaders)r.opts.requestHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,r.opts.requestHeaders[n]);return i}function a(e){"TEXTAREA"==r.$oel.get(0).tagName&&r.$oel.val(e),r.$wp&&("TEXTAREA"==r.$oel.get(0).tagName?(r.$el.html(""),r.$wp.html(""),r.$box.replaceWith(r.$oel),r.$oel.show()):(r.$wp.replaceWith(e),r.$el.html(""),r.$box.removeClass("fr-view fr-ltr fr-box "+(r.opts.editorClass||"")),r.opts.theme&&r.$box.addClass(r.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null}function l(){return r.browser.mozilla&&r.helpers.isMobile()?r.selection.inEditor():r.node.hasFocus(r.el)||0<r.$el.find("*:focus").length}function c(e){if(!e)return!1;var t=e.data("instance");return!!t&&t.id==r.id}function d(){if(ze.FE.INSTANCES.push(r),o(),r.$wp){t(),r.html.set(r._original_html),r.$el.attr("spellcheck",r.opts.spellcheck),r.helpers.isMobile()&&(r.$el.attr("autocomplete",r.opts.spellcheck?"on":"off"),r.$el.attr("autocorrect",r.opts.spellcheck?"on":"off"),r.$el.attr("autocapitalize",r.opts.spellcheck?"on":"off")),r.opts.disableRightClick&&r.events.$on(r.$el,"contextmenu",function(e){if(2==e.button)return!1});try{r.doc.execCommand("styleWithCSS",!1,!1)}catch(e){}}"TEXTAREA"==r.$oel.get(0).tagName&&(r.events.on("contentChanged",function(){r.$oel.val(r.html.get())}),r.events.on("form.submit",function(){r.$oel.val(r.html.get())}),r.events.on("form.reset",function(){r.html.set(r._original_html)}),r.$oel.val(r.html.get())),r.helpers.isIOS()&&r.events.$on(r.$doc,"selectionchange",function(){r.$doc.get(0).hasFocus()||r.$win.get(0).focus()}),r.events.trigger("init")}return{_init:d,destroy:a,isEmpty:i,getXHR:n,injectStyle:e,hasFocus:l,sameInstance:c}},ze.FE.MODULES.cursorLists=function(g){function m(e){for(var t=e;"LI"!=t.tagName;)t=t.parentNode;return t}function v(e){for(var t=e;!g.node.isList(t);)t=t.parentNode;return t}function e(e){var t,i=m(e),n=i.nextSibling,r=i.previousSibling,s=g.html.defaultTag();if(g.node.isEmpty(i,!0)&&n){for(var o="",a="",l=e.parentNode;!g.node.isList(l)&&l.parentNode&&"LI"!==l.parentNode.tagName;)o=g.node.openTagString(l)+o,a+=g.node.closeTagString(l),l=l.parentNode;o=g.node.openTagString(l)+o,a+=g.node.closeTagString(l);var c="";for(c=l.parentNode&&"LI"==l.parentNode.tagName?a+"<li>"+ze.FE.MARKERS+"<br>"+o:s?a+"<"+s+">"+ze.FE.MARKERS+"<br></"+s+">"+o:a+ze.FE.MARKERS+"<br>"+o,ze(i).html('<span id="fr-break"></span>');["UL","OL"].indexOf(l.tagName)<0||l.parentNode&&"LI"===l.parentNode.tagName;)l=l.parentNode;var d=g.node.openTagString(l)+ze(l).html()+g.node.closeTagString(l);d=d.replace(/<span id="fr-break"><\/span>/g,c),ze(l).replaceWith(d),g.$el.find("li:empty").remove()}else if(r&&n||!g.node.isEmpty(i,!0)){for(var f="<br>",u=e.parentNode;u&&"LI"!=u.tagName;)f=g.node.openTagString(u)+f+g.node.closeTagString(u),u=u.parentNode;ze(i).before("<li>"+f+"</li>"),ze(e).remove()}else if(r){t=v(i);for(var p=ze.FE.MARKERS+"<br>",h=e.parentNode;h&&"LI"!=h.tagName;)p=g.node.openTagString(h)+p+g.node.closeTagString(h),h=h.parentNode;t.parentNode&&"LI"==t.parentNode.tagName?ze(t.parentNode).after("<li>"+p+"</li>"):s?ze(t).after("<"+s+">"+p+"</"+s+">"):ze(t).after(p),ze(i).remove()}else(t=v(i)).parentNode&&"LI"==t.parentNode.tagName?n?ze(t.parentNode).before(g.node.openTagString(i)+ze.FE.MARKERS+"<br></li>"):ze(t.parentNode).after(g.node.openTagString(i)+ze.FE.MARKERS+"<br></li>"):s?ze(t).before("<"+s+">"+ze.FE.MARKERS+"<br></"+s+">"):ze(t).before(ze.FE.MARKERS+"<br>"),ze(i).remove()}function t(e){for(var t=m(e),i="",n=e,r="",s="";n!=t;){var o="A"==(n=n.parentNode).tagName&&g.cursor.isAtEnd(e,n)?"fr-to-remove":"";r=g.node.openTagString(ze(n).clone().addClass(o).get(0))+r,s=g.node.closeTagString(n)+s}i=s+i+r+ze.FE.MARKERS,ze(e).replaceWith('<span id="fr-break"></span>');var a=g.node.openTagString(t)+ze(t).html()+g.node.closeTagString(t);a=a.replace(/<span id="fr-break"><\/span>/g,i),ze(t).replaceWith(a)}function i(e){for(var t=m(e),i=ze.FE.MARKERS,n="",r=e,s=!1;r!=t;){var o="A"==(r=r.parentNode).tagName&&g.cursor.isAtEnd(e,r)?"fr-to-remove":"";s||r==t||g.node.isBlock(r)||(s=!0,n+=ze.FE.INVISIBLE_SPACE),n=g.node.openTagString(ze(r).clone().addClass(o).get(0))+n,i+=g.node.closeTagString(r)}var a=n+i;ze(e).remove(),ze(t).after(a)}function n(e){var t=m(e),i=t.previousSibling;if(i){i=ze(i).find(g.html.blockTagsQuery()).get(-1)||i,ze(e).replaceWith(ze.FE.MARKERS);var n=g.node.contents(i);n.length&&"BR"==n[n.length-1].tagName&&ze(n[n.length-1]).remove(),ze(t).find(g.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==t&&ze(this).replaceWith(ze(this).html()+(g.node.isEmpty(this)?"":"<br>"))});for(var r,s=g.node.contents(t)[0];s&&!g.node.isList(s);)r=s.nextSibling,ze(i).append(s),s=r;for(i=t.previousSibling;s;)r=s.nextSibling,ze(i).append(s),s=r;ze(t).remove()}else{var o=v(t);if(ze(e).replaceWith(ze.FE.MARKERS),o.parentNode&&"LI"==o.parentNode.tagName){var a=o.previousSibling;g.node.isBlock(a)?(ze(t).find(g.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==t&&ze(this).replaceWith(ze(this).html()+(g.node.isEmpty(this)?"":"<br>"))}),ze(a).append(ze(t).html())):ze(o).before(ze(t).html())}else{var l=g.html.defaultTag();l&&0===ze(t).find(g.html.blockTagsQuery()).length?ze(o).before("<"+l+">"+ze(t).html()+"</"+l+">"):(ze(o).before(ze(t).html()),g.html.wrap())}ze(t).remove(),0===ze(o).find("li").length&&ze(o).remove()}}function r(e){var t,i=m(e),n=i.nextSibling;if(n){(t=g.node.contents(n)).length&&"BR"==t[0].tagName&&ze(t[0]).remove(),ze(n).find(g.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==n&&ze(this).replaceWith(ze(this).html()+(g.node.isEmpty(this)?"":"<br>"))});for(var r,s=e,o=g.node.contents(n)[0];o&&!g.node.isList(o);)r=o.nextSibling,ze(s).after(o),s=o,o=r;for(;o;)r=o.nextSibling,ze(i).append(o),o=r;ze(e).replaceWith(ze.FE.MARKERS),ze(n).remove()}else{for(var a=i;!a.nextSibling&&a!=g.el;)a=a.parentNode;if(a==g.el)return!1;if(a=a.nextSibling,g.node.isBlock(a))ze.FE.NO_DELETE_TAGS.indexOf(a.tagName)<0&&(ze(e).replaceWith(ze.FE.MARKERS),(t=g.node.contents(i)).length&&"BR"==t[t.length-1].tagName&&ze(t[t.length-1]).remove(),ze(i).append(ze(a).html()),ze(a).remove());else for((t=g.node.contents(i)).length&&"BR"==t[t.length-1].tagName&&ze(t[t.length-1]).remove(),ze(e).replaceWith(ze.FE.MARKERS);a&&!g.node.isBlock(a)&&"BR"!=a.tagName;)ze(i).append(ze(a)),a=a.nextSibling}}return{_startEnter:e,_middleEnter:t,_endEnter:i,_backspace:n,_del:r}},ze.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],ze.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],ze.FE.MODULES.cursor=function(p){function s(e){return!!e&&(!!p.node.isBlock(e)||(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?s(e.nextSibling):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&s(e.parentNode)))}function o(e){return!!e&&(!!p.node.isBlock(e)||(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?o(e.previousSibling):!e.previousSibling&&(!(e.previousSibling||!p.node.hasClass(e.parentNode,"fr-inner"))||o(e.parentNode))))}function h(e,t){return!!e&&e!=p.$wp.get(0)&&(e.previousSibling&&e.previousSibling.nodeType==Node.TEXT_NODE&&0===e.previousSibling.textContent.replace(/\u200b/g,"").length?h(e.previousSibling,t):!e.previousSibling&&(e.parentNode==t||h(e.parentNode,t)))}function g(e,t){return!!e&&e!=p.$wp.get(0)&&(e.nextSibling&&e.nextSibling.nodeType==Node.TEXT_NODE&&0===e.nextSibling.textContent.replace(/\u200b/g,"").length?g(e.nextSibling,t):!(e.nextSibling&&(!e.previousSibling||"BR"!=e.nextSibling.tagName||e.nextSibling.nextSibling))&&(e.parentNode==t||g(e.parentNode,t)))}function a(e){return 0<ze(e).parentsUntil(p.$el,"LI").length&&0===ze(e).parentsUntil("LI","TABLE").length}function l(e,t){var i=new RegExp("([\\uD83C-\\uDBFF\\uDC00-\\uDFFF\\u200D]+)"+(t?"":"$"),"i"),n=e.match(i);return n?n[0].length:1}function c(e){var t=0<ze(e).parentsUntil(p.$el,"BLOCKQUOTE").length,i=p.node.deepestParent(e,[],!t);if(i&&"BLOCKQUOTE"==i.tagName){var n=p.node.deepestParent(e,[ze(e).parentsUntil(p.$el,"BLOCKQUOTE").get(0)]);n&&n.previousSibling&&(i=n)}if(null!==i){var r,s=i.previousSibling;if(p.node.isBlock(i)&&p.node.isEditable(i)&&s&&ze.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(p.node.isDeletable(s))ze(s).remove(),ze(e).replaceWith(ze.FE.MARKERS);else if(p.node.isEditable(s))if(p.node.isBlock(s))if(p.node.isEmpty(s)&&!p.node.isList(s))ze(s).remove(),ze(e).after(p.opts.keepFormatOnDelete?ze.FE.INVISIBLE_SPACE:"");else{if(p.node.isList(s)&&(s=ze(s).find("li:last").get(0)),(r=p.node.contents(s)).length&&"BR"==r[r.length-1].tagName&&ze(r[r.length-1]).remove(),"BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=i.tagName)for(r=p.node.contents(s);r.length&&p.node.isBlock(r[r.length-1]);)s=r[r.length-1],r=p.node.contents(s);else if("BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==i.tagName)for(r=p.node.contents(i);r.length&&p.node.isBlock(r[0]);)i=r[0],r=p.node.contents(i);p.node.isEmpty(i)?(ze(e).remove(),p.selection.setAtEnd(s,p.opts.keepFormatOnDelete)):(ze(e).replaceWith(ze.FE.MARKERS),ze(s).append(i.innerHTML)),ze(i).remove()}else ze(e).replaceWith(ze.FE.MARKERS),"BLOCKQUOTE"==i.tagName&&s.nodeType==Node.ELEMENT_NODE?ze(s).remove():(ze(s).after(p.node.isEmpty(i)?"":ze(i).html()),ze(i).remove(),"BR"==s.tagName&&ze(s).remove())}}function d(e){for(var t=e;!t.previousSibling;)if(t=t.parentNode,p.node.isElement(t))return!1;var i;if(t=t.previousSibling,!p.node.isBlock(t)&&p.node.isEditable(t)){for(i=p.node.contents(t);t.nodeType!=Node.TEXT_NODE&&!p.node.isDeletable(t)&&i.length&&p.node.isEditable(t);)t=i[i.length-1],i=p.node.contents(t);if(t.nodeType==Node.TEXT_NODE){var n=t.textContent,r=n.length;p.opts.tabSpaces&&n.length>=p.opts.tabSpaces&&0===n.substr(n.length-p.opts.tabSpaces,n.length-1).replace(/ /g,"").replace(new RegExp(ze.FE.UNICODE_NBSP,"g"),"").length&&(r=n.length-p.opts.tabSpaces),t.textContent=n.substring(0,r-l(n));var s=n.length!=t.textContent.length;0===t.textContent.length?s&&p.opts.keepFormatOnDelete?ze(t).after(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS):(2!=t.parentNode.childNodes.length||t.parentNode!=e.parentNode)&&1!=t.parentNode.childNodes.length||p.node.isBlock(t.parentNode)||p.node.isElement(t.parentNode)?(ze(t).after(ze.FE.MARKERS),p.node.isElement(t.parentNode)&&!e.nextSibling&&t.previousSibling&&"BR"==t.previousSibling.tagName&&ze(e).after("<br>"),t.parentNode.removeChild(t)):(ze(t.parentNode).after(ze.FE.MARKERS),ze(t.parentNode).remove()):ze(t).after(ze.FE.MARKERS)}else p.node.isDeletable(t)?(ze(t).after(ze.FE.MARKERS),ze(t).remove()):e.nextSibling&&"BR"==e.nextSibling.tagName&&p.node.isVoid(t)&&"BR"!=t.tagName?(ze(e.nextSibling).remove(),ze(e).replaceWith(ze.FE.MARKERS)):!1!==p.events.trigger("node.remove",[ze(t)])&&(ze(t).after(ze.FE.MARKERS),ze(t).remove())}else if(ze.FE.NO_DELETE_TAGS.indexOf(t.tagName)<0&&(p.node.isEditable(t)||p.node.isDeletable(t)))if(p.node.isDeletable(t))ze(e).replaceWith(ze.FE.MARKERS),ze(t).remove();else if(p.node.isEmpty(t)&&!p.node.isList(t))ze(t).remove(),ze(e).replaceWith(ze.FE.MARKERS);else{for(p.node.isList(t)&&(t=ze(t).find("li:last").get(0)),(i=p.node.contents(t))&&"BR"==i[i.length-1].tagName&&ze(i[i.length-1]).remove(),i=p.node.contents(t);i&&p.node.isBlock(i[i.length-1]);)t=i[i.length-1],i=p.node.contents(t);ze(t).append(ze.FE.MARKERS);for(var o=e;!o.previousSibling;)o=o.parentNode;for(;o&&"BR"!==o.tagName&&!p.node.isBlock(o);){var a=o;o=o.nextSibling,ze(t).append(a)}o&&"BR"==o.tagName&&ze(o).remove(),ze(e).remove()}else e.nextSibling&&"BR"==e.nextSibling.tagName&&ze(e.nextSibling).remove()}function e(){var e=!1,t=p.markers.insert();if(!t)return!0;for(var i=t.parentNode;i&&!p.node.isElement(i);){if("false"===i.getAttribute("contenteditable"))return ze(t).replaceWith(ze.FE.MARKERS),p.selection.restore(),!1;if("true"===i.getAttribute("contenteditable"))break;i=i.parentNode}p.el.normalize();var n=t.previousSibling;if(n){var r=n.textContent;r&&r.length&&8203==r.charCodeAt(r.length-1)&&(1==r.length?ze(n).remove():n.textContent=n.textContent.substr(0,r.length-l(r)))}return s(t)?e=d(t):o(t)?a(t)&&h(t,ze(t).parents("li:first").get(0))?p.cursorLists._backspace(t):c(t):e=d(t),ze(t).remove(),u(),p.html.fillEmptyBlocks(!0),p.opts.htmlUntouched||(p.html.cleanEmptyTags(),p.clean.quotes(),p.clean.lists()),p.spaces.normalizeAroundCursor(),p.selection.restore(),e}function f(e){var t=0<ze(e).parentsUntil(p.$el,"BLOCKQUOTE").length,i=p.node.deepestParent(e,[],!t);if(i&&"BLOCKQUOTE"==i.tagName){var n=p.node.deepestParent(e,[ze(e).parentsUntil(p.$el,"BLOCKQUOTE").get(0)]);n&&n.nextSibling&&(i=n)}if(null!==i){var r,s=i.nextSibling;if(p.node.isBlock(i)&&(p.node.isEditable(i)||p.node.isDeletable(i))&&s&&ze.FE.NO_DELETE_TAGS.indexOf(s.tagName)<0)if(p.node.isDeletable(s))ze(s).remove(),ze(e).replaceWith(ze.FE.MARKERS);else if(p.node.isBlock(s)&&p.node.isEditable(s))if(p.node.isList(s))if(p.node.isEmpty(i,!0))ze(i).remove(),ze(s).find("li:first").prepend(ze.FE.MARKERS);else{var o=ze(s).find("li:first");"BLOCKQUOTE"==i.tagName&&((r=p.node.contents(i)).length&&p.node.isBlock(r[r.length-1])&&(i=r[r.length-1])),0===o.find("ul, ol").length&&(ze(e).replaceWith(ze.FE.MARKERS),o.find(p.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==o.get(0)&&ze(this).replaceWith(ze(this).html()+(p.node.isEmpty(this)?"":"<br>"))}),ze(i).append(p.node.contents(o.get(0))),o.remove(),0===ze(s).find("li").length&&ze(s).remove())}else{if((r=p.node.contents(s)).length&&"BR"==r[0].tagName&&ze(r[0]).remove(),"BLOCKQUOTE"!=s.tagName&&"BLOCKQUOTE"==i.tagName)for(r=p.node.contents(i);r.length&&p.node.isBlock(r[r.length-1]);)i=r[r.length-1],r=p.node.contents(i);else if("BLOCKQUOTE"==s.tagName&&"BLOCKQUOTE"!=i.tagName)for(r=p.node.contents(s);r.length&&p.node.isBlock(r[0]);)s=r[0],r=p.node.contents(s);ze(e).replaceWith(ze.FE.MARKERS),ze(i).append(s.innerHTML),ze(s).remove()}else{for(ze(e).replaceWith(ze.FE.MARKERS);s&&"BR"!==s.tagName&&!p.node.isBlock(s)&&p.node.isEditable(s);){var a=s;s=s.nextSibling,ze(i).append(a)}s&&"BR"==s.tagName&&p.node.isEditable(s)&&ze(s).remove()}}}function i(e){for(var t=e;!t.nextSibling;)if(t=t.parentNode,p.node.isElement(t))return!1;if("BR"==(t=t.nextSibling).tagName&&p.node.isEditable(t))if(t.nextSibling){if(p.node.isBlock(t.nextSibling)&&p.node.isEditable(t.nextSibling)){if(!(ze.FE.NO_DELETE_TAGS.indexOf(t.nextSibling.tagName)<0))return void ze(t).remove();t=t.nextSibling,ze(t.previousSibling).remove()}}else if(s(t)){if(a(e))p.cursorLists._del(e);else p.node.deepestParent(t)&&((!p.node.isEmpty(p.node.blockParent(t))||(p.node.blockParent(t).nextSibling&&ze.FE.NO_DELETE_TAGS.indexOf(p.node.blockParent(t).nextSibling.tagName))<0)&&ze(t).remove(),f(e));return}var i;if(!p.node.isBlock(t)&&p.node.isEditable(t)){for(i=p.node.contents(t);t.nodeType!=Node.TEXT_NODE&&i.length&&!p.node.isDeletable(t)&&p.node.isEditable(t);)t=i[0],i=p.node.contents(t);t.nodeType==Node.TEXT_NODE?(ze(t).before(ze.FE.MARKERS),
t.textContent.length&&(t.textContent=t.textContent.substring(l(t.textContent,!0),t.textContent.length))):p.node.isDeletable(t)?(ze(t).before(ze.FE.MARKERS),ze(t).remove()):!1!==p.events.trigger("node.remove",[ze(t)])&&(ze(t).before(ze.FE.MARKERS),ze(t).remove()),ze(e).remove()}else if(ze.FE.NO_DELETE_TAGS.indexOf(t.tagName)<0&&(p.node.isEditable(t)||p.node.isDeletable(t)))if(p.node.isDeletable(t))ze(e).replaceWith(ze.FE.MARKERS),ze(t).remove();else if(p.node.isList(t))e.previousSibling?(ze(t).find("li:first").prepend(e),p.cursorLists._backspace(e)):(ze(t).find("li:first").prepend(ze.FE.MARKERS),ze(e).remove());else if((i=p.node.contents(t))&&"BR"==i[0].tagName&&ze(i[0]).remove(),i&&"BLOCKQUOTE"==t.tagName){var n=i[0];for(ze(e).before(ze.FE.MARKERS);n&&"BR"!=n.tagName;){var r=n;n=n.nextSibling,ze(e).before(r)}n&&"BR"==n.tagName&&ze(n).remove()}else ze(e).after(ze(t).html()).after(ze.FE.MARKERS),ze(t).remove()}function t(){var e=p.markers.insert();if(!e)return!1;if(p.el.normalize(),s(e))if(a(e))if(0===ze(e).parents("li:first").find("ul, ol").length)p.cursorLists._del(e);else{var t=ze(e).parents("li:first").find("ul:first, ol:first").find("li:first");(t=t.find(p.html.blockTagsQuery()).get(-1)||t).prepend(e),p.cursorLists._backspace(e)}else f(e);else i((o(e),e));ze(e).remove(),u(),p.html.fillEmptyBlocks(!0),p.opts.htmlUntouched||(p.html.cleanEmptyTags(),p.clean.quotes(),p.clean.lists()),p.spaces.normalizeAroundCursor(),p.selection.restore()}function u(){for(var e=p.el.querySelectorAll("blockquote:empty"),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}function n(){p.$el.find(".fr-to-remove").each(function(){for(var e=p.node.contents(this),t=0;t<e.length;t++)e[t].nodeType==Node.TEXT_NODE&&(e[t].textContent=e[t].textContent.replace(/\u200B/g,""));ze(this).replaceWith(this.innerHTML)})}function m(e,t,i){var n,r=p.node.deepestParent(e,[],!i);if(r&&"BLOCKQUOTE"==r.tagName)return g(e,r)?((n=p.html.defaultTag())?ze(r).after("<"+n+">"+ze.FE.MARKERS+"<br></"+n+">"):ze(r).after(ze.FE.MARKERS+"<br>"),ze(e).remove()):b(e,t,i),!1;if(null==r)(n=p.html.defaultTag())&&p.node.isElement(e.parentNode)?ze(e).replaceWith("<"+n+">"+ze.FE.MARKERS+"<br></"+n+">"):!e.previousSibling||ze(e.previousSibling).is("br")||e.nextSibling?ze(e).replaceWith("<br>"+ze.FE.MARKERS):ze(e).replaceWith("<br>"+ze.FE.MARKERS+"<br>");else{var s=e,o="";p.node.isBlock(r)&&!t||(o="<br/>");var a,l="",c="",d="",f="";(n=p.html.defaultTag())&&p.node.isBlock(r)&&(d="<"+n+">",f="</"+n+">",r.tagName==n.toUpperCase()&&(d=p.node.openTagString(ze(r).clone().removeAttr("id").get(0))));do{if(s=s.parentNode,!t||s!=r||t&&!p.node.isBlock(r))if(l+=p.node.closeTagString(s),s==r&&p.node.isBlock(r))c=d+c;else{var u="A"==s.tagName&&g(e,s)?"fr-to-remove":"";c=p.node.openTagString(ze(s).clone().addClass(u).get(0))+c}}while(s!=r);o=l+o+c+(e.parentNode==r&&p.node.isBlock(r)?"":ze.FE.INVISIBLE_SPACE)+ze.FE.MARKERS,p.node.isBlock(r)&&!ze(r).find("*:last").is("br")&&ze(r).append("<br/>"),ze(e).after('<span id="fr-break"></span>'),ze(e).remove(),r.nextSibling&&!p.node.isBlock(r.nextSibling)||p.node.isBlock(r)||ze(r).after("<br>"),a=(a=!t&&p.node.isBlock(r)?p.node.openTagString(r)+ze(r).html()+f:p.node.openTagString(r)+ze(r).html()+p.node.closeTagString(r)).replace(/<span id="fr-break"><\/span>/g,o),ze(r).replaceWith(a)}}function v(e,t,i){var n,r=p.node.deepestParent(e,[],!i);if(r&&"TABLE"==r.tagName)return ze(r).find("td:first, th:first").prepend(e),v(e,t,i);if(r&&"BLOCKQUOTE"==r.tagName){if(h(e,r))return(n=p.html.defaultTag())?ze(r).before("<"+n+">"+ze.FE.MARKERS+"<br></"+n+">"):ze(r).before(ze.FE.MARKERS+"<br>"),ze(e).remove(),!1;g(e,r)?m(e,t,!0):b(e,t,!0)}if(null==r)(n=p.html.defaultTag())&&p.node.isElement(e.parentNode)?ze(e).replaceWith("<"+n+">"+ze.FE.MARKERS+"<br></"+n+">"):ze(e).replaceWith("<br>"+ze.FE.MARKERS);else{if(p.node.isBlock(r))if(t)ze(e).remove(),ze(r).prepend("<br>"+ze.FE.MARKERS);else{if(p.node.isEmpty(r,!0))return m(e,t,i);if(p.opts.keepFormatOnDelete){for(var s=e,o=ze.FE.INVISIBLE_SPACE;s!=r&&!p.node.isElement(s);)s=s.parentNode,o=p.node.openTagString(s)+o+p.node.closeTagString(s);ze(r).before(o)}else ze(r).before(p.node.openTagString(ze(r).clone().removeAttr("id").get(0))+"<br>"+p.node.closeTagString(r))}else ze(r).before("<br>");ze(e).remove()}}function b(e,t,i){var n=p.node.deepestParent(e,[],!i);if(null==n)p.html.defaultTag()&&e.parentNode===p.el?ze(e).replaceWith("<"+p.html.defaultTag()+">"+ze.FE.MARKERS+"<br></"+p.html.defaultTag()+">"):(e.nextSibling&&!p.node.isBlock(e.nextSibling)||ze(e).after("<br>"),ze(e).replaceWith("<br>"+ze.FE.MARKERS));else{var r=e,s="";"PRE"==n.tagName&&(t=!0),p.node.isBlock(n)&&!t||(s="<br>");var o="",a="";do{var l=r;if(r=r.parentNode,"BLOCKQUOTE"==n.tagName&&p.node.isEmpty(l)&&!p.node.hasClass(l,"fr-marker")&&0<ze(l).find(e).length&&ze(l).after(e),("BLOCKQUOTE"!=n.tagName||!g(e,r)&&!h(e,r))&&(!t||r!=n||t&&!p.node.isBlock(n))){o+=p.node.closeTagString(r);var c="A"==r.tagName&&g(e,r)?"fr-to-remove":"";a=p.node.openTagString(ze(r).clone().addClass(c).removeAttr("id").get(0))+a}}while(r!=n);var d=n==e.parentNode&&p.node.isBlock(n)||e.nextSibling;if("BLOCKQUOTE"==n.tagName){e.previousSibling&&p.node.isBlock(e.previousSibling)&&e.nextSibling&&"BR"==e.nextSibling.tagName&&(ze(e.nextSibling).after(e),e.nextSibling&&"BR"==e.nextSibling.tagName&&ze(e.nextSibling).remove());var f=p.html.defaultTag();s=o+s+(f?"<"+f+">":"")+ze.FE.MARKERS+"<br>"+(f?"</"+f+">":"")+a}else s=o+s+a+(d?"":ze.FE.INVISIBLE_SPACE)+ze.FE.MARKERS;ze(e).replaceWith('<span id="fr-break"></span>');var u=p.node.openTagString(n)+ze(n).html()+p.node.closeTagString(n);u=u.replace(/<span id="fr-break"><\/span>/g,s),ze(n).replaceWith(u)}}function r(e){var t=p.markers.insert();if(!t)return!0;p.el.normalize();var i=!1;0<ze(t).parentsUntil(p.$el,"BLOCKQUOTE").length&&(e=!1,i=!0),ze(t).parentsUntil(p.$el,"TD, TH").length&&(i=!1),s(t)?!a(t)||e||i?m(t,e,i):p.cursorLists._endEnter(t):o(t)?!a(t)||e||i?v(t,e,i):p.cursorLists._startEnter(t):!a(t)||e||i?b(t,e,i):p.cursorLists._middleEnter(t),n(),p.html.fillEmptyBlocks(!0),p.opts.htmlUntouched||(p.html.cleanEmptyTags(),p.clean.lists()),p.spaces.normalizeAroundCursor(),p.selection.restore()}return{enter:r,backspace:e,del:t,isAtEnd:g,isAtStart:h}},ze.FE.ENTER_P=0,ze.FE.ENTER_DIV=1,ze.FE.ENTER_BR=2,ze.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,IME:229},ze.extend(ze.FE.DEFAULTS,{enter:ze.FE.ENTER_P,multiLine:!0,tabSpaces:0}),ze.FE.MODULES.keys=function(s){function o(e){D=null,s.opts.multiLine?s.helpers.isIOS()?D=s.snapshot.get():(e.preventDefault(),e.stopPropagation(),s.selection.isCollapsed()||s.selection.remove(),s.cursor.enter()):(e.preventDefault(),e.stopPropagation())}function a(e){e.preventDefault(),e.stopPropagation(),s.opts.multiLine&&(s.selection.isCollapsed()||s.selection.remove(),s.cursor.enter(!0))}function l(){setTimeout(function(){s.events.disableBlur(),s.events.focus()},0)}function c(e){D=null,s.selection.isCollapsed()?s.helpers.isIOS()?D=s.snapshot.get():(s.cursor.backspace(),e.preventDefault(),e.stopPropagation()):(e.preventDefault(),e.stopPropagation(),s.selection.remove(),s.html.fillEmptyBlocks()),s.placeholder.refresh()}function d(e){e.preventDefault(),e.stopPropagation(),""===s.selection.text()?s.cursor.del():s.selection.remove(),s.placeholder.refresh()}function f(e){var t=s.selection.element();if(!s.helpers.isMobile()&&t&&"A"==t.tagName){e.preventDefault(),e.stopPropagation(),s.selection.isCollapsed()||s.selection.remove();var i=s.markers.insert();if(i){var n=i.previousSibling;!i.nextSibling&&i.parentNode&&"A"==i.parentNode.tagName?(i.parentNode.insertAdjacentHTML("afterend","&nbsp;"+ze.FE.MARKERS),i.parentNode.removeChild(i)):(n&&n.nodeType==Node.TEXT_NODE&&1==n.textContent.length&&160==n.textContent.charCodeAt(0)?n.textContent=n.textContent+" ":i.insertAdjacentHTML("beforebegin","&nbsp;"),i.outerHTML=ze.FE.MARKERS),s.selection.restore()}}}function e(){if(s.browser.mozilla&&s.selection.isCollapsed()&&!L){var e=s.selection.ranges(0),t=e.startContainer,i=e.startOffset;t&&t.nodeType==Node.TEXT_NODE&&i<=t.textContent.length&&0<i&&32==t.textContent.charCodeAt(i-1)&&(s.selection.save(),s.spaces.normalize(),s.selection.restore())}}function t(){s.selection.isFull()&&setTimeout(function(){var e=s.html.defaultTag();e?s.$el.html("<"+e+">"+ze.FE.MARKERS+"<br/></"+e+">"):s.$el.html(ze.FE.MARKERS+"<br/>"),s.selection.restore(),s.placeholder.refresh(),s.button.bulkRefresh(),s.undo.saveStep()},0)}function u(e){if(0<s.opts.tabSpaces)if(s.selection.isCollapsed()){s.undo.saveStep(),e.preventDefault(),e.stopPropagation();for(var t="",i=0;i<s.opts.tabSpaces;i++)t+="&nbsp;";s.html.insert(t),s.placeholder.refresh(),s.undo.saveStep()}else e.preventDefault(),e.stopPropagation(),e.shiftKey?s.commands.outdent():s.commands.indent()}function i(){L=!1}function n(){L=!1}function r(){return L}function p(e){s.events.disableBlur();var t=e.which;if(16===t)return!0;if(t===ze.FE.KEYCODE.IME)return L=!0;L=!1;var i=y(t)&&!b(e),n=t==ze.FE.KEYCODE.BACKSPACE||t==ze.FE.KEYCODE.DELETE;if((s.selection.isFull()&&!s.opts.keepFormatOnDelete&&!s.placeholder.isVisible()||n&&s.placeholder.isVisible()&&s.opts.keepFormatOnDelete)&&(i||n)){var r=s.html.defaultTag();if(r?s.$el.html("<"+r+">"+ze.FE.MARKERS+"<br/></"+r+">"):s.$el.html(ze.FE.MARKERS+"<br/>"),s.selection.restore(),!y(t))return e.preventDefault(),!0}t==ze.FE.KEYCODE.ENTER?e.shiftKey?a(e):o(e):t===ze.FE.KEYCODE.BACKSPACE&&(e.metaKey||e.ctrlKey)?l():t!=ze.FE.KEYCODE.BACKSPACE||b(e)||e.altKey?t!=ze.FE.KEYCODE.DELETE||b(e)||e.altKey||e.shiftKey?t==ze.FE.KEYCODE.SPACE?f(e):t==ze.FE.KEYCODE.TAB?u(e):b(e)||!y(e.which)||s.selection.isCollapsed()||e.ctrlKey||s.selection.remove():s.placeholder.isVisible()?(e.preventDefault(),e.stopPropagation()):d(e):s.placeholder.isVisible()?(e.preventDefault(),e.stopPropagation()):c(e),s.events.enableBlur()}function h(e){for(var t=s.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,s.node.filter(function(e){return/\u200B/gi.test(e.textContent)}),!1);t.nextNode();){var i=t.currentNode;i.textContent=i.textContent.replace(/\u200B/gi,"")}}function g(){if(!s.$wp)return!0;var e;s.opts.height||s.opts.heightMax?(e=s.position.getBoundingRect().top,(s.helpers.isIOS()||s.helpers.isAndroid())&&(e-=s.helpers.scrollTop()),s.opts.iframe&&(e+=s.$iframe.offset().top),e>s.$wp.offset().top-s.helpers.scrollTop()+s.$wp.height()-20&&s.$wp.scrollTop(e+s.$wp.scrollTop()-(s.$wp.height()+s.$wp.offset().top)+s.helpers.scrollTop()+20)):(e=s.position.getBoundingRect().top,s.opts.toolbarBottom&&(e+=s.opts.toolbarStickyOffset),(s.helpers.isIOS()||s.helpers.isAndroid())&&(e-=s.helpers.scrollTop()),s.opts.iframe&&(e+=s.$iframe.offset().top,e-=s.helpers.scrollTop()),(e+=s.opts.toolbarStickyOffset)>s.o_win.innerHeight-20&&ze(s.o_win).scrollTop(e+s.helpers.scrollTop()-s.o_win.innerHeight+20),e=s.position.getBoundingRect().top,s.opts.toolbarBottom||(e-=s.opts.toolbarStickyOffset),(s.helpers.isIOS()||s.helpers.isAndroid())&&(e-=s.helpers.scrollTop()),s.opts.iframe&&(e+=s.$iframe.offset().top,e-=s.helpers.scrollTop()),e<s.$tb.height()+20&&0<=e&&ze(s.o_win).scrollTop(e+s.helpers.scrollTop()-s.$tb.height()-20))}function m(){var e=s.selection.element(),t=s.node.blockParent(e);if(t&&"DIV"==t.tagName&&s.selection.info(t).atStart){var i=s.html.defaultTag();t.previousSibling&&"DIV"!=t.previousSibling.tagName&&i&&"div"!=i&&(s.selection.save(),ze(t).replaceWith("<"+i+">"+t.innerHTML+"</"+i+">"),s.selection.restore())}}function v(e){if(s.helpers.isIOS()&&e&&D)if(e.which==ze.FE.KEYCODE.ENTER)s.snapshot.restore(D),s.cursor.enter();else if(e.which==ze.FE.KEYCODE.BACKSPACE){var t=s.snapshot.get();s.snapshot.restore(D),s.cursor.backspace(),s.el.innerHTML!==t.html&&s.snapshot.restore(t)}if(s.helpers.isAndroid()&&s.browser.mozilla)return!0;if(L)return!1;if(!s.selection.isCollapsed())return!0;if(e&&(e.which===ze.FE.KEYCODE.META||e.which==ze.FE.KEYCODE.CTRL))return!0;if(e&&E(e.which))return!0;e&&e.which==ze.FE.KEYCODE.ENTER&&s.helpers.isIOS()&&m(),e&&(e.which==ze.FE.KEYCODE.ENTER||e.which==ze.FE.KEYCODE.BACKSPACE||37<=e.which&&e.which<=40&&!s.browser.msie)&&g(),s.html.cleanBRs(!0,!0);var i=function(e){if(!e)return!1;var t=e.innerHTML;return!!((t=t.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""))&&/\u200B/.test(t)&&0<t.replace(/\u200B/gi,"").length)},n=function(e){var t=/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi;return!s.helpers.isIOS()||0===((e.textContent||"").match(t)||[]).length},r=s.selection.element();i(r)&&!s.node.hasClass(r,"fr-marker")&&"IFRAME"!=r.tagName&&n(r)&&(s.selection.save(),h(r),s.selection.restore())}function b(e){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(e.metaKey&&!e.altKey)return!0}else if(e.ctrlKey&&!e.altKey)return!0;return!1}function E(e){if(e>=ze.FE.KEYCODE.ARROW_LEFT&&e<=ze.FE.KEYCODE.ARROW_DOWN)return!0}function y(e){if(e>=ze.FE.KEYCODE.ZERO&&e<=ze.FE.KEYCODE.NINE)return!0;if(e>=ze.FE.KEYCODE.NUM_ZERO&&e<=ze.FE.KEYCODE.NUM_MULTIPLY)return!0;if(e>=ze.FE.KEYCODE.A&&e<=ze.FE.KEYCODE.Z)return!0;if(s.browser.webkit&&0===e)return!0;switch(e){case ze.FE.KEYCODE.SPACE:case ze.FE.KEYCODE.QUESTION_MARK:case ze.FE.KEYCODE.NUM_PLUS:case ze.FE.KEYCODE.NUM_MINUS:case ze.FE.KEYCODE.NUM_PERIOD:case ze.FE.KEYCODE.NUM_DIVISION:case ze.FE.KEYCODE.SEMICOLON:case ze.FE.KEYCODE.FF_SEMICOLON:case ze.FE.KEYCODE.DASH:case ze.FE.KEYCODE.EQUALS:case ze.FE.KEYCODE.FF_EQUALS:case ze.FE.KEYCODE.COMMA:case ze.FE.KEYCODE.PERIOD:case ze.FE.KEYCODE.SLASH:case ze.FE.KEYCODE.APOSTROPHE:case ze.FE.KEYCODE.SINGLE_QUOTE:case ze.FE.KEYCODE.OPEN_SQUARE_BRACKET:case ze.FE.KEYCODE.BACKSLASH:case ze.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}function _(e){var t=e.which;if(b(e)||37<=t&&t<=40||!y(t)&&t!=ze.FE.KEYCODE.DELETE&&t!=ze.FE.KEYCODE.BACKSPACE&&t!=ze.FE.KEYCODE.ENTER&&t!=ze.FE.KEYCODE.IME)return!0;R||(k=s.snapshot.get(),s.undo.canDo()||s.undo.saveStep()),clearTimeout(R),R=setTimeout(function(){R=null,s.undo.saveStep()},Math.max(250,s.opts.typingTimer))}function T(e){var t=e.which;if(b(e)||37<=t&&t<=40)return!0;k&&R?(s.undo.saveStep(k),k=null):void 0!==t&&0!==t||k||R||s.undo.saveStep()}function C(){R&&(clearTimeout(R),s.undo.saveStep(),k=null)}function w(e){var t=e.which;return b(e)||t==ze.FE.KEYCODE.F5}function A(e){return(!e||"BR"!=e.tagName)&&0===(e.textContent||"").length&&e.querySelector&&!e.querySelector(":scope > br")}function S(e){var t=s.el.childNodes,i=s.html.defaultTag();return!(!e.target||e.target===s.el)||0===t.length||void(s.$el.outerHeight()-e.offsetY<=10?A(t[t.length-1])&&(i?s.$el.append("<"+i+">"+ze.FE.MARKERS+"<br></"+i+">"):s.$el.append(ze.FE.MARKERS+"<br>"),s.selection.restore(),g()):e.offsetY<=10&&A(t[0])&&(i?s.$el.prepend("<"+i+">"+ze.FE.MARKERS+"<br></"+i+">"):s.$el.prepend(ze.FE.MARKERS+"<br>"),s.selection.restore(),g()))}function x(){if(s.events.on("keydown",_),s.events.on("input",e),s.events.on("mousedown",n),s.events.on("keyup input",T),s.events.on("keypress",i),s.events.on("keydown",p),s.events.on("keyup",v),s.events.on("html.inserted",v),s.events.on("cut",t),s.events.on("click",S),!s.browser.edge&&s.el.msGetInputContext)try{s.el.msGetInputContext().addEventListener("MSCandidateWindowShow",function(){L=!0}),s.el.msGetInputContext().addEventListener("MSCandidateWindowHide",function(){L=!1,v()})}catch(ze){}}var R,k,L=!1,D=null;return{_init:x,ctrlKey:b,isCharacter:y,isArrow:E,forceUndo:C,isIME:r,isBrowserAction:w,positionCaret:g}},ze.FE.MODULES.accessibility=function(f){function a(t){t&&t.length&&(t.data("blur-event-set")||t.parents(".fr-popup").length||(f.events.$on(t,"blur",function(){var e=t.parents(".fr-toolbar, .fr-popup").data("instance")||f;e.events.blurActive()&&e.events.trigger("blur"),e.events.enableBlur()},!0),t.data("blur-event-set",!0)),(t.parents(".fr-toolbar, .fr-popup").data("instance")||f).events.disableBlur(),t.focus(),f.shared.$f_el=t)}function u(e,t){var i=t?"last":"first",n=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[i]();if(n.length)return a(n),!0}function s(e){return e.is("input, textarea")&&t(),f.events.disableBlur(),e.focus(),!0}function p(e,t){var i=e.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(t?":last":":first");if(i.length)return s(i);if(f.shared.with_kb){var n=e.find(".fr-active-item:visible:first");if(n.length)return s(n);var r=e.find("[tabIndex]:visible:first");if(r.length)return s(r)}}function t(){0===f.$el.find(".fr-marker").length&&f.core.hasFocus()&&f.selection.save()}function h(e){e.$el.find(".fr-marker").length&&(e.events.disableBlur(),e.selection.restore(),e.events.enableBlur())}function e(n){var r=n.children().not(".fr-buttons");r.data("mouseenter-event-set")||(f.events.$on(r,"mouseenter","[tabIndex]",function(e){var t=n.data("instance")||f;if(!L)return e.stopPropagation(),void e.preventDefault();var i=r.find(":focus:first");i.length&&!i.is("input, button, textarea")&&(t.events.disableBlur(),i.blur(),t.events.disableBlur(),t.events.focus())}),r.data("mouseenter-event-set",!0)),!p(r)&&f.shared.with_kb&&u(n.find(".fr-buttons"))}function i(e){f.core.hasFocus()||(f.events.disableBlur(),f.events.focus()),f.accessibility.saveSelection(),f.events.disableBlur(),f.$el.blur(),f.selection.clear(),f.events.disableBlur(),f.shared.with_kb?e.find(".fr-command[tabIndex], [tabIndex]").first().focus():e.find("[tabIndex]:first").focus()}function o(){var e=f.popups.areVisible();if(e){var t=e.find(".fr-buttons");return t.find("button:focus, .fr-group span:focus").length?!u(e.data("instance").$tb):!u(t)}return!u(f.$tb)}function l(){var e=null;return f.shared.$f_el.is(".fr-dropdown.fr-active")?e=f.shared.$f_el:f.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(e=f.shared.$f_el.closest(".fr-dropdown-menu").prev()),e}function n(e,t,i){if(f.shared.$f_el){var n=l();n&&(f.button.click(n),f.shared.$f_el=n);var r,s=e.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),o=s.index(f.shared.$f_el);if(0===o&&!i||o==s.length-1&&i)t&&(e.parent().is(".fr-popup")&&(r=!p(e.parent().children().not(".fr-buttons"),!i)),!1===r&&(f.shared.$f_el=null)),t&&!1===r||u(e,!i);else a(ze(s.get(o+(i?1:-1))));return!1}}function c(e,t){return n(e,t,!0)}function d(e,t){return n(e,t)}function r(e){if(f.shared.$f_el){var t;if(f.shared.$f_el.is(".fr-dropdown.fr-active"))return a(t=e?f.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():f.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last()),!1;if(f.shared.$f_el.is("a.fr-command"))return(t=e?f.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():f.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first()).length||(t=e?f.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():f.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),a(t),!1}}function g(){return f.shared.$f_el&&f.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?v():r(!0)}function m(){return r()}function v(){if(f.shared.$f_el){if(f.shared.$f_el.hasClass("fr-dropdown"))f.button.click(f.shared.$f_el);else if(f.shared.$f_el.is("button.fr-back")){f.opts.toolbarInline&&(f.events.disableBlur(),f.events.focus());var e=f.popups.areVisible(f);e&&(f.shared.with_kb=!1),f.button.click(f.shared.$f_el),w(e)}else{if(f.events.disableBlur(),f.button.click(f.shared.$f_el),f.shared.$f_el.attr("data-popup")){var t=f.popups.areVisible(f);t&&t.data("popup-button",f.shared.$f_el)}else if(f.shared.$f_el.attr("data-modal")){var i=f.modals.areVisible(f);i&&i.data("modal-button",f.shared.$f_el)}f.shared.$f_el=null}return!1}}function b(){f.shared.$f_el&&(f.events.disableBlur(),f.shared.$f_el.blur(),f.shared.$f_el=null),!1!==f.events.trigger("toolbar.focusEditor")&&(f.events.disableBlur(),f.events.focus())}function E(e){if(f.shared.$f_el){var t=l();return t?(f.button.click(t),a(t)):e.parent().find(".fr-back:visible").length?(f.shared.with_kb=!1,f.opts.toolbarInline&&(f.events.disableBlur(),f.events.focus()),f.button.exec(e.parent().find(".fr-back:visible:first")),w(e.parent())):f.shared.$f_el.is("button, .fr-group span")&&(e.parent().is(".fr-popup")?(h(f),f.shared.$f_el=null,!1!==f.events.trigger("toolbar.esc")&&(f.popups.hide(e.parent()),f.opts.toolbarInline&&f.toolbar.showInline(null,!0),w(e.parent()))):b()),!1}}function y(e,t){var i=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,n=e.which,r=!1;return n!=ze.FE.KEYCODE.TAB||i||e.shiftKey||e.altKey?n!=ze.FE.KEYCODE.ARROW_RIGHT||i||e.shiftKey||e.altKey?n!=ze.FE.KEYCODE.TAB||i||!e.shiftKey||e.altKey?n!=ze.FE.KEYCODE.ARROW_LEFT||i||e.shiftKey||e.altKey?n!=ze.FE.KEYCODE.ARROW_UP||i||e.shiftKey||e.altKey?n!=ze.FE.KEYCODE.ARROW_DOWN||i||e.shiftKey||e.altKey?n!=ze.FE.KEYCODE.ENTER||i||e.shiftKey||e.altKey?n!=ze.FE.KEYCODE.ESC||i||e.shiftKey||e.altKey?n!=ze.FE.KEYCODE.F10||i||e.shiftKey||!e.altKey||(r=o()):r=E(t):r=v():r=g():r=m():r=d(t):r=d(t,!0):r=c(t):r=c(t,!0),f.shared.$f_el||void 0!==r||(r=!0),!r&&f.keys.isBrowserAction(e)&&(r=!0),!!r||(e.preventDefault(),e.stopPropagation(),!1)}function _(n){n&&n.length&&(f.events.$on(n,"keydown",function(e){if(!ze(e.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command"))return!0;var t=n.parents(".fr-popup").data("instance")||n.data("instance")||f;f.shared.with_kb=!0;var i=t.accessibility.exec(e,n);return f.shared.with_kb=!1,i},!0),f.events.$on(n,"mouseenter","[tabIndex]",function(e){var t=n.parents(".fr-popup").data("instance")||n.data("instance")||f;if(!L)return e.stopPropagation(),void e.preventDefault();var i=ze(e.currentTarget);t.shared.$f_el&&t.shared.$f_el.not(i)&&t.accessibility.focusEditor()},!0))}function T(e){var t=f.popups.get(e),i=C(e);_(t.find(".fr-buttons")),f.events.$on(t,"mouseenter","tabIndex",i._tiMouseenter,!0),f.events.$on(t.children().not(".fr-buttons"),"keydown","[tabIndex]",i._tiKeydown,!0),f.popups.onHide(e,function(){h(t.data("instance")||f)}),f.popups.onShow(e,function(){L=!1,setTimeout(function(){L=!0},0)})}function C(c){var d=f.popups.get(c);return{_tiKeydown:function(e){var t=d.data("instance")||f;if(!1===t.events.trigger("popup.tab",[e]))return!1;var i=e.which,n=d.find(":focus:first");if(ze.FE.KEYCODE.TAB==i){e.preventDefault();var r=d.children().not(".fr-buttons"),s=r.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),o=s.indexOf(this)+(e.shiftKey?-1:1);if(0<=o&&o<s.length)return t.events.disableBlur(),ze(s[o]).focus(),e.stopPropagation(),!1;var a=d.find(".fr-buttons");if(a.length&&u(a,!!e.shiftKey))return e.stopPropagation(),!1;if(p(r))return e.stopPropagation(),!1}else{if(ze.FE.KEYCODE.ENTER!=i)return ze.FE.KEYCODE.ESC==i?(e.preventDefault(),e.stopPropagation(),h(t),t.popups.isVisible(c)&&d.find(".fr-back:visible").length?(t.opts.toolbarInline&&(t.events.disableBlur(),t.events.focus()),t.button.exec(d.find(".fr-back:visible:first")),w(d)):t.popups.isVisible(c)&&d.find(".fr-dismiss:visible").length?t.button.exec(d.find(".fr-dismiss:visible:first")):(t.popups.hide(c),t.opts.toolbarInline&&t.toolbar.showInline(null,!0),w(d)),!1):ze.FE.KEYCODE.SPACE==i&&(n.is(".fr-submit")||n.is(".fr-dismiss"))?(e.preventDefault(),e.stopPropagation(),t.events.disableBlur(),t.button.exec(n),!0):t.keys.isBrowserAction(e)?void e.stopPropagation():n.is("input[type=text], textarea")?void e.stopPropagation():ze.FE.KEYCODE.SPACE==i&&(n.is(".fr-link-attr")||n.is("input[type=file]"))?void e.stopPropagation():(e.stopPropagation(),e.preventDefault(),!1);var l=null;0<d.find(".fr-submit:visible").length?l=d.find(".fr-submit:visible:first"):d.find(".fr-dismiss:visible").length&&(l=d.find(".fr-dismiss:visible:first")),l&&(e.preventDefault(),e.stopPropagation(),t.events.disableBlur(),t.button.exec(l))}},_tiMouseenter:function(){x(d.data("instance")||f)}}}function w(e){var t=e.data("popup-button");t&&setTimeout(function(){a(t),e.data("popup-button",null)},0)}function A(e){var t=e.data("modal-button");t&&setTimeout(function(){a(t),e.data("modal-button",null)},0)}function S(){return null!=f.shared.$f_el}function x(e){var t=f.popups.areVisible(e);t&&t.data("popup-button",null)}function R(e){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey;if(e.which==ze.FE.KEYCODE.F10&&!t&&!e.shiftKey&&e.altKey){f.shared.with_kb=!0;var i=f.popups.areVisible(f),n=!1;return i&&(n=p(i.children().not(".fr-buttons"))),n||o(),f.shared.with_kb=!1,e.preventDefault(),e.stopPropagation(),!1}return!0}function k(){f.$wp?f.events.on("keydown",R,!0):f.events.$on(f.$win,"keydown",R,!0),f.events.on("mousedown",function(e){x(f),f.shared.$f_el&&(h(f),e.stopPropagation(),f.events.disableBlur(),f.shared.$f_el=null)},!0),f.events.on("blur",function(){f.shared.$f_el=null,x(f)},!0)}var L=!0;return{_init:k,registerPopup:T,registerToolbar:_,focusToolbarElement:a,focusToolbar:u,focusContent:p,focusPopup:e,focusModal:i,focusEditor:b,focusPopupButton:w,focusModalButton:A,hasFocus:S,exec:y,saveSelection:t,restoreSelection:h}},ze.FE.MODULES.format=function(w){function l(e,t){var i="<"+e;for(var n in t)t.hasOwnProperty(n)&&(i+=" "+n+'="'+t[n]+'"');return i+">"}function o(e){return"</"+e+">"}function d(e,t){var i=e;for(var n in t)t.hasOwnProperty(n)&&(i+="id"==n?"#"+t[n]:"class"==n?"."+t[n]:"["+n+'="'+t[n]+'"]');return i}function f(e,t){return!(!e||e.nodeType!=Node.ELEMENT_NODE)&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}function A(e,t,i){if(e){if(w.node.isBlock(e))return A(e.firstChild,t,i),!1;for(var n=ze(l(t,i)).insertBefore(e),r=e;r&&!ze(r).is(".fr-marker")&&0===ze(r).find(".fr-marker").length&&"UL"!=r.tagName&&"OL"!=r.tagName;){var s=r;r=r.nextSibling,n.append(s)}if(r)(ze(r).find(".fr-marker").length||"UL"==r.tagName||"OL"==r.tagName)&&A(r.firstChild,t,i);else{for(var o=n.get(0).parentNode;o&&!o.nextSibling&&!w.node.isElement(o);)o=o.parentNode;if(o){var a=o.nextSibling;a&&(w.node.isBlock(a)?A(a.firstChild,t,i):A(a,t,i))}}n.is(":empty")&&n.remove()}}function i(e,t){var i;if(void 0===t&&(t={}),t.style&&delete t.style,w.selection.isCollapsed())w.markers.insert(),w.$el.find(".fr-marker").replaceWith(l(e,t)+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+o(e)),w.selection.restore();else{var n;w.selection.save(),A(w.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,e,t);do{for(n=w.$el.find(d(e,t)+" > "+d(e,t)),i=0;i<n.length;i++)n[i].outerHTML=n[i].innerHTML}while(n.length);w.el.normalize();var r=w.el.querySelectorAll(".fr-marker");for(i=0;i<r.length;i++){var s=ze(r[i]);!0===s.data("type")?f(s.get(0).nextSibling,d(e,t))&&s.next().prepend(s):f(s.get(0).previousSibling,d(e,t))&&s.prev().append(s)}w.selection.restore()}}function S(e,t,i,n){if(!n){var r=!1;if(!0===e.data("type"))for(;w.node.isFirstSibling(e.get(0))&&!e.parent().is(w.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().before(e),r=!0;else if(!1===e.data("type"))for(;w.node.isLastSibling(e.get(0))&&!e.parent().is(w.$el)&&!e.parent().is("ol")&&!e.parent().is("ul");)e.parent().after(e),r=!0;if(r)return!0}if(e.parents(t).length||void 0===t){var s="",o="",a=e.parent();if(a.is(w.$el)||w.node.isBlock(a.get(0)))return!1;for(;!w.node.isBlock(a.parent().get(0))&&(void 0===t||void 0!==t&&!f(a.get(0),d(t,i)));)s+=w.node.closeTagString(a.get(0)),o=w.node.openTagString(a.get(0))+o,a=a.parent();var l=e.get(0).outerHTML;e.replaceWith('<span id="mark"></span>');var c=a.html().replace(/<span id="mark"><\/span>/,s+w.node.closeTagString(a.get(0))+o+l+s+w.node.openTagString(a.get(0))+o);return a.replaceWith(w.node.openTagString(a.get(0))+c+w.node.closeTagString(a.get(0))),!0}return!1}function u(e,t,i,n){for(var r=w.node.contents(e.get(0)),s=0;s<r.length;s++){var o=r[s];if(w.node.hasClass(o,"fr-marker"))t=(t+1)%2;else if(t)if(0<ze(o).find(".fr-marker").length)t=u(ze(o),t,i,n);else{for(var a=ze(o).find(i||"*"),l=a.length-1;0<=l;l--){var c=a[l];w.node.isBlock(c)||w.node.isVoid(c)||void 0!==i&&!f(c,d(i,n))||(c.outerHTML=c.innerHTML)}void 0===i&&o.nodeType==Node.ELEMENT_NODE&&!w.node.isVoid(o)&&!w.node.isBlock(o)||f(o,d(i,n))?ze(o).replaceWith(o.innerHTML):void 0===i&&o.nodeType==Node.ELEMENT_NODE&&w.node.isBlock(o)&&w.node.clearAttributes(o)}else 0<ze(o).find(".fr-marker").length&&(t=u(ze(o),t,i,n))}return t}function n(e,t){void 0===t&&(t={}),t.style&&delete t.style;var i=w.selection.isCollapsed();w.selection.save();for(var n=!0;n;){n=!1;for(var r=w.$el.find(".fr-marker"),s=0;s<r.length;s++){var o=ze(r[s]),a=null;if(o.attr("data-cloned")||i||(a=o.clone().removeClass("fr-marker").addClass("fr-clone"),!0===o.data("type")?o.attr("data-cloned",!0).after(a):o.attr("data-cloned",!0).before(a)),S(o,e,t,i)){n=!0;break}}}u(w.$el,0,e,t),i||(w.$el.find(".fr-marker").remove(),w.$el.find(".fr-clone").removeClass("fr-clone").addClass("fr-marker")),i&&w.$el.find(".fr-marker").before(ze.FE.INVISIBLE_SPACE).after(ze.FE.INVISIBLE_SPACE),w.html.cleanEmptyTags(),w.el.normalize(),w.selection.restore()}function e(e,t){s(e,t)?n(e,t):i(e,t)}function x(e,t){var i=ze(e);i.css(t,""),""===i.attr("style")&&i.replaceWith(i.html())}function R(e,t){return 0===ze(e).attr("style").indexOf(t+":")||0<=ze(e).attr("style").indexOf(";"+t+":")||0<=ze(e).attr("style").indexOf("; "+t+":")}function t(e,t){var i,n;if(w.selection.isCollapsed()){w.markers.insert();var r=(n=w.$el.find(".fr-marker")).parent();if(w.node.openTagString(r.get(0))=='<span style="'+e+": "+r.css(e)+';">'){if(w.node.isEmpty(r.get(0)))r.replaceWith('<span style="'+e+": "+t+';">'+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+"</span>");else{var s={};s[e]=t,S(n,"span",s,!0),n=w.$el.find(".fr-marker"),t?n.replaceWith('<span style="'+e+": "+t+';">'+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+"</span>"):n.replaceWith(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS)}w.html.cleanEmptyTags()}else w.node.isEmpty(r.get(0))&&r.is("span")?(n.replaceWith(ze.FE.MARKERS),r.css(e,t)):n.replaceWith('<span style="'+e+": "+t+';">'+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+"</span>");w.selection.restore()}else{if(w.selection.save(),null==t||"color"==e&&0<w.$el.find(".fr-marker").parents("u, a").length){var o=w.$el.find(".fr-marker");for(i=0;i<o.length;i++)if(!0===(n=ze(o[i])).data("type"))for(;w.node.isFirstSibling(n.get(0))&&!n.parent().is(w.$el)&&!w.node.isElement(n.parent().get(0))&&!w.node.isBlock(n.parent().get(0));)n.parent().before(n);else for(;w.node.isLastSibling(n.get(0))&&!n.parent().is(w.$el)&&!w.node.isElement(n.parent().get(0))&&!w.node.isBlock(n.parent().get(0));)n.parent().after(n)}var a=w.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,l={"class":"fr-unprocessed"};for(t&&(l.style=e+": "+t+";"),A(a,"span",l),w.$el.find(".fr-marker + .fr-unprocessed").each(function(){ze(this).prepend(ze(this).prev())}),w.$el.find(".fr-unprocessed + .fr-marker").each(function(){ze(this).prev().append(this)}),(t||"").match(/\dem$/)&&w.$el.find("span.fr-unprocessed").removeClass("fr-unprocessed");0<w.$el.find("span.fr-unprocessed").length;){var c=w.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed");if(c.parent().get(0).normalize(),c.parent().is("span")&&1==c.parent().get(0).childNodes.length){c.parent().css(e,t);var d=c;c=c.parent(),d.replaceWith(d.html())}var f=c.find("span");for(i=f.length-1;0<=i;i--)x(f[i],e);var u=c.parentsUntil(w.$el,"span[style]"),p=[];for(i=u.length-1;0<=i;i--)R(u[i],e)||p.push(u[i]);if((u=u.not(p)).length){for(var h="",g="",m="",v="",b=c.get(0);b=b.parentNode,ze(b).addClass("fr-split"),h+=w.node.closeTagString(b),g=w.node.openTagString(ze(b).clone().addClass("fr-split").get(0))+g,u.get(0)!=b&&(m+=w.node.closeTagString(b),v=w.node.openTagString(ze(b).clone().addClass("fr-split").get(0))+v),u.get(0)!=b;);var E=h+w.node.openTagString(ze(u.get(0)).clone().css(e,t||"").get(0))+v+c.css(e,"").get(0).outerHTML+m+"</span>"+g;c.replaceWith('<span id="fr-break"></span>');var y=u.get(0).outerHTML
;ze(u.get(0)).replaceWith(y.replace(/<span id="fr-break"><\/span>/g,E))}}for(;0<w.$el.find(".fr-split:empty").length;)w.$el.find(".fr-split:empty").remove();w.$el.find(".fr-split").removeClass("fr-split"),w.$el.find('span[style=""]').removeAttr("style"),w.$el.find('span[class=""]').removeAttr("class"),w.html.cleanEmptyTags(),ze(w.$el.find("span").get().reverse()).each(function(){this.attributes&&0!==this.attributes.length||ze(this).replaceWith(this.innerHTML)}),w.el.normalize();var _=w.$el.find("span[style] + span[style]");for(i=0;i<_.length;i++){var T=ze(_[i]),C=ze(_[i]).prev();T.get(0).previousSibling==C.get(0)&&w.node.openTagString(T.get(0))==w.node.openTagString(C.get(0))&&(T.prepend(C.html()),C.remove())}w.$el.find("span[style] span[style]").each(function(){if(0<=ze(this).attr("style").indexOf("font-size")){var e=ze(this).parents("span[style]");0<=e.attr("style").indexOf("background-color")&&(ze(this).attr("style",ze(this).attr("style")+";"+e.attr("style")),S(ze(this),"span[style]",{},!1))}}),w.el.normalize(),w.selection.restore()}}function r(e){t(e,null)}function s(e,t){void 0===t&&(t={}),t.style&&delete t.style;var i=w.selection.ranges(0),n=i.startContainer;if(n.nodeType==Node.ELEMENT_NODE&&0<n.childNodes.length&&n.childNodes[i.startOffset]&&(n=n.childNodes[i.startOffset]),!i.collapsed&&n.nodeType==Node.TEXT_NODE&&i.startOffset==(n.textContent||"").length){for(;!w.node.isBlock(n.parentNode)&&!n.nextSibling;)n=n.parentNode;n.nextSibling&&(n=n.nextSibling)}for(var r=n;r&&r.nodeType==Node.ELEMENT_NODE&&!f(r,d(e,t));)r=r.firstChild;if(r&&r.nodeType==Node.ELEMENT_NODE&&f(r,d(e,t)))return!0;var s=n;for(s&&s.nodeType!=Node.ELEMENT_NODE&&(s=s.parentNode);s&&s.nodeType==Node.ELEMENT_NODE&&s!=w.el&&!f(s,d(e,t));)s=s.parentNode;return!(!s||s.nodeType!=Node.ELEMENT_NODE||s==w.el||!f(s,d(e,t)))}return{is:s,toggle:e,apply:i,remove:n,applyStyle:t,removeStyle:r}},ze.extend(ze.FE.DEFAULTS,{indentMargin:20}),ze.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(e){var t=this.format.is("strong");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},italic:{title:"Italic",toggle:!0,refresh:function(e){var t=this.format.is("em");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},underline:{title:"Underline",toggle:!0,refresh:function(e){var t=this.format.is("u");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(e){var t=this.format.is("s");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},subscript:{title:"Subscript",toggle:!0,refresh:function(e){var t=this.format.is("sub");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},superscript:{title:"Superscript",toggle:!0,refresh:function(e){var t=this.format.is("sup");e.toggleClass("fr-active",t).attr("aria-pressed",t)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},ze.FE.RegisterCommand=function(e,t){ze.FE.COMMANDS[e]=t},ze.FE.MODULES.commands=function(o){function r(e){return o.html.defaultTag()&&(e="<"+o.html.defaultTag()+">"+e+"</"+o.html.defaultTag()+">"),e}function t(e,t){if(!1!==o.events.trigger("commands.before",ze.merge([e],t||[]))){var i=ze.FE.COMMANDS[e]&&ze.FE.COMMANDS[e].callback||a[e],n=!0,r=!1;ze.FE.COMMANDS[e]&&(void 0!==ze.FE.COMMANDS[e].focus&&(n=ze.FE.COMMANDS[e].focus),void 0!==ze.FE.COMMANDS[e].accessibilityFocus&&(r=ze.FE.COMMANDS[e].accessibilityFocus)),(!o.core.hasFocus()&&n&&!o.popups.areVisible()||!o.core.hasFocus()&&r&&o.accessibility.hasFocus())&&o.events.focus(!0),ze.FE.COMMANDS[e]&&!1!==ze.FE.COMMANDS[e].undo&&(o.$el.find(".fr-marker").length&&(o.events.disableBlur(),o.selection.restore()),o.undo.saveStep()),i&&i.apply(o,ze.merge([e],t||[])),o.events.trigger("commands.after",ze.merge([e],t||[])),ze.FE.COMMANDS[e]&&!1!==ze.FE.COMMANDS[e].undo&&o.undo.saveStep()}}function e(e,t){o.format.toggle(t)}function i(e){o.selection.save(),o.html.wrap(!0,!0,!0,!0),o.selection.restore();for(var t=o.selection.blocks(),i=0;i<t.length;i++)if("LI"!=t[i].tagName&&"LI"!=t[i].parentNode.tagName){var n=ze(t[i]),r="rtl"==o.opts.direction||"rtl"==n.css("direction")?"margin-right":"margin-left",s=o.helpers.getPX(n.css(r));n.css(r,Math.max(s+e*o.opts.indentMargin,0)||""),n.removeClass("fr-temp-div")}o.selection.save(),o.html.unwrap(),o.selection.restore()}function n(e){return function(){t(e)}}function s(){o.events.on("keydown",function(e){var t=o.selection.element();if(t&&"HR"==t.tagName&&!o.keys.isArrow(e.which))return e.preventDefault(),!1}),o.events.on("keyup",function(e){var t=o.selection.element();if(t&&"HR"==t.tagName)if(e.which==ze.FE.KEYCODE.ARROW_LEFT||e.which==ze.FE.KEYCODE.ARROW_UP){if(t.previousSibling)return o.node.isBlock(t.previousSibling)?o.selection.setAtEnd(t.previousSibling):ze(t).before(ze.FE.MARKERS),o.selection.restore(),!1}else if((e.which==ze.FE.KEYCODE.ARROW_RIGHT||e.which==ze.FE.KEYCODE.ARROW_DOWN)&&t.nextSibling)return o.node.isBlock(t.nextSibling)?o.selection.setAtStart(t.nextSibling):ze(t).after(ze.FE.MARKERS),o.selection.restore(),!1}),o.events.on("mousedown",function(e){if(e.target&&"HR"==e.target.tagName)return e.preventDefault(),e.stopPropagation(),!1}),o.events.on("mouseup",function(){var e=o.selection.element();e==o.selection.endElement()&&e&&"HR"==e.tagName&&(e.nextSibling&&(o.node.isBlock(e.nextSibling)?o.selection.setAtStart(e.nextSibling):ze(e).after(ze.FE.MARKERS)),o.selection.restore())})}var a={bold:function(){e("bold","strong")},subscript:function(){o.format.is("sup")&&o.format.remove("sup"),e("subscript","sub")},superscript:function(){o.format.is("sub")&&o.format.remove("sub"),e("superscript","sup")},italic:function(){e("italic","em")},strikeThrough:function(){e("strikeThrough","s")},underline:function(){e("underline","u")},undo:function(){o.undo.run()},redo:function(){o.undo.redo()},indent:function(){i(1)},outdent:function(){i(-1)},show:function(){o.opts.toolbarInline&&o.toolbar.showInline(null,!0)},insertHR:function(){o.selection.remove();var e="";o.core.isEmpty()&&(e=r(e="<br>")),o.html.insert('<hr id="fr-just">'+e);var t,i=o.$el.find("hr#fr-just");if(i.removeAttr("id"),0===i.next().length){var n=o.html.defaultTag();n?i.after(ze("<"+n+">").append("<br>")):i.after("<br>")}i.prev().is("hr")?t=o.selection.setAfter(i.get(0),!1):i.next().is("hr")?t=o.selection.setBefore(i.get(0),!1):o.selection.setAfter(i.get(0),!1)||o.selection.setBefore(i.get(0),!1),t||void 0===t||(e=r(e=ze.FE.MARKERS+"<br>"),i.after(e)),o.selection.restore()},clearFormatting:function(){o.format.remove()},selectAll:function(){o.doc.execCommand("selectAll",!1,!1)}},l={};for(var c in a)a.hasOwnProperty(c)&&(l[c]=n(c));return ze.extend(l,{exec:t,_init:s})},ze.FE.MODULES.data=function(s){function c(e){return e}function e(e){if(!e)return e;for(var t="",i=c("charCodeAt"),n=c("fromCharCode"),r=p.indexOf(e[0]),s=1;s<e.length-2;s++){for(var o=d(++r),a=e[i](s),l="";/[0-9-]/.test(e[s+1]);)l+=e[++s];a=f(a,o,l=parseInt(l,10)||0),a^=r-1&31,t+=String[n](a)}return t}function d(e){for(var t=e.toString(),i=0,n=0;n<t.length;n++)i+=parseInt(t.charAt(n),10);return 10<i?i%9+1:i}function f(e,t,i){for(var n=Math.abs(i);0<n--;)e-=t;return i<0&&(e+=123),e}function t(e){return!(!e||"block"===e.css("display")||(e.remove(),0))}function o(){return t(l)||t(u)}function a(){if(10<n&&s.destroy(),!s.$box)return!1;s.$wp.prepend(g(c(g("NCKB1zwtPA9tqzajXC2c2A7B-16VD3spzJ1C9C3D5oOF2OB1NB1LD7VA5QF4TE3gytXB2A4C-8VA2AC4E1D3GB2EB2KC3KD1MF1juuSB1A8C6yfbmd1B2a1A5qdsdB2tivbC3CB1KC1CH1eLA2sTF1B4I4H-7B-21UB6b1F5bzzzyAB4JC3MG2hjdKC1JE6C1E1cj1pD-16pUE5B4prra2B5ZB3D3C3pxj1EA6A3rnJA2C-7I-7JD9D1E1wYH1F3sTB5TA2G4H4ZA22qZA5BB3mjcvcCC3JB1xillavC-21VE6PC5SI4YC5C8mb1A3WC3BD2B5aoDA2qqAE3A5D-17fOD1D5RD4WC10tE6OAZC3nF-7b1C4A4D3qCF2fgmapcromlHA2QA6a1E1D3e1A6C2bie2F4iddnIA7B2mvnwcIB5OA1DB2OLQA3PB10WC7WC5d1E3uI-7b1D5D6b1E4D2arlAA4EA1F-11srxI-7MB1D7PF1E5B4adB-21YD5vrZH3D3xAC4E1A2GF2CF2J-7yNC2JE1MI2hH-7QB1C6B5B-9bA-7XB13a1B5VievwpKB4LA3NF-10H-9I-8hhaC-16nqPG4wsleTD5zqYF3h1G2B7B4yvGE2Pi1H-7C-21OE6B1uLD1kI4WC1E7C5g1D-8fue1C8C6c1D4D3Hpi1CC4kvGC2E1legallyXB4axVA11rsA4A-9nkdtlmzBA2GD3A13A6CB1dabE1lezrUE6RD5TB4A-7f1C8c1B5d1D4D3tyfCD5C2D2==")))),l=s.$wp.find("> div:first"),u=l.find("> a"),"rtl"==s.opts.direction&&l.css("left","auto").css("right",0).setAttribute("direction","rtl"),n++}function i(){var e=s.o_win.FEK;try{e=e||localStorage&&localStorage.FEK}catch(u){}e=e||s.opts.key||[""];var t=g(c("ziRA1E3B9pA5B-11D-11xg1A3ZB5D1D4B-11ED2EG2pdeoC1clIH4wB-22yQD5uF4YE3E3A9=="));"string"==typeof e&&(e=[e]),s.ul=!0;for(var i=0;i<e.length;i++){var n=g(e[i])||"";if(!(n!==g(c(g("mcVRDoB1BGILD7YFe1BTXBA7B6==")))&&n.indexOf(h,n.length-h.length)<0&&[g("9qqG-7amjlwq=="),g("KA3B3C2A6D1D5H5H1A3=="),g("QzbzvxyB2yA-9m=="),g("ji1kacwmgG5bc=="),g("naamngiA3dA-16xtE-11C-9B1H-8sc==")].indexOf(h)<0)){s.ul=!1;break}}var r=new Image;!0===s.ul&&(a(),r.src=c(g(t))+"u"),s.events.on("contentChanged",function(){!0===s.ul&&o()&&a()}),s.events.on("destroy",function(){l&&l.length&&l.remove()},!0)}var l,u,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",h=function(){for(var e=0,t=document.domain,i=t.split("."),n="_gd"+(new Date).getTime();e<i.length-1&&-1==document.cookie.indexOf(n+"="+n);)t=i.slice(-1-++e).join("."),document.cookie=n+"="+n+";domain="+t+";";return document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",(t||"").replace(/(^\.*)|(\.*$)/g,"")}(),g=c(e),n=0;return{_init:i}},ze.extend(ze.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col"],pasteDeniedAttrs:["class","id","style"],pasteAllowedStyleProps:[],pasteAllowLocalImages:!1}),ze.FE.MODULES.paste=function(_){function i(e,t){try{_.win.localStorage.setItem("fr-copied-html",e),_.win.localStorage.setItem("fr-copied-text",t)}catch(n){}}function n(e){var t=_.html.getSelected();i(t,ze("<div>").html(t).text()),"cut"==e.type&&(_.undo.saveStep(),setTimeout(function(){_.selection.save(),_.html.wrap(),_.selection.restore(),_.events.focus(),_.undo.saveStep()},0))}function e(e){if(p)return!1;if(e.originalEvent&&(e=e.originalEvent),!1===_.events.trigger("paste.before",[e]))return e.preventDefault(),!1;if(_.$win.scrollTop(),e&&e.clipboardData&&e.clipboardData.getData){var t="",i=e.clipboardData.types;if(_.helpers.isArray(i))for(var n=0;n<i.length;n++)t+=i[n]+";";else t=i;if(d="",/text\/rtf/.test(t)&&(f=e.clipboardData.getData("text/rtf")),/text\/html/.test(t)?d=e.clipboardData.getData("text/html"):/text\/rtf/.test(t)&&_.browser.safari?d=f:/text\/plain/.test(t)&&!_.browser.mozilla&&(d=_.html.escapeEntities(e.clipboardData.getData("text/plain")).replace(/\n/g,"<br>")),""!==d)return s(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1;d=null}return r(),!1}function t(e){if(e.originalEvent&&(e=e.originalEvent),e&&e.dataTransfer&&e.dataTransfer.getData){var t="",i=e.dataTransfer.types;if(_.helpers.isArray(i))for(var n=0;n<i.length;n++)t+=i[n]+";";else t=i;if(d="",/text\/rtf/.test(t)&&(f=e.dataTransfer.getData("text/rtf")),/text\/html/.test(t)?d=e.dataTransfer.getData("text/html"):/text\/rtf/.test(t)&&_.browser.safari?d=f:/text\/plain/.test(t)&&!this.browser.mozilla&&(d=_.html.escapeEntities(e.dataTransfer.getData("text/plain")).replace(/\n/g,"<br>")),""!==d){if(_.keys.forceUndo(),S=_.snapshot.get(),_.selection.remove(),!1!==_.markers.insertAtPoint(e)){var r=_.el.querySelector(".fr-marker");return ze(r).replaceWith(ze.FE.MARKERS),s(),e.preventDefault&&(e.stopPropagation(),e.preventDefault()),!1}}else d=null}}function r(){_.selection.save(),_.events.disableBlur(),d=null,u?(u.html(""),_.browser.edge&&_.opts.iframe&&_.$el.append(u)):(u=ze('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 2147483647; line-height: 140%;" tabIndex="-1"></div>'),_.browser.safari?(u.css("top",_.$sc.scrollTop()),_.$el.after(u)):_.browser.edge&&_.opts.iframe?_.$el.append(u):_.$box.after(u),_.events.on("destroy",function(){u.remove()})),u.focus(),_.win.setTimeout(s,1)}function T(e){var t;e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>")).replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>")).replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>")).replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span")).replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,"")).replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,"")).replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," ")).replace(/<!--[\s\S]*?-->/gi,"")).replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var i,n=["style","script","applet","embed","noframes","noscript"];for(t=0;t<n.length;t++){var r=new RegExp("<"+n[t]+".*?"+n[t]+"(.*?)>","gi");e=e.replace(r,"")}for(e=(e=(e=e.replace(/&nbsp;/gi," ")).replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>")).replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");(e=(i=e).replace(/<[^\/>][^>]*><\/[^>]+>/gi,""))!=i;);e=(e=e.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>')).replace(/<lilevel1([^>]*)>/gi,"<li$1>"),e=(e=(e=_.clean.html(e,_.opts.pasteDeniedTags,_.opts.pasteDeniedAttrs)).replace(/<a>(.[^<]+)<\/a>/gi,"$1")).replace(/<br> */g,"<br>");var s=_.o_doc.createElement("div");s.innerHTML=e;var o=s.querySelectorAll("li[data-indent]");for(t=0;t<o.length;t++){var a=o[t],l=a.previousElementSibling;if(l&&"LI"==l.tagName){var c=l.querySelector(":scope > ul, :scope > ol");c||(c=document.createElement("ul"),l.appendChild(c)),c.appendChild(a)}else a.removeAttribute("data-indent")}return _.html.cleanBlankSpaces(s),s.innerHTML}function C(e){var t,i=null,n=_.doc.createElement("div");n.innerHTML=e;var r=n.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote");for(t=0;t<r.length;t++)(i=r[t]).outerHTML="<"+(_.html.defaultTag()||"DIV")+">"+i.innerHTML+"</"+(_.html.defaultTag()||"DIV")+">";for(t=(r=n.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")")).length-1;0<=t;t--)(i=r[t]).outerHTML=i.innerHTML;var s=function(e){for(var t=_.node.contents(e),i=0;i<t.length;i++)t[i].nodeType!=Node.TEXT_NODE&&t[i].nodeType!=Node.ELEMENT_NODE?t[i].parentNode.removeChild(t[i]):s(t[i])};return s(n),n.innerHTML}function s(){_.browser.edge&&_.opts.iframe&&_.$box.after(u),S||(_.keys.forceUndo(),S=_.snapshot.get()),null===d&&(d=u.get(0).innerHTML,_.selection.restore(),_.events.enableBlur());var e=d.match(/(class=\"?Mso|class=\'?Mso|class="?Xl|class='?Xl|class=Xl|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi),t=_.events.chainTrigger("paste.beforeCleanup",d);t&&"string"==typeof t&&(d=t),(!e||e&&!1!==_.events.trigger("paste.wordPaste",[d]))&&o(d,e)}function o(e,t,i){var n,r=null,s=null;0<=e.toLowerCase().indexOf("<body")&&(e=(e=e.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)[\s]*<\/body>[.\s\S\w\W<>]*/gi,"$1")).replace(/ \n/g," ").replace(/\n /g," ").replace(/([^>])\n([^<])/g,"$1 $2"));var o=!1;if(0<=e.indexOf('id="docs-internal-guid')&&(e=e.replace(/^[\w\W\s\S]* id="docs-internal-guid[^>]*>([\w\W\s\S]*)<\/b>[\w\W\s\S]*$/g,"$1"),o=!0),!t){var a=_.opts.htmlAllowedStyleProps;_.opts.htmlAllowedStyleProps=_.opts.pasteAllowedStyleProps,_.opts.htmlAllowComments=!1,e=_.clean.html(e,_.opts.pasteDeniedTags,_.opts.pasteDeniedAttrs),_.opts.htmlAllowedStyleProps=a,_.opts.htmlAllowComments=!0,e=(e=A(e)).replace(/\r|\n|\t/g,"");var l=_.doc.createElement("div");l.innerHTML=e;var c=null,d=null;try{c=_.win.localStorage.getItem("fr-copied-html"),d=_.win.localStorage.getItem("fr-copied-text")}catch(y){}d&&l.textContent.replace(/(\u00A0)/gi," ").replace(/\r|\n/gi,"")==d.replace(/(\u00A0)/gi," ").replace(/(\r|\n)+([ ]+[\r\n]+)*/gi," ")&&(e=c),e=e.replace(/^ */g,"").replace(/ *$/g,"")}!t||_.wordPaste&&i||(0===(e=e.replace(/^\n*/g,"").replace(/^ /g,"")).indexOf("<colgroup>")&&(e="<table>"+e+"</table>"),e=A(e=T(e))),_.opts.pastePlain&&(e=C(e));var f=_.events.chainTrigger("paste.afterCleanup",e);if("string"==typeof f&&(e=f),""!==e){var u=_.o_doc.createElement("div");u.innerHTML=e,_.spaces.normalize(u);var p=u.getElementsByTagName("span");for(n=p.length-1;0<=n;n--){var h=p[n];0===h.attributes.length&&(h.outerHTML=h.innerHTML)}var g=_.selection.element(),m=!1;if(g&&ze(g).parentsUntil(_.el,"ul, ol").length&&(m=!0),m){var v=u.children;1==v.length&&0<=["OL","UL"].indexOf(v[0].tagName)&&(v[0].outerHTML=v[0].innerHTML)}if(!o){var b=u.getElementsByTagName("br");for(n=b.length-1;0<=n;n--){var E=b[n];_.node.isBlock(E.previousSibling)&&E.parentNode.removeChild(E)}}if(_.opts.enter==ze.FE.ENTER_BR)for(n=(r=u.querySelectorAll("p, div")).length-1;0<=n;n--)0===(s=r[n]).attributes.length&&(s.outerHTML=s.innerHTML+(s.nextSibling&&!_.node.isEmpty(s)?"<br>":""));else if(_.opts.enter==ze.FE.ENTER_DIV)for(n=(r=u.getElementsByTagName("p")).length-1;0<=n;n--)(s=r[n]).outerHTML="<div>"+s.innerHTML+"</div>";else _.opts.enter==ze.FE.ENTER_P&&u.childNodes.length&&"P"==u.childNodes[0].tagName&&(u.childNodes[0].outerHTML=u.childNodes[0].innerHTML);e=u.innerHTML,_.html.insert(e,!0)}w(),_.undo.saveStep(S),S=null,_.undo.saveStep()}function w(){_.events.trigger("paste.after")}function a(){return f}function A(e){var t,i=_.o_doc.createElement("div");i.innerHTML=e;for(var n=i.querySelectorAll("*:empty:not(td):not(th):not(iframe):not(svg):not("+ze.FE.VOID_ELEMENTS.join("):not(")+")");n.length;){for(t=0;t<n.length;t++)n[t].parentNode.removeChild(n[t]);n=i.querySelectorAll("*:empty:not(td):not(th):not(iframe):not(svg):not("+ze.FE.VOID_ELEMENTS.join("):not(")+")")}for(var r=i.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])");r.length;){var s=r[r.length-1];if(_.html.defaultTag()&&"div"!=_.html.defaultTag())s.querySelector(_.html.blockTagsQuery())?s.outerHTML=s.innerHTML:s.outerHTML="<"+_.html.defaultTag()+">"+s.innerHTML+"</"+_.html.defaultTag()+">";else{var o=s.querySelectorAll("*");!o.length||"BR"!==o[o.length-1].tagName&&0===s.innerText.length?s.outerHTML=s.innerHTML+"<br>":s.outerHTML=s.innerHTML}r=i.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")}for(r=i.querySelectorAll("div:not([style])");r.length;){for(t=0;t<r.length;t++){var a=r[t],l=a.innerHTML.replace(/\u0009/gi,"").trim();a.outerHTML=l}r=i.querySelectorAll("div:not([style])")}return i.innerHTML}function l(){_.el.addEventListener("copy",n),_.el.addEventListener("cut",n),_.el.addEventListener("paste",e,{capture:!0}),_.events.on("drop",t),_.browser.msie&&_.browser.version<11&&(_.events.on("mouseup",function(e){2==e.button&&(setTimeout(function(){p=!1},50),p=!0)},!0),_.events.on("beforepaste",e)),_.events.on("destroy",c)}function c(){_.el.removeEventListener("copy",n),_.el.removeEventListener("cut",n),_.el.removeEventListener("paste",e)}var d,f,u,S,p=!1;return{_init:l,removeEmptyTags:A,getRtfClipboard:a,saveCopiedText:i,clean:o}},ze.extend(ze.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),ze.FE.SHORTCUTS_MAP={},ze.FE.RegisterShortcut=function(e,t,i,n,r,s){ze.FE.SHORTCUTS_MAP[(r?"^":"")+(s?"@":"")+e]={cmd:t,val:i,letter:n,shift:r,option:s},ze.FE.DEFAULTS.shortcutsEnabled.push(t)},ze.FE.RegisterShortcut(ze.FE.KEYCODE.E,"show",null,"E",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.B,"bold",null,"B",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.I,"italic",null,"I",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.U,"underline",null,"U",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),ze.FE.RegisterShortcut(ze.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),ze.FE.MODULES.shortcuts=function(a){function e(e){if(!a.opts.shortcutsHint)return null;if(!n)for(var t in n={},ze.FE.SHORTCUTS_MAP)ze.FE.SHORTCUTS_MAP.hasOwnProperty(t)&&0<=a.opts.shortcutsEnabled.indexOf(ze.FE.SHORTCUTS_MAP[t].cmd)&&(n[ze.FE.SHORTCUTS_MAP[t].cmd+"."+(ze.FE.SHORTCUTS_MAP[t].val||"")]={shift:ze.FE.SHORTCUTS_MAP[t].shift,option:ze.FE.SHORTCUTS_MAP[t].option,letter:ze.FE.SHORTCUTS_MAP[t].letter});var i=n[e];return i?(a.helpers.isMac()?String.fromCharCode(8984):"Ctrl+")+(i.shift?a.helpers.isMac()?String.fromCharCode(8679):"Shift+":"")+(i.option?a.helpers.isMac()?String.fromCharCode(8997):"Alt+":"")+i.letter:null}function t(e){if(!a.core.hasFocus())return!0;var t=e.which,i=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey;if("keyup"==e.type&&l&&t!=ze.FE.KEYCODE.META)return l=!1;"keydown"==e.type&&(l=!1);var n=(e.shiftKey?"^":"")+(e.altKey?"@":"")+t;if(i&&ze.FE.SHORTCUTS_MAP[n]){var r=ze.FE.SHORTCUTS_MAP[n].cmd;if(r&&0<=a.opts.shortcutsEnabled.indexOf(r)){var s,o=ze.FE.SHORTCUTS_MAP[n].val;if(r&&!o?s=a.$tb.find('.fr-command[data-cmd="'+r+'"]'):r&&o&&(s=a.$tb.find('.fr-command[data-cmd="'+r+'"][data-param1="'+o+'"]')),s.length)return e.preventDefault(),e.stopPropagation(),s.parents(".fr-toolbar").data("instance",a),"keydown"==e.type&&(a.button.exec(s),l=!0),!1;if(r&&a.commands[r])return e.preventDefault(),e.stopPropagation(),"keydown"==e.type&&(a.commands[r](),l=!0),!1}}}function i(){a.events.on("keydown",t,!0),a.events.on("keyup",t,!0)}var n=null,l=!1;return{_init:i,get:e}},ze.FE.MODULES.snapshot=function(a){function i(e){for(var t=e.parentNode.childNodes,i=0,n=null,r=0;r<t.length;r++){if(n){var s=t[r].nodeType===Node.TEXT_NODE&&""===t[r].textContent,o=n.nodeType===Node.TEXT_NODE&&t[r].nodeType===Node.TEXT_NODE;s||o||i++}if(t[r]==e)return i;n=t[r]}}function t(e){var t=[];if(!e.parentNode)return[];for(;!a.node.isElement(e);)t.push(i(e)),e=e.parentNode;return t.reverse()}function n(e,t){for(;e&&e.nodeType===Node.TEXT_NODE;){var i=e.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&(t+=i.textContent.length),e=i}return t}function r(e){return{scLoc:t(e.startContainer),scOffset:n(e.startContainer,e.startOffset),ecLoc:t(e.endContainer),ecOffset:n(e.endContainer,e.endOffset)}}function e(){var e={};if(a.events.trigger("snapshot.before"),e.html=(a.$wp?a.$el.html():a.$oel.get(0).outerHTML).replace(/ style=""/g,""),e.ranges=[],a.$wp&&a.selection.inEditor()&&a.core.hasFocus())for(var t=a.selection.ranges(),i=0;i<t.length;i++)e.ranges.push(r(t[i]));return a.events.trigger("snapshot.after",[e]),e}function l(e){for(var t=a.el,i=0;i<e.length;i++)t=t.childNodes[e[i]];return t}function s(e,t){try{var i=l(t.scLoc),n=t.scOffset,r=l(t.ecLoc),s=t.ecOffset,o=a.doc.createRange();o.setStart(i,n),o.setEnd(r,s),e.addRange(o)}catch(c){}}function o(e){a.$el.html()!=e.html&&(a.opts.htmlExecuteScripts?a.$el.html(e.html):a.el.innerHTML=e.html);var t=a.selection.get();a.selection.clear(),a.events.focus(!0);for(var i=0;i<e.ranges.length;i++)s(t,e.ranges[i])}function c(e,t){return e.html==t.html&&(!a.core.hasFocus()||JSON.stringify(e.ranges)==JSON.stringify(t.ranges))}return{get:e,restore:o,equal:c}},ze.FE.MODULES.undo=function(i){function e(e){var t=e.which;i.keys.ctrlKey(e)&&(90==t&&e.shiftKey&&e.preventDefault(),90==t&&e.preventDefault())}function t(){return!(0===i.undo_stack.length||i.undo_index<=1)}function n(){return i.undo_index!=i.undo_stack.length}function r(e){if(!i.undo_stack||i.undoing||i.el.querySelector(".fr-marker"))return!1;void 0===e?(e=i.snapshot.get(),i.undo_stack[i.undo_index-1]&&i.snapshot.equal(i.undo_stack[i.undo_index-1],e)||(s(),i.undo_stack.push(e),i.undo_index++,e.html!=f&&(i.events.trigger("contentChanged"),f=e.html))):(s(),0<i.undo_index?i.undo_stack[i.undo_index-1]=e:(i.undo_stack.push(e),i.undo_index++))}function s(){if(!i.undo_stack||i.undoing)return!1;for(;i.undo_stack.length>i.undo_index;)i.undo_stack.pop()}function o(){if(1<i.undo_index){i.undoing=!0;var e=i.undo_stack[--i.undo_index-1];clearTimeout(i._content_changed_timer),i.snapshot.restore(e),f=e.html,i.popups.hideAll(),i.toolbar.enable(),i.events.trigger("contentChanged"),i.events.trigger("commands.undo"),i.undoing=!1}}function a(){if(i.undo_index<i.undo_stack.length){i.undoing=!0;var e=i.undo_stack[i.undo_index++];clearTimeout(i._content_changed_timer),i.snapshot.restore(e),f=e.html,i.popups.hideAll(),i.toolbar.enable(),i.events.trigger("contentChanged"),i.events.trigger("commands.redo"),i.undoing=!1}}function l(){i.undo_index=0,i.undo_stack=[]}function c(){i.undo_stack=[]}function d(){l(),i.events.on("initialized",function(){f=(i.$wp?i.$el.html():i.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),i.events.on("blur",function(){i.el.querySelector(".fr-dragging")||i.undo.saveStep()}),i.events.on("keydown",e),i.events.on("destroy",c)}var f=null;return{_init:d,run:o,redo:a,canDo:t,canRedo:n,dropRedo:s,reset:l,saveStep:r}},ze.FE.ICON_DEFAULT_TEMPLATE="font_awesome",ze.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},ze.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left"},redo:{NAME:"rotate-right"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},ze.FE.DefineIconTemplate=function(e,t){ze.FE.ICON_TEMPLATES[e]=t},ze.FE.DefineIcon=function(e,t){ze.FE.ICONS[e]=t},ze.FE.MODULES.icon=function(){function e(i){var e=null,n=ze.FE.ICONS[i];if(void 0!==n){var t=n.template||ze.FE.ICON_DEFAULT_TEMPLATE;t&&(t=ze.FE.ICON_TEMPLATES[t])&&(e=t.replace(/\[([a-zA-Z]*)\]/g,function(e,t){return"NAME"==t?n[t]||i:n[t]}))}return e||i}function t(e){var t=ze.FE.ICONS[e],i=ze.FE.ICON_DEFAULT_TEMPLATE;return void 0!==t?i=t.template||ze.FE.ICON_DEFAULT_TEMPLATE:i}return{create:e,getTemplate:t}},ze.extend(ze.FE.DEFAULTS,{tooltips:!0}),ze.FE.MODULES.tooltip=function(r){function n(){r.$tooltip&&r.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function s(e,t){if(e.data("title")||e.data("title",e.attr("title")),!e.data("title"))return!1;r.$tooltip||o(),e.removeAttr("title"),r.$tooltip.text(r.language.translate(e.data("title"))),r.$tooltip.addClass("fr-visible");var i=e.offset().left+(e.outerWidth()-r.$tooltip.outerWidth())/2;i<0&&(i=0),i+r.$tooltip.outerWidth()>ze(r.o_win).width()&&(i=ze(r.o_win).width()-r.$tooltip.outerWidth()),void 0===t&&(t=r.opts.toolbarBottom);var n=t?e.offset().top-r.$tooltip.height():e.offset().top+e.outerHeight();r.$tooltip.css("position",""),r.$tooltip.css("left",i),r.$tooltip.css("top",Math.ceil(n)),"static"!=ze(r.o_doc).find("body:first").css("position")?(r.$tooltip.css("margin-left",-ze(r.o_doc).find("body:first").offset().left),r.$tooltip.css("margin-top",-ze(r.o_doc).find("body:first").offset().top)):(r.$tooltip.css("margin-left",""),r.$tooltip.css("margin-top",""))}function e(e,t,i){r.opts.tooltips&&!r.helpers.isMobile()&&(r.events.$on(e,"mouseenter",t,function(e){r.node.hasClass(e.currentTarget,"fr-disabled")||r.edit.isDisabled()||s(ze(e.currentTarget),i)},!0),r.events.$on(e,"mouseleave "+r._mousedown+" "+r._mouseup,t,function(){n()},!0))}function o(){r.opts.tooltips&&!r.helpers.isMobile()&&(r.shared.$tooltip?r.$tooltip=r.shared.$tooltip:(r.shared.$tooltip=ze('<div class="fr-tooltip"></div>'),r.$tooltip=r.shared.$tooltip,r.opts.theme&&r.$tooltip.addClass(r.opts.theme+"-theme"),ze(r.o_doc).find("body:first").append(r.$tooltip)),r.events.on("shared.destroy",function(){r.$tooltip.html("").removeData().remove(),r.$tooltip=null},!0))}return{hide:n,to:s,bind:e}},ze.FE.MODULES.button=function(p){function o(e,t,i){for(var n=ze(),r=0;r<e.length;r++){var s=ze(e[r]);if(s.is(t)&&(n=n.add(s)),i&&s.is(".fr-dropdown")){var o=s.next().find(t);n=n.add(o)}}return n}function l(e,t){var i,n=ze();if(!e)return n;for(i in n=(n=n.add(o(_,e,t))).add(o(T,e,t)),p.shared.popups)if(p.shared.popups.hasOwnProperty(i)){var r=p.shared.popups[i].children().find(e);n=n.add(r)}for(i in p.shared.modals)if(p.shared.modals.hasOwnProperty(i)){var s=p.shared.modals[i].$modal.find(e);n=n.add(s)}return n}function n(e){var t=e.next(),i=p.node.hasClass(e.get(0),"fr-active"),n=l(".fr-dropdown.fr-active").not(e),r=e.parents(".fr-toolbar, .fr-popup").data("instance")||p;if(r.helpers.isIOS()&&!r.el.querySelector(".fr-marker")&&(r.selection.save(),r.selection.clear(),r.selection.restore()),!i){var s=e.data("cmd");t.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),ze.FE.COMMANDS[s]&&ze.FE.COMMANDS[s].refreshOnShow&&ze.FE.COMMANDS[s].refreshOnShow.apply(r,[e,t]),t.css("left",e.offset().left-e.parent().offset().left-("rtl"==p.opts.direction?t.width()-e.outerWidth():0)),t.addClass("test-height");var o=t.outerHeight();t.removeClass("test-height"),t.css("top","").css("bottom",""),!p.opts.toolbarBottom&&t.offset().top+e.outerHeight()+o<ze(p.o_doc).height()?t.css("top",e.position().top+e.outerHeight()):t.css("bottom",p.$tb.height()-e.position().top)}e.addClass("fr-blink").toggleClass("fr-active"),e.hasClass("fr-active")?(t.attr("aria-hidden",!1),e.attr("aria-expanded",!0)):(t.attr("aria-hidden",!0),e.attr("aria-expanded",!1)),setTimeout(function(){e.removeClass("fr-blink")},300),t.css("margin-left",""),t.offset().left+t.outerWidth()>p.$sc.offset().left+p.$sc.width()&&t.css("margin-left",-(t.offset().left+t.outerWidth()-p.$sc.offset().left-p.$sc.width())),n.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),n.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!==e.parents(".fr-popup").length||p.opts.toolbarInline||(p.node.hasClass(e.get(0),"fr-active")?p.$tb.css("zIndex",(p.opts.zIndex||1)+4):p.$tb.css("zIndex",""));var a=t.find("a.fr-command.fr-active:first");p.helpers.isMobile()||(a.length?p.accessibility.focusToolbarElement(a):p.accessibility.focusToolbarElement(e))}function t(e){e.addClass("fr-blink"),setTimeout(function(){e.removeClass("fr-blink")},500);for(var t=e.data("cmd"),i=[];void 0!==e.data("param"+(i.length+1));)i.push(e.data("param"+(i.length+1)));var n=l(".fr-dropdown.fr-active");n.length&&(n.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),n.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),e.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(t,i)}function r(e){t(e)}function i(e){var t=e.parents(".fr-popup, .fr-toolbar").data("instance");if(0!==e.parents(".fr-popup").length||e.data("popup")||t.popups.hideAll(),t.popups.areVisible()&&!t.popups.areVisible(t)){for(var i=0;i<ze.FE.INSTANCES.length;i++)ze.FE.INSTANCES[i]!=t&&ze.FE.INSTANCES[i].popups&&ze.FE.INSTANCES[i].popups.areVisible()&&ze.FE.INSTANCES[i].$el.find(".fr-marker").remove();t.popups.hideAll()}p.node.hasClass(e.get(0),"fr-dropdown")?n(e):(r(e),ze.FE.COMMANDS[e.data("cmd")]&&!1!==ze.FE.COMMANDS[e.data("cmd")].refreshAfterCallback&&t.button.bulkRefresh())}function s(e){i(ze(e.currentTarget))}function a(e){var t=e.find(".fr-dropdown.fr-active");t.length&&(t.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),t.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function c(e){e.preventDefault(),e.stopPropagation()}function d(e){if(e.stopPropagation(),!p.helpers.isMobile())return!1}function e(t,e){p.events.bindClick(t,".fr-command:not(.fr-disabled)",s),p.events.$on(t,p._mousedown+" "+p._mouseup+" "+p._move,".fr-dropdown-menu",c,!0),p.events.$on(t,p._mousedown+" "+p._mouseup+" "+p._move,".fr-dropdown-menu .fr-dropdown-wrapper",d,!0);var i=t.get(0).ownerDocument,n="defaultView"in i?i.defaultView:i.parentWindow,r=function(e){
(!e||e.type==p._mouseup&&e.target!=ze("html").get(0)||"keydown"==e.type&&(p.keys.isCharacter(e.which)&&!p.keys.ctrlKey(e)||e.which==ze.FE.KEYCODE.ESC))&&a(t)};p.events.$on(ze(n),p._mouseup+" resize keydown",r,!0),p.opts.iframe&&p.events.$on(p.$win,p._mouseup,r,!0),p.node.hasClass(t.get(0),"fr-popup")?ze.merge(T,t.find(".fr-btn").toArray()):ze.merge(_,t.find(".fr-btn").toArray()),p.tooltip.bind(t,".fr-btn, .fr-title",e)}function h(e,t){var i="";if(t.html)"function"==typeof t.html?i+=t.html.call(p):i+=t.html;else{var n=t.options;for(var r in"function"==typeof n&&(n=n()),i+='<ul class="fr-dropdown-list" role="presentation">',n)if(n.hasOwnProperty(r)){var s=p.shortcuts.get(e+"."+r);s=s?'<span class="fr-shortcut">'+s+"</span>":"",i+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+e+'" data-param1="'+r+'" title="'+n[r]+'">'+p.language.translate(n[r])+"</a></li>"}i+="</ul>"}return i}function f(e,t,i){if(p.helpers.isMobile()&&!1===t.showOnMobile)return"";var n,r=t.displaySelection;if("function"==typeof r&&(r=r(p)),r){var s="function"==typeof t.defaultSelection?t.defaultSelection(p):t.defaultSelection;n='<span style="width:'+(t.displaySelectionWidth||100)+'px">'+p.language.translate(s||t.title)+"</span>"}else n=p.icon.create(t.icon||e),n+='<span class="fr-sr-only">'+(p.language.translate(t.title)||"")+"</span>";var o=t.popup?' data-popup="true"':"",a=t.modal?' data-modal="true"':"",l=p.shortcuts.get(e+".");l=l?" ("+l+")":"";var c=e+"-"+p.id,d="dropdown-menu-"+c,f='<button id="'+c+'"type="button" tabIndex="-1" role="button"'+(t.toggle?' aria-pressed="false"':"")+("dropdown"==t.type?' aria-controls="'+d+'" aria-expanded="false" aria-haspopup="true"':"")+(t.disabled?' aria-disabled="true"':"")+' title="'+(p.language.translate(t.title)||"")+l+'" class="fr-command fr-btn'+("dropdown"==t.type?" fr-dropdown":"")+" fr-btn-"+p.icon.getTemplate(t.icon)+(t.displaySelection?" fr-selection":"")+(t.back?" fr-back":"")+(t.disabled?" fr-disabled":"")+(i?"":" fr-hidden")+'" data-cmd="'+e+'"'+o+a+">"+n+"</button>";if("dropdown"==t.type){var u='<div id="'+d+'" class="fr-dropdown-menu" role="listbox" aria-labelledby="'+c+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';u+=h(e,t),f+=u+="</div></div></div>"}return f}function u(e,t){for(var i="",n=0;n<e.length;n++){var r=e[n],s=ze.FE.COMMANDS[r];if(!(s&&void 0!==s.plugin&&p.opts.pluginsEnabled.indexOf(s.plugin)<0))if(s){i+=f(r,s,void 0===t||0<=t.indexOf(r))}else"|"==r?i+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==r&&(i+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>')}return i}function g(e){var t,i=e.parents(".fr-popup, .fr-toolbar").data("instance")||p,n=e.data("cmd");p.node.hasClass(e.get(0),"fr-dropdown")?t=e.next():(e.removeClass("fr-active"),e.attr("aria-pressed")&&e.attr("aria-pressed",!1)),ze.FE.COMMANDS[n]&&ze.FE.COMMANDS[n].refresh?ze.FE.COMMANDS[n].refresh.apply(i,[e,t]):p.refresh[n]&&i.refresh[n](e,t)}function m(r){var s=p.$tb&&p.$tb.data("instance")||p;if(!1===p.events.trigger("buttons.refresh"))return!0;setTimeout(function(){for(var e=s.selection.inEditor()&&s.core.hasFocus(),t=0;t<r.length;t++){var i=ze(r[t]),n=i.data("cmd");0===i.parents(".fr-popup").length?e||ze.FE.COMMANDS[n]&&ze.FE.COMMANDS[n].forcedRefresh?s.button.refresh(i):p.node.hasClass(i.get(0),"fr-dropdown")||(i.removeClass("fr-active"),i.attr("aria-pressed")&&i.attr("aria-pressed",!1)):i.parents(".fr-popup").is(":visible")&&s.button.refresh(i)}},0)}function v(){m(_),m(T)}function b(){_=[],T=[]}function E(){clearTimeout(C),C=setTimeout(v,50)}function y(){p.opts.toolbarInline?p.events.on("toolbar.show",v):(p.events.on("mouseup",E),p.events.on("keyup",E),p.events.on("blur",E),p.events.on("focus",E),p.events.on("contentChanged",E),p.helpers.isMobile()&&p.events.$on(p.$doc,"selectionchange",v)),p.events.on("shared.destroy",b)}var _=[];(p.opts.toolbarInline||p.opts.toolbarContainer)&&(p.shared.buttons||(p.shared.buttons=[]),_=p.shared.buttons);var T=[];p.shared.popup_buttons||(p.shared.popup_buttons=[]),T=p.shared.popup_buttons;var C=null;return{_init:y,buildList:u,bindCommands:e,refresh:g,bulkRefresh:v,exec:t,click:i,hideActiveDropdowns:a,getButtons:l}},ze.FE.MODULES.modals=function(l){function e(e){return u[e]}function r(e,t){var i='<div tabIndex="-1" class="fr-modal'+(l.opts.theme?" "+l.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">';return i+='<div class="fr-modal-head">'+e+'<i title="'+l.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i></div>',i+='<div tabIndex="-1" class="fr-modal-body">'+t+"</div>",ze(i+="</div></div>")}function t(i,e,t){if(l.shared.$overlay||(l.shared.$overlay=ze('<div class="fr-overlay">').appendTo("body:first")),f=l.shared.$overlay,l.opts.theme&&f.addClass(l.opts.theme+"-theme"),!u[i]){var n=r(e,t);u[i]={$modal:n,$head:n.find(".fr-modal-head"),$body:n.find(".fr-modal-body")},l.helpers.isMobile()||n.addClass("fr-desktop"),n.appendTo("body:first"),l.events.bindClick(n,"i.fr-modal-close",function(){s(i)}),u[i].$body.css("margin-top",u[i].$head.outerHeight()),l.events.$on(n,"keydown",function(e){var t=e.which;return t==ze.FE.KEYCODE.ESC?(s(i),l.accessibility.focusModalButton(n),!1):!(!ze(e.currentTarget).is("input[type=text], textarea")&&t!=ze.FE.KEYCODE.ARROW_UP&&t!=ze.FE.KEYCODE.ARROW_DOWN&&!l.keys.isBrowserAction(e)&&(e.preventDefault(),e.stopPropagation(),1))},!0),s(i,!0)}return u[i]}function i(){for(var e in u){var t=u[e];t&&t.$modal&&t.$modal.removeData().remove()}f&&f.removeData().remove(),u={}}function n(e){if(u[e]){var t=u[e].$modal;t.data("instance",l),t.show(),f.show(),ze(l.o_doc).find("body:first").addClass("prevent-scroll"),l.helpers.isMobile()&&ze(l.o_doc).find("body:first").addClass("fr-mobile"),t.addClass("fr-active"),l.accessibility.focusModal(t)}}function s(e,t){if(u[e]){var i=u[e].$modal,n=i.data("instance")||l;n.events.enableBlur(),i.hide(),f.hide(),ze(n.o_doc).find("body:first").removeClass("prevent-scroll fr-mobile"),i.removeClass("fr-active"),t||(l.accessibility.restoreSelection(n),l.events.trigger("modals.hide"))}}function o(e){if(u[e]){var t=u[e],i=t.$modal,n=t.$body,r=ze(l.o_win).height(),s=i.find(".fr-modal-wrapper"),o=r-s.outerHeight(!0)+(s.height()-(n.outerHeight(!0)-n.height())),a="auto";o<n.get(0).scrollHeight&&(a=o),n.height(a)}}function a(e){var t;if("string"==typeof e){if(!u[e])return;t=u[e].$modal}else t=e;return t&&l.node.hasClass(t,"fr-active")&&l.core.sameInstance(t)||!1}function c(e){for(var t in u)if(u.hasOwnProperty(t)&&a(t)&&(void 0===e||u[t].$modal.data("instance")==e))return u[t].$modal;return!1}function d(){l.events.on("shared.destroy",i,!0)}l.shared.modals||(l.shared.modals={});var f,u=l.shared.modals;return{_init:d,get:e,create:t,show:n,hide:s,resize:o,isVisible:a,areVisible:c}},ze.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},ze.FE.RegisterTemplate=function(e,t){ze.FE.POPUP_TEMPLATES[e]=t},ze.FE.MODULES.popups=function(l){function c(e,t){t.is(":visible")||(t=l.$sc),t.is(T[e].data("container"))||(T[e].data("container",t),t.append(T[e]))}function e(e,t,i,n){if(d(e)||(f()&&0<l.$el.find(".fr-marker").length?(l.events.disableBlur(),l.selection.restore()):(l.events.disableBlur(),l.events.focus(),l.events.enableBlur())),u([e]),!T[e])return!1;var r=l.button.getButtons(".fr-dropdown.fr-active");r.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),r.next().attr("aria-hidden",!0),T[e].data("instance",l),l.$tb&&l.$tb.data("instance",l);var s=T[e].outerWidth(),o=d(e);T[e].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var a=T[e].data("container");l.opts.toolbarInline&&a&&l.$tb&&a.get(0)==l.$tb.get(0)&&(c(e,l.$sc),i=l.$tb.offset().top-l.helpers.getPX(l.$tb.css("margin-top")),t=l.$tb.offset().left+l.$tb.outerWidth()/2+(parseFloat(l.$tb.find(".fr-arrow").css("margin-left"))||0)+l.$tb.find(".fr-arrow").outerWidth()/2,l.node.hasClass(l.$tb.get(0),"fr-above")&&i&&(i+=l.$tb.outerHeight()),n=0),a=T[e].data("container"),!l.opts.iframe||n||o||(t&&(t-=l.$iframe.offset().left),i&&(i-=l.$iframe.offset().top)),a.is(l.$tb)?l.$tb.css("zIndex",(l.opts.zIndex||1)+4):T[e].css("zIndex",(l.opts.zIndex||1)+4),t&&(t-=s/2),l.opts.toolbarBottom&&a&&l.$tb&&a.get(0)==l.$tb.get(0)&&(T[e].addClass("fr-above"),i&&(i-=T[e].outerHeight())),T[e].removeClass("fr-active"),l.position.at(t,i,T[e],n||0),T[e].addClass("fr-active"),o||l.accessibility.focusPopup(T[e]),l.opts.toolbarInline&&l.toolbar.hide(),l.events.trigger("popups.show."+e),v(e)._repositionPopup(),p()}function t(e,t){l.events.on("popups.show."+e,t)}function d(e){return T[e]&&l.node.hasClass(T[e],"fr-active")&&l.core.sameInstance(T[e])||!1}function f(e){for(var t in T)if(T.hasOwnProperty(t)&&d(t)&&(void 0===e||T[t].data("instance")==e))return T[t];return!1}function i(e){var t=null;(t="string"!=typeof e?e:T[e])&&l.node.hasClass(t,"fr-active")&&(t.removeClass("fr-active fr-above"),l.events.trigger("popups.hide."+e),l.$tb&&(1<l.opts.zIndex?l.$tb.css("zIndex",l.opts.zIndex+1):l.$tb.css("zIndex","")),l.events.disableBlur(),t.find("input, textarea, button").filter(":focus").blur(),t.find("input, textarea").attr("disabled","disabled"))}function n(e,t){l.events.on("popups.hide."+e,t)}function r(e){var t=T[e];return t&&!t.data("inst"+l.id)&&b(v(e),e),t}function s(e,t){l.events.on("popups.refresh."+e,t)}function o(e){T[e].data("instance",l),l.events.trigger("popups.refresh."+e);for(var t=T[e].find(".fr-command"),i=0;i<t.length;i++){var n=ze(t[i]);0===n.parents(".fr-dropdown-menu").length&&l.button.refresh(n)}}function u(e){for(var t in void 0===e&&(e=[]),T)T.hasOwnProperty(t)&&e.indexOf(t)<0&&i(t)}function a(){l.shared.exit_flag=!0}function p(){l.shared.exit_flag=!1}function h(){return l.shared.exit_flag}function g(e,t){var i=ze.FE.POPUP_TEMPLATES[e];for(var n in"function"==typeof i&&(i=i.apply(l)),t)t.hasOwnProperty(n)&&(i=i.replace("[_"+n.toUpperCase()+"_]",t[n]));return i}function m(e,t){var i=g(e,t),n=ze('<div class="fr-popup'+(l.helpers.isMobile()?" fr-mobile":" fr-desktop")+(l.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+i+"</div>");l.opts.theme&&n.addClass(l.opts.theme+"-theme"),1<l.opts.zIndex&&l.$tb.css("z-index",l.opts.zIndex+2),"auto"!=l.opts.direction&&n.removeClass("fr-ltr fr-rtl").addClass("fr-"+l.opts.direction),n.find("input, textarea").attr("dir",l.opts.direction).attr("disabled","disabled");var r=ze("body:first");return r.append(n),n.data("container",r),T[e]=n,l.button.bindCommands(n,!1),n}function v(n){var r=T[n];return{_windowResize:function(){var e=r.data("instance")||l;!e.helpers.isMobile()&&r.is(":visible")&&(e.events.disableBlur(),e.popups.hide(n),e.events.enableBlur())},_inputFocus:function(e){var t=r.data("instance")||l,i=ze(e.currentTarget);if(i.is("input:file")&&i.closest(".fr-layer").addClass("fr-input-focus"),e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.events.enableBlur()},100),t.helpers.isMobile()){var n=ze(t.o_win).scrollTop();setTimeout(function(){ze(t.o_win).scrollTop(n)},0)}},_inputBlur:function(e){var t=r.data("instance")||l,i=ze(e.currentTarget);i.is("input:file")&&i.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&ze(this).is(":visible")&&(t.events.blurActive()&&t.events.trigger("blur"),t.events.enableBlur())},_editorKeydown:function(e){var t=r.data("instance")||l;t.keys.ctrlKey(e)||e.which==ze.FE.KEYCODE.ALT||e.which==ze.FE.KEYCODE.ESC||(d(n)&&r.find(".fr-back:visible").length?t.button.exec(r.find(".fr-back:visible:first")):e.which!=ze.FE.KEYCODE.ALT&&t.popups.hide(n))},_preventFocus:function(e){var t=r.data("instance")||l,i=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;"mouseup"==e.type||ze(i).is(":focus")||t.events.disableBlur(),"mouseup"!=e.type||ze(i).hasClass("fr-command")||0<ze(i).parents(".fr-command").length||l.button.hideActiveDropdowns(r),(l.browser.safari||l.browser.mozilla)&&"mousedown"==e.type&&ze(i).is("input[type=file]")&&t.events.disableBlur();var n="input, textarea, button, select, label, .fr-command";if(i&&!ze(i).is(n)&&0===ze(i).parents(n).length)return e.stopPropagation(),!1;i&&ze(i).is(n)&&e.stopPropagation(),p()},_editorMouseup:function(){r.is(":visible")&&h()&&0<r.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length&&l.events.disableBlur()},_windowMouseup:function(e){if(!l.core.sameInstance(r))return!0;var t=r.data("instance")||l;r.is(":visible")&&h()&&(e.stopPropagation(),t.markers.remove(),t.popups.hide(n),p())},_windowKeydown:function(e){if(!l.core.sameInstance(r))return!0;var t=r.data("instance")||l,i=e.which;if(ze.FE.KEYCODE.ESC==i){if(t.popups.isVisible(n)&&t.opts.toolbarInline)return e.stopPropagation(),t.popups.isVisible(n)&&(r.find(".fr-back:visible").length?(t.button.exec(r.find(".fr-back:visible:first")),t.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?t.button.exec(r.find(".fr-dismiss:visible:first")):(t.popups.hide(n),t.toolbar.showInline(null,!0),t.accessibility.FocusPopupButton(r))),!1;if(t.popups.isVisible(n))return r.find(".fr-back:visible").length?(t.button.exec(r.find(".fr-back:visible:first")),t.accessibility.focusPopupButton(r)):r.find(".fr-dismiss:visible").length?t.button.exec(r.find(".fr-dismiss:visible:first")):(t.popups.hide(n),t.accessibility.focusPopupButton(r)),!1}},_doPlaceholder:function(){0===ze(this).next().length&&ze(this).attr("placeholder")&&ze(this).after('<label for="'+ze(this).attr("id")+'">'+ze(this).attr("placeholder")+"</label>"),ze(this).toggleClass("fr-not-empty",""!==ze(this).val())},_repositionPopup:function(){if(!l.opts.height&&!l.opts.heightMax||l.opts.toolbarInline)return!0;if(l.$wp&&d(n)&&r.parent().get(0)==l.$sc.get(0)){var e=r.offset().top-l.$wp.offset().top,t=l.$wp.outerHeight();l.node.hasClass(r.get(0),"fr-above")&&(e+=r.outerHeight()),t<e||e<0?r.addClass("fr-hidden"):r.removeClass("fr-hidden")}}}}function b(e,t){l.events.on("mouseup",e._editorMouseup,!0),l.$wp&&l.events.on("keydown",e._editorKeydown),l.events.on("blur",function(){f()&&l.markers.remove(),u()}),l.$wp&&!l.helpers.isMobile()&&l.events.$on(l.$wp,"scroll.popup"+t,e._repositionPopup),l.events.on("window.mouseup",e._windowMouseup,!0),l.events.on("window.keydown",e._windowKeydown,!0),T[t].data("inst"+l.id,!0),l.events.on("destroy",function(){l.core.sameInstance(T[t])&&T[t].removeClass("fr-active").appendTo("body:first")},!0)}function E(e,t){var i=m(e,t),n=v(e);return b(n,e),l.events.$on(i,"mousedown mouseup touchstart touchend touch","*",n._preventFocus,!0),l.events.$on(i,"focus","input, textarea, button, select",n._inputFocus,!0),l.events.$on(i,"blur","input, textarea, button, select",n._inputBlur,!0),l.accessibility.registerPopup(e),l.events.$on(i,"keydown keyup change input","input, textarea",n._doPlaceholder,!0),l.helpers.isIOS()&&l.events.$on(i,"touchend","label",function(){ze("#"+ze(this).attr("for")).prop("checked",function(e,t){return!t})},!0),l.events.$on(ze(l.o_win),"resize",n._windowResize,!0),i}function y(){for(var e in T)if(T.hasOwnProperty(e)){var t=T[e];t&&(t.html("").removeData().remove(),T[e]=null)}T=[]}function _(){l.events.on("shared.destroy",y,!0),l.events.on("window.mousedown",a),l.events.on("window.touchmove",p),l.events.on("mousedown",function(e){f()&&(e.stopPropagation(),l.$el.find(".fr-marker").remove(),a(),l.events.disableBlur())})}l.shared.popups||(l.shared.popups={});var T=l.shared.popups;return l.shared.exit_flag=!1,{_init:_,create:E,get:r,show:e,hide:i,onHide:n,hideAll:u,setContainer:c,refresh:o,onRefresh:s,onShow:t,isVisible:d,areVisible:f}},ze.FE.MODULES.position=function(E){function r(){var e=E.selection.ranges(0).getBoundingClientRect();if(0===e.top&&0===e.left&&0===e.width||0===e.height){var t=!1;0===E.$el.find(".fr-marker").length&&(E.selection.save(),t=!0);var i=E.$el.find(".fr-marker:first");i.css("display","inline"),i.css("line-height","");var n=i.offset(),r=i.outerHeight();i.css("display","none"),i.css("line-height",0),(e={}).left=n.left,e.width=0,e.height=r,e.top=n.top-(E.helpers.isMobile()?0:E.helpers.scrollTop()),e.right=1,e.bottom=1,e.ok=!0,t&&E.selection.restore()}return e}function a(e,t,i){var n=e.outerHeight(!0);if(!E.helpers.isMobile()&&E.$tb&&e.parent().get(0)!=E.$tb.get(0)){var r=e.parent().offset().top,s=t-n-(i||0);e.parent().get(0)==E.$sc.get(0)&&(r-=e.parent().position().top);var o=E.$sc.get(0).scrollHeight;r+t+n>E.$sc.offset().top+o&&0<e.parent().offset().top+s&&0<s?(t=s,e.addClass("fr-above")):e.removeClass("fr-above")}return t}function l(e,t){var i=e.outerWidth(!0);return e.parent().offset().left+t+i>E.$sc.get(0).clientWidth-E.$sc.position().left-10&&(t=E.$sc.get(0).clientWidth-e.parent().offset().left-i-10),t<0&&(t=10),t}function e(e){var t=r();e.css({top:0,left:0});var i=t.top+t.height,n=t.left+t.width/2-e.get(0).offsetWidth/2+E.helpers.scrollLeft();E.opts.iframe||(i+=E.helpers.scrollTop()),s(n,i,e,t.height)}function s(e,t,i,n){var r=i.data("container");!r||"BODY"===r.get(0).tagName&&"static"==r.css("position")||(e&&(e-=r.offset().left),t&&(t-=r.offset().top),"BODY"!=r.get(0).tagName?(e&&(e+=r.get(0).scrollLeft),t&&(t+=r.get(0).scrollTop)):"absolute"==r.css("position")&&(e&&(e+=r.position().left),t&&(t+=r.position().top))),E.opts.iframe&&r&&E.$tb&&r.get(0)!=E.$tb.get(0)&&(e&&(e+=E.$iframe.offset().left),t&&(t+=E.$iframe.offset().top));var s=l(i,e);if(e){i.css("left",s);var o=i.data("fr-arrow");o||(o=i.find(".fr-arrow"),i.data("fr-arrow",o)),o.data("margin-left")||o.data("margin-left",E.helpers.getPX(o.css("margin-left"))),o.css("margin-left",e-s+o.data("margin-left"))}t&&i.css("top",a(i,t,n))}function i(e){var i=ze(e),t=i.is(".fr-sticky-on"),n=i.data("sticky-top"),r=i.data("sticky-scheduled");if(void 0===n){i.data("sticky-top",0);var s=ze('<div class="fr-sticky-dummy" style="height: '+i.outerHeight()+'px;"></div>');E.$box.prepend(s)}else E.$box.find(".fr-sticky-dummy").css("height",i.outerHeight());if(E.core.hasFocus()||0<E.$tb.find("input:visible:focus").length){var o=E.helpers.scrollTop(),a=Math.min(Math.max(o-E.$tb.parent().offset().top,0),E.$tb.parent().outerHeight()-i.outerHeight());a!=n&&a!=r&&(clearTimeout(i.data("sticky-timeout")),i.data("sticky-scheduled",a),i.outerHeight()<o-E.$tb.parent().offset().top&&i.addClass("fr-opacity-0"),i.data("sticky-timeout",setTimeout(function(){var e=E.helpers.scrollTop(),t=Math.min(Math.max(e-E.$tb.parent().offset().top,0),E.$tb.parent().outerHeight()-i.outerHeight());0<t&&"BODY"==E.$tb.parent().get(0).tagName&&(t+=E.$tb.parent().position().top),t!=n&&(i.css("top",Math.max(t,0)),i.data("sticky-top",t),i.data("sticky-scheduled",t)),i.removeClass("fr-opacity-0")},100))),t||(i.css("top","0"),i.width(E.$tb.parent().width()),i.addClass("fr-sticky-on"),E.$box.addClass("fr-sticky-box"))}else clearTimeout(ze(e).css("sticky-timeout")),i.css("top","0"),i.css("position",""),i.width(""),i.data("sticky-top",0),i.removeClass("fr-sticky-on"),E.$box.removeClass("fr-sticky-box")}function t(e){if(e.offsetWidth){var t,i,n=ze(e),r=n.outerHeight(),s=n.data("sticky-position"),o=ze("body"==E.opts.scrollableContainer?E.o_win:E.opts.scrollableContainer).outerHeight(),a=0,l=0;"body"!==E.opts.scrollableContainer&&(a=E.$sc.offset().top,l=ze(E.o_win).outerHeight()-a-o);var c="body"==E.opts.scrollableContainer?E.helpers.scrollTop():a,d=n.is(".fr-sticky-on");n.data("sticky-parent")||n.data("sticky-parent",n.parent());var f=n.data("sticky-parent"),u=f.offset().top,p=f.outerHeight();if(n.data("sticky-offset")||(n.data("sticky-offset",!0),n.after('<div class="fr-sticky-dummy" style="height: '+r+'px;"></div>')),!s){var h="auto"!==n.css("top")||"auto"!==n.css("bottom");h||n.css("position","fixed"),s={top:E.node.hasClass(n.get(0),"fr-top"),bottom:E.node.hasClass(n.get(0),"fr-bottom")},h||n.css("position",""),n.data("sticky-position",s),n.data("top",E.node.hasClass(n.get(0),"fr-top")?n.css("top"):"auto"),n.data("bottom",E.node.hasClass(n.get(0),"fr-bottom")?n.css("bottom"):"auto")}var g=function(){return u<c+t&&c+t<=u+p-r},m=function(){return u+r<c+o-i&&c+o-i<u+p};t=E.helpers.getPX(n.data("top")),i=E.helpers.getPX(n.data("bottom"));var v=s.top&&g(),b=s.bottom&&m();v||b?(n.css("width",f.get(0).getBoundingClientRect().width+"px"),d||(n.addClass("fr-sticky-on"),n.removeClass("fr-sticky-off"),n.css("top")&&("auto"!=n.data("top")?n.css("top",E.helpers.getPX(n.data("top"))+a):n.data("top","auto")),n.css("bottom")&&("auto"!=n.data("bottom")?n.css("bottom",E.helpers.getPX(n.data("bottom"))+l):n.css("bottom","auto")))):E.node.hasClass(n.get(0),"fr-sticky-off")||(n.width(""),n.removeClass("fr-sticky-on"),n.addClass("fr-sticky-off"),n.css("top")&&"auto"!=n.data("top")&&s.top&&n.css("top",0),n.css("bottom")&&"auto"!=n.data("bottom")&&s.bottom&&n.css("bottom",0))}}function n(){var e=document.createElement("test").style;return e.cssText="position:"+["-webkit-","-moz-","-ms-","-o-",""].join("sticky; position:")+" sticky;",-1!==e.position.indexOf("sticky")&&!E.helpers.isIOS()&&!E.helpers.isAndroid()&&!E.browser.chrome}function o(){if(!n())if(E._stickyElements=[],E.helpers.isIOS()){var t=function(){E.helpers.requestAnimationFrame()(t);for(var e=0;e<E._stickyElements.length;e++)i(E._stickyElements[e])};t(),E.events.$on(ze(E.o_win),"scroll",function(){if(E.core.hasFocus())for(var e=0;e<E._stickyElements.length;e++){var t=ze(E._stickyElements[e]),i=t.parent(),n=E.helpers.scrollTop();t.outerHeight()<n-i.offset().top&&(t.addClass("fr-opacity-0"),t.data("sticky-top",-1),t.data("sticky-scheduled",-1))}},!0)}else E.events.$on(ze("body"==E.opts.scrollableContainer?E.o_win:E.opts.scrollableContainer),"scroll",c,!0),E.events.$on(ze(E.o_win),"resize",c,!0),E.events.on("initialized",c),E.events.on("focus",c),E.events.$on(ze(E.o_win),"resize","textarea",c,!0);E.events.on("destroy",function(){E._stickyElements=[]})}function c(){if(E._stickyElements)for(var e=0;e<E._stickyElements.length;e++)t(E._stickyElements[e])}function d(e){e.addClass("fr-sticky"),E.helpers.isIOS()&&e.addClass("fr-sticky-ios"),n()||(e.removeClass("fr-sticky"),E._stickyElements.push(e.get(0)))}function f(){o()}return{_init:f,forSelection:e,addSticky:d,refresh:c,at:s,getBoundingRect:r}},ze.FE.MODULES.refresh=function(r){function e(e){s(e,!r.undo.canDo())}function t(e){s(e,!r.undo.canRedo())}function i(e){if(r.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var t=r.selection.blocks(),i=0;i<t.length;i++){for(var n=t[i].previousSibling;n&&n.nodeType==Node.TEXT_NODE&&0===n.textContent.length;)n=n.previousSibling;if("LI"!=t[i].tagName||n)return s(e,!1),!0;s(e,!0)}}function n(e){if(r.node.hasClass(e.get(0),"fr-no-refresh"))return!1;for(var t=r.selection.blocks(),i=0;i<t.length;i++){var n="rtl"==r.opts.direction||"rtl"==ze(t[i]).css("direction")?"margin-right":"margin-left";if("LI"==t[i].tagName||"LI"==t[i].parentNode.tagName)return s(e,!1),!0;if(0<r.helpers.getPX(ze(t[i]).css(n)))return s(e,!1),!0}s(e,!0)}function s(e,t){e.toggleClass("fr-disabled",t).attr("aria-disabled",t)}return{undo:e,redo:t,outdent:n,indent:i}},ze.extend(ze.FE.DEFAULTS,{editInPopup:!1}),ze.FE.MODULES.textEdit=function(i){function e(){var e={edit:'<div id="fr-text-edit-'+i.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+i.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+i.language.translate("Update")+"</button></div></div>"};i.popups.create("text.edit",e)}function t(){var e,t=i.popups.get("text.edit");e="INPUT"===i.$el.prop("tagName")?i.$el.attr("placeholder"):i.$el.text(),t.find("input").val(e).trigger("change"),i.popups.setContainer("text.edit",i.$sc),i.popups.show("text.edit",i.$el.offset().left+i.$el.outerWidth()/2,i.$el.offset().top+i.$el.outerHeight(),i.$el.outerHeight())}function n(){i.events.$on(i.$el,i._mouseup,function(){setTimeout(function(){t()},10)})}function r(){var e=i.popups.get("text.edit").find("input").val();0===e.length&&(e=i.opts.placeholderText),"INPUT"===i.$el.prop("tagName")?i.$el.attr("placeholder",e):i.$el.text(e),i.events.trigger("contentChanged"),i.popups.hide("text.edit")}function s(){i.opts.editInPopup&&(e(),n())}return{_init:s,update:r}},ze.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),ze.extend(ze.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","embedly","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],toolbarButtonsXS:["bold","italic","fontFamily","fontSize","|","undo","redo"],toolbarButtonsSM:["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],toolbarButtonsMD:null,toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),ze.FE.MODULES.toolbar=function(r){function n(e,t){for(var i=0;i<t.length;i++)"-"!=t[i]&&"|"!=t[i]&&e.indexOf(t[i])<0&&e.push(t[i])}function e(){var e=ze.merge([],s());n(e,r.opts.toolbarButtonsXS||[]),n(e,r.opts.toolbarButtonsSM||[]),n(e,r.opts.toolbarButtonsMD||[]),n(e,r.opts.toolbarButtons);for(var t=e.length-1;0<=t;t--)"-"!=e[t]&&"|"!=e[t]&&e.indexOf(e[t])<t&&e.splice(t,1);var i=r.button.buildList(e,s());r.$tb.append(i),r.button.bindCommands(r.$tb)}function s(){var e=r.helpers.screenSize();return E[e]}function t(){var e=s();r.$tb.find(".fr-separator").remove(),r.$tb.find("> .fr-command").addClass("fr-hidden");for(var t=0;t<e.length;t++)if("|"==e[t]||"-"==e[t])r.$tb.append(r.button.buildList([e[t]]));else{var i=r.$tb.find('> .fr-command[data-cmd="'+e[t]+'"]'),n=null;r.node.hasClass(i.next().get(0),"fr-dropdown-menu")&&(n=i.next()),i.removeClass("fr-hidden").appendTo(r.$tb),n&&n.appendTo(r.$tb)}}function i(){r.events.$on(ze(r.o_win),"resize",t),r.events.$on(ze(r.o_win),"orientationchange",t)}function o(e,t){setTimeout(function(){if((!e||e.which!=ze.FE.KEYCODE.ESC)&&r.selection.inEditor()&&r.core.hasFocus()&&!r.popups.areVisible()&&(r.opts.toolbarVisibleWithoutSelection||!r.selection.isCollapsed()&&!r.keys.isIME()||t)){if(r.$tb.data("instance",r),!1===r.events.trigger("toolbar.show",[e]))return!1;r.$tb.show(),r.opts.toolbarContainer||r.position.forSelection(r.$tb),1<r.opts.zIndex?r.$tb.css("z-index",r.opts.zIndex+1):r.$tb.css("z-index",null)}},0)}function a(e){return!(!e||"keydown"!==e.type||!r.keys.ctrlKey(e))||!!r.button.getButtons(".fr-dropdown.fr-active").next().find(r.o_doc.activeElement).length||void(!1!==r.events.trigger("toolbar.hide")&&r.$tb.hide())}function l(){if(!1===r.events.trigger("toolbar.show"))return!1;r.$tb.show()}function c(e){clearTimeout(y),e&&e.which==ze.FE.KEYCODE.ESC||(y=setTimeout(o,r.opts.typingTimer))}function d(){r.events.on("window.mousedown",a),r.events.on("keydown",a),r.events.on("blur",a),r.events.on("window.mouseup",o),r.helpers.isMobile()?r.helpers.isIOS()||(r.events.on("window.touchend",o),r.browser.mozilla&&setInterval(o,200)):r.events.on("window.keyup",c),r.events.on("keydown",function(e){e&&e.which==ze.FE.KEYCODE.ESC&&a()}),r.events.on("keydown",function(e){if(e.which==ze.FE.KEYCODE.ALT)return e.stopPropagation(),!1},!0),r.events.$on(r.$wp,"scroll.toolbar",o),r.events.on("commands.after",o),r.helpers.isMobile()&&(r.events.$on(r.$doc,"selectionchange",c),r.events.$on(r.$doc,"orientationchange",o))}function f(){r.opts.toolbarInline?(r.$sc.append(r.$tb),r.$tb.data("container",r.$sc),r.$tb.addClass("fr-inline"),r.$tb.prepend('<span class="fr-arrow"></span>'),d(),r.opts.toolbarBottom=!1):(r.opts.toolbarBottom&&!r.helpers.isIOS()?(r.$box.append(r.$tb),r.$tb.addClass("fr-bottom"),r.$box.addClass("fr-bottom")):(r.opts.toolbarBottom=!1,r.$box.prepend(r.$tb),r.$tb.addClass("fr-top"),r.$box.addClass("fr-top")),r.$tb.addClass("fr-basic"),r.opts.toolbarSticky&&(r.opts.toolbarStickyOffset&&(r.opts.toolbarBottom?r.$tb.css("bottom",r.opts.toolbarStickyOffset):r.$tb.css("top",r.opts.toolbarStickyOffset)),r.position.addSticky(r.$tb)))}function u(){r.$tb.html("").removeData().remove(),r.$tb=null}function p(){r.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),r.$box.find(".fr-sticky-dummy").remove()}function h(){r.opts.theme&&r.$tb.addClass(r.opts.theme+"-theme"),1<r.opts.zIndex&&r.$tb.css("z-index",r.opts.zIndex+1),"auto"!=r.opts.direction&&r.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+r.opts.direction),r.helpers.isMobile()?r.$tb.addClass("fr-mobile"):r.$tb.addClass("fr-desktop"),r.opts.toolbarContainer?(r.opts.toolbarInline&&(d(),a()),r.opts.toolbarBottom?r.$tb.addClass("fr-bottom"):r.$tb.addClass("fr-top")):f(),b=r.$tb.get(0).ownerDocument,"defaultView"in b?b.defaultView:b.parentWindow,e(),i(),r.accessibility.registerToolbar(r.$tb),r.events.$on(r.$tb,r._mousedown+" "+r._mouseup,function(e){var t=e.originalEvent?e.originalEvent.target||e.originalEvent.originalTarget:null;if(t&&"INPUT"!=t.tagName&&!r.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1},!0)}function g(){if(r.$sc=ze(r.opts.scrollableContainer).first(),!r.$wp)return!1;r.opts.toolbarContainer?(r.shared.$tb?(r.$tb=r.shared.$tb,r.opts.toolbarInline&&d()):(r.shared.$tb=ze('<div class="fr-toolbar"></div>'),r.$tb=r.shared.$tb,ze(r.opts.toolbarContainer).append(r.$tb),h(),r.$tb.data("instance",r)),r.opts.toolbarInline?r.$box.addClass("fr-inline"):r.$box.addClass("fr-basic"),r.events.on("focus",function(){r.$tb.data("instance",r)},!0),r.opts.toolbarInline=!1):r.opts.toolbarInline?(r.$box.addClass("fr-inline"),r.shared.$tb?(r.$tb=r.shared.$tb,d()):(r.shared.$tb=ze('<div class="fr-toolbar"></div>'),r.$tb=r.shared.$tb,h())):(r.$box.addClass("fr-basic"),r.$tb=ze('<div class="fr-toolbar"></div>'),h(),r.$tb.data("instance",r)),r.events.on("destroy",p,!0),r.events.on(r.opts.toolbarInline||r.opts.toolbarContainer?"shared.destroy":"destroy",u,!0)}function m(){!_&&r.$tb&&(r.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),_=!0)}function v(){_&&r.$tb&&(r.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),_=!1),r.button.bulkRefresh()}var b,E=[];E[ze.FE.XS]=r.opts.toolbarButtonsXS||r.opts.toolbarButtons,E[ze.FE.SM]=r.opts.toolbarButtonsSM||r.opts.toolbarButtons,E[ze.FE.MD]=r.opts.toolbarButtonsMD||r.opts.toolbarButtons,E[ze.FE.LG]=r.opts.toolbarButtons;var y=null,_=!1;return{_init:g,hide:a,show:l,showInline:o,disable:m,enable:v}},ze.FE.PLUGINS.align=function(r){function e(e){r.selection.save(),r.html.wrap(!0,!0,!0,!0),r.selection.restore();for(var t=r.selection.blocks(),i=0;i<t.length;i++)r.helpers.getAlignment(ze(t[i].parentNode))==e?ze(t[i]).css("text-align","").removeClass("fr-temp-div"):ze(t[i]).css("text-align",e).removeClass("fr-temp-div"),""===ze(t[i]).attr("class")&&ze(t[i]).removeAttr("class"),""===ze(t[i]).attr("style")&&ze(t[i]).removeAttr("style");r.selection.save(),r.html.unwrap(),r.selection.restore()}function t(e){var t=r.selection.blocks();if(t.length){var i=r.helpers.getAlignment(ze(t[0]));e.find("> *:first").replaceWith(r.icon.create("align-"+i))}}function i(e,t){var i=r.selection.blocks();if(i.length){var n=r.helpers.getAlignment(ze(i[0]));t.find('a.fr-command[data-param1="'+n+'"]').addClass("fr-active").attr("aria-selected",!0)}}return{apply:e,refresh:t,refreshOnShow:i}},ze.FE.DefineIcon("align",{NAME:"align-left"}),ze.FE.DefineIcon("align-left",{NAME:"align-left"}),ze.FE.DefineIcon("align-right",{NAME:"align-right"}),ze.FE.DefineIcon("align-center",{NAME:"align-center"}),ze.FE.DefineIcon("align-justify",{NAME:"align-justify"}),ze.FE.RegisterCommand("align",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.align.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="align" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.icon.create("align-"+i)+'<span class="fr-sr-only">'+this.language.translate(t[i])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.align.apply(t)},refresh:function(e){this.align.refresh(e)},refreshOnShow:function(e,t){this.align.refreshOnShow(e,t)},plugin:"align"}),ze.extend(ze.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),ze.FE.PLUGINS.charCounter=function(i){function n(){
return i.el.textContent.length}function e(e){if(i.opts.charCounterMax<0)return!0;if(n()<i.opts.charCounterMax)return!0;var t=e.which;return!(!i.keys.ctrlKey(e)&&i.keys.isCharacter(t)||t===ze.FE.KEYCODE.IME)||(e.preventDefault(),e.stopPropagation(),i.events.trigger("charCounter.exceeded"),!1)}function t(e){return i.opts.charCounterMax<0?e:ze("<div>").html(e).text().length+n()<=i.opts.charCounterMax?e:(i.events.trigger("charCounter.exceeded"),"")}function r(){if(i.opts.charCounterCount){var e=n()+(0<i.opts.charCounterMax?"/"+i.opts.charCounterMax:"");o.text(e),i.opts.toolbarBottom&&o.css("margin-bottom",i.$tb.outerHeight(!0));var t=i.$wp.get(0).offsetWidth-i.$wp.get(0).clientWidth;0<=t&&("rtl"==i.opts.direction?o.css("margin-left",t):o.css("margin-right",t))}}function s(){return!!i.$wp&&!!i.opts.charCounterCount&&((o=ze('<span class="fr-counter"></span>')).css("bottom",i.$wp.css("border-bottom-width")),i.$box.append(o),i.events.on("keydown",e,!0),i.events.on("paste.afterCleanup",t),i.events.on("keyup contentChanged input",function(){i.events.trigger("charCounter.update")}),i.events.on("charCounter.update",r),i.events.trigger("charCounter.update"),void i.events.on("destroy",function(){ze(i.o_win).off("resize.char"+i.id),o.removeData().remove(),o=null}))}var o;return{_init:s,count:n}},ze.FE.PLUGINS.codeBeautifier=function(){function e(e,t){function o(e){return e.replace(/^\s+/g,"")}function a(e){return e.replace(/\s+$/g,"")}function i(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=r,this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,source,!doctype,basefont,base,area,hr,wbr,param,img,isindex,embed".split(","),extra_liners:p,in_array:function(e,t){for(var i=0;i<t.length;i++)if(e==t[i])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;e++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(e=this.input.charAt(this.pos),this.Utils.in_array(e,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(e,this.Utils.whitespace);)d&&"\n"==e&&this.newlines<=f&&(this.newlines+=1),this.pos++,e=this.input.charAt(this.pos);return!0}return!1},this.space_or_wrap=function(e){this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" "))},this.get_content=function(){for(var e="",t=[];"<"!=this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(this.traverse_whitespace())this.space_or_wrap(t);else{if(b){var i=this.input.substr(this.pos,3);if("{{#"==i||"{{/"==i)break;if("{{!"==i)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"];if("{{"==this.input.substr(this.pos,2)&&"{{else}}"==this.get_tag(!0))break}e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",i=new RegExp("</"+e+"\\s*>","igm");i.lastIndex=this.pos;var n=i.exec(this.input),r=n?n.index:this.input.length;return this.pos<r&&(t=this.input.substring(this.pos,r),this.pos=r),t},this.record_tag=function(e){this.tags[e+"count"]?this.tags[e+"count"]++:this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level,this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.indent_to_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!=t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]])}},this.get_tag=function(e){var t,i,n="",r=[],s="",o=!1,a=!0,l=this.pos,c=this.line_char_count;e=void 0!==e&&e;do{if(this.pos>=this.input.length)return e&&(this.pos=l,this.line_char_count=c),r.length?r.join(""):["","TK_EOF"];if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace))o=!0;else{if("'"!=n&&'"'!=n||(n+=this.get_unformatted(n),o=!0),"="==n&&(o=!1),r.length&&"="!=r[r.length-1]&&">"!=n&&o){if(this.space_or_wrap(r),o=!1,!a&&"force"==E&&"/"!=n){this.print_newline(!0,r),this.print_indentation(r);for(var d=0;d<y;d++)r.push(m)}for(var f=0;f<r.length;f++)if(" "==r[f]){a=!1;break}}if(b&&"<"==i&&n+this.input.charAt(this.pos)=="{{"&&(n+=this.get_unformatted("}}"),r.length&&" "!=r[r.length-1]&&"<"!=r[r.length-1]&&(n=" "+n),o=!0),"<"!=n||i||(t=this.pos-1,i="<"),b&&!i&&2<=r.length&&"{"==r[r.length-1]&&"{"==r[r.length-2]&&(t="#"==n||"/"==n||"!"==n?this.pos-3:this.pos-2,i="{"),this.line_char_count++,r.push(n),r[1]&&("!"==r[1]||"?"==r[1]||"%"==r[1])){r=[this.get_comment(t)];break}if(b&&r[1]&&"{"==r[1]&&r[2]&&"!"==r[2]){r=[this.get_comment(t)];break}if(b&&"{"==i&&2<r.length&&"}"==r[r.length-2]&&"}"==r[r.length-1])break}}while(">"!=n);var u,p,h=r.join("");u=-1!=h.indexOf(" ")?h.indexOf(" "):"{"==h[0]?h.indexOf("}"):h.indexOf(">"),p="<"!=h[0]&&b?"#"==h[2]?3:2:1;var g=h.substring(p,u).toLowerCase();return"/"==h.charAt(h.length-2)||this.Utils.in_array(g,this.Utils.single_token)?e||(this.tag_type="SINGLE"):b&&"{"==h[0]&&"else"==g?e||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(g,v)?(s=this.get_unformatted("</"+g+">",h),r.push(s),this.pos,this.tag_type="SINGLE"):"script"==g&&(-1==h.search("type")||-1<h.search("type")&&-1<h.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/))?e||(this.record_tag(g),this.tag_type="SCRIPT"):"style"==g&&(-1==h.search("type")||-1<h.search("type")&&-1<h.search("text/css"))?e||(this.record_tag(g),this.tag_type="STYLE"):"!"==g.charAt(0)?e||(this.tag_type="SINGLE",this.traverse_whitespace()):e||("/"==g.charAt(0)?(this.retrieve_tag(g.substring(1)),this.tag_type="END"):(this.record_tag(g),"html"!=g.toLowerCase()&&(this.indent_content=!0),this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(r),this.Utils.in_array(g,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!=this.output[this.output.length-2]&&this.print_newline(!0,this.output))),e&&(this.pos=l,this.line_char_count=c),r.join("")},this.get_comment=function(e){var t="",i=">",n=!1;this.pos=e;var r=this.input.charAt(this.pos);for(this.pos++;this.pos<=this.input.length&&((t+=r)[t.length-1]!=i[i.length-1]||-1==t.indexOf(i));)!n&&t.length<10&&(0===t.indexOf("<![if")?(i="<![endif]>",n=!0):0===t.indexOf("<![cdata[")?(i="]]>",n=!0):0===t.indexOf("<![")?(i="]>",n=!0):0===t.indexOf("<!--")?(i="-->",n=!0):0===t.indexOf("{{!")?(i="}}",n=!0):0===t.indexOf("<?")?(i="?>",n=!0):0===t.indexOf("<%")&&(i="%>",n=!0)),r=this.input.charAt(this.pos),this.pos++;return t},this.get_unformatted=function(e,t){if(t&&-1!=t.toLowerCase().indexOf(e))return"";var i="",n="",r=0,s=!0;do{if(this.pos>=this.input.length)return n;if(i=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(i,this.Utils.whitespace)){if(!s){this.line_char_count--;continue}if("\n"==i||"\r"==i){n+="\n",this.line_char_count=0;continue}}n+=i,this.line_char_count++,s=!0,b&&"{"==i&&n.length&&"{"==n[n.length-2]&&(r=(n+=this.get_unformatted("}}")).length)}while(-1==n.toLowerCase().indexOf(e,r));return n},this.get_token=function(){var e;if("TK_TAG_SCRIPT"==this.last_token||"TK_TAG_STYLE"==this.last_token){var t=this.last_token.substr(7);return"string"!=typeof(e=this.get_contents_to(t))?e:[e,"TK_"+t]}return"CONTENT"==this.current_mode?"string"!=typeof(e=this.get_content())?e:[e,"TK_CONTENT"]:"TAG"==this.current_mode?"string"!=typeof(e=this.get_tag())?e:[e,"TK_TAG_"+this.tag_type]:void 0},this.get_full_indent=function(e){return(e=this.indent_level+e||0)<1?"":new Array(e+1).join(this.indent_string)},this.is_unformatted=function(e,t){if(!this.Utils.in_array(e,t))return!1;if("a"!=e.toLowerCase()||!this.Utils.in_array("a",t))return!0;var i=(this.get_tag(!0)||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!(i&&!this.Utils.in_array(i,t))},this.printer=function(e,t,i,n,r){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=i,this.brace_style=r,this.indent_level=0,this.wrap_line_length=n;for(var s=this.line_char_count=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){this.line_char_count=0,t&&t.length&&(e||"\n"!=t[t.length-1])&&("\n"!=t[t.length-1]&&(t[t.length-1]=a(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"==this.output[this.output.length-1]&&(this.print_indentation(this.output),e=o(e)),this.print_token_raw(e))},this.print_token_raw=function(e){0<this.newlines&&(e=a(e)),e&&""!==e&&(1<e.length&&"\n"==e[e.length-1]?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(0<t,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){0<this.indent_level&&this.indent_level--}},this}var n,r,s,m,l,c,v,d,f,b,E,y,u,p;for(void 0!==(t=t||{}).wrap_line_length&&0!==parseInt(t.wrap_line_length,10)||void 0===t.max_char||0===parseInt(t.max_char,10)||(t.wrap_line_length=t.max_char),r=void 0!==t.indent_inner_html&&t.indent_inner_html,s=void 0===t.indent_size?4:parseInt(t.indent_size,10),m=void 0===t.indent_char?" ":t.indent_char,c=void 0===t.brace_style?"collapse":t.brace_style,l=0===parseInt(t.wrap_line_length,10)?32786:parseInt(t.wrap_line_length||250,10),v=t.unformatted||["a","span","img","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","address","pre"],d=void 0===t.preserve_newlines||t.preserve_newlines,f=d?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0,b=void 0!==t.indent_handlebars&&t.indent_handlebars,E=void 0===t.wrap_attributes?"auto":t.wrap_attributes,y=void 0===t.wrap_attributes_indent_size?s:parseInt(t.wrap_attributes_indent_size,10)||s,u=void 0!==t.end_with_newline&&t.end_with_newline,p=Array.isArray(t.extra_liners)?t.extra_liners.concat():"string"==typeof t.extra_liners?t.extra_liners.split(","):"head,body,/html".split(","),t.indent_with_tabs&&(m="\t",s=1),(n=new i).printer(e,m,s,l,c);;){var h=n.get_token();if(n.token_text=h[0],n.token_type=h[1],"TK_EOF"==n.token_type)break;switch(n.token_type){case"TK_TAG_START":n.print_newline(!1,n.output),n.print_token(n.token_text),n.indent_content&&(n.indent(),n.indent_content=!1),n.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"==n.last_token&&""===n.last_text){var g=n.token_text.match(/\w+/)[0],_=null;n.output.length&&(_=n.output[n.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null==_||_[1]!=g&&!n.Utils.in_array(_[1],v))&&n.print_newline(!1,n.output)}n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var T=n.token_text.match(/^\s*<([a-z-]+)/i);T&&n.Utils.in_array(T[1],v)||n.print_newline(!1,n.output),n.print_token(n.token_text),n.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":n.print_token(n.token_text),n.indent_content&&(n.indent(),n.indent_content=!1),n.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":case"TK_CONTENT":n.print_token(n.token_text),n.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==n.token_text){n.print_newline(!1,n.output);var C,w=n.token_text,A=1;"TK_SCRIPT"==n.token_type?C="function"==typeof D&&D:"TK_STYLE"==n.token_type&&(C="function"==typeof L&&L),"keep"==t.indent_scripts?A=0:"separate"==t.indent_scripts&&(A=-n.indent_level);var S=n.get_full_indent(A);if(C)w=C(w.replace(/^\s*/,S),t);else{var x=w.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(n.indent_string).length-1,R=n.get_full_indent(A-x);w=w.replace(/^\s*/,S).replace(/\r\n|\r|\n/g,"\n"+R).replace(/\s+$/,"")}w&&(n.print_token_raw(w),n.print_newline(!0,n.output))}n.current_mode="TAG";break;default:""!==n.token_text&&n.print_token(n.token_text)}n.last_token=n.token_type,n.last_text=n.token_text}var k=n.output.join("").replace(/[\r\n\t ]+$/,"");return u&&(k+="\n"),k}function L(n,e){function r(){return(_=n.charAt(++C))||""}function i(e){var t="",i=C;return e&&o(),t=n.charAt(C+1)||"",C=i-1,r(),t}function s(e){for(var t=C;r();)if("\\"===_)r();else{if(-1!==e.indexOf(_))break;if("\n"===_)break}return n.substring(t,C+1)}function t(e){var t=C,i=s(e);return C=t-1,r(),i}function o(){for(var e="";T.test(i());)r(),e+=_;return e}function a(){var e="";for(_&&T.test(_)&&(e=_);T.test(r());)e+=_;return e}function l(e){var t=C;for(e="/"===i(),r();r();){if(!e&&"*"===_&&"/"===i()){r();break}if(e&&"\n"===_)return n.substring(t,C)}return n.substring(t,C)+_}function c(e){return n.substring(C-e.length,C).toLowerCase()===e}function d(){for(var e=0,t=C+1;t<n.length;t++){var i=n.charAt(t);if("{"===i)return!0;if("("===i)e+=1;else if(")"===i){if(0==e)return!1;e-=1}else if(";"===i||"}"===i)return!1}return!1}function f(){x++,A+=S}function u(){x--,A=A.slice(0,-g)}var p={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},h={"@media":!0,"@supports":!0,"@document":!0};e=e||{},n=(n=n||"").replace(/\r\n|[\r\u2028\u2029]/g,"\n");var g=e.indent_size||4,m=e.indent_char||" ",v=void 0===e.selector_separator_newline||e.selector_separator_newline,b=void 0!==e.end_with_newline&&e.end_with_newline,E=void 0===e.newline_between_rules||e.newline_between_rules,y=e.eol?e.eol:"\n";"string"==typeof g&&(g=parseInt(g,10)),e.indent_with_tabs&&(m="\t",g=1),y=y.replace(/\\r/,"\r").replace(/\\n/,"\n");for(var _,T=/^\s+$/,C=-1,w=0,A=n.match(/^[\t ]*/)[0],S=new Array(g+1).join(m),x=0,R=0,k={"{":function(e){k.singleSpace(),L.push(e),k.newLine()},"}":function(e){k.newLine(),L.push(e),k.newLine()},_lastCharWhitespace:function(){return T.test(L[L.length-1])},newLine:function(e){L.length&&(e||"\n"===L[L.length-1]||k.trim(),L.push("\n"),A&&L.push(A))},singleSpace:function(){L.length&&!k._lastCharWhitespace()&&L.push(" ")},preserveSingleSpace:function(){$&&k.singleSpace()},trim:function(){for(;k._lastCharWhitespace();)L.pop()}},L=[],D=!1,I=!1,N=!1,O="",F="";;){var M=a(),$=""!==M,P=-1!==M.indexOf("\n");if(F=O,!(O=_))break;if("/"===_&&"*"===i()){var B=0===x;(P||B)&&k.newLine(),L.push(l()),k.newLine(),B&&k.newLine(!0)}else if("/"===_&&"/"===i())P||"{"===F||k.trim(),k.singleSpace(),L.push(l()),k.newLine();else if("@"===_){k.preserveSingleSpace(),L.push(_);var H=t(": ,;{}()[]/='\"");H.match(/[ :]$/)&&(r(),H=s(": ").replace(/\s$/,""),L.push(H),k.singleSpace()),(H=H.replace(/\s$/,""))in p&&(R+=1,H in h&&(N=!0))}else"#"===_&&"{"===i()?(k.preserveSingleSpace(),L.push(s("}"))):"{"===_?"}"===i(!0)?(o(),r(),k.singleSpace(),L.push("{}"),k.newLine(),E&&0===x&&k.newLine(!0)):(f(),k["{"](_),N?(N=!1,D=R<x):D=R<=x):"}"===_?(u(),k["}"](_),I=D=!1,R&&R--,E&&0===x&&k.newLine(!0)):":"===_?(o(),!D&&!N||c("&")||d()?":"===i()?(r(),L.push("::")):L.push(":"):(I=!0,L.push(":"),k.singleSpace())):'"'===_||"'"===_?(k.preserveSingleSpace(),L.push(s(_))):";"===_?(I=!1,L.push(_),k.newLine()):"("===_?c("url")?(L.push(_),o(),r()&&(")"!==_&&'"'!==_&&"'"!==_?L.push(s(")")):C--)):(w++,k.preserveSingleSpace(),L.push(_),o()):")"===_?(L.push(_),w--):","===_?(L.push(_),o(),v&&!I&&w<1?k.newLine():k.singleSpace()):("]"===_||("["===_?k.preserveSingleSpace():"="===_?(o(),_="="):k.preserveSingleSpace()),L.push(_))}var W="";return A&&(W+=A),W+=L.join("").replace(/[\r\n\t ]+$/,""),b&&(W+="\n"),"\n"!=y&&(W=W.replace(/[\n]/g,y)),W}function Z(e,t){for(var i=0;i<t.length;i+=1)if(t[i]===e)return!0;return!1}function J(e){return e.replace(/^\s+|\s+$/g,"")}function ee(e){return e.replace(/^\s+/g,"")}function D(e,t){return new i(e,t).beautify()}function i(n,e){function t(e,t){var i=0;return e&&(i=e.indentation_level,!M.just_added_newline()&&e.line_indent_level>i&&(i=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:i,line_indent_level:e?e.line_indent_level:i,start_line_index:M.get_line_number(),ternary_depth:0}}function r(e){var t=e.newlines;if(q.keep_array_indentation&&u(K.mode))for(i=0;i<t;i+=1)a(0<i);else if(q.max_preserve_newlines&&t>q.max_preserve_newlines&&(t=q.max_preserve_newlines),q.preserve_newlines&&1<e.newlines){a();for(var i=1;i<t;i+=1)a(!0)}G[(B=e).type]()}function o(e){for(var t=[],i=(e=e.replace(/\x0d/g,"")).indexOf("\n");-1!==i;)t.push(e.substring(0,i)),i=(e=e.substring(i+1)).indexOf("\n");return e.length&&t.push(e),t}function i(e){if(e=void 0!==e&&e,!M.just_added_newline())if(q.preserve_newlines&&B.wanted_newline||e)a(!1,!0);else if(q.wrap_line_length){M.current_line.get_character_count()+B.text.length+(M.space_before_token?1:0)>=q.wrap_line_length&&a(!1,!0)}}function a(e,t){if(!t&&";"!==K.last_text&&","!==K.last_text&&"="!==K.last_text&&"TK_OPERATOR"!==H)for(;K.mode===re.Statement&&!K.if_block&&!K.do_block;)h();M.add_new_line(e)&&(K.multiline_frame=!0)}function s(){M.just_added_newline()&&(q.keep_array_indentation&&u(K.mode)&&B.wanted_newline?(M.current_line.push(B.whitespace_before),M.space_before_token=!1):M.set_indent(K.indentation_level)&&(K.line_indent_level=K.indentation_level))}function l(e){M.raw?M.add_raw_token(B):(q.comma_first&&"TK_COMMA"===H&&M.just_added_newline()&&","===M.previous_line.last()&&(M.previous_line.pop(),s(),M.add_token(","),M.space_before_token=!0),e=e||B.text,s(),M.add_token(e))}function c(){K.indentation_level+=1}function d(){0<K.indentation_level&&(!K.parent||K.indentation_level>K.parent.indentation_level)&&(K.indentation_level-=1)}function f(e){K?(Y.push(K),z=K):z=t(null,e),K=t(z,e)}function u(e){return e===re.ArrayLiteral}function p(e){return Z(e,[re.Expression,re.ForInitializer,re.Conditional])}function h(){0<Y.length&&(z=K,K=Y.pop(),z.mode===re.Statement&&M.remove_redundant_indentation(z))}function g(){return K.parent.mode===re.ObjectLiteral&&K.mode===re.Statement&&(":"===K.last_text&&0===K.ternary_depth||"TK_RESERVED"===H&&Z(K.last_text,["get","set"]))}function m(){return!!("TK_RESERVED"===H&&Z(K.last_text,["var","let","const"])&&"TK_WORD"===B.type||"TK_RESERVED"===H&&"do"===K.last_text||"TK_RESERVED"===H&&"return"===K.last_text&&!B.wanted_newline||"TK_RESERVED"===H&&"else"===K.last_text&&("TK_RESERVED"!==B.type||"if"!==B.text)||"TK_END_EXPR"===H&&(z.mode===re.ForInitializer||z.mode===re.Conditional)||"TK_WORD"===H&&K.mode===re.BlockStatement&&!K.in_case&&"--"!==B.text&&"++"!==B.text&&"function"!==W&&"TK_WORD"!==B.type&&"TK_RESERVED"!==B.type||K.mode===re.ObjectLiteral&&(":"===K.last_text&&0===K.ternary_depth||"TK_RESERVED"===H&&Z(K.last_text,["get","set"])))&&(f(re.Statement),c(),"TK_RESERVED"===H&&Z(K.last_text,["var","let","const"])&&"TK_WORD"===B.type&&(K.declaration_statement=!0),g()||i("TK_RESERVED"===B.type&&Z(B.text,["do","for","if","while"])),!0)}function v(e,t){for(var i=0;i<e.length;i++)if(J(e[i]).charAt(0)!==t)return!1;return!0}function b(e,t){for(var i,n=0,r=e.length;n<r;n++)if((i=e[n])&&0!==i.indexOf(t))return!1;return!0}function E(e){return Z(e,["case","return","do","if","throw","else"])}function y(e){var t=$+(e||0);return t<0||t>=V.length?null:V[t]}function _(){m();var e=re.Expression;if("["===B.text){if("TK_WORD"===H||")"===K.last_text)return"TK_RESERVED"===H&&Z(K.last_text,P.line_starters)&&(M.space_before_token=!0),f(e),l(),c(),void(q.space_in_paren&&(M.space_before_token=!0));e=re.ArrayLiteral,u(K.mode)&&("["!==K.last_text&&(","!==K.last_text||"]"!==W&&"}"!==W)||q.keep_array_indentation||a())}else"TK_RESERVED"===H&&"for"===K.last_text?e=re.ForInitializer:"TK_RESERVED"===H&&Z(K.last_text,["if","while"])&&(e=re.Conditional);";"===K.last_text||"TK_START_BLOCK"===H?a():"TK_END_EXPR"===H||"TK_START_EXPR"===H||"TK_END_BLOCK"===H||"."===K.last_text?i(B.wanted_newline):"TK_RESERVED"===H&&"("===B.text||"TK_WORD"===H||"TK_OPERATOR"===H?"TK_RESERVED"===H&&("function"===K.last_word||"typeof"===K.last_word)||"*"===K.last_text&&"function"===W?q.space_after_anon_function&&(M.space_before_token=!0):"TK_RESERVED"!==H||!Z(K.last_text,P.line_starters)&&"catch"!==K.last_text||q.space_before_conditional&&(M.space_before_token=!0):M.space_before_token=!0,"("===B.text&&"TK_RESERVED"===H&&"await"===K.last_word&&(M.space_before_token=!0),"("===B.text&&("TK_EQUALS"!==H&&"TK_OPERATOR"!==H||g()||i()),f(e),l(),q.space_in_paren&&(M.space_before_token=!0),c()}function T(){for(;K.mode===re.Statement;)h();K.multiline_frame&&i("]"===B.text&&u(K.mode)&&!q.keep_array_indentation),q.space_in_paren&&("TK_START_EXPR"!==H||q.space_in_empty_paren?M.space_before_token=!0:(M.trim(),M.space_before_token=!1)),"]"===B.text&&q.keep_array_indentation?(l(),h()):(h(),l()),M.remove_redundant_indentation(z),K.do_while&&z.mode===re.Conditional&&(z.mode=re.Expression,K.do_block=!1,K.do_while=!1)}function C(){var e=y(1),t=y(2);f(t&&(":"===t.text&&Z(e.type,["TK_STRING","TK_WORD","TK_RESERVED"])||Z(e.text,["get","set"])&&Z(t.type,["TK_WORD","TK_RESERVED"]))?Z(W,["class","interface"])?re.BlockStatement:re.ObjectLiteral:re.BlockStatement);var i=!e.comments_before.length&&"}"===e.text&&"function"===K.last_word&&"TK_END_EXPR"===H;"expand"===q.brace_style||"none"===q.brace_style&&B.wanted_newline?"TK_OPERATOR"!==H&&(i||"TK_EQUALS"===H||"TK_RESERVED"===H&&E(K.last_text)&&"else"!==K.last_text)?M.space_before_token=!0:a(!1,!0):"TK_OPERATOR"!==H&&"TK_START_EXPR"!==H?"TK_START_BLOCK"===H?a():M.space_before_token=!0:u(z.mode)&&","===K.last_text&&("}"===W?M.space_before_token=!0:a()),l(),c()}function w(){for(;K.mode===re.Statement;)h();var e="TK_START_BLOCK"===H;"expand"===q.brace_style?e||a():e||(u(K.mode)&&q.keep_array_indentation?(q.keep_array_indentation=!1,a(),q.keep_array_indentation=!0):a()),h(),l()}function A(){if("TK_RESERVED"===B.type&&K.mode!==re.ObjectLiteral&&Z(B.text,["set","get"])&&(B.type="TK_WORD"),"TK_RESERVED"===B.type&&K.mode===re.ObjectLiteral&&":"==y(1).text&&(B.type="TK_WORD"),m()||!B.wanted_newline||p(K.mode)||"TK_OPERATOR"===H&&"--"!==K.last_text&&"++"!==K.last_text||"TK_EQUALS"===H||!q.preserve_newlines&&"TK_RESERVED"===H&&Z(K.last_text,["var","let","const","set","get"])||a(),K.do_block&&!K.do_while){if("TK_RESERVED"===B.type&&"while"===B.text)return M.space_before_token=!0,l(),M.space_before_token=!0,void(K.do_while=!0);a(),K.do_block=!1}if(K.if_block)if(K.else_block||"TK_RESERVED"!==B.type||"else"!==B.text){for(;K.mode===re.Statement;)h();K.if_block=!1,K.else_block=!1}else K.else_block=!0;if("TK_RESERVED"===B.type&&("case"===B.text||"default"===B.text&&K.in_case_statement))return a(),(K.case_body||q.jslint_happy)&&(d(),K.case_body=!1),l(),K.in_case=!0,void(K.in_case_statement=!0);if("TK_RESERVED"===B.type&&"function"===B.text&&((Z(K.last_text,["}",";"])||M.just_added_newline()&&!Z(K.last_text,["[","{",":","=",","]))&&(M.just_added_blankline()||B.comments_before.length||(a(),a(!0))),"TK_RESERVED"===H||"TK_WORD"===H?"TK_RESERVED"===H&&Z(K.last_text,["get","set","new","return","export","async"])?M.space_before_token=!0:"TK_RESERVED"===H&&"default"===K.last_text&&"export"===W?M.space_before_token=!0:a():"TK_OPERATOR"===H||"="===K.last_text?M.space_before_token=!0:(K.multiline_frame||!p(K.mode)&&!u(K.mode))&&a()),"TK_COMMA"!==H&&"TK_START_EXPR"!==H&&"TK_EQUALS"!==H&&"TK_OPERATOR"!==H||g()||i(),"TK_RESERVED"===B.type&&Z(B.text,["function","get","set"]))return l(),void(K.last_word=B.text);if(j="NONE","TK_END_BLOCK"===H?"TK_RESERVED"===B.type&&Z(B.text,["else","catch","finally"])?"expand"===q.brace_style||"end-expand"===q.brace_style||"none"===q.brace_style&&B.wanted_newline?j="NEWLINE":(j="SPACE",M.space_before_token=!0):j="NEWLINE":"TK_SEMICOLON"===H&&K.mode===re.BlockStatement?j="NEWLINE":"TK_SEMICOLON"===H&&p(K.mode)?j="SPACE":"TK_STRING"===H?j="NEWLINE":"TK_RESERVED"===H||"TK_WORD"===H||"*"===K.last_text&&"function"===W?j="SPACE":"TK_START_BLOCK"===H?j="NEWLINE":"TK_END_EXPR"===H&&(M.space_before_token=!0,j="NEWLINE"),"TK_RESERVED"===B.type&&Z(B.text,P.line_starters)&&")"!==K.last_text&&(j="else"===K.last_text||"export"===K.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===B.type&&Z(B.text,["else","catch","finally"]))if("TK_END_BLOCK"!==H||"expand"===q.brace_style||"end-expand"===q.brace_style||"none"===q.brace_style&&B.wanted_newline)a();else{M.trim(!0),"}"!==M.current_line.last()&&a(),M.space_before_token=!0}else"NEWLINE"===j?"TK_RESERVED"===H&&E(K.last_text)?M.space_before_token=!0:"TK_END_EXPR"!==H?"TK_START_EXPR"===H&&"TK_RESERVED"===B.type&&Z(B.text,["var","let","const"])||":"===K.last_text||("TK_RESERVED"===B.type&&"if"===B.text&&"else"===K.last_text?M.space_before_token=!0:a()):"TK_RESERVED"===B.type&&Z(B.text,P.line_starters)&&")"!==K.last_text&&a():K.multiline_frame&&u(K.mode)&&","===K.last_text&&"}"===W?a():"SPACE"===j&&(M.space_before_token=!0);l(),K.last_word=B.text,"TK_RESERVED"===B.type&&"do"===B.text&&(K.do_block=!0),"TK_RESERVED"===B.type&&"if"===B.text&&(K.if_block=!0)}function S(){for(m()&&(M.space_before_token=!1);K.mode===re.Statement&&!K.if_block&&!K.do_block;)h();l()}function x(){m()?M.space_before_token=!0:"TK_RESERVED"===H||"TK_WORD"===H?M.space_before_token=!0:"TK_COMMA"===H||"TK_START_EXPR"===H||"TK_EQUALS"===H||"TK_OPERATOR"===H?g()||i():a(),l()}function R(){m(),K.declaration_statement&&(K.declaration_assignment=!0),M.space_before_token=!0,l(),M.space_before_token=!0}function k(){if(K.declaration_statement)return p(K.parent.mode)&&(K.declaration_assignment=!1),l(),void(K.declaration_assignment?a(K.declaration_assignment=!1,!0):(M.space_before_token=!0,q.comma_first&&i()));l(),K.mode===re.ObjectLiteral||K.mode===re.Statement&&K.parent.mode===re.ObjectLiteral?(K.mode===re.Statement&&h(),a()):(M.space_before_token=!0,q.comma_first&&i())}function L(){if(m(),"TK_RESERVED"===H&&E(K.last_text))return M.space_before_token=!0,void l();if("*"!==B.text||"TK_DOT"!==H){if(":"===B.text&&K.in_case)return K.case_body=!0,c(),l(),a(),void(K.in_case=!1);if("::"!==B.text){"TK_OPERATOR"===H&&i();var e=!0,t=!0;Z(B.text,["--","++","!","~"])||Z(B.text,["-","+"])&&(Z(H,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||Z(K.last_text,P.line_starters)||","===K.last_text)?(t=e=!1,!B.wanted_newline||"--"!==B.text&&"++"!==B.text||a(!1,!0),";"===K.last_text&&p(K.mode)&&(e=!0),"TK_RESERVED"===H?e=!0:"TK_END_EXPR"===H?e=!("]"===K.last_text&&("--"===B.text||"++"===B.text)):"TK_OPERATOR"===H&&(e=Z(B.text,["--","-","++","+"])&&Z(K.last_text,["--","-","++","+"]),Z(B.text,["+","-"])&&Z(K.last_text,["--","++"])&&(t=!0)),K.mode!==re.BlockStatement&&K.mode!==re.Statement||"{"!==K.last_text&&";"!==K.last_text||a()):":"===B.text?0===K.ternary_depth?e=!1:K.ternary_depth-=1:"?"===B.text?K.ternary_depth+=1:"*"===B.text&&"TK_RESERVED"===H&&"function"===K.last_text&&(t=e=!1),M.space_before_token=M.space_before_token||e,l(),M.space_before_token=t}else l()}else l()}function D(){if(M.raw)return M.add_raw_token(B),void(B.directives&&"end"===B.directives.preserve&&(q.test_output_raw||(M.raw=!1)));if(B.directives)return a(!1,!0),l(),"start"===B.directives.preserve&&(M.raw=!0),void a(!1,!0);if(!ne.newline.test(B.text)&&!B.wanted_newline)return M.space_before_token=!0,l(),void(M.space_before_token=!0);var e,t=o(B.text),i=!1,n=!1,r=B.whitespace_before,s=r.length;for(a(!1,!0),1<t.length&&(v(t.slice(1),"*")?i=!0:b(t.slice(1),r)&&(n=!0)),l(t[0]),e=1;e<t.length;e++)a(!1,!0),i?l(" "+ee(t[e])):n&&t[e].length>s?l(t[e].substring(s)):M.add_token(t[e]);a(!1,!0)}function I(){B.wanted_newline?a(!1,!0):M.trim(!0),M.space_before_token=!0,l(),a(!1,!0)}function N(){m(),"TK_RESERVED"===H&&E(K.last_text)?M.space_before_token=!0:i(")"===K.last_text&&q.break_chained_methods),l()}function O(){l(),"\n"===B.text[B.text.length-1]&&a()}function F(){for(;K.mode===re.Statement;)h()}var M,$,P,B,H,W,U,K,z,Y,j,G,q,V=[],X="";for(G={TK_START_EXPR:_,TK_END_EXPR:T,TK_START_BLOCK:C,TK_END_BLOCK:w,TK_WORD:A,TK_RESERVED:A,TK_SEMICOLON:S,TK_STRING:x,TK_EQUALS:R,TK_OPERATOR:L,TK_COMMA:k,TK_BLOCK_COMMENT:D,TK_COMMENT:I,TK_DOT:N,TK_UNKNOWN:O,TK_EOF:F},q={},void 0!==(e=e||{}).braces_on_own_line&&(q.brace_style=e.braces_on_own_line?"expand":"collapse"),q.brace_style=e.brace_style?e.brace_style:q.brace_style?q.brace_style:"collapse","expand-strict"===q.brace_style&&(q.brace_style="expand"),q.indent_size=e.indent_size?parseInt(e.indent_size,10):4,q.indent_char=e.indent_char?e.indent_char:" ",q.eol=e.eol?e.eol:"\n",q.preserve_newlines=void 0===e.preserve_newlines||e.preserve_newlines,q.break_chained_methods=void 0!==e.break_chained_methods&&e.break_chained_methods,q.max_preserve_newlines=void 0===e.max_preserve_newlines?0:parseInt(e.max_preserve_newlines,10),q.space_in_paren=void 0!==e.space_in_paren&&e.space_in_paren,q.space_in_empty_paren=void 0!==e.space_in_empty_paren&&e.space_in_empty_paren,q.jslint_happy=void 0!==e.jslint_happy&&e.jslint_happy,q.space_after_anon_function=void 0!==e.space_after_anon_function&&e.space_after_anon_function,q.keep_array_indentation=void 0!==e.keep_array_indentation&&e.keep_array_indentation,q.space_before_conditional=void 0===e.space_before_conditional||e.space_before_conditional,q.unescape_strings=void 0!==e.unescape_strings&&e.unescape_strings,q.wrap_line_length=void 0===e.wrap_line_length?0:parseInt(e.wrap_line_length,10),q.e4x=void 0!==e.e4x&&e.e4x,q.end_with_newline=void 0!==e.end_with_newline&&e.end_with_newline,q.comma_first=void 0!==e.comma_first&&e.comma_first,q.test_output_raw=void 0!==e.test_output_raw&&e.test_output_raw,q.jslint_happy&&(q.space_after_anon_function=!0),e.indent_with_tabs&&(q.indent_char="\t",q.indent_size=1),q.eol=q.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),U="";0<q.indent_size;)U+=q.indent_char,q.indent_size-=1;var Q=0;if(n&&n.length){for(;" "===n.charAt(Q)||"\t"===n.charAt(Q);)X+=n.charAt(Q),Q+=1;n=n.substring(Q)}H="TK_START_BLOCK",W="",(M=new te(U,X)).raw=q.test_output_raw,Y=[],f(re.BlockStatement),this.beautify=function(){var e,t;for(P=new ie(n,q,U),V=P.tokenize(),$=0;e=y();){for(var i=0;i<e.comments_before.length;i++)r(e.comments_before[i]);r(e),W=K.last_text,H=e.type,K.last_text=e.text,$+=1}return t=M.get_code(),q.end_with_newline&&(t+="\n"),"\n"!=q.eol&&(t=t.replace(/[\n]/g,q.eol)),t}}function r(t){var i=0,n=-1,r=[],s=!0;this.set_indent=function(e){i=t.baseIndentLength+e*t.indent_length,n=e},this.get_character_count=function(){return i},this.is_empty=function(){return s},this.last=function(){return this._empty?null:r[r.length-1]},this.push=function(e){r.push(e),i+=e.length,s=!1},this.pop=function(){var e=null;return s||(e=r.pop(),i-=e.length,s=0===r.length),e},this.remove_indent=function(){0<n&&(n-=1,i-=t.indent_length)},this.trim=function(){for(;" "===this.last();)r.pop(),i-=1;s=0===r.length},this.toString=function(){var e="";return this._empty||(0<=n&&(e=t.indent_cache[n]),e+=r.join("")),e}}function te(t,i){i=i||"",this.indent_cache=[i],this.baseIndentLength=i.length,this.indent_length=t.length,this.raw=!1;var n=[];this.baseIndentString=i,this.indent_string=t,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new r(this),n.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return n.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(){return n.join("\n").replace(/[\r\n\t ]+$/,"")},this.set_indent=function(e){if(1<n.length){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},
this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_redundant_indentation=function(e){if(!e.multiline_frame&&e.mode!==re.ForInitializer&&e.mode!==re.Conditional)for(var t=e.start_line_index,i=n.length;t<i;)n[t].remove_indent(),t++},this.trim=function(e){for(e=void 0!==e&&e,this.current_line.trim(t,i);e&&1<n.length&&this.current_line.is_empty();)n.pop(),this.current_line=n[n.length-1],this.current_line.trim();this.previous_line=1<n.length?n[n.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){return!!this.just_added_newline()&&(1===n.length||n[n.length-2].is_empty())}}function ie(A,S){function x(e){if(!e.match(n))return null;var t={};r.lastIndex=0;for(var i=r.exec(e);i;)t[i[1]]=i[2],i=r.exec(e);return t}function o(){var e,t,i=[];if(O=0,F="",B<=P)return["","TK_EOF"];t=$.length?$[$.length-1]:new Y("TK_START_BLOCK","{");var n=A.charAt(P);for(P+=1;Z(n,k);){if(ne.newline.test(n)?"\n"===n&&"\r"===A.charAt(P-2)||(O+=1,i=[]):i.push(n),B<=P)return["","TK_EOF"];n=A.charAt(P),P+=1}if(i.length&&(F=i.join("")),L.test(n)){var r=!0,s=!0,o=L;for("0"===n&&P<B&&/[Xxo]/.test(A.charAt(P))?(s=r=!1,n+=A.charAt(P),P+=1,o=/[o]/.test(A.charAt(P))?D:I):(n="",P-=1);P<B&&o.test(A.charAt(P));)n+=A.charAt(P),P+=1,r&&P<B&&"."===A.charAt(P)&&(n+=A.charAt(P),P+=1,r=!1),s&&P<B&&/[Ee]/.test(A.charAt(P))&&(n+=A.charAt(P),(P+=1)<B&&/[+-]/.test(A.charAt(P))&&(n+=A.charAt(P),P+=1),r=s=!1);return[n,"TK_WORD"]}if(ne.isIdentifierStart(A.charCodeAt(P-1))){if(P<B)for(;ne.isIdentifierChar(A.charCodeAt(P))&&(n+=A.charAt(P),(P+=1)!==B););return"TK_DOT"===t.type||"TK_RESERVED"===t.type&&Z(t.text,["set","get"])||!Z(n,H)?[n,"TK_WORD"]:"in"===n?[n,"TK_OPERATOR"]:[n,"TK_RESERVED"]}if("("===n||"["===n)return[n,"TK_START_EXPR"];if(")"===n||"]"===n)return[n,"TK_END_EXPR"];if("{"===n)return[n,"TK_START_BLOCK"];if("}"===n)return[n,"TK_END_BLOCK"];if(";"===n)return[n,"TK_SEMICOLON"];if("/"===n){var a="";if("*"===A.charAt(P)){var l;P+=1,W.lastIndex=P,a="/*"+(l=W.exec(A))[0],P+=l[0].length;var c=x(a);return c&&"start"===c.ignore&&(K.lastIndex=P,a+=(l=K.exec(A))[0],P+=l[0].length),[a=a.replace(ne.lineBreak,"\n"),"TK_BLOCK_COMMENT",c]}if("/"===A.charAt(P))return P+=1,U.lastIndex=P,a="//"+(l=U.exec(A))[0],P+=l[0].length,[a,"TK_COMMENT"]}if("`"===n||"'"===n||'"'===n||("/"===n||S.e4x&&"<"===n&&A.slice(P-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/))&&("TK_RESERVED"===t.type&&Z(t.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===t.type&&")"===t.text&&t.parent&&"TK_RESERVED"===t.parent.type&&Z(t.parent.text,["if","while","for"])||Z(t.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var d=n,f=!1,u=!1;if(e=n,"/"===d)for(var p=!1;P<B&&(f||p||A.charAt(P)!==d)&&!ne.newline.test(A.charAt(P));)e+=A.charAt(P),f?f=!1:(f="\\"===A.charAt(P),"["===A.charAt(P)?p=!0:"]"===A.charAt(P)&&(p=!1)),P+=1;else if(S.e4x&&"<"===d){var h=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])(\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{.*?}))*\s*(\/?)\s*>/g,g=A.slice(P-1),m=h.exec(g);if(m&&0===m.index){for(var v=m[2],b=0;m;){var E=!!m[1],y=m[2],_=!!m[m.length-1]||"![CDATA["===y.slice(0,8);if(y!==v||_||(E?--b:++b),b<=0)break;m=h.exec(g)}var T=m?m.index+m[0].length:g.length;return g=g.slice(0,T),P+=T-1,[g=g.replace(ne.lineBreak,"\n"),"TK_STRING"]}}else for(;P<B&&(f||A.charAt(P)!==d&&("`"===d||!ne.newline.test(A.charAt(P))));)(f||"`"===d)&&ne.newline.test(A.charAt(P))?("\r"===A.charAt(P)&&"\n"===A.charAt(P+1)&&(P+=1),e+="\n"):e+=A.charAt(P),f?("x"!==A.charAt(P)&&"u"!==A.charAt(P)||(u=!0),f=!1):f="\\"===A.charAt(P),P+=1;if(u&&S.unescape_strings&&(e=R(e)),P<B&&A.charAt(P)===d&&(e+=d,P+=1,"/"===d))for(;P<B&&ne.isIdentifierStart(A.charCodeAt(P));)e+=A.charAt(P),P+=1;return[e,"TK_STRING"]}if("#"===n){if(0===$.length&&"!"===A.charAt(P)){for(e=n;P<B&&"\n"!==n;)e+=n=A.charAt(P),P+=1;return[J(e)+"\n","TK_UNKNOWN"]}var C="#";if(P<B&&L.test(A.charAt(P))){for(;C+=n=A.charAt(P),(P+=1)<B&&"#"!==n&&"="!==n;);return"#"===n||("["===A.charAt(P)&&"]"===A.charAt(P+1)?(C+="[]",P+=2):"{"===A.charAt(P)&&"}"===A.charAt(P+1)&&(C+="{}",P+=2)),[C,"TK_WORD"]}}if("<"===n&&("?"===A.charAt(P)||"%"===A.charAt(P))){z.lastIndex=P-1;var w=z.exec(A);if(w)return n=w[0],P+=n.length-1,[n=n.replace(ne.lineBreak,"\n"),"TK_STRING"]}if("<"===n&&"<!--"===A.substring(P-1,P+3)){for(P+=3,n="<!--";!ne.newline.test(A.charAt(P))&&P<B;)n+=A.charAt(P),P++;return M=!0,[n,"TK_COMMENT"]}if("-"===n&&M&&"-->"===A.substring(P-1,P+2))return M=!1,P+=2,["-->","TK_COMMENT"];if("."===n)return[n,"TK_DOT"];if(Z(n,N)){for(;P<B&&Z(n+A.charAt(P),N)&&(n+=A.charAt(P),!((P+=1)>=B)););return","===n?[n,"TK_COMMA"]:"="===n?[n,"TK_EQUALS"]:[n,"TK_OPERATOR"]}return[n,"TK_UNKNOWN"]}function R(e){for(var t,i=!1,n="",r=0,s="",o=0;i||r<e.length;)if(t=e.charAt(r),r++,i){if(i=!1,"x"===t)s=e.substr(r,2),r+=2;else{if("u"!==t){n+="\\"+t;continue}s=e.substr(r,4),r+=4}if(!s.match(/^[0123456789abcdefABCDEF]+$/))return e;if(0<=(o=parseInt(s,16))&&o<32){n+="x"===t?"\\x"+s:"\\u"+s;continue}if(34===o||39===o||92===o)n+="\\"+String.fromCharCode(o);else{if("x"===t&&126<o&&o<=255)return e;n+=String.fromCharCode(o)}}else"\\"===t?i=!0:n+=t;return n}var k="\n\r\t ".split(""),L=/[0-9]/,D=/[01234567]/,I=/[0123456789abcdefABCDEF]/,N="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>".split(" ");this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var O,F,M,$,P,B,H=this.line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof","yield","async","await"]),W=/([\s\S]*?)((?:\*\/)|$)/g,U=/([^\n\r\u2028\u2029]*)/g,n=/\/\* beautify( \w+[:]\w+)+ \*\//g,r=/ (\w+)[:](\w+)/g,K=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,z=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;this.tokenize=function(){B=A.length,P=0,M=!1,$=[];for(var e,t,i,n=null,r=[],s=[];!t||"TK_EOF"!==t.type;){for(i=o(),e=new Y(i[1],i[0],O,F);"TK_COMMENT"===e.type||"TK_BLOCK_COMMENT"===e.type||"TK_UNKNOWN"===e.type;)"TK_BLOCK_COMMENT"===e.type&&(e.directives=i[2]),s.push(e),i=o(),e=new Y(i[1],i[0],O,F);s.length&&(e.comments_before=s,s=[]),"TK_START_BLOCK"===e.type||"TK_START_EXPR"===e.type?(e.parent=t,r.push(n),n=e):("TK_END_BLOCK"===e.type||"TK_END_EXPR"===e.type)&&n&&("]"===e.text&&"["===n.text||")"===e.text&&"("===n.text||"}"===e.text&&"{"===n.text)&&(e.parent=n.parent,n=r.pop()),$.push(e),t=e}return $}}var t,n,s,o,a,ne={};t=ne,n="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",s="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",o=new RegExp("["+n+"]"),a=new RegExp("["+n+s+"]"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g"),t.isIdentifierStart=function(e){return e<65?36===e||64===e:e<91||(e<97?95===e:e<123||170<=e&&o.test(String.fromCharCode(e)))},t.isIdentifierChar=function(e){return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||170<=e&&a.test(String.fromCharCode(e))))};var re={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},Y=function(e,t,i,n){this.type=e,this.text=t,this.comments_before=[],this.newlines=i||0,this.wanted_newline=0<i,this.whitespace_before=n||"",this.parent=null,this.directives=null};return{run:e}},ze.extend(ze.FE.DEFAULTS,{codeMirror:window.CodeMirror,codeMirrorOptions:{lineNumbers:!0,tabMode:"indent",indentWithTabs:!0,lineWrapping:!0,mode:"text/html",tabSize:2},codeBeautifierOptions:{end_with_newline:!0,indent_inner_html:!0,extra_liners:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","ol","table","dl"],brace_style:"expand",indent_char:"\t",indent_size:1,wrap_line_length:0},codeViewKeepActiveButtons:["fullscreen"]}),ze.FE.PLUGINS.codeView=function(a){function i(){return a.$box.hasClass("fr-code-view")}function n(){return d?d.getValue():c.val()}function r(e){var t=n();a.html.set(t),a.$el.blur(),a.$tb.find(" > .fr-command").not(e).removeClass("fr-disabled").attr("aria-disabled",!1),e.removeClass("fr-active").attr("aria-pressed",!1),a.events.focus(!0),a.placeholder.refresh(),a.undo.saveStep()}function s(e){c||(l(),!d&&a.opts.codeMirror?d=a.opts.codeMirror.fromTextArea(c.get(0),a.opts.codeMirrorOptions):a.events.$on(c,"keydown keyup change input",function(){a.opts.height?this.removeAttribute("rows"):(this.rows=1,0===this.value.length?this.style.height="auto":this.style.height=this.scrollHeight+"px")})),a.undo.saveStep(),a.html.cleanEmptyTags(),a.html.cleanWhiteTags(!0),a.core.hasFocus()&&(a.core.isEmpty()||(a.selection.save(),a.$el.find('.fr-marker[data-type="true"]:first').replaceWith('<span class="fr-tmp fr-sm">F</span>'),a.$el.find('.fr-marker[data-type="false"]:last').replaceWith('<span class="fr-tmp fr-em">F</span>')));var t,i,n=a.html.get(!1,!0);if(a.$el.find("span.fr-tmp").remove(),a.$box.toggleClass("fr-code-view",!0),a.core.hasFocus()&&a.$el.blur(),n=(n=n.replace(/<span class="fr-tmp fr-sm">F<\/span>/,"FROALA-SM")).replace(/<span class="fr-tmp fr-em">F<\/span>/,"FROALA-EM"),a.codeBeautifier&&(n=a.codeBeautifier.run(n,a.opts.codeBeautifierOptions)),d){t=n.indexOf("FROALA-SM"),(i=n.indexOf("FROALA-EM"))<t?t=i:i-=9;var r=(n=n.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).substring(0,t).length-n.substring(0,t).replace(/\n/g,"").length,s=n.substring(0,i).length-n.substring(0,i).replace(/\n/g,"").length;t=n.substring(0,t).length-n.substring(0,n.substring(0,t).lastIndexOf("\n")+1).length,i=n.substring(0,i).length-n.substring(0,n.substring(0,i).lastIndexOf("\n")+1).length,d.setSize(null,a.opts.height?a.opts.height:"auto"),a.opts.heightMin&&a.$box.find(".CodeMirror-scroll").css("min-height",a.opts.heightMin),d.setValue(n),d.focus(),d.setSelection({line:r,ch:t},{line:s,ch:i}),d.refresh(),d.clearHistory()}else{t=n.indexOf("FROALA-SM"),i=n.indexOf("FROALA-EM")-9,a.opts.heightMin&&c.css("min-height",a.opts.heightMin),a.opts.height&&c.css("height",a.opts.height),a.opts.heightMax&&c.css("max-height",a.opts.height||a.opts.heightMax),c.val(n.replace(/FROALA-SM/g,"").replace(/FROALA-EM/g,"")).trigger("change");var o=ze(a.o_doc).scrollTop();c.focus(),c.get(0).setSelectionRange(t,i),ze(a.o_doc).scrollTop(o)}a.$tb.find(" > .fr-command").not(e).filter(function(){return a.opts.codeViewKeepActiveButtons.indexOf(ze(this).data("cmd"))<0}).addClass("fr-disabled").attr("aria-disabled",!0),e.addClass("fr-active").attr("aria-pressed",!0),!a.helpers.isMobile()&&a.opts.toolbarInline&&a.toolbar.hide()}function t(e){void 0===e&&(e=!i());var t=a.$tb.find('.fr-command[data-cmd="html"]');e?(a.popups.hideAll(),s(t)):(a.$box.toggleClass("fr-code-view",!1),r(t))}function o(){i()&&t(!1),d&&d.toTextArea(),c.val("").removeData().remove(),c=null,f&&(f.remove(),f=null)}function l(){c=ze('<textarea class="fr-code" tabIndex="-1">'),a.$wp.append(c),c.attr("dir",a.opts.direction),a.$box.hasClass("fr-basic")||(f=ze('<a data-cmd="html" title="Code View" class="fr-command fr-btn html-switch'+(a.helpers.isMobile()?"":" fr-desktop")+'" role="button" tabIndex="-1"><i class="fa fa-code"></i></button>'),a.$box.append(f),a.events.bindClick(a.$box,"a.html-switch",function(){t(!1)}));var e=function(){return!i()};a.events.on("buttons.refresh",e),a.events.on("copy",e,!0),a.events.on("cut",e,!0),a.events.on("paste",e,!0),a.events.on("destroy",o,!0),a.events.on("html.set",function(){i()&&t(!0)}),a.events.on("form.submit",function(){i()&&(a.html.set(n()),a.events.trigger("contentChanged",[],!0))},!0)}function e(){if(!a.$wp)return!1}var c,d,f;return{_init:e,toggle:t,isActive:i,get:n}},ze.FE.RegisterCommand("html",{title:"Code View",undo:!1,focus:!1,forcedRefresh:!0,toggle:!0,callback:function(){this.codeView.toggle()},plugin:"codeView"}),ze.FE.DefineIcon("html",{NAME:"code"}),ze.extend(ze.FE.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]"}),ze.extend(ze.FE.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsHEXInput:!0,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]}),ze.FE.PLUGINS.colors=function(h){function e(){var e=h.$tb.find('.fr-command[data-cmd="color"]'),t=h.popups.get("colors.picker");if(t||(t=r()),!t.hasClass("fr-active"))if(h.popups.setContainer("colors.picker",h.$tb),l(t.find(".fr-selected-tab").attr("data-param1")),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,n=e.offset().top+(h.opts.toolbarBottom?10:e.outerHeight()-10);h.popups.show("colors.picker",i,n,e.outerHeight())}else h.position.forSelection(t),h.popups.show("colors.picker")}function t(){h.popups.hide("colors.picker")}function r(){var e='<div class="fr-buttons fr-colors-buttons">';h.opts.toolbarInline&&0<h.opts.colorsButtons.length&&(e+=h.button.buildList(h.opts.colorsButtons)),e+=s()+"</div>";var t="";h.opts.colorsHEXInput&&(t='<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer-'+h.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-color-hex-layer-text-'+h.id+'" type="text" placeholder="'+h.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="customColor" tabIndex="2" role="button">'+h.language.translate("OK")+"</button></div></div>");var i={buttons:e,text_colors:o("text"),background_colors:o("background"),custom_color:t},n=h.popups.create("colors.picker",i);return a(n),n}function s(){var e='<div class="fr-colors-tabs fr-group">';return e+='<span class="fr-colors-tab '+("background"==h.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!=h.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+h.language.translate("Text")+'">'+h.language.translate("Text")+"</span>",(e+='<span class="fr-colors-tab '+("background"==h.opts.colorsDefaultTab?"fr-selected-tab ":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"==h.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+h.language.translate("Background")+'">'+h.language.translate("Background")+"</span>")+"</div>"}function o(e){for(var t="text"==e?h.opts.colorsText:h.opts.colorsBackground,i='<div class="fr-color-set fr-'+e+"-color"+(h.opts.colorsDefaultTab==e||"text"!=h.opts.colorsDefaultTab&&"background"!=h.opts.colorsDefaultTab&&"text"==e?" fr-selected-set":"")+'">',n=0;n<t.length;n++)0!==n&&n%h.opts.colorsStep==0&&(i+="<br>"),"REMOVE"!=t[n]?i+='<span class="fr-command fr-select-color" style="background: '+t[n]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+e+'Color" data-param1="'+t[n]+'"><span class="fr-sr-only">'+h.language.translate("Color")+" "+t[n]+"&nbsp;&nbsp;&nbsp;</span></span>":i+='<span class="fr-command fr-select-color" data-cmd="'+e+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+h.language.translate("Clear Formatting")+'">'+h.icon.create("remove")+'<span class="fr-sr-only">'+h.language.translate("Clear Formatting")+"</span></span>";return i+"</div>"}function a(p){h.events.on("popup.tab",function(e){var t=ze(e.currentTarget);if(!h.popups.isVisible("colors.picker")||!t.is("span"))return!0;var i=e.which,n=!0;if(ze.FE.KEYCODE.TAB==i){var r=p.find(".fr-buttons");n=!h.accessibility.focusToolbar(r,!!e.shiftKey)}else if(ze.FE.KEYCODE.ARROW_UP==i||ze.FE.KEYCODE.ARROW_DOWN==i||ze.FE.KEYCODE.ARROW_LEFT==i||ze.FE.KEYCODE.ARROW_RIGHT==i){if(t.is("span.fr-select-color")){var s=t.parent().find("span.fr-select-color"),o=s.index(t),a=h.opts.colorsStep,l=Math.floor(s.length/a),c=o%a,d=Math.floor(o/a)*a+c,f=l*a;ze.FE.KEYCODE.ARROW_UP==i?d=((d-a)%f+f)%f:ze.FE.KEYCODE.ARROW_DOWN==i?d=(d+a)%f:ze.FE.KEYCODE.ARROW_LEFT==i?d=((d-1)%f+f)%f:ze.FE.KEYCODE.ARROW_RIGHT==i&&(d=(d+1)%f);var u=ze(s.get(d));h.events.disableBlur(),u.focus(),n=!1}}else ze.FE.KEYCODE.ENTER==i&&(h.button.exec(t),n=!1);return!1===n&&(e.preventDefault(),e.stopPropagation()),n},!0)}function l(e){var t,i=h.popups.get("colors.picker"),n=ze(h.selection.element());t="background"==e?"background-color":"color";var r=i.find(".fr-"+e+"-color .fr-select-color");for(r.find(".fr-selected-color").remove(),r.removeClass("fr-active-item"),r.not('[data-param1="REMOVE"]').attr("aria-selected",!1);n.get(0)!=h.el;){if("transparent"!=n.css(t)&&"rgba(0, 0, 0, 0)"!=n.css(t)){var s=i.find(".fr-"+e+'-color .fr-select-color[data-param1="'+h.helpers.RGBToHex(n.css(t))+'"]');s.append('<span class="fr-selected-color" aria-hidden="true">\uf00c</span>'),s.addClass("fr-active-item").attr("aria-selected",!0);break}n=n.parent()}var o=i.find(".fr-color-hex-layer input");o.length&&o.val(h.helpers.RGBToHex(n.css(t))).trigger("change")}function i(e,t){e.hasClass("fr-selected-tab")||(e.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),e.addClass("fr-selected-tab").attr("aria-pressed",!0),e.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),e.parents(".fr-popup").find(".fr-color-set.fr-"+t+"-color").addClass("fr-selected-set"),l(t)),h.accessibility.focusPopup(e.parents(".fr-popup"))}function n(e){"REMOVE"!=e?h.format.applyStyle("background-color",h.helpers.HEXtoRGB(e)):h.format.removeStyle("background-color"),t()}function c(e){"REMOVE"!=e?h.format.applyStyle("color",h.helpers.HEXtoRGB(e)):h.format.removeStyle("color"),t()}function d(){h.popups.hide("colors.picker"),h.toolbar.showInline()}function f(){var e=h.popups.get("colors.picker"),t=e.find(".fr-color-hex-layer input");if(t.length){var i=t.val();"background"==e.find(".fr-selected-tab").attr("data-param1")?n(i):c(i)}}return{showColorsPopup:e,hideColorsPopup:t,changeSet:i,background:n,customColor:f,text:c,back:d}},ze.FE.DefineIcon("colors",{NAME:"tint"}),ze.FE.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),ze.FE.RegisterCommand("textColor",{undo:!0,callback:function(e,t){this.colors.text(t)}}),ze.FE.RegisterCommand("backgroundColor",{undo:!0,callback:function(e,t){this.colors.background(t)}}),ze.FE.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(e,t){var i=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+e+'"][data-param1="'+t+'"]');this.colors.changeSet(i,t)}}),ze.FE.DefineIcon("colorsBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),ze.FE.RegisterCommand("customColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor()}}),ze.FE.DefineIcon("remove",{NAME:"eraser"}),ze.extend(ze.FE.DEFAULTS,{dragInline:!0}),ze.FE.PLUGINS.draggable=function(c){function e(e){return!(!e.originalEvent||!e.originalEvent.target||e.originalEvent.target.nodeType!=Node.TEXT_NODE)||(e.target&&"A"==e.target.tagName&&1==e.target.childNodes.length&&"IMG"==e.target.childNodes[0].tagName&&(e.target=e.target.childNodes[0]),ze(e.target).hasClass("fr-draggable")?(c.undo.canDo()||c.undo.saveStep(),c.opts.dragInline?c.$el.attr("contenteditable",!0):c.$el.attr("contenteditable",!1),c.opts.toolbarInline&&c.toolbar.hide(),ze(e.target).addClass("fr-dragging"),c.browser.msie||c.browser.edge||c.selection.clear(),void e.originalEvent.dataTransfer.setData("text","Froala")):(e.preventDefault(),!1))}function d(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||c.node.isElement(e)))}function f(e,t,i){c.opts.iframe&&(e+=c.$iframe.offset().top,t+=c.$iframe.offset().left),u.offset().top!=e&&u.css("top",e),u.offset().left!=t&&u.css("left",t),u.width()!=i&&u.css("width",i)}function t(e){var t=c.doc.elementFromPoint(e.originalEvent.pageX-c.win.pageXOffset,e.originalEvent.pageY-c.win.pageYOffset);if(!d(t)){for(var i=0,n=t;!d(n)&&n==t&&0<e.originalEvent.pageY-c.win.pageYOffset-i;)i++,n=c.doc.elementFromPoint(e.originalEvent.pageX-c.win.pageXOffset,e.originalEvent.pageY-c.win.pageYOffset-i);(!d(n)||u&&0===c.$el.find(n).length&&n!=u.get(0))&&(n=null);for(var r=0,s=t;!d(s)&&s==t&&e.originalEvent.pageY-c.win.pageYOffset+r<ze(c.doc).height();)r++,s=c.doc.elementFromPoint(e.originalEvent.pageX-c.win.pageXOffset,e.originalEvent.pageY-c.win.pageYOffset+r);(!d(s)||u&&0===c.$el.find(s).length&&s!=u.get(0))&&(s=null),t=null==s&&n?n:s&&null==n?s:s&&n?i<r?n:s:null}if(ze(t).hasClass("fr-drag-helper"))return!1;if(t&&!c.node.isBlock(t)&&(t=c.node.blockParent(t)),t&&0<=["TD","TH","TR","THEAD","TBODY"].indexOf(t.tagName)&&(t=ze(t).parents("table").get(0)),t&&0<=["LI"].indexOf(t.tagName)&&(t=ze(t).parents("UL, OL").get(0)),t&&!ze(t).hasClass("fr-drag-helper")){var o;u||(ze.FE.$draggable_helper||(ze.FE.$draggable_helper=ze('<div class="fr-drag-helper"></div>')),u=ze.FE.$draggable_helper,c.events.on("shared.destroy",function(){u.html("").removeData().remove(),u=null},!0)),o=e.originalEvent.pageY<ze(t).offset().top+ze(t).outerHeight()/2;var a=ze(t),l=0;o||0!==a.next().length?(o||(a=a.next()),"before"==u.data("fr-position")&&a.is(u.data("fr-tag"))||(0<a.prev().length&&(l=parseFloat(a.prev().css("margin-bottom"))||0),l=Math.max(l,parseFloat(a.css("margin-top"))||0),f(a.offset().top-l/2-c.$box.offset().top,a.offset().left-c.win.pageXOffset-c.$box.offset().left,a.width()),u.data("fr-position","before"))):"after"==u.data("fr-position")&&a.is(u.data("fr-tag"))||(l=parseFloat(a.css("margin-bottom"))||0,f(a.offset().top+ze(t).height()+l/2-c.$box.offset().top,a.offset().left-c.win.pageXOffset-c.$box.offset().left,a.width()),u.data("fr-position","after")),u.data("fr-tag",a),u.addClass("fr-visible"),u.appendTo(c.$box)}else u&&0<c.$box.find(u).length&&u.removeClass("fr-visible")}function i(e){e.originalEvent.dataTransfer.dropEffect="move",c.opts.dragInline?s()||!c.browser.msie&&!c.browser.edge||e.preventDefault():(e.preventDefault(),t(e))}function n(e){e.originalEvent.dataTransfer.dropEffect="move",c.opts.dragInline||e.preventDefault()}function r(e){c.$el.attr("contenteditable",!0);var t=c.$el.find(".fr-dragging");u&&u.hasClass("fr-visible")&&c.$box.find(u).length?o(e):t.length&&(e.preventDefault(),e.stopPropagation()),u&&c.$box.find(u).length&&u.removeClass("fr-visible"),t.removeClass("fr-dragging")}function s(){for(var e=null,t=0;t<ze.FE.INSTANCES.length;t++)if((e=ze.FE.INSTANCES[t].$el.find(".fr-dragging")).length)return e.get(0)}function o(e){for(var t,i,n=0;n<ze.FE.INSTANCES.length;n++)if((t=ze.FE.INSTANCES[n].$el.find(".fr-dragging")).length){i=ze.FE.INSTANCES[n];break}if(t.length){if(e.preventDefault(),e.stopPropagation(),u&&u.hasClass("fr-visible")&&c.$box.find(u).length)u.data("fr-tag")[u.data("fr-position")]('<span class="fr-marker"></span>'),u.removeClass("fr-visible");else if(!1===c.markers.insertAtPoint(e.originalEvent))return!1;if(!1===(t=c.events.chainTrigger("element.beforeDrop",t)))return!1;t.removeClass("fr-dragging");var r=t;if(t.parent().is("A")&&(r=t.parent()),c.core.isEmpty()?c.events.focus():(c.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),c.selection.restore()),i==c||c.undo.canDo()||c.undo.saveStep(),c.core.isEmpty())c.$el.html(r);else{var s=c.markers.insert();0===r.find(s).length?ze(s).replaceWith(r):ze(s).replaceWith(t),t.after(ze.FE.MARKERS),c.selection.restore()}return c.popups.hideAll(),c.selection.save(),c.$el.find(c.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),c.html.wrap(),c.html.fillEmptyBlocks(),c.selection.restore(),c.undo.saveStep(),c.opts.iframe&&c.size.syncIframe(),i!=c&&(i.popups.hideAll(),i.$el.find(i.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),i.html.wrap(),i.html.fillEmptyBlocks(),i.undo.saveStep(),i.events.trigger("element.dropped"),i.opts.iframe&&i.size.syncIframe()),c.events.trigger("element.dropped",[r]),!1}u&&u.removeClass("fr-visible"),c.undo.canDo()||c.undo.saveStep(),setTimeout(function(){c.undo.saveStep()},0)}function a(e){if(e&&"DIV"==e.tagName&&c.node.hasClass(e,"fr-drag-helper"))e.parentNode.removeChild(e);else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll("div.fr-drag-helper"),i=0;i<t.length;i++)t[i].parentNode.removeChild(t[i])}function l(){c.opts.enter==ze.FE.ENTER_BR&&(c.opts.dragInline=!0),c.events.on("dragstart",e,!0),c.events.on("dragover",i,!0),c.events.on("dragenter",n,!0),c.events.on("document.dragend",r,!0),c.events.on("document.drop",r,!0),c.events.on("drop",o,!0),c.events.on("html.processGet",a)}var u;return{_init:l}},ze.extend(ze.FE.POPUP_TEMPLATES,{emoticons:"[_BUTTONS_][_EMOTICONS_]"}),ze.extend(ze.FE.DEFAULTS,{emoticonsStep:8,emoticonsSet:[{code:"1f600",desc:"Grinning face"},{code:"1f601",desc:"Grinning face with smiling eyes"},{code:"1f602",desc:"Face with tears of joy"},{code:"1f603",desc:"Smiling face with open mouth"},{code:"1f604",desc:"Smiling face with open mouth and smiling eyes"},{code:"1f605",desc:"Smiling face with open mouth and cold sweat"},{code:"1f606",desc:"Smiling face with open mouth and tightly-closed eyes"},{code:"1f607",desc:"Smiling face with halo"},{code:"1f608",desc:"Smiling face with horns"},{code:"1f609",desc:"Winking face"},{code:"1f60a",desc:"Smiling face with smiling eyes"},{code:"1f60b",desc:"Face savoring delicious food"},{code:"1f60c",desc:"Relieved face"},{code:"1f60d",desc:"Smiling face with heart-shaped eyes"},{code:"1f60e",desc:"Smiling face with sunglasses"},{code:"1f60f",desc:"Smirking face"},{code:"1f610",desc:"Neutral face"},{code:"1f611",desc:"Expressionless face"},{code:"1f612",desc:"Unamused face"},{code:"1f613",desc:"Face with cold sweat"},{
code:"1f614",desc:"Pensive face"},{code:"1f615",desc:"Confused face"},{code:"1f616",desc:"Confounded face"},{code:"1f617",desc:"Kissing face"},{code:"1f618",desc:"Face throwing a kiss"},{code:"1f619",desc:"Kissing face with smiling eyes"},{code:"1f61a",desc:"Kissing face with closed eyes"},{code:"1f61b",desc:"Face with stuck out tongue"},{code:"1f61c",desc:"Face with stuck out tongue and winking eye"},{code:"1f61d",desc:"Face with stuck out tongue and tightly-closed eyes"},{code:"1f61e",desc:"Disappointed face"},{code:"1f61f",desc:"Worried face"},{code:"1f620",desc:"Angry face"},{code:"1f621",desc:"Pouting face"},{code:"1f622",desc:"Crying face"},{code:"1f623",desc:"Persevering face"},{code:"1f624",desc:"Face with look of triumph"},{code:"1f625",desc:"Disappointed but relieved face"},{code:"1f626",desc:"Frowning face with open mouth"},{code:"1f627",desc:"Anguished face"},{code:"1f628",desc:"Fearful face"},{code:"1f629",desc:"Weary face"},{code:"1f62a",desc:"Sleepy face"},{code:"1f62b",desc:"Tired face"},{code:"1f62c",desc:"Grimacing face"},{code:"1f62d",desc:"Loudly crying face"},{code:"1f62e",desc:"Face with open mouth"},{code:"1f62f",desc:"Hushed face"},{code:"1f630",desc:"Face with open mouth and cold sweat"},{code:"1f631",desc:"Face screaming in fear"},{code:"1f632",desc:"Astonished face"},{code:"1f633",desc:"Flushed face"},{code:"1f634",desc:"Sleeping face"},{code:"1f635",desc:"Dizzy face"},{code:"1f636",desc:"Face without mouth"},{code:"1f637",desc:"Face with medical mask"}],emoticonsButtons:["emoticonsBack","|"],emoticonsUseImage:!0}),ze.FE.PLUGINS.emoticons=function(g){function e(){var e=g.$tb.find('.fr-command[data-cmd="emoticons"]'),t=g.popups.get("emoticons");if(t||(t=r()),!t.hasClass("fr-active")){g.popups.refresh("emoticons"),g.popups.setContainer("emoticons",g.$tb);var i=e.offset().left+e.outerWidth()/2,n=e.offset().top+(g.opts.toolbarBottom?10:e.outerHeight()-10);g.popups.show("emoticons",i,n,e.outerHeight())}}function t(){g.popups.hide("emoticons")}function r(){var e="";g.opts.toolbarInline&&0<g.opts.emoticonsButtons.length&&(e='<div class="fr-buttons fr-emoticons-buttons">'+g.button.buildList(g.opts.emoticonsButtons)+"</div>");var t={buttons:e,emoticons:n()},i=g.popups.create("emoticons",t);return g.tooltip.bind(i,".fr-emoticon"),o(i),i}function s(){if(!g.selection.isCollapsed())return!1;var e=g.selection.element(),t=g.selection.endElement();if(e&&g.node.hasClass(e,"fr-emoticon"))return e;if(t&&g.node.hasClass(t,"fr-emoticon"))return t;var i=g.selection.ranges(0),n=i.startContainer;if(n.nodeType==Node.ELEMENT_NODE&&0<n.childNodes.length&&0<i.startOffset){var r=n.childNodes[i.startOffset-1];if(g.node.hasClass(r,"fr-emoticon"))return r}return!1}function n(){for(var e='<div style="text-align: center">',t=0;t<g.opts.emoticonsSet.length;t++)0!==t&&t%g.opts.emoticonsStep==0&&(e+="<br>"),e+='<span class="fr-command fr-emoticon" tabIndex="-1" data-cmd="insertEmoticon" title="'+g.language.translate(g.opts.emoticonsSet[t].desc)+'" role="button" data-param1="'+g.opts.emoticonsSet[t].code+'">'+(g.opts.emoticonsUseImage?'<img src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/'+g.opts.emoticonsSet[t].code+'.svg"/>':"&#x"+g.opts.emoticonsSet[t].code+";")+'<span class="fr-sr-only">'+g.language.translate(g.opts.emoticonsSet[t].desc)+"&nbsp;&nbsp;&nbsp;</span></span>";return g.opts.emoticonsUseImage&&(e+='<p style="font-size: 12px; text-align: center; padding: 0 5px;">Emoji free by <a class="fr-link" tabIndex="-1" href="http://emojione.com/" target="_blank" rel="nofollow" role="link" aria-label="Open Emoji One website.">Emoji One</a></p>'),e+"</div>"}function o(h){g.events.on("popup.tab",function(e){var t=ze(e.currentTarget);if(!g.popups.isVisible("emoticons")||!t.is("span, a"))return!0;var i,n,r,s=e.which;if(ze.FE.KEYCODE.TAB==s){if(t.is("span.fr-emoticon")&&e.shiftKey||t.is("a")&&!e.shiftKey){var o=h.find(".fr-buttons");i=!g.accessibility.focusToolbar(o,!!e.shiftKey)}if(!1!==i){var a=h.find("span.fr-emoticon:focus:first, span.fr-emoticon:visible:first, a");t.is("span.fr-emoticon")&&(a=a.not("span.fr-emoticon:not(:focus)")),n=a.index(t),n=e.shiftKey?((n-1)%a.length+a.length)%a.length:(n+1)%a.length,r=a.get(n),g.events.disableBlur(),r.focus(),i=!1}}else if(ze.FE.KEYCODE.ARROW_UP==s||ze.FE.KEYCODE.ARROW_DOWN==s||ze.FE.KEYCODE.ARROW_LEFT==s||ze.FE.KEYCODE.ARROW_RIGHT==s){if(t.is("span.fr-emoticon")){var l=t.parent().find("span.fr-emoticon");n=l.index(t);var c=g.opts.emoticonsStep,d=Math.floor(l.length/c),f=n%c,u=Math.floor(n/c)*c+f,p=d*c;ze.FE.KEYCODE.ARROW_UP==s?u=((u-c)%p+p)%p:ze.FE.KEYCODE.ARROW_DOWN==s?u=(u+c)%p:ze.FE.KEYCODE.ARROW_LEFT==s?u=((u-1)%p+p)%p:ze.FE.KEYCODE.ARROW_RIGHT==s&&(u=(u+1)%p),r=ze(l.get(u)),g.events.disableBlur(),r.focus(),i=!1}}else ze.FE.KEYCODE.ENTER==s&&(t.is("a")?t[0].click():g.button.exec(t),i=!1);return!1===i&&(e.preventDefault(),e.stopPropagation()),i},!0)}function i(e,t){var i=s(),n=g.selection.ranges(0);i?(0===n.startOffset&&g.selection.element()===i?ze(i).before(ze.FE.MARKERS+ze.FE.INVISIBLE_SPACE):0<n.startOffset&&g.selection.element()===i&&n.commonAncestorContainer.parentNode.classList.contains("fr-emoticon")&&ze(i).after(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS),g.selection.restore(),g.html.insert('<span class="fr-emoticon fr-deletable'+(t?" fr-emoticon-img":"")+'"'+(t?' style="background: url('+t+');"':"")+">"+(t?"&nbsp;":e)+"</span>&nbsp;"+ze.FE.MARKERS,!0)):g.html.insert('<span class="fr-emoticon fr-deletable'+(t?" fr-emoticon-img":"")+'"'+(t?' style="background: url('+t+');"':"")+">"+(t?"&nbsp;":e)+"</span>&nbsp;",!0)}function a(){g.popups.hide("emoticons"),g.toolbar.showInline()}function l(){var e=function(){for(var e=g.el.querySelectorAll(".fr-emoticon:not(.fr-deletable)"),t=0;t<e.length;t++)e[t].className+=" fr-deletable"};e(),g.events.on("html.set",e),g.events.on("keydown",function(e){if(g.keys.isCharacter(e.which)&&g.selection.inEditor()){var t=g.selection.ranges(0),i=s();g.node.hasClass(i,"fr-emoticon-img")&&i&&(0===t.startOffset&&g.selection.element()===i?ze(i).before(ze.FE.MARKERS+ze.FE.INVISIBLE_SPACE):ze(i).after(ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS),g.selection.restore())}}),g.events.on("keyup",function(e){for(var t=g.el.querySelectorAll(".fr-emoticon"),i=0;i<t.length;i++)void 0!==t[i].textContent&&0===t[i].textContent.replace(/\u200B/gi,"").length&&ze(t[i]).remove();if(!(e.which>=ze.FE.KEYCODE.ARROW_LEFT&&e.which<=ze.FE.KEYCODE.ARROW_DOWN)){var n=s();g.node.hasClass(n,"fr-emoticon-img")&&(ze(n).append(ze.FE.MARKERS),g.selection.restore())}})}return{_init:l,insert:i,showEmoticonsPopup:e,hideEmoticonsPopup:t,back:a}},ze.FE.DefineIcon("emoticons",{NAME:"smile-o"}),ze.FE.RegisterCommand("emoticons",{title:"Emoticons",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("emoticons")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("emoticons")):this.emoticons.showEmoticonsPopup()},plugin:"emoticons"}),ze.FE.RegisterCommand("insertEmoticon",{callback:function(e,t){this.emoticons.insert("&#x"+t+";",this.opts.emoticonsUseImage?"https://cdnjs.cloudflare.com/ajax/libs/emojione/2.0.1/assets/svg/"+t+".svg":null),this.emoticons.hideEmoticonsPopup()}}),ze.FE.DefineIcon("emoticonsBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("emoticonsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.emoticons.back()}}),ze.extend(ze.FE.DEFAULTS,{entities:"&quot;&#39;&iexcl;&cent;&pound;&curren;&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;&Ouml;&times;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;&divide;&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;&OElig;&oelig;&Scaron;&scaron;&Yuml;&fnof;&circ;&tilde;&Alpha;&Beta;&Gamma;&Delta;&Epsilon;&Zeta;&Eta;&Theta;&Iota;&Kappa;&Lambda;&Mu;&Nu;&Xi;&Omicron;&Pi;&Rho;&Sigma;&Tau;&Upsilon;&Phi;&Chi;&Psi;&Omega;&alpha;&beta;&gamma;&delta;&epsilon;&zeta;&eta;&theta;&iota;&kappa;&lambda;&mu;&nu;&xi;&omicron;&pi;&rho;&sigmaf;&sigma;&tau;&upsilon;&phi;&chi;&psi;&omega;&thetasym;&upsih;&piv;&ensp;&emsp;&thinsp;&zwnj;&zwj;&lrm;&rlm;&ndash;&mdash;&lsquo;&rsquo;&sbquo;&ldquo;&rdquo;&bdquo;&dagger;&Dagger;&bull;&hellip;&permil;&prime;&Prime;&lsaquo;&rsaquo;&oline;&frasl;&euro;&image;&weierp;&real;&trade;&alefsym;&larr;&uarr;&rarr;&darr;&harr;&crarr;&lArr;&uArr;&rArr;&dArr;&hArr;&forall;&part;&exist;&empty;&nabla;&isin;&notin;&ni;&prod;&sum;&minus;&lowast;&radic;&prop;&infin;&ang;&and;&or;&cap;&cup;&int;&there4;&sim;&cong;&asymp;&ne;&equiv;&le;&ge;&sub;&sup;&nsub;&sube;&supe;&oplus;&otimes;&perp;&sdot;&lceil;&rceil;&lfloor;&rfloor;&lang;&rang;&loz;&spades;&clubs;&hearts;&diams;"}),ze.FE.PLUGINS.entities=function(r){function n(e){var t=e.textContent;if(t.match(a)){for(var i="",n=0;n<t.length;n++)l[t[n]]?i+=l[t[n]]:i+=t[n];e.textContent=i}}function s(e){if(e&&0<=["STYLE","SCRIPT","svg","IFRAME"].indexOf(e.tagName))return!0;for(var t=r.node.contents(e),i=0;i<t.length;i++)t[i].nodeType==Node.TEXT_NODE?n(t[i]):s(t[i]);e.nodeType==Node.TEXT_NODE&&n(e)}function o(e){return 0===e.length?"":r.clean.exec(e,s).replace(/\&amp;/g,"&")}function e(){r.opts.htmlSimpleAmpersand||(r.opts.entities=r.opts.entities+"&amp;");var e=ze("<div>").html(r.opts.entities).text(),t=r.opts.entities.split(";");l={},a="";for(var i=0;i<e.length;i++){var n=e.charAt(i);l[n]=t[i]+";",a+="\\"+n+(i<e.length-1?"|":"")}a=new RegExp("("+a+")","g"),r.events.on("html.get",o,!0)}var a,l;return{_init:e}},ze.extend(ze.FE.POPUP_TEMPLATES,{"file.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_PROGRESS_BAR_]"}),ze.extend(ze.FE.DEFAULTS,{fileUploadURL:"https://i.froala.com/upload",fileUploadParam:"file",fileUploadParams:{},fileUploadToS3:!1,fileUploadMethod:"POST",fileMaxSize:10485760,fileAllowedTypes:["*"],fileInsertButtons:["fileBack","|"],fileUseSelectedText:!1}),ze.FE.PLUGINS.file=function(a){function e(){var e=a.$tb.find('.fr-command[data-cmd="insertFile"]'),t=a.popups.get("file.insert");if(t||(t=b()),r(),!t.hasClass("fr-active"))if(a.popups.refresh("file.insert"),a.popups.setContainer("file.insert",a.$tb),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,n=e.offset().top+(a.opts.toolbarBottom?10:e.outerHeight()-10);a.popups.show("file.insert",i,n,e.outerHeight())}else a.position.forSelection(t),a.popups.show("file.insert")}function l(){var e=a.popups.get("file.insert");e||(e=b()),e.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),e.find(".fr-file-progress-bar-layer").addClass("fr-active"),e.find(".fr-buttons").hide(),n(a.language.translate("Uploading"),0)}function r(e){var t=a.popups.get("file.insert");t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-file-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e&&(a.events.focus(),a.popups.hide("file.insert")))}function n(e,t){var i=a.popups.get("file.insert");if(i){var n=i.find(".fr-file-progress-bar-layer");n.find("h3").text(e+(t?" "+t+"%":"")),n.removeClass("fr-error"),t?(n.find("div").removeClass("fr-indeterminate"),n.find("div > span").css("width",t+"%")):n.find("div").addClass("fr-indeterminate")}}function i(e){l();var t=a.popups.get("file.insert").find(".fr-file-progress-bar-layer");t.addClass("fr-error");var i=t.find("h3");i.text(e),a.events.disableBlur(),i.focus()}function c(e,t,i){a.edit.on(),a.events.focus(!0),a.selection.restore(),a.opts.fileUseSelectedText&&a.selection.text().length&&(t=a.selection.text()),a.html.insert('<a href="'+e+'" id="fr-inserted-file" class="fr-file">'+t+"</a>");var n=a.$el.find("#fr-inserted-file");n.removeAttr("id"),a.popups.hide("file.insert"),a.undo.saveStep(),T(),a.events.trigger("file.inserted",[n,i])}function d(e){try{if(!1===a.events.trigger("file.uploaded",[e],!0))return a.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(g(A,e),!1)}catch(l){return g(x,e),!1}}function f(e){try{var t=ze(e).find("Location").text(),i=ze(e).find("Key").text();return!1===a.events.trigger("file.uploadedToS3",[t,i,e],!0)?(a.edit.on(),!1):t}catch(n){return g(x,e),!1}}function u(e){var t=this.status,i=this.response,n=this.responseXML,r=this.responseText;try{if(a.opts.fileUploadToS3)if(201==t){var s=f(n);s&&c(s,e,i||n)}else g(x,i||n);else if(200<=t&&t<300){var o=d(r);o&&c(o.link,e,i||r)}else g(S,i||r)}catch(p){g(x,i||r)}}function p(){g(x,this.response||this.responseText||this.responseXML)}function h(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;n(a.language.translate("Uploading"),t)}}function g(e,t){a.edit.on(),i(a.language.translate("Something went wrong. Please try again.")),a.events.trigger("file.error",[{code:e,message:L[e]},t])}function m(){a.edit.on(),r(!0)}function s(e){if(void 0!==e&&0<e.length){if(!1===a.events.trigger("file.beforeUpload",[e]))return!1;var t,i=e[0];if(i.size>a.opts.fileMaxSize)return g(R),!1;if(a.opts.fileAllowedTypes.indexOf("*")<0&&a.opts.fileAllowedTypes.indexOf(i.type.replace(/file\//g,""))<0)return g(k),!1;if(a.drag_support.formdata&&(t=a.drag_support.formdata?new FormData:null),t){var n;if(!1!==a.opts.fileUploadToS3)for(n in t.append("key",a.opts.fileUploadToS3.keyStart+(new Date).getTime()+"-"+(i.name||"untitled")),t.append("success_action_status","201"),t.append("X-Requested-With","xhr"),t.append("Content-Type",i.type),a.opts.fileUploadToS3.params)a.opts.fileUploadToS3.params.hasOwnProperty(n)&&t.append(n,a.opts.fileUploadToS3.params[n]);for(n in a.opts.fileUploadParams)a.opts.fileUploadParams.hasOwnProperty(n)&&t.append(n,a.opts.fileUploadParams[n]);t.append(a.opts.fileUploadParam,i);var r=a.opts.fileUploadURL;a.opts.fileUploadToS3&&(r=a.opts.fileUploadToS3.uploadURL?a.opts.fileUploadToS3.uploadURL:"https://"+a.opts.fileUploadToS3.region+".amazonaws.com/"+a.opts.fileUploadToS3.bucket);var s=a.core.getXHR(r,a.opts.fileUploadMethod);s.onload=function(){u.call(s,i.name)},s.onerror=p,s.upload.onprogress=h,s.onabort=m,l(),a.edit.off();var o=a.popups.get("file.insert");o&&o.off("abortUpload").on("abortUpload",function(){4!=s.readyState&&s.abort()}),s.send(t)}}}function o(i){a.events.$on(i,"dragover dragenter",".fr-file-upload-layer",function(){return ze(this).addClass("fr-drop"),!1},!0),a.events.$on(i,"dragleave dragend",".fr-file-upload-layer",function(){return ze(this).removeClass("fr-drop"),!1},!0),a.events.$on(i,"drop",".fr-file-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),ze(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;t&&t.files&&(i.data("instance")||a).file.upload(t.files)},!0),a.helpers.isIOS()&&a.events.$on(i,"touchstart",'.fr-file-upload-layer input[type="file"]',function(){ze(this).trigger("click")}),a.events.$on(i,"change",'.fr-file-upload-layer input[type="file"]',function(){this.files&&(i.data("instance")||a).file.upload(this.files),ze(this).val("")},!0)}function v(){r()}function b(e){if(e)return a.popups.onHide("file.insert",v),!0;var t={buttons:'<div class="fr-buttons">'+a.button.buildList(a.opts.fileInsertButtons)+"</div>",upload_layer:'<div class="fr-file-upload-layer fr-layer fr-active" id="fr-file-upload-layer-'+a.id+'"><strong>'+a.language.translate("Drop file")+"</strong><br>("+a.language.translate("or click")+')<div class="fr-form"><input type="file" name="'+a.opts.fileUploadParam+'" accept="/*" tabIndex="-1" aria-labelledby="fr-file-upload-layer-'+a.id+'" role="button"></div></div>',progress_bar:'<div class="fr-file-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="fileDismissError" tabIndex="2" role="button">OK</button></div></div>'},i=a.popups.create("file.insert",t);return o(i),i}function t(e){a.node.hasClass(e,"fr-file")}function E(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var i=t.files[0];if(i&&void 0!==i.type&&i.type.indexOf("image")<0&&(0<=a.opts.fileAllowedTypes.indexOf(i.type)||0<=a.opts.fileAllowedTypes.indexOf("*"))){a.markers.remove(),a.markers.insertAtPoint(e.originalEvent),a.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),a.popups.hideAll();var n=a.popups.get("file.insert");return n||(n=b()),a.popups.setContainer("file.insert",a.$sc),a.popups.show("file.insert",e.originalEvent.pageX,e.originalEvent.pageY),l(),s(t.files),e.preventDefault(),e.stopPropagation(),!1}}}function y(){a.events.on("drop",E),a.events.$on(a.$win,"keydown",function(e){var t=e.which,i=a.popups.get("file.insert");i&&t==ze.FE.KEYCODE.ESC&&i.trigger("abortUpload")}),a.events.on("destroy",function(){var e=a.popups.get("file.insert");e&&e.trigger("abortUpload")})}function _(){a.events.disableBlur(),a.selection.restore(),a.events.enableBlur(),a.popups.hide("file.insert"),a.toolbar.showInline()}function T(){var e,t=Array.prototype.slice.call(a.el.querySelectorAll("a.fr-file")),i=[];for(e=0;e<t.length;e++)i.push(t[e].getAttribute("href"));if(w)for(e=0;e<w.length;e++)i.indexOf(w[e].getAttribute("href"))<0&&a.events.trigger("file.unlink",[w[e]]);w=t}function C(){y(),a.events.on("link.beforeRemove",t),a.$wp&&(T(),a.events.on("contentChanged",T)),b(!0)}var w,A=2,S=3,x=4,R=5,k=6,L={};return L[1]="File cannot be loaded from the passed link.",L[A]="No link in upload response.",L[S]="Error during file upload.",L[x]="Parsing response failed.",L[R]="File is too large.",L[k]="File file type is invalid.",L[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",{_init:C,showInsertPopup:e,upload:s,insert:c,back:_,hideProgressBar:r}},ze.FE.DefineIcon("insertFile",{NAME:"file-o"}),ze.FE.RegisterCommand("insertFile",{title:"Upload File",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("file.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("file.insert")):this.file.showInsertPopup()},plugin:"file"}),ze.FE.DefineIcon("fileBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("fileBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.file.back()},refresh:function(e){this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.RegisterCommand("fileDismissError",{title:"OK",callback:function(){this.file.hideProgressBar(!0)}}),ze.extend(ze.FE.DEFAULTS,{fontFamily:{"Arial,Helvetica,sans-serif":"Arial","Georgia,serif":"Georgia","Impact,Charcoal,sans-serif":"Impact","Tahoma,Geneva,sans-serif":"Tahoma","Times New Roman,Times,serif,-webkit-standard":"Times New Roman","Verdana,Geneva,sans-serif":"Verdana"},fontFamilySelection:!1,fontFamilyDefaultSelection:"Font Family"}),ze.FE.PLUGINS.fontFamily=function(r){function e(e){r.format.applyStyle("font-family",e)}function t(e,t){t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+a()+'"]').addClass("fr-active").attr("aria-selected",!0);var i=t.find(".fr-dropdown-list"),n=t.find(".fr-active").parent();n.length?i.parent().scrollTop(n.offset().top-i.offset().top-(i.parent().outerHeight()/2-n.outerHeight()/2)):i.parent().scrollTop(0)}function s(e){var t=e.replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'| /g,"").split(",");return ze.grep(t,function(e){return 0<e.length})}function o(e,t){for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(e[i]==t[n])return[i,n];return null}function a(){var e=s(ze(r.selection.element()).css("font-family")),t=[];for(var i in r.opts.fontFamily)if(r.opts.fontFamily.hasOwnProperty(i)){var n=o(e,s(i));n&&t.push([i,n])}return 0===t.length?null:(t.sort(function(e,t){var i=e[1][0]-t[1][0];return 0===i?e[1][1]-t[1][1]:i}),t[0][0])}function i(e){if(r.opts.fontFamilySelection){var t=ze(r.selection.element()).css("font-family").replace(/(sans-serif|serif|monospace|cursive|fantasy)/gi,"").replace(/"|'|/g,"").split(",");e.find("> span").text(r.opts.fontFamily[a()]||t[0]||r.language.translate(r.opts.fontFamilyDefaultSelection))}}return{apply:e,refreshOnShow:t,refresh:i}},ze.FE.RegisterCommand("fontFamily",{type:"dropdown",displaySelection:function(e){return e.opts.fontFamilySelection},defaultSelection:function(e){return e.opts.fontFamilyDefaultSelection},displaySelectionWidth:120,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontFamily;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontFamily" data-param1="'+i+'" style="font-family: '+i+'" title="'+t[i]+'">'+t[i]+"</a></li>");return e+"</ul>"},title:"Font Family",callback:function(e,t){this.fontFamily.apply(t)},refresh:function(e){this.fontFamily.refresh(e)},refreshOnShow:function(e,t){this.fontFamily.refreshOnShow(e,t)},plugin:"fontFamily"}),ze.FE.DefineIcon("fontFamily",{NAME:"font"}),ze.extend(ze.FE.DEFAULTS,{fontSize:["8","9","10","11","12","14","18","24","30","36","48","60","72","96"],fontSizeSelection:!1,fontSizeDefaultSelection:"12"}),ze.FE.PLUGINS.fontSize=function(s){function e(e){s.format.applyStyle("font-size",e)}function t(e,t){var i=ze(s.selection.element()).css("font-size");t.find(".fr-command.fr-active").removeClass("fr-active").attr("aria-selected",!1),t.find('.fr-command[data-param1="'+i+'"]').addClass("fr-active").attr("aria-selected",!0);var n=t.find(".fr-dropdown-list"),r=t.find(".fr-active").parent();r.length?n.parent().scrollTop(r.offset().top-n.offset().top-(n.parent().outerHeight()/2-r.outerHeight()/2)):n.parent().scrollTop(0)}function i(e){if(s.opts.fontSizeSelection){var t=s.helpers.getPX(ze(s.selection.element()).css("font-size"));e.find("> span").text(t)}}return{apply:e,refreshOnShow:t,refresh:i}},ze.FE.RegisterCommand("fontSize",{type:"dropdown",title:"Font Size",displaySelection:function(e){return e.opts.fontSizeSelection},displaySelectionWidth:30,defaultSelection:function(e){return e.opts.fontSizeDefaultSelection},html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.fontSize,i=0;i<t.length;i++){var n=t[i];e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="fontSize" data-param1="'+n+'px" title="'+n+'">'+n+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.fontSize.apply(t)},refresh:function(e){this.fontSize.refresh(e)},refreshOnShow:function(e,t){this.fontSize.refreshOnShow(e,t)},plugin:"fontSize"}),ze.FE.DefineIcon("fontSize",{NAME:"text-height"}),ze.extend(ze.FE.POPUP_TEMPLATES,{"forms.edit":"[_BUTTONS_]","forms.update":"[_BUTTONS_][_TEXT_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{formEditButtons:["inputStyle","inputEdit"],formStyles:{"fr-rounded":"Rounded","fr-large":"Large"},formMultipleStyles:!0,formUpdateButtons:["inputBack","|"]}),ze.FE.PLUGINS.forms=function(s){function e(e){e.preventDefault(),s.selection.clear(),ze(this).data("mousedown",!0)}function t(e){ze(this).data("mousedown")&&(e.stopPropagation(),ze(this).removeData("mousedown"),l(v=this)),e.preventDefault()}function i(){s.$el.find("input, textarea, button").removeData("mousedown")}function n(){ze(this).removeData("mousedown")}function r(){s.events.$on(s.$el,s._mousedown,"input, textarea, button",e),s.events.$on(s.$el,s._mouseup,"input, textarea, button",t),s.events.$on(s.$el,"touchmove","input, textarea, button",n),s.events.$on(s.$el,s._mouseup,i),s.events.$on(s.$win,s._mouseup,i),f(!0)}function o(){return v||null}function a(){var e="";0<s.opts.formEditButtons.length&&(e='<div class="fr-buttons">'+s.button.buildList(s.opts.formEditButtons)+"</div>");var t={buttons:e},i=s.popups.create("forms.edit",t);return s.$wp&&s.events.$on(s.$wp,"scroll.link-edit",function(){o()&&s.popups.isVisible("forms.edit")&&l(o())}),i}function l(e){var t=s.popups.get("forms.edit");t||(t=a());var i=ze(v=e);s.popups.refresh("forms.edit"),s.popups.setContainer("forms.edit",s.$sc);var n=i.offset().left+i.outerWidth()/2,r=i.offset().top+i.outerHeight();s.popups.show("forms.edit",n,r,i.outerHeight())}function c(){var e=s.popups.get("forms.update"),t=o();if(t){var i=ze(t);i.is("button")?e.find('input[type="text"][name="text"]').val(i.text()):e.find('input[type="text"][name="text"]').val(i.attr("placeholder"))}e.find('input[type="text"][name="text"]').trigger("change")}function d(){v=null}function f(e){if(e)return s.popups.onRefresh("forms.update",c),s.popups.onHide("forms.update",d),!0;var t="";1<=s.opts.formUpdateButtons.length&&(t='<div class="fr-buttons">'+s.button.buildList(s.opts.formUpdateButtons)+"</div>");var i="",n=0;i='<div class="fr-forms-text-layer fr-layer fr-active">',i+='<div class="fr-input-line"><input name="text" type="text" placeholder="Text" tabIndex="'+ ++n+'"></div>';var r={buttons:t,text_layer:i+='<div class="fr-action-buttons"><button class="fr-command fr-submit" data-cmd="updateInput" href="#" tabIndex="'+ ++n+'" type="button">'+s.language.translate("Update")+"</button></div></div>"};return s.popups.create("forms.update",r)}function u(){var e=o();if(e){var t=ze(e),i=s.popups.get("forms.update");i||(i=f()),s.popups.isVisible("forms.update")||s.popups.refresh("forms.update"),s.popups.setContainer("forms.update",s.$sc);var n=t.offset().left+t.outerWidth()/2,r=t.offset().top+t.outerHeight();s.popups.show("forms.update",n,r,t.outerHeight())}}function p(e,t,i){void 0===t&&(t=s.opts.formStyles),void 0===i&&(i=s.opts.formMultipleStyles);var n=o();if(!n)return!1;if(!i){var r=Object.keys(t);r.splice(r.indexOf(e),1),ze(n).removeClass(r.join(" "))}ze(n).toggleClass(e)}function h(){s.events.disableBlur(),s.selection.restore(),s.events.enableBlur();var e=o();e&&s.$wp&&("BUTTON"==e.tagName&&s.selection.restore(),l(e))}function g(){var e=s.popups.get("forms.update"),t=o();if(t){var i=ze(t),n=e.find('input[type="text"][name="text"]').val()||"";n.length&&(i.is("button")?i.text(n):i.attr("placeholder",n)),s.popups.hide("forms.update"),l(t)}}function m(){r(),s.events.$on(s.$el,"submit","form",function(e){return e.preventDefault(),!1})}var v;return{_init:m,updateInput:g,getInput:o,applyStyle:p,showUpdatePopup:u,showEditPopup:l,back:h}},ze.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),ze.FE.DefineIcon("inputStyle",{NAME:"magic"}),ze.FE.RegisterCommand("inputStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list">',t=this.opts.formStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li><a class="fr-command" tabIndex="-1" data-cmd="inputStyle" data-param1="'+i+'">'+this.language.translate(t[i])+"</a></li>");return e+"</ul>"},callback:function(e,t){var i=this.forms.getInput();i&&(this.forms.applyStyle(t),this.forms.showEditPopup(i))},refreshOnShow:function(e,t){var i=this.forms.getInput();if(i){var n=ze(i);t.find(".fr-command").each(function(){var e=ze(this).data("param1");ze(this).toggleClass("fr-active",n.hasClass(e))})}}}),ze.FE.DefineIcon("inputEdit",{NAME:"edit"}),ze.FE.RegisterCommand("inputEdit",{title:"Edit Button",undo:!1,refreshAfterCallback:!1,callback:function(){this.forms.showUpdatePopup()}}),ze.FE.DefineIcon("inputBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("inputBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.forms.back()}}),ze.FE.RegisterCommand("updateInput",{undo:!1,focus:!1,title:"Update",callback:function(){this.forms.updateInput()}}),ze.FE.PLUGINS.fullscreen=function(i){function n(){return i.$box.hasClass("fr-fullscreen")}function e(){a=i.helpers.scrollTop(),i.$box.toggleClass("fr-fullscreen"),ze("body:first").toggleClass("fr-fullscreen"),l=ze('<div style="display: none;"></div>'),i.$box.after(l),i.helpers.isMobile()&&(i.$tb.data("parent",i.$tb.parent()),i.$tb.prependTo(i.$box),i.$tb.data("sticky-dummy")&&i.$tb.after(i.$tb.data("sticky-dummy"))),c=i.opts.height,d=i.opts.heightMax,f=i.opts.zIndex,i.opts.height=i.o_win.innerHeight-(i.opts.toolbarInline?0:i.$tb.outerHeight()),i.opts.zIndex=2147483641,i.opts.heightMax=null,i.size.refresh(),i.opts.toolbarInline&&i.toolbar.showInline();for(var e=i.$box.parent();!e.is("body:first");)e.data("z-index",e.css("z-index")).data("overflow",e.css("overflow")).css("z-index","2147483640").css("overflow","visible"),e=e.parent();i.events.trigger("charCounter.update"),i.$win.trigger("scroll")}function t(){i.$box.toggleClass("fr-fullscreen"),ze("body:first").toggleClass("fr-fullscreen"),i.$tb.prependTo(i.$tb.data("parent")),i.$tb.data("sticky-dummy")&&i.$tb.after(i.$tb.data("sticky-dummy")),i.opts.height=c,i.opts.heightMax=d,i.opts.zIndex=f,i.size.refresh(),ze(i.o_win).scrollTop(a),i.opts.toolbarInline&&i.toolbar.showInline(),i.events.trigger("charCounter.update"),i.opts.toolbarSticky&&i.opts.toolbarStickyOffset&&(i.opts.toolbarBottom?i.$tb.css("bottom",i.opts.toolbarStickyOffset).data("bottom",i.opts.toolbarStickyOffset):i.$tb.css("top",i.opts.toolbarStickyOffset).data("top",i.opts.toolbarStickyOffset));for(var e=i.$box.parent();!e.is("body:first");)e.data("z-index")&&(e.css("z-index",""),e.css("z-index")!=e.data("z-index")&&e.css("z-index",e.data("z-index")),e.removeData("z-index")),e.data("overflow")?(e.css("overflow",""),e.css("overflow")!=e.data("overflow")&&e.css("overflow",e.data("overflow"))):e.css("overflow",""),e.removeData("overflow"),e=e.parent();i.$win.trigger("scroll")}function r(){n()?t():e(),s(i.$tb.find('.fr-command[data-cmd="fullscreen"]'))}function s(e){var t=n();e.toggleClass("fr-active",t).attr("aria-pressed",t),e.find("> *:not(.fr-sr-only)").replaceWith(t?i.icon.create("fullscreenCompress"):i.icon.create("fullscreen"))}function o(){if(!i.$wp)return!1;i.events.$on(ze(i.o_win),"resize",function(){n()&&(t(),e())}),i.events.on("toolbar.hide",function(){if(n()&&i.helpers.isMobile())return!1}),i.events.on("destroy",function(){n()&&t()},!0)}var a,l,c,d,f;return{_init:o,toggle:r,refresh:s,isActive:n}},ze.FE.RegisterCommand("fullscreen",{title:"Fullscreen",undo:!1,focus:!1,accessibilityFocus:!0,forcedRefresh:!0,toggle:!0,callback:function(){this.fullscreen.toggle()},refresh:function(e){this.fullscreen.refresh(e)},plugin:"fullscreen"}),ze.FE.DefineIcon("fullscreen",{NAME:"expand"}),ze.FE.DefineIcon("fullscreenCompress",{NAME:"compress"}),ze.extend(ze.FE.DEFAULTS,{helpSets:[{title:"Inline Editor",commands:[{val:"OSkeyE",desc:"Show the editor"}]},{title:"Common actions",commands:[{val:"OSkeyC",desc:"Copy"},{val:"OSkeyX",desc:"Cut"},{val:"OSkeyV",desc:"Paste"},{val:"OSkeyZ",desc:"Undo"},{val:"OSkeyShift+Z",desc:"Redo"},{val:"OSkeyK",desc:"Insert Link"},{val:"OSkeyP",desc:"Insert Image"}]},{title:"Basic Formatting",commands:[{val:"OSkeyA",desc:"Select All"},{val:"OSkeyB",desc:"Bold"},{val:"OSkeyI",desc:"Italic"},{val:"OSkeyU",desc:"Underline"},{val:"OSkeyS",desc:"Strikethrough"},{val:"OSkey]",desc:"Increase Indent"},{val:"OSkey[",desc:"Decrease Indent"}]},{title:"Quote",commands:[{val:"OSkey'",desc:"Increase quote level"},{val:"OSkeyShift+'",desc:"Decrease quote level"}]},{title:"Image / Video",commands:[{val:"OSkey+",desc:"Resize larger"},{val:"OSkey-",desc:"Resize smaller"}]},{title:"Table",commands:[{val:"Alt+Space",desc:"Select table cell"},{val:"Shift+Left/Right arrow",desc:"Extend selection one cell"},{val:"Shift+Up/Down arrow",desc:"Extend selection one row"}]},{title:"Navigation",commands:[{val:"OSkey/",desc:"Shortcuts"},{val:"Alt+F10",desc:"Focus popup / toolbar"},{val:"Esc",desc:"Return focus to previous position"}]}]}),ze.FE.PLUGINS.help=function(o){function e(){}function n(){for(var e='<div class="fr-help-modal">',t=0;t<ze.FE.DEFAULTS.helpSets.length;t++){var i=ze.FE.DEFAULTS.helpSets[t],n="<table>";n+="<thead><tr><th>"+o.language.translate(i.title)+"</th></tr></thead>",n+="<tbody>";for(var r=0;r<i.commands.length;r++){var s=i.commands[r];n+="<tr>",n+="<td>"+o.language.translate(s.desc)+"</td>",n+="<td>"+s.val.replace("OSkey",o.helpers.isMac()?"&#8984;":"Ctrl+")+"</td>",n+="</tr>"}e+=n+="</tbody></table>"}return e+"</div>"}function t(){if(!r){var e="<h4>"+o.language.translate("Shortcuts")+"</h4>",t=n(),i=o.modals.create(s,e,t);r=i.$modal,i.$head,i.$body,o.events.$on(ze(o.o_win),"resize",function(){o.modals.resize(s)})}o.modals.show(s),o.modals.resize(s)}function i(){o.modals.hide(s)}var r,s="help";return{_init:e,show:t,hide:i}},ze.FroalaEditor.DefineIcon("help",{NAME:"question"}),ze.FE.RegisterShortcut(ze.FE.KEYCODE.SLASH,"help",null,"/"),
ze.FE.RegisterCommand("help",{title:"Help",icon:"help",undo:!1,focus:!1,modal:!0,callback:function(){this.help.show()},plugin:"help",showOnMobile:!1}),ze.extend(ze.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,imageUploadURL:"https://i.froala.com/upload",imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),ze.FE.PLUGINS.image=function(d){function c(){var e=d.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val(""),Re&&e.val(Re.attr("src")),e.trigger("change")}function i(){var e=d.$tb.find('.fr-command[data-cmd="insertImage"]'),t=d.popups.get("image.insert");if(t||(t=$()),b(),!t.hasClass("fr-active"))if(d.popups.refresh("image.insert"),d.popups.setContainer("image.insert",d.$tb),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,n=e.offset().top+(d.opts.toolbarBottom?10:e.outerHeight()-10);d.popups.show("image.insert",i,n,e.outerHeight())}else d.position.forSelection(t),d.popups.show("image.insert")}function r(){var e=d.popups.get("image.edit");if(e||(e=m()),e){var t=we();Se()&&(t=t.find(".fr-img-wrap")),d.popups.setContainer("image.edit",d.$sc),d.popups.refresh("image.edit");var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();d.popups.show("image.edit",i,n,t.outerHeight())}}function f(){b()}function n(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+he(e)[0]),e.addClass("fr-di"+ge(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function s(e){ue(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":he(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function a(){for(var e="IMG"==d.el.tagName?[d.el]:d.el.querySelectorAll("img"),t=0;t<e.length;t++){var i=ze(e[t]);!d.opts.htmlUntouched&&d.opts.useClasses?((0<=d.opts.imageEditButtons.indexOf("imageAlign")||0<=d.opts.imageEditButtons.indexOf("imageDisplay"))&&n(i),d.opts.imageTextNear||i.removeClass("fr-dii").addClass("fr-dib")):d.opts.htmlUntouched||d.opts.useClasses||(0<=d.opts.imageEditButtons.indexOf("imageAlign")||0<=d.opts.imageEditButtons.indexOf("imageDisplay"))&&s(i),d.opts.iframe&&i.on("load",d.size.syncIframe)}}function u(e){void 0===e&&(e=!0);var t,i=Array.prototype.slice.call(d.el.querySelectorAll("img")),n=[];for(t=0;t<i.length;t++)n.push(i[t].getAttribute("src")),ze(i[t]).toggleClass("fr-draggable",d.opts.imageMove),""===i[t].getAttribute("class")&&i[t].removeAttribute("class"),""===i[t].getAttribute("style")&&i[t].removeAttribute("style");if(We)for(t=0;t<We.length;t++)n.indexOf(We[t].getAttribute("src"))<0&&d.events.trigger("image.removed",[ze(We[t])]);if(We&&e){var r=[];for(t=0;t<We.length;t++)r.push(We[t].getAttribute("src"));for(t=0;t<i.length;t++)r.indexOf(i[t].getAttribute("src"))<0&&d.events.trigger("image.loaded",[ze(i[t])])}We=i}function l(){if(ke||X(),!Re)return!1;var e=d.$wp||d.$sc;e.append(ke),ke.data("instance",d);var t=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),i=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);i-=d.helpers.getPX(e.css("border-left-width")),t-=d.helpers.getPX(e.css("border-top-width")),d.$el.is("img")&&d.$sc.is("body")&&(i=t=0);var n=we();Se()&&(n=n.find(".fr-img-wrap")),ke.css("top",(d.opts.iframe?n.offset().top:n.offset().top+t)-1).css("left",(d.opts.iframe?n.offset().left:n.offset().left+i)-1).css("width",n.get(0).getBoundingClientRect().width).css("height",n.get(0).getBoundingClientRect().height).addClass("fr-active")}function t(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function o(e){if(!d.core.sameInstance(ke))return!0;if(e.preventDefault(),e.stopPropagation(),d.$el.find("img.fr-error").left)return!1;d.undo.canDo()||d.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if("mousedown"==e.type){var i=d.$oel.get(0).ownerDocument,n=i.defaultView||i.parentWindow,r=!1;try{r=n.location!=n.parent.location&&!(n.$&&n.$.FE)}catch(l){}r&&n.frameElement&&(t+=d.helpers.getPX(ze(n.frameElement).offset().left)+n.frameElement.clientLeft)}(Le=ze(this)).data("start-x",t),Le.data("start-width",Re.width()),Le.data("start-height",Re.height());var s=Re.width();if(d.opts.imageResizeWithPercent){var o=Re.parentsUntil(d.$el,d.html.blockTagsQuery()).get(0)||d.el;Re.css("width",(s/ze(o).outerWidth()*100).toFixed(2)+"%")}else Re.css("width",s);De.show(),d.popups.hideAll(),de()}function p(e){if(!d.core.sameInstance(ke))return!0;var t;if(Le&&Re){if(e.preventDefault(),d.$el.find("img.fr-error").left)return!1;var i=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null);if(!i)return!1;var n=i-Le.data("start-x"),r=Le.data("start-width");if((Le.hasClass("fr-hnw")||Le.hasClass("fr-hsw"))&&(n=0-n),d.opts.imageResizeWithPercent){var s=Re.parentsUntil(d.$el,d.html.blockTagsQuery()).get(0)||d.el;r=((r+n)/ze(s).outerWidth()*100).toFixed(2),d.opts.imageRoundPercent&&(r=Math.round(r)),Re.css("width",r+"%"),(t=(d.helpers.getPX(Re.css("width"))/ze(s).outerWidth()*100).toFixed(2))!==r&&Re.css("width",t+"%"),Re.css("height","").removeAttr("height")}else r+n>=d.opts.imageMinWidth&&(Se()&&Re.parent().css("width",r+n),Re.css("width",r+n)),(t=d.helpers.getPX(Re.css("width")))!==r+n&&Re.css("width",t),(Re.attr("style")||"").match(/(^height:)|(; *height:)/)&&Re.css("height",Le.data("start-height")*Re.width()/Le.data("start-width"));l(),d.events.trigger("image.resize",[Ce()])}}function h(e){if(!d.core.sameInstance(ke))return!0;if(Le&&Re){if(e&&e.stopPropagation(),d.$el.find("img.fr-error").left)return!1;Le=null,De.hide(),l(),r(),d.undo.saveStep(),d.events.trigger("image.resizeEnd",[Ce()])}}function g(e,t,i){d.edit.on(),Re&&Re.addClass("fr-error"),y(d.language.translate("Something went wrong. Please try again.")),!Re&&i&&Q(i),d.events.trigger("image.error",[{code:e,message:He[e]},t,i])}function m(e){if(e)return d.$wp&&d.events.$on(d.$wp,"scroll",function(){Re&&d.popups.isVisible("image.edit")&&(d.events.disableBlur(),_(Re))}),!0;var t="";if(0<d.opts.imageEditButtons.length){t+='<div class="fr-buttons">',t+=d.button.buildList(d.opts.imageEditButtons);var i={buttons:t+="</div>"};return d.popups.create("image.edit",i)}return!1}function v(e){var t=d.popups.get("image.insert");if(t||(t=$()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),Re){var i=we();d.popups.setContainer("image.insert",d.$sc);var n=i.offset().left+i.width()/2,r=i.offset().top+i.height();d.popups.show("image.insert",n,r,i.outerHeight())}void 0===e&&E(d.language.translate("Uploading"),0)}function b(e){var t=d.popups.get("image.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||d.$el.find("img.fr-error").length)){if(d.events.focus(),d.$el.find("img.fr-error").length&&(d.$el.find("img.fr-error").remove(),d.undo.saveStep(),d.undo.run(),d.undo.dropRedo()),!d.$wp&&Re){var i=Re;le(!0),d.selection.setAfter(i.get(0)),d.selection.restore()}d.popups.hide("image.insert")}}function E(e,t){var i=d.popups.get("image.insert");if(i){var n=i.find(".fr-image-progress-bar-layer");n.find("h3").text(e+(t?" "+t+"%":"")),n.removeClass("fr-error"),t?(n.find("div").removeClass("fr-indeterminate"),n.find("div > span").css("width",t+"%")):n.find("div").addClass("fr-indeterminate")}}function y(e){v();var t=d.popups.get("image.insert").find(".fr-image-progress-bar-layer");t.addClass("fr-error");var i=t.find("h3");i.text(e),d.events.disableBlur(),i.focus()}function e(){var e=d.popups.get("image.insert").find(".fr-image-by-url-layer input");if(0<e.val().length){if(v(),E(d.language.translate("Loading image")),d.opts.imageUploadRemoteUrls&&d.opts.imageCORSProxy){var t=new XMLHttpRequest;t.open("GET",d.opts.imageCORSProxy+"/"+e.val(),!0),t.responseType="blob",t.onload=function(){200==this.status&&I([new Blob([this.response],{type:"image/png"})],Re)},t.send()}else C(e.val(),!0,[],Re);e.val(""),e.blur()}}function _(e){ae.call(e.get(0))}function T(){var e=ze(this);d.popups.hide("image.insert"),e.removeClass("fr-uploading"),e.next().is("br")&&e.next().remove(),_(e),d.events.trigger("image.loaded",[e])}function C(o,e,a,l,c){d.edit.off(),E(d.language.translate("Loading image")),e&&(o=d.helpers.sanitizeURL(o));var t=new Image;t.onload=function(){var e,t;if(l){d.undo.canDo()||l.hasClass("fr-uploading")||d.undo.saveStep();var i=l.data("fr-old-src");l.data("fr-image-pasted")&&(i=null),d.$wp?((e=l.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),i&&l.attr("src",i),l.replaceWith(e)):e=l;for(var n=e.get(0).attributes,r=0;r<n.length;r++){var s=n[r];0===s.nodeName.indexOf("data-")&&e.removeAttr(s.nodeName)}if(void 0!==a)for(t in a)a.hasOwnProperty(t)&&"link"!=t&&e.attr("data-"+t,a[t]);e.on("load",T),e.attr("src",o),d.edit.on(),u(!1),d.undo.saveStep(),d.$el.blur(),d.events.trigger(i?"image.replaced":"image.inserted",[e,c])}else e=k(o,a,T),u(!1),d.undo.saveStep(),d.$el.blur(),d.events.trigger("image.inserted",[e,c])},t.onerror=function(){g(Ne)},v(d.language.translate("Loading image")),t.src=o}function w(e){try{if(!1===d.events.trigger("image.uploaded",[e],!0))return d.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(g(Oe,e),!1)}catch(i){return g(Me,e),!1}}function A(e){try{var t=ze(e).find("Location").text(),i=ze(e).find("Key").text();return!1===d.events.trigger("image.uploadedToS3",[t,i,e],!0)?(d.edit.on(),!1):t}catch(f){return g(Me,e),!1}}function S(e){E(d.language.translate("Loading image"));var t=this.status,i=this.response,n=this.responseXML,r=this.responseText;try{if(d.opts.imageUploadToS3)if(201==t){var s=A(n);s&&C(s,!1,[],e,i||n)}else g(Me,i||n,e);else if(200<=t&&t<300){var o=w(r);o&&C(o.link,!1,o,e,i||r)}else g(Fe,i||r,e)}catch(a){g(Me,i||r,e)}}function x(){g(Me,this.response||this.responseText||this.responseXML)}function R(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;E(d.language.translate("Uploading"),t)}}function k(e,t,i){var n,r="";if(t&&void 0!==t)for(n in t)t.hasOwnProperty(n)&&"link"!=n&&(r+=" data-"+n+'="'+t[n]+'"');var s=d.opts.imageDefaultWidth;s&&"auto"!=s&&(s+=d.opts.imageResizeWithPercent?"%":"px");var o=ze('<img src="'+e+'"'+r+(s?' style="width: '+s+';"':"")+">");ue(o,d.opts.imageDefaultDisplay,d.opts.imageDefaultAlign),o.on("load",i),o.on("error",function(){g(Be)}),d.edit.on(),d.events.focus(!0),d.selection.restore(),d.undo.saveStep(),d.opts.imageSplitHTML?d.markers.split():d.markers.insert();var a=d.$el.find(".fr-marker");return a.length?(a.parent().is("hr")&&a.parent().after(a),d.node.isLastSibling(a)&&a.parent().hasClass("fr-deletable")&&a.insertAfter(a.parent()),a.replaceWith(o)):d.$el.append(o),d.html.wrap(),d.selection.clear(),o}function L(){d.edit.on(),b(!0)}function D(t,i,e,r){function s(){var e=ze(this);e.off("load"),e.addClass("fr-uploading"),e.next().is("br")&&e.next().remove(),d.placeholder.refresh(),_(e),l(),v(),d.edit.off(),t.onload=function(){S.call(t,e)},t.onerror=x,t.upload.onprogress=R,t.onabort=L,e.off("abortUpload").on("abortUpload",function(){4!=t.readyState&&t.abort()}),t.send(i)}var o=new FileReader;o.addEventListener("load",function(){var e=o.result;if(o.result.indexOf("svg+xml")<0){for(var t=atob(o.result.split(",")[1]),i=[],n=0;n<t.length;n++)i.push(t.charCodeAt(n));e=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:"image/jpeg"}))}r?(r.on("load",s),r.one("error",function(){r.off("load"),r.attr("src",r.data("fr-old-src")),g(Be)}),d.edit.on(),d.undo.saveStep(),r.data("fr-old-src",r.attr("src")),r.attr("src",e)):k(e,null,s)},!1),o.readAsDataURL(e)}function I(e,t){if(void 0!==e&&0<e.length){if(!1===d.events.trigger("image.beforeUpload",[e,t]))return!1;var i,n=e[0];if(n.name||(n.name=(new Date).getTime()+".jpg"),n.size>d.opts.imageMaxSize)return g($e),!1;if(d.opts.imageAllowedTypes.indexOf(n.type.replace(/image\//g,""))<0)return g(Pe),!1;if(d.drag_support.formdata&&(i=d.drag_support.formdata?new FormData:null),i){var r;if(!1!==d.opts.imageUploadToS3)for(r in i.append("key",d.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",n.type),d.opts.imageUploadToS3.params)d.opts.imageUploadToS3.params.hasOwnProperty(r)&&i.append(r,d.opts.imageUploadToS3.params[r]);for(r in d.opts.imageUploadParams)d.opts.imageUploadParams.hasOwnProperty(r)&&i.append(r,d.opts.imageUploadParams[r]);i.append(d.opts.imageUploadParam,n,n.name);var s=d.opts.imageUploadURL;d.opts.imageUploadToS3&&(s=d.opts.imageUploadToS3.uploadURL?d.opts.imageUploadToS3.uploadURL:"https://"+d.opts.imageUploadToS3.region+".amazonaws.com/"+d.opts.imageUploadToS3.bucket),D(d.core.getXHR(s,d.opts.imageUploadMethod),i,n,t||Re)}}}function N(n){d.events.$on(n,"dragover dragenter",".fr-image-upload-layer",function(){return ze(this).addClass("fr-drop"),!1},!0),d.events.$on(n,"dragleave dragend",".fr-image-upload-layer",function(){return ze(this).removeClass("fr-drop"),!1},!0),d.events.$on(n,"drop",".fr-image-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),ze(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;if(t&&t.files){var i=n.data("instance")||d;i.events.disableBlur(),i.image.upload(t.files),i.events.enableBlur()}},!0),d.helpers.isIOS()&&d.events.$on(n,"touchstart",'.fr-image-upload-layer input[type="file"]',function(){ze(this).trigger("click")},!0),d.events.$on(n,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var e=n.data("instance")||d;e.events.disableBlur(),n.find("input:focus").blur(),e.events.enableBlur(),e.image.upload(this.files,Re)}ze(this).val("")},!0)}function O(e){if(e.is("img")&&0<e.parents(".fr-img-caption").length)return e.parents(".fr-img-caption")}function F(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var i=t.files[0];if(i&&i.type&&-1!==i.type.indexOf("image")){if(!d.opts.imageUpload)return e.preventDefault(),e.stopPropagation(),!1;d.markers.remove(),d.markers.insertAtPoint(e.originalEvent),d.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),0===d.$el.find(".fr-marker").length&&d.selection.setAtEnd(d.el),d.popups.hideAll();var n=d.popups.get("image.insert");n||(n=$()),d.popups.setContainer("image.insert",d.$sc);var r=e.originalEvent.pageX,s=e.originalEvent.pageY;return d.opts.iframe&&(s+=d.$iframe.offset().top,r+=d.$iframe.offset().left),d.popups.show("image.insert",r,s),v(),0<=d.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))?(le(!0),I(t.files)):g(Pe),e.preventDefault(),e.stopPropagation(),!1}}}function M(){d.events.$on(d.$el,d._mousedown,"IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;d.helpers.isMobile()||d.selection.clear(),Ie=!0,d.popups.areVisible()&&d.events.disableBlur(),d.browser.msie&&(d.events.disableBlur(),d.$el.attr("contenteditable",!1)),d.draggable||"touchstart"==e.type||e.preventDefault(),e.stopPropagation()}),d.events.$on(d.$el,d._mouseup,"IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;Ie&&(Ie=!1,e.stopPropagation(),d.browser.msie&&(d.$el.attr("contenteditable",!0),d.events.enableBlur()))}),d.events.on("keyup",function(e){if(e.shiftKey&&""===d.selection.text().replace(/\n/g,"")&&d.keys.isArrow(e.which)){var t=d.selection.element(),i=d.selection.endElement();t&&"IMG"==t.tagName?_(ze(t)):i&&"IMG"==i.tagName&&_(ze(i))}},!0),d.events.on("drop",F),d.events.on("element.beforeDrop",O),d.events.on("mousedown window.mousedown",ce),d.events.on("window.touchmove",de),d.events.on("mouseup window.mouseup",function(){if(Re)return le(),!1;de()}),d.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&le()}),d.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){Ie=!1,le(!0)}),d.events.on("modals.hide",function(){Re&&(_e(),d.selection.clear())})}function $(e){if(e)return d.popups.onRefresh("image.insert",c),d.popups.onHide("image.insert",f),!0;var t,i="";d.opts.imageUpload||d.opts.imageInsertButtons.splice(d.opts.imageInsertButtons.indexOf("imageUpload"),1),1<d.opts.imageInsertButtons.length&&(i='<div class="fr-buttons">'+d.button.buildList(d.opts.imageInsertButtons)+"</div>");var n=d.opts.imageInsertButtons.indexOf("imageUpload"),r=d.opts.imageInsertButtons.indexOf("imageByURL"),s="";0<=n&&(t=" fr-active",0<=r&&r<n&&(t=""),s='<div class="fr-image-upload-layer'+t+' fr-layer" id="fr-image-upload-layer-'+d.id+'"><strong>'+d.language.translate("Drop image")+"</strong><br>("+d.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+d.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+d.id+'" role="button"></div></div>');var o="";0<=r&&(t=" fr-active",0<=n&&n<r&&(t=""),o='<div class="fr-image-by-url-layer'+t+' fr-layer" id="fr-image-by-url-layer-'+d.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+d.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+d.language.translate("Insert")+"</button></div></div>");var a={buttons:i,upload_layer:s,by_url_layer:o,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},l=d.popups.create("image.insert",a);return d.$wp&&d.events.$on(d.$wp,"scroll",function(){Re&&d.popups.isVisible("image.insert")&&ye()}),N(l),l}function P(){Re&&d.popups.get("image.alt").find("input").val(Re.attr("alt")||"").trigger("change")}function B(){var e=d.popups.get("image.alt");e||(e=H()),b(),d.popups.refresh("image.alt"),d.popups.setContainer("image.alt",d.$sc);var t=we();Se()&&(t=t.find(".fr-img-wrap"));var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();d.popups.show("image.alt",i,n,t.outerHeight())}function H(e){if(e)return d.popups.onRefresh("image.alt",P),!0;var t={buttons:'<div class="fr-buttons">'+d.button.buildList(d.opts.imageAltButtons)+"</div>",alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+d.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+d.id+'" type="text" placeholder="'+d.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+d.language.translate("Update")+"</button></div></div>"},i=d.popups.create("image.alt",t);return d.$wp&&d.events.$on(d.$wp,"scroll.image-alt",function(){Re&&d.popups.isVisible("image.alt")&&B()}),i}function W(e){if(Re){var t=d.popups.get("image.alt");Re.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),_(Re)}}function U(){if(Re){var e=d.popups.get("image.size");e.find('input[name="width"]').val(Re.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(Re.get(0).style.height).trigger("change")}}function K(){var e=d.popups.get("image.size");e||(e=z()),b(),d.popups.refresh("image.size"),d.popups.setContainer("image.size",d.$sc);var t=we();Se()&&(t=t.find(".fr-img-wrap"));var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();d.popups.show("image.size",i,n,t.outerHeight())}function z(e){if(e)return d.popups.onRefresh("image.size",U),!0;var t={buttons:'<div class="fr-buttons">'+d.button.buildList(d.opts.imageSizeButtons)+"</div>",size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+d.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+d.id+'" type="text" name="width" placeholder="'+d.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+d.id+'" type="text" name="height" placeholder="'+d.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+d.language.translate("Update")+"</button></div></div>"},i=d.popups.create("image.size",t);return d.$wp&&d.events.$on(d.$wp,"scroll.image-size",function(){Re&&d.popups.isVisible("image.size")&&K()}),i}function Y(e,t){if(Re){var i=d.popups.get("image.size");e=e||i.find('input[name="width"]').val()||"",t=t||i.find('input[name="height"]').val()||"";var n=/^[\d]+((px)|%)*$/g;e.match(n)?Re.css("width",e):Re.css("width",""),t.match(n)?Re.css("height",t):Re.css("height",""),Se()&&(e.match(n)?Re.parent().css("width",e):Re.parent().css("width",""),t.match(n)?Re.parent().css("height",t):Re.parent().css("height","")),i.find("input:focus").blur(),_(Re)}}function j(e){var t,i,n=d.popups.get("image.insert");if(Re||d.opts.toolbarInline){if(Re){var r=we();Se()&&(r=r.find(".fr-img-wrap")),i=r.offset().top+r.outerHeight(),t=r.offset().left+r.outerWidth()/2}}else{var s=d.$tb.find('.fr-command[data-cmd="insertImage"]');t=s.offset().left+s.outerWidth()/2,i=s.offset().top+(d.opts.toolbarBottom?10:s.outerHeight()-10)}!Re&&d.opts.toolbarInline&&(i=n.offset().top-d.helpers.getPX(n.css("margin-top")),n.hasClass("fr-above")&&(i+=n.outerHeight())),n.find(".fr-layer").removeClass("fr-active"),n.find(".fr-"+e+"-layer").addClass("fr-active"),d.popups.show("image.insert",t,i,Re?Re.outerHeight():0),d.accessibility.focusPopup(n)}function G(e){d.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function q(e){d.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function V(e,t,i,n){return e.pageX=t,o.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,n)),p.call(this,e),h.call(this,e),++n}function X(){var e;if(d.shared.$image_resizer?(ke=d.shared.$image_resizer,De=d.shared.$img_overlay,d.events.on("destroy",function(){ke.removeClass("fr-active").appendTo(ze("body:first"))},!0)):(d.shared.$image_resizer=ze('<div class="fr-image-resizer"></div>'),ke=d.shared.$image_resizer,d.events.$on(ke,"mousedown",function(e){e.stopPropagation()},!0),d.opts.imageResize&&(ke.append(t("nw")+t("ne")+t("sw")+t("se")),d.shared.$img_overlay=ze('<div class="fr-image-overlay"></div>'),De=d.shared.$img_overlay,e=ke.get(0).ownerDocument,ze(e).find("body:first").append(De))),d.events.on("shared.destroy",function(){ke.html("").removeData().remove(),ke=null,d.opts.imageResize&&(De.remove(),De=null)},!0),d.helpers.isMobile()||d.events.$on(ze(d.o_win),"resize",function(){Re&&!Re.hasClass("fr-uploading")?le(!0):Re&&(l(),ye(),v(!1))}),d.opts.imageResize){e=ke.get(0).ownerDocument,d.events.$on(ke,d._mousedown,".fr-handler",o),d.events.$on(ze(e),d._mousemove,p),d.events.$on(ze(e.defaultView||e.parentWindow),d._mouseup,h),d.events.$on(De,"mouseleave",h);var n=1,r=null,s=0;d.events.on("keydown",function(e){if(Re){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,i=e.which;(i!==r||200<e.timeStamp-s)&&(n=1),(i==ze.FE.KEYCODE.EQUALS||d.browser.mozilla&&i==ze.FE.KEYCODE.FF_EQUALS)&&t&&!e.altKey?n=V.call(this,e,1,1,n):(i==ze.FE.KEYCODE.HYPHEN||d.browser.mozilla&&i==ze.FE.KEYCODE.FF_HYPHEN)&&t&&!e.altKey?n=V.call(this,e,2,-1,n):d.keys.ctrlKey(e)||i!=ze.FE.KEYCODE.ENTER||(Re.before("<br>"),_(Re)),r=i,s=e.timeStamp}},!0),d.events.on("keyup",function(){n=1})}}function Q(e){(e=e||we())&&!1!==d.events.trigger("image.beforeRemove",[e])&&(d.popups.hideAll(),_e(),le(!0),d.undo.canDo()||d.undo.saveStep(),e.get(0)==d.el?e.removeAttr("src"):("A"==e.get(0).parentNode.tagName?(d.selection.setBefore(e.get(0).parentNode)||d.selection.setAfter(e.get(0).parentNode)||e.parent().after(ze.FE.MARKERS),ze(e.get(0).parentNode).remove()):(d.selection.setBefore(e.get(0))||d.selection.setAfter(e.get(0))||e.after(ze.FE.MARKERS),e.remove()),d.html.fillEmptyBlocks(),d.selection.restore()),d.undo.saveStep())}function Z(e){var t=e.which;if(Re&&(t==ze.FE.KEYCODE.BACKSPACE||t==ze.FE.KEYCODE.DELETE))return e.preventDefault(),e.stopPropagation(),Q(),!1;if(Re&&t==ze.FE.KEYCODE.ESC){var i=Re;return le(!0),d.selection.setAfter(i.get(0)),d.selection.restore(),e.preventDefault(),!1}if(Re&&(t==ze.FE.KEYCODE.ARROW_LEFT||t==ze.FE.KEYCODE.ARROW_RIGHT)){var n=Re.get(0);return le(!0),t==ze.FE.KEYCODE.ARROW_LEFT?d.selection.setBefore(n):d.selection.setAfter(n),d.selection.restore(),e.preventDefault(),!1}return Re&&t!=ze.FE.KEYCODE.F10&&!d.keys.isBrowserAction(e)?(e.preventDefault(),e.stopPropagation(),!1):void 0}function J(e){if(e&&"IMG"==e.tagName)d.node.hasClass(e,"fr-uploading")||d.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):d.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),i=0;i<t.length;i++)J(t[i])}function ee(){var n;(M(),"IMG"==d.el.tagName&&d.$el.addClass("fr-view"),d.events.$on(d.$el,d.helpers.isMobile()&&!d.helpers.isWindowsPhone()?"touchend":"click","IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',ae),d.helpers.isMobile()&&(d.events.$on(d.$el,"touchstart","IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(){Ue=!1}),d.events.$on(d.$el,"touchmove",function(){Ue=!0})),d.$wp?(d.events.on("window.keydown keydown",Z,!0),d.events.on("keyup",function(e){if(Re&&e.which==ze.FE.KEYCODE.ENTER)return!1},!0)):d.events.$on(d.$win,"keydown",Z),d.events.on("toolbar.esc",function(){if(Re){if(d.$wp)d.events.disableBlur(),d.events.focus();else{var e=Re;le(!0),d.selection.setAfter(e.get(0)),d.selection.restore()}return!1}},!0),d.events.on("toolbar.focusEditor",function(){if(Re)return!1},!0),d.events.on("window.cut window.copy",function(e){Re&&d.popups.isVisible("image.edit")&&!d.popups.get("image.edit").find(":focus").length&&(_e(),d.paste.saveCopiedText(Re.get(0).outerHTML,"\n"),"copy"==e.type?setTimeout(function(){_(Re)}):(le(!0),d.undo.saveStep(),setTimeout(function(){d.undo.saveStep()},0)))},!0),d.browser.msie&&d.events.on("keydown",function(e){if(!d.selection.isCollapsed()||!Re)return!0;var t=e.which;t==ze.FE.KEYCODE.C&&d.keys.ctrlKey(e)?d.events.trigger("window.copy"):t==ze.FE.KEYCODE.X&&d.keys.ctrlKey(e)&&d.events.trigger("window.cut")}),d.events.$on(ze(d.o_win),"keydown",function(e){var t=e.which;if(Re&&t==ze.FE.KEYCODE.BACKSPACE)return e.preventDefault(),!1}),d.events.$on(d.$win,"keydown",function(e){var t=e.which;Re&&Re.hasClass("fr-uploading")&&t==ze.FE.KEYCODE.ESC&&Re.trigger("abortUpload")}),d.events.on("destroy",function(){Re&&Re.hasClass("fr-uploading")&&Re.trigger("abortUpload")}),d.events.on("paste.before",se),d.events.on("paste.beforeCleanup",oe),d.events.on("paste.after",ie),d.events.on("html.set",a),d.events.on("html.inserted",a),a(),d.events.on("destroy",function(){We=[]}),d.events.on("html.processGet",J),d.opts.imageOutputSize)&&d.events.on("html.beforeGet",function(){n=d.el.querySelectorAll("img");for(var e=0;e<n.length;e++){var t=n[e].style.width||ze(n[e]).width(),i=n[e].style.height||ze(n[e]).height();t&&n[e].setAttribute("width",(""+t).replace(/px/,"")),i&&n[e].setAttribute("height",(""+i).replace(/px/,""))}});d.opts.iframe&&d.events.on("image.loaded",d.size.syncIframe),d.$wp&&(u(),d.events.on("contentChanged",u)),d.events.$on(ze(d.o_win),"orientationchange.image",function(){setTimeout(function(){Re&&_(Re)},100)}),m(!0),$(!0),z(!0),H(!0),d.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Q(e),!1})}function te(e){if(!1===d.events.trigger("image.beforePasteUpload",[e]))return!1;Re=ze(e),l(),r(),ye(),v();for(var t=atob(ze(e).attr("src").split(",")[1]),i=[],n=0;n<t.length;n++)i.push(t.charCodeAt(n));I([new Blob([new Uint8Array(i)],{type:"image/jpeg"})],Re)}function ie(){d.opts.imagePaste?d.$el.find("img[data-fr-image-pasted]").each(function(e,i){if(d.opts.imagePasteProcess){var t=d.opts.imageDefaultWidth;t&&"auto"!=t&&(t+=d.opts.imageResizeWithPercent?"%":"px"),ze(i).css("width",t).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((d.opts.imageDefaultDisplay?"fr-di"+d.opts.imageDefaultDisplay[0]:"")+(d.opts.imageDefaultAlign&&"center"!=d.opts.imageDefaultAlign?" fr-fi"+d.opts.imageDefaultAlign[0]:""))}if(0===i.src.indexOf("data:"))te(i);else if(0===i.src.indexOf("blob:")||0===i.src.indexOf("http")&&d.opts.imageUploadRemoteUrls&&d.opts.imageCORSProxy){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var e=d.o_doc.createElement("CANVAS"),t=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,t.drawImage(this,0,0),i.src=e.toDataURL("image/png"),te(i)},n.src=(0===i.src.indexOf("blob:")?"":d.opts.imageCORSProxy+"/")+i.src}else 0!==i.src.indexOf("http")||0===i.src.indexOf("https://mail.google.com/mail")?(d.selection.save(),ze(i).remove(),d.selection.restore()):ze(i).removeAttr("data-fr-image-pasted")}):d.$el.find("img[data-fr-image-pasted]").remove()}function ne(e){var t=e.target.result,i=d.opts.imageDefaultWidth;i&&"auto"!=i&&(i+=d.opts.imageResizeWithPercent?"%":"px"),d.html.insert('<img data-fr-image-pasted="true" class="'+(d.opts.imageDefaultDisplay?"fr-di"+d.opts.imageDefaultDisplay[0]:"")+(d.opts.imageDefaultAlign&&"center"!=d.opts.imageDefaultAlign?" fr-fi"+d.opts.imageDefaultAlign[0]:"")+'" src="'+t+'"'+(i?' style="width: '+i+';"':"")+">"),d.events.trigger("paste.after")}function re(e){var t=new FileReader;t.onload=ne,t.readAsDataURL(e)}function se(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var i=0;i<e.clipboardData.items.length&&!(t=e.clipboardData.items[i].getAsFile());i++);if(t)return re(t),!1}}function oe(e){return e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function ae(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;if(e&&"touchend"==e.type&&Ue)return!0;if(e&&d.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;for(var t=0;t<ze.FE.INSTANCES.length;t++)ze.FE.INSTANCES[t]!=d&&ze.FE.INSTANCES[t].events.trigger("image.hideResizer");d.toolbar.disable(),e&&(e.stopPropagation(),e.preventDefault()),d.helpers.isMobile()&&(d.events.disableBlur(),d.$el.blur(),d.events.enableBlur()),d.opts.iframe&&d.size.syncIframe(),Re=ze(this),d.browser.msie||_e(),l(),r(),d.browser.msie||d.selection.clear(),d.helpers.isIOS()&&(d.events.disableBlur(),d.$el.blur()),d.button.bulkRefresh(),d.events.trigger("video.hideResizer")}function le(e){Re&&(fe()||!0===e)&&(d.toolbar.enable(),ke.removeClass("fr-active"),d.popups.hide("image.edit"),Re=null,de())}function ce(){Ke=!0}function de(){Ke=!1}function fe(){return Ke}function ue(e,t,i){!d.opts.htmlUntouched&&d.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),i&&e.addClass("fr-fi"+i[0]),t&&e.addClass("fr-di"+t[0])):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:d.opts.imageDefaultMargin}),"center"==i?e.css({"float":"none",marginBottom:"",marginTop:"",
maxWidth:"calc(100% - "+2*d.opts.imageDefaultMargin+"px)"}):"left"==i?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - "+d.opts.imageDefaultMargin+"px)"}):e.css({"float":"right",marginRight:0,maxWidth:"calc(100% - "+d.opts.imageDefaultMargin+"px)"})):"block"==t&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:d.opts.imageDefaultMargin+"px auto"}),"left"==i?e.css({marginLeft:0}):"right"==i&&e.css({marginRight:0}))}function pe(e){var t=we();t.removeClass("fr-fir fr-fil"),!d.opts.htmlUntouched&&d.opts.useClasses?"left"==e?t.addClass("fr-fil"):"right"==e&&t.addClass("fr-fir"):ue(t,ge(),e),_e(),l(),r(),d.selection.clear()}function he(e){if(void 0===e&&(e=we()),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function ge(e){void 0===e&&(e=we());var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function me(e){Re&&e.find("> *:first").replaceWith(d.icon.create("image-align-"+he()))}function ve(e,t){Re&&t.find('.fr-command[data-param1="'+he()+'"]').addClass("fr-active").attr("aria-selected",!0)}function be(e){var t=we();t.removeClass("fr-dii fr-dib"),!d.opts.htmlUntouched&&d.opts.useClasses?"inline"==e?t.addClass("fr-dii"):"block"==e&&t.addClass("fr-dib"):ue(t,e,he()),_e(),l(),r(),d.selection.clear()}function Ee(e,t){Re&&t.find('.fr-command[data-param1="'+ge()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ye(){var e=d.popups.get("image.insert");e||(e=$()),d.popups.isVisible("image.insert")||(b(),d.popups.refresh("image.insert"),d.popups.setContainer("image.insert",d.$sc));var t=we();Se()&&(t=t.find(".fr-img-wrap"));var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();d.popups.show("image.insert",i,n,t.outerHeight(!0))}function _e(){if(Re){d.events.disableBlur(),d.selection.clear();var e=d.doc.createRange();e.selectNode(Re.get(0)),d.selection.get().addRange(e),d.events.enableBlur()}}function Te(){Re?(d.events.disableBlur(),ze(".fr-popup input:focus").blur(),_(Re)):(d.events.disableBlur(),d.selection.restore(),d.events.enableBlur(),d.popups.hide("image.insert"),d.toolbar.showInline())}function Ce(){return Re}function we(){return Se()?Re.parents(".fr-img-caption:first"):Re}function Ae(e,t,i){if(void 0===t&&(t=d.opts.imageStyles),void 0===i&&(i=d.opts.imageMultipleStyles),!Re)return!1;if(!i){var n=Object.keys(t);n.splice(n.indexOf(e),1),Re.removeClass(n.join(" "))}"object"==typeof t[e]?(Re.removeAttr("style"),Re.css(t[e].style)):Re.toggleClass(e),_(Re)}function Se(){return!!Re&&0<Re.parents(".fr-img-caption").length}function xe(){var e;Re&&!Se()?((e=Re).parent().is("a")&&(e=Re.parent()),e.wrap('<span contenteditable="false" class="fr-img-caption '+Re.attr("class")+'" draggable="false"></span>'),e.wrap('<span class="fr-img-wrap"></span>'),e.after('<span class="fr-inner" contenteditable="true">'+ze.FE.START_MARKER+"Image caption"+ze.FE.END_MARKER+"</span>"),Re.removeAttr("class"),Re.parent().css("width",Re.width()),le(!0),d.selection.restore()):(e=we(),Re.insertAfter(e),Re.attr("class",e.attr("class").replace("fr-img-caption","")),e.remove(),_(Re))}var Re,ke,Le,De,Ie=!1,Ne=1,Oe=2,Fe=3,Me=4,$e=5,Pe=6,Be=8,He={};He[Ne]="Image cannot be loaded from the passed link.",He[Oe]="No link in upload response.",He[Fe]="Error during file upload.",He[Me]="Parsing response failed.",He[$e]="File is too large.",He[Pe]="Image file type is invalid.",He[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",He[Be]="Image file is corrupted.";var We,Ue,Ke=!1;return{_init:ee,showInsertPopup:i,showLayer:j,refreshUploadButton:G,refreshByURLButton:q,upload:I,insertByURL:e,align:pe,refreshAlign:me,refreshAlignOnShow:ve,display:be,refreshDisplayOnShow:Ee,replace:ye,back:Te,get:Ce,getEl:we,insert:C,showProgressBar:v,remove:Q,hideProgressBar:b,applyStyle:Ae,showAltPopup:B,showSizePopup:K,setAlt:W,setSize:Y,toggleCaption:xe,hasCaption:Se,exitEdit:le,edit:_}},ze.FE.DefineIcon("insertImage",{NAME:"image"}),ze.FE.RegisterShortcut(ze.FE.KEYCODE.P,"insertImage",null,"P"),ze.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),ze.FE.DefineIcon("imageUpload",{NAME:"upload"}),ze.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),ze.FE.DefineIcon("imageByURL",{NAME:"link"}),ze.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),ze.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),ze.FE.DefineIcon("imageDisplay",{NAME:"star"}),ze.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),ze.FE.DefineIcon("image-align",{NAME:"align-left"}),ze.FE.DefineIcon("image-align-left",{NAME:"align-left"}),ze.FE.DefineIcon("image-align-right",{NAME:"align-right"}),ze.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),ze.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),ze.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.imageAlign.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.icon.create("image-align-"+i)+'<span class="fr-sr-only">'+this.language.translate(t[i])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),ze.FE.DefineIcon("imageReplace",{NAME:"exchange"}),ze.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),ze.FE.DefineIcon("imageRemove",{NAME:"trash"}),ze.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),ze.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),ze.FE.DefineIcon("imageStyle",{NAME:"magic"}),ze.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];"object"==typeof n&&(n=n.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+i+'">'+this.language.translate(n)+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(e,t){var i=this.image.get();i&&t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=i.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),ze.FE.DefineIcon("imageAlt",{NAME:"info"}),ze.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),ze.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),ze.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),ze.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),ze.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),ze.FE.DefineIcon("imageCaption",{NAME:"commenting"}),ze.FE.RegisterCommand("imageCaption",{undo:!0,focus:!1,title:"Image Caption",refreshAfterCallback:!0,callback:function(){this.image.toggleCaption()},refresh:function(e){this.image.get()&&e.toggleClass("fr-active",this.image.hasCaption())}}),ze.extend(ze.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:"",imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),ze.FE.PLUGINS.imageManager=function(a){function i(){if(!w){var e='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+a.sid+'" title="'+a.language.translate("Tags")+'"></i><h4 data-text="true">'+a.language.translate("Manage Images")+"</h4></div>";e+='<div class="fr-modal-tags" id="fr-modal-tags"></div>';var t='<img class="fr-preloader" id="fr-preloader" alt="'+a.language.translate("Loading")+'.." src="'+a.opts.imageManagerPreloader+'" style="display: none;">';t+='<div class="fr-image-list" id="fr-image-list"></div>';var i=a.modals.create(F,e,t);w=i.$modal,A=i.$head,S=i.$body}w.data("current-image",a.image.get()),a.modals.show(F),x||T(),s()}function e(){a.modals.hide(F)}function n(){var e=ze(window).outerWidth();return e<768?2:e<1200?3:4}function r(){R.empty();for(var e=0;e<O;e++)R.append('<div class="fr-list-column"></div>')}function s(){x.show(),R.find(".fr-list-column").empty(),a.opts.imageManagerLoadURL?ze.ajax({url:a.opts.imageManagerLoadURL,method:a.opts.imageManagerLoadMethod,data:a.opts.imageManagerLoadParams,dataType:"json",crossDomain:a.opts.requestWithCORS,xhrFields:{withCredentials:a.opts.requestWithCredentials},headers:a.opts.requestHeaders}).done(function(e,t,i){a.events.trigger("imageManager.imagesLoaded",[e]),o(e,i.response),x.hide()}).fail(function(){var e=this.xhr();v($,e.response||e.responseText)}):v(P)}function o(e,t){try{R.find(".fr-list-column").empty(),N=I=D=0,L=e,l()}catch(i){v(B,t)}}function l(){if(I<L.length&&(R.outerHeight()<=S.outerHeight()+a.opts.imageManagerScrollOffset||S.scrollTop()+a.opts.imageManagerScrollOffset>R.outerHeight()-S.outerHeight())){D++;for(var e=a.opts.imageManagerPageSize*(D-1);e<Math.min(L.length,a.opts.imageManagerPageSize*D);e++)t(L[e])}}function t(r){var s=new Image,o=ze('<div class="fr-image-container fr-empty fr-image-'+N+++'" data-loading="'+a.language.translate("Loading")+'.." data-deleting="'+a.language.translate("Deleting")+'..">');u(!1),s.onload=function(){o.height(Math.floor(o.width()/s.width*s.height));var i=ze("<img/>");if(r.thumb)i.attr("src",r.thumb);else{if(v(H,r),!r.url)return v(W,r),!1;i.attr("src",r.url)}if(r.url&&i.attr("data-url",r.url),r.tag)if(A.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),A.find(".fr-modal-tags").show(),0<=r.tag.indexOf(",")){for(var e=r.tag.split(","),t=0;t<e.length;t++)e[t]=e[t].trim(),0===k.find('a[title="'+e[t]+'"]').length&&k.append('<a role="button" title="'+e[t]+'">'+e[t]+"</a>");i.attr("data-tag",e.join())}else 0===k.find('a[title="'+r.tag.trim()+'"]').length&&k.append('<a role="button" title="'+r.tag.trim()+'">'+r.tag.trim()+"</a>"),i.attr("data-tag",r.tag.trim());for(var n in r.name&&i.attr("alt",r.name),r)r.hasOwnProperty(n)&&"thumb"!=n&&"url"!=n&&"tag"!=n&&i.attr("data-"+n,r[n]);o.append(i).append(ze(a.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",a.language.translate("Delete"))).append(ze(a.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",a.language.translate("Insert"))),k.find(".fr-selected-tag").each(function(e,t){_(i,t.text)||o.hide()}),i.on("load",function(){o.removeClass("fr-empty"),o.height("auto"),I++,f(d(parseInt(i.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1)),u(!1),I%a.opts.imageManagerPageSize==0&&l()}),a.events.trigger("imageManager.imageLoaded",[i])},s.onerror=function(){I++,o.remove(),f(d(parseInt(o.attr("class").match(/fr-image-(\d+)/)[1],10)+1)),v(M,r),I%a.opts.imageManagerPageSize==0&&l()},s.src=r.thumb||r.url,c().append(o)}function c(){var n,r;return R.find(".fr-list-column").each(function(e,t){var i=ze(t);0===e?(r=i.outerHeight(),n=i):i.outerHeight()<r&&(r=i.outerHeight(),n=i)}),n}function d(e){void 0===e&&(e=0);for(var t=[],i=N-1;e<=i;i--){var n=R.find(".fr-image-"+i);n.length&&(t.push(n),ze('<div id="fr-image-hidden-container">').append(n),R.find(".fr-image-"+i).remove())}return t}function f(e){for(var t=e.length-1;0<=t;t--)c().append(e[t])}function u(e){if(void 0===e&&(e=!0),!w.is(":visible"))return!0;var t=n();if(t!=O){O=t;var i=d();r(),f(i)}a.modals.resize(F),e&&l()}function p(e){var t={},i=e.data();for(var n in i)i.hasOwnProperty(n)&&"url"!=n&&"tag"!=n&&(t[n]=i[n]);return t}function h(e){var t=ze(e.currentTarget).siblings("img"),i=w.data("instance")||a,n=w.data("current-image");if(a.modals.hide(F),i.image.showProgressBar(),n)n.data("fr-old-src",n.attr("src")),n.trigger("click");else{i.events.focus(!0),i.selection.restore();var r=i.position.getBoundingRect(),s=r.left+r.width/2+ze(a.doc).scrollLeft(),o=r.top+r.height+ze(a.doc).scrollTop();i.popups.setContainer("image.insert",a.$sc),i.popups.show("image.insert",s,o)}i.image.insert(t.data("url"),!1,p(t),n)}function g(){w.find("#fr-modal-tags > a").each(function(){0===w.find('#fr-image-list [data-tag*="'+ze(this).text()+'"]').length&&ze(this).removeClass("fr-selected-tag").hide()}),E()}function m(e){var i=ze(e.currentTarget).siblings("img"),t=a.language.translate("Are you sure? Image will be deleted.");confirm(t)&&(a.opts.imageManagerDeleteURL?!1!==a.events.trigger("imageManager.beforeDeleteImage",[i])&&(i.parent().addClass("fr-image-deleting"),ze.ajax({method:a.opts.imageManagerDeleteMethod,url:a.opts.imageManagerDeleteURL,data:ze.extend(ze.extend({src:i.attr("src")},p(i)),a.opts.imageManagerDeleteParams),crossDomain:a.opts.requestWithCORS,xhrFields:{withCredentials:a.opts.requestWithCredentials},headers:a.opts.requestHeaders}).done(function(e){a.events.trigger("imageManager.imageDeleted",[e]);var t=d(parseInt(i.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);i.parent().remove(),f(t),g(),u(!0)}).fail(function(){var e=this.xhr();v(U,e.response||e.responseText)})):v(K))}function v(e,t){10<=e&&e<20?x.hide():20<=e&&e<30&&ze(".fr-image-deleting").removeClass("fr-image-deleting"),a.events.trigger("imageManager.error",[{code:e,message:z[e]},t])}function b(){var e=A.find(".fr-modal-head-line").outerHeight(),t=k.outerHeight();A.toggleClass("fr-show-tags"),A.hasClass("fr-show-tags")?(A.css("height",e+t),k.find("a").css("opacity",1)):(A.css("height",e),k.find("a").css("opacity",0))}function E(){var e=k.find(".fr-selected-tag");0<e.length?(R.find("img").parent().show(),e.each(function(e,n){R.find("img").each(function(e,t){var i=ze(t);_(i,n.text)||i.parent().hide()})})):R.find("img").parent().show(),f(d()),l()}function y(e){e.preventDefault();var t=ze(e.currentTarget);t.toggleClass("fr-selected-tag"),a.opts.imageManagerToggleTags&&t.siblings("a").removeClass("fr-selected-tag"),E()}function _(e,t){for(var i=(e.attr("data-tag")||"").split(","),n=0;n<i.length;n++)if(i[n]==t)return!0;return!1}function T(){x=w.find("#fr-preloader"),R=w.find("#fr-image-list"),k=w.find("#fr-modal-tags"),O=n(),r(),A.css("height",A.find(".fr-modal-head-line").outerHeight()),a.events.$on(ze(a.o_win),"resize",function(){u(!!L)}),a.helpers.isMobile()&&(a.events.bindClick(R,"div.fr-image-container",function(e){w.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),ze(e.currentTarget).addClass("fr-mobile-selected")}),w.on(a._mousedown,function(){w.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),a.events.bindClick(R,".fr-insert-img",h),a.events.bindClick(R,".fr-delete-img",m),w.on(a._mousedown+" "+a._mouseup,function(e){e.stopPropagation()}),w.on(a._mousedown,"*",function(){a.events.disableBlur()}),S.on("scroll",l),a.events.bindClick(w,"i#fr-modal-more-"+a.sid,b),a.events.bindClick(k,"a",y)}function C(){if(!a.$wp&&"IMG"!=a.el.tagName)return!1}var w,A,S,x,R,k,L,D,I,N,O,F="image_manager",M=10,$=11,P=12,B=13,H=14,W=15,U=21,K=22,z={};return z[M]="Image cannot be loaded from the passed link.",z[$]="Error during load images request.",z[P]="Missing imageManagerLoadURL option.",z[B]="Parsing load response failed.",z[H]="Missing image thumb.",z[W]="Missing image URL.",z[U]="Error during delete image request.",z[K]="Missing imageManagerDeleteURL option.",{require:["image"],_init:C,show:i,hide:e}},!ze.FE.PLUGINS.image)throw new Error("Image manager plugin requires image plugin.");ze.FE.DEFAULTS.imageInsertButtons.push("imageManager"),ze.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),ze.FE.DefineIcon("imageManager",{NAME:"folder"}),ze.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),ze.FE.DefineIcon("imageManagerDelete",{NAME:"trash"}),ze.extend(ze.FE.DEFAULTS,{inlineStyles:{"Big Red":"font-size: 20px; color: red;","Small Blue":"font-size: 14px; color: blue;"}}),ze.FE.PLUGINS.inlineStyle=function(t){function e(e){""!==t.selection.text()?t.html.insert(ze.FE.START_MARKER+'<span style="'+e+'">'+t.selection.text()+"</span>"+ze.FE.END_MARKER):t.html.insert('<span style="'+e+'">'+ze.FE.INVISIBLE_SPACE+ze.FE.MARKERS+"</span>")}return{apply:e}},ze.FE.RegisterCommand("inlineStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.inlineStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><span style="'+t[i]+'" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="inlineStyle" data-param1="'+t[i]+'" title="'+this.language.translate(i)+'">'+this.language.translate(i)+"</a></span></li>");return e+"</ul>"},title:"Inline Style",callback:function(e,t){this.inlineStyle.apply(t)},plugin:"inlineStyle"}),ze.FE.DefineIcon("inlineStyle",{NAME:"paint-brush"}),ze.extend(ze.FE.DEFAULTS,{lineBreakerTags:["table","hr","form","dl","span.fr-video",".fr-embedly",".fr-img-caption"],lineBreakerOffset:15,lineBreakerHorizontalOffset:10}),ze.FE.PLUGINS.lineBreaker=function(u){function a(e,t){var i,n,r,s,o,a,l,c;if(null==e)o=(s=t.parent()).offset().top,i=(l=t.offset().top)-Math.min((l-o)/2,u.opts.lineBreakerOffset),r=s.outerWidth(),n=s.offset().left;else if(null==t)a=(s=e.parent()).offset().top+s.outerHeight(),i=(c=e.offset().top+e.outerHeight())+Math.min((a-c)/2,u.opts.lineBreakerOffset),r=s.outerWidth(),n=s.offset().left;else{s=e.parent();var d=e.offset().top+e.height(),f=t.offset().top;if(f<d)return!1;i=(d+f)/2,r=s.outerWidth(),n=s.offset().left}u.opts.iframe&&(n+=u.$iframe.offset().left-u.helpers.scrollLeft(),i+=u.$iframe.offset().top-u.helpers.scrollTop()),u.$box.append(m),m.css("top",i-u.win.pageYOffset),m.css("left",n-u.win.pageXOffset),m.css("width",r),m.data("tag1",e),m.data("tag2",t),m.addClass("fr-visible").data("instance",u)}function r(e,t){var i,n,r=e.offset().top,s=e.offset().top+e.outerHeight();if(Math.abs(s-t)<=u.opts.lineBreakerOffset||Math.abs(t-r)<=u.opts.lineBreakerOffset)if(Math.abs(s-t)<Math.abs(t-r)){for(var o=(n=e.get(0)).nextSibling;o&&o.nodeType==Node.TEXT_NODE&&0===o.textContent.length;)o=o.nextSibling;if(!o)return a(e,null),!0;if(i=l(o))return a(e,i),!0}else{if(!(n=e.get(0)).previousSibling)return a(null,e),!0;if(i=l(n.previousSibling))return a(i,e),!0}m.removeClass("fr-visible").removeData("instance")}function l(e){if(e){var t=ze(e);if(0===u.$el.find(t).length)return null;if(e.nodeType!=Node.TEXT_NODE&&t.is(u.opts.lineBreakerTags.join(",")))return t;if(0<t.parents(u.opts.lineBreakerTags.join(",")).length)return e=t.parents(u.opts.lineBreakerTags.join(",")).get(0),0!==u.$el.find(e).length&&ze(e).is(u.opts.lineBreakerTags.join(","))?ze(e):null}return null}function n(e){if(void 0!==e.inFroalaWrapper)return e.inFroalaWrapper;for(var t=e;e.parentNode&&e.parentNode!==u.$wp.get(0);)e=e.parentNode;return t.inFroalaWrapper=e.parentNode==u.$wp.get(0),t.inFroalaWrapper}function s(e,t){var i=u.doc.elementFromPoint(e,t);return i&&!i.closest(".fr-line-breaker")&&!u.node.isElement(i)&&i!=u.$wp.get(0)&&n(i)?i:null}function o(e,t,i){for(var n=i,r=null;n<=u.opts.lineBreakerOffset&&!r;)(r=s(e,t-n))||(r=s(e,t+n)),n+=i;return r}function c(e,t,i){for(var n=null,r=100;!n&&e>u.$box.offset().left&&e<u.$box.offset().left+u.$box.outerWidth()&&0<r;)(n=s(e,t))||(n=o(e,t,5)),"left"==i?e-=u.opts.lineBreakerHorizontalOffset:e+=u.opts.lineBreakerHorizontalOffset,r-=u.opts.lineBreakerHorizontalOffset;return n}function t(e){var t=b=null,i=null,n=u.doc.elementFromPoint(e.pageX-u.win.pageXOffset,e.pageY-u.win.pageYOffset);n&&("HTML"==n.tagName||"BODY"==n.tagName||u.node.isElement(n)||0<=(n.getAttribute("class")||"").indexOf("fr-line-breaker"))?((i=o(e.pageX-u.win.pageXOffset,e.pageY-u.win.pageYOffset,1))||(i=c(e.pageX-u.win.pageXOffset-u.opts.lineBreakerHorizontalOffset,e.pageY-u.win.pageYOffset,"left")),i||(i=c(e.pageX-u.win.pageXOffset+u.opts.lineBreakerHorizontalOffset,e.pageY-u.win.pageYOffset,"right")),t=l(i)):t=l(n),t?r(t,e.pageY):u.core.sameInstance(m)&&m.removeClass("fr-visible").removeData("instance")}function e(e){return!(m.hasClass("fr-visible")&&!u.core.sameInstance(m))&&(u.popups.areVisible()||u.el.querySelector(".fr-selected-cell")?(m.removeClass("fr-visible"),!0):void(!1!==v||u.edit.isDisabled()||(b&&clearTimeout(b),b=setTimeout(t,30,e))))}function i(){b&&clearTimeout(b),m.hasClass("fr-visible")&&m.removeClass("fr-visible").removeData("instance")}function d(){v=!0,i()}function f(){v=!1}function p(e){if(!u.core.sameInstance(m))return!0;e.preventDefault(),m.removeClass("fr-visible").removeData("instance");var t=m.data("tag1"),i=m.data("tag2"),n=u.html.defaultTag();null==t?n&&"TD"!=i.parent().get(0).tagName&&0===i.parents(n).length?i.before("<"+n+">"+ze.FE.MARKERS+"<br></"+n+">"):i.before(ze.FE.MARKERS+"<br>"):n&&"TD"!=t.parent().get(0).tagName&&0===t.parents(n).length?t.after("<"+n+">"+ze.FE.MARKERS+"<br></"+n+">"):t.after(ze.FE.MARKERS+"<br>"),u.selection.restore()}function h(){u.shared.$line_breaker||(u.shared.$line_breaker=ze('<div class="fr-line-breaker"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+u.language.translate("Break")+'"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><rect x="21" y="11" width="2" height="8"/><rect x="14" y="17" width="7" height="2"/><path d="M14.000,14.000 L14.000,22.013 L9.000,18.031 L14.000,14.000 Z"/></svg></a></div>')),m=u.shared.$line_breaker,u.events.on("shared.destroy",function(){m.html("").removeData().remove(),m=null},!0),u.events.on("destroy",function(){m.removeData("instance").removeClass("fr-visible").appendTo("body:first"),clearTimeout(b)},!0),u.events.$on(m,"mousemove",function(e){e.stopPropagation()},!0),u.events.$on(m,"mousedown","a",function(e){e.stopPropagation()},!0),u.events.$on(m,"click","a",p,!0)}function g(){if(!u.$wp)return!1;h(),v=!1,u.events.$on(u.$win,"mousemove",e),u.events.$on(ze(u.win),"scroll",i),u.events.on("popups.show.table.edit",i),u.events.on("commands.after",i),u.events.$on(ze(u.win),"mousedown",d),u.events.$on(ze(u.win),"mouseup",f)}var m,v,b;return{_init:g}},ze.extend(ze.FE.POPUP_TEMPLATES,{"link.edit":"[_BUTTONS_]","link.insert":"[_BUTTONS_][_INPUT_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{linkEditButtons:["linkOpen","linkStyle","linkEdit","linkRemove"],linkInsertButtons:["linkBack","|","linkList"],linkAttributes:{},linkAutoPrefix:"http://",linkStyles:{"fr-green":"Green","fr-strong":"Thick"},linkMultipleStyles:!0,linkConvertEmailAddress:!0,linkAlwaysBlank:!1,linkAlwaysNoFollow:!1,linkList:[{text:"Froala",href:"https://froala.com",target:"_blank"},{text:"Google",href:"https://google.com",target:"_blank"},{displayText:"Facebook",href:"https://facebook.com"}],linkText:!0}),ze.FE.PLUGINS.link=function(f){function u(){var e=f.image?f.image.get():null;if(!e&&f.$wp){var t=f.selection.ranges(0).commonAncestorContainer;if(t&&(t.contains&&t.contains(f.el)||!f.el.contains(t)||f.el==t)&&(t=null),t&&"A"===t.tagName)return t;var i=f.selection.element(),n=f.selection.endElement();return"A"==i.tagName||f.node.isElement(i)||(i=ze(i).parentsUntil(f.$el,"a:first").get(0)),"A"==n.tagName||f.node.isElement(n)||(n=ze(n).parentsUntil(f.$el,"a:first").get(0)),n&&(n.contains&&n.contains(f.el)||!f.el.contains(n)||f.el==n)&&(n=null),i&&(i.contains&&i.contains(f.el)||!f.el.contains(i)||f.el==i)&&(i=null),n&&n==i&&"A"==n.tagName?i:null}return"A"==f.el.tagName?f.el:e&&e.get(0).parentNode&&"A"==e.get(0).parentNode.tagName?e.get(0).parentNode:void 0}function p(){var e,t,i,n,r=f.image?f.image.get():null,s=[];if(r)"A"==r.get(0).parentNode.tagName&&s.push(r.get(0).parentNode);else if(f.win.getSelection){var o=f.win.getSelection();if(o.getRangeAt&&o.rangeCount){n=f.doc.createRange();for(var a=0;a<o.rangeCount;++a)if((t=(e=o.getRangeAt(a)).commonAncestorContainer)&&1!=t.nodeType&&(t=t.parentNode),t&&"a"==t.nodeName.toLowerCase())s.push(t);else{i=t.getElementsByTagName("a");for(var l=0;l<i.length;++l)n.selectNodeContents(i[l]),n.compareBoundaryPoints(e.END_TO_START,e)<1&&-1<n.compareBoundaryPoints(e.START_TO_END,e)&&s.push(i[l])}}}else if(f.doc.selection&&"Control"!=f.doc.selection.type)if("a"==(t=(e=f.doc.selection.createRange()).parentElement()).nodeName.toLowerCase())s.push(t);else{i=t.getElementsByTagName("a"),n=f.doc.body.createTextRange();for(var c=0;c<i.length;++c)n.moveToElementText(i[c]),-1<n.compareEndPoints("StartToEnd",e)&&n.compareEndPoints("EndToStart",e)<1&&s.push(i[c])}return s}function h(r){if(f.core.hasFocus()){if(o(),r&&"keyup"===r.type&&(r.altKey||r.which==ze.FE.KEYCODE.ALT))return!0;setTimeout(function(){if(!r||r&&(1==r.which||"mouseup"!=r.type)){var e=u(),t=f.image?f.image.get():null;if(e&&!t){if(f.image){var i=f.node.contents(e);if(1==i.length&&"IMG"==i[0].tagName){var n=f.selection.ranges(0);return 0===n.startOffset&&0===n.endOffset?ze(e).before(ze.FE.MARKERS):ze(e).after(ze.FE.MARKERS),f.selection.restore(),!1}}r&&r.stopPropagation(),s(e)}}},f.helpers.isIOS()?100:0)}}function s(e){var t=f.popups.get("link.edit");t||(t=a());var i=ze(e);f.popups.isVisible("link.edit")||f.popups.refresh("link.edit"),f.popups.setContainer("link.edit",f.$sc);var n=i.offset().left+ze(e).outerWidth()/2,r=i.offset().top+i.outerHeight();f.popups.show("link.edit",n,r,i.outerHeight())}function o(){f.popups.hide("link.edit")}function a(){var e="";1<f.opts.linkEditButtons.length&&("A"==f.el.tagName&&0<=f.opts.linkEditButtons.indexOf("linkRemove")&&f.opts.linkEditButtons.splice(f.opts.linkEditButtons.indexOf("linkRemove"),1),e='<div class="fr-buttons">'+f.button.buildList(f.opts.linkEditButtons)+"</div>");var t={buttons:e},i=f.popups.create("link.edit",t);return f.$wp&&f.events.$on(f.$wp,"scroll.link-edit",function(){u()&&f.popups.isVisible("link.edit")&&s(u())}),i}function c(){}function d(){var e=f.popups.get("link.insert"),t=u();if(t){var i,n,r=ze(t),s=e.find('input.fr-link-attr[type="text"]'),o=e.find('input.fr-link-attr[type="checkbox"]');for(i=0;i<s.length;i++)(n=ze(s[i])).val(r.attr(n.attr("name")||""));for(o.prop("checked",!1),i=0;i<o.length;i++)n=ze(o[i]),r.attr(n.attr("name"))==n.data("checked")&&n.prop("checked",!0);e.find('input.fr-link-attr[type="text"][name="text"]').val(r.text())}else e.find('input.fr-link-attr[type="text"]').val(""),e.find('input.fr-link-attr[type="checkbox"]').prop("checked",!1),e.find('input.fr-link-attr[type="text"][name="text"]').val(f.selection.text());e.find("input.fr-link-attr").trigger("change"),f.image&&f.image.get()?e.find('.fr-link-attr[name="text"]').parent().hide():e.find('.fr-link-attr[name="text"]').parent().show()}function e(){var e=f.$tb.find('.fr-command[data-cmd="insertLink"]'),t=f.popups.get("link.insert");if(t||(t=l()),!t.hasClass("fr-active"))if(f.popups.refresh("link.insert"),f.popups.setContainer("link.insert",f.$tb||f.$sc),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,n=e.offset().top+(f.opts.toolbarBottom?10:e.outerHeight()-10);f.popups.show("link.insert",i,n,e.outerHeight())}else f.position.forSelection(t),f.popups.show("link.insert")}function l(e){if(e)return f.popups.onRefresh("link.insert",d),f.popups.onHide("link.insert",c),!0;var t="";1<=f.opts.linkInsertButtons.length&&(t='<div class="fr-buttons">'+f.button.buildList(f.opts.linkInsertButtons)+"</div>");var i='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>',n="",r=0;for(var s in n='<div class="fr-link-insert-layer fr-layer fr-active" id="fr-link-insert-layer-'+f.id+'">',n+='<div class="fr-input-line"><input id="fr-link-insert-layer-url-'+f.id+'" name="href" type="text" class="fr-link-attr" placeholder="URL" tabIndex="'+ ++r+'"></div>',f.opts.linkText&&(n+='<div class="fr-input-line"><input id="fr-link-insert-layer-text-'+f.id+'" name="text" type="text" class="fr-link-attr" placeholder="'+f.language.translate("Text")+'" tabIndex="'+ ++r+'"></div>'),f.opts.linkAttributes)if(f.opts.linkAttributes.hasOwnProperty(s)){var o=f.opts.linkAttributes[s];n+='<div class="fr-input-line"><input name="'+s+'" type="text" class="fr-link-attr" placeholder="'+f.language.translate(o)+'" tabIndex="'+ ++r+'"></div>'}f.opts.linkAlwaysBlank||(n+='<div class="fr-checkbox-line"><span class="fr-checkbox"><input name="target" class="fr-link-attr" data-checked="_blank" type="checkbox" id="fr-link-target-'+f.id+'" tabIndex="'+ ++r+'"><span>'+i+'</span></span><label for="fr-link-target-'+f.id+'">'+f.language.translate("Open in new tab")+"</label></div>");var a={buttons:t,input_layer:n+='<div class="fr-action-buttons"><button class="fr-command fr-submit" role="button" data-cmd="linkInsert" href="#" tabIndex="'+ ++r+'" type="button">'+f.language.translate("Insert")+"</button></div></div>"},l=f.popups.create("link.insert",a);return f.$wp&&f.events.$on(f.$wp,"scroll.link-insert",function(){(f.image?f.image.get():null)&&f.popups.isVisible("link.insert")&&E(),u&&f.popups.isVisible("link.insert")&&v()}),l}function t(){var e=u(),t=f.image?f.image.get():null;if(!1===f.events.trigger("link.beforeRemove",[e]))return!1;t&&e?(t.unwrap(),f.image.edit(t)):e&&(f.selection.save(),ze(e).replaceWith(ze(e).html()),f.selection.restore(),o())}function i(){f.events.on("keyup",function(e){e.which!=ze.FE.KEYCODE.ESC&&h(e)}),f.events.on("window.mouseup",h),f.events.$on(f.$el,"click","a",function(e){f.edit.isDisabled()&&e.preventDefault()}),f.helpers.isMobile()&&f.events.$on(f.$doc,"selectionchange",h),l(!0),"A"==f.el.tagName&&f.$el.addClass("fr-view"),f.events.on("toolbar.esc",function(){if(f.popups.isVisible("link.edit"))return f.events.disableBlur(),f.events.focus(),!1},!0)}function n(e){var t,i,n=f.opts.linkList[e],r=f.popups.get("link.insert"),s=r.find('input.fr-link-attr[type="text"]'),o=r.find('input.fr-link-attr[type="checkbox"]');for(i=0;i<s.length;i++)n[(t=ze(s[i])).attr("name")]?t.val(n[t.attr("name")]):"text"!=t.attr("name")&&t.val("");for(i=0;i<o.length;i++)(t=ze(o[i])).prop("checked",t.data("checked")==n[t.attr("name")]);f.accessibility.focusPopup(r)}function r(){var e,t,i=f.popups.get("link.insert"),n=i.find('input.fr-link-attr[type="text"]'),r=i.find('input.fr-link-attr[type="checkbox"]'),s=n.filter('[name="href"]').val(),o=n.filter('[name="text"]').val(),a={};for(t=0;t<n.length;t++)e=ze(n[t]),["href","text"].indexOf(e.attr("name"))<0&&(a[e.attr("name")]=e.val())
;for(t=0;t<r.length;t++)(e=ze(r[t])).is(":checked")?a[e.attr("name")]=e.data("checked"):a[e.attr("name")]=e.data("unchecked")||null;var l=f.helpers.scrollTop();m(s,o,a),ze(f.o_win).scrollTop(l)}function g(){if(!f.selection.isCollapsed()){f.selection.save();for(var e=f.$el.find(".fr-marker").addClass("fr-unprocessed").toArray();e.length;){var t=ze(e.pop());t.removeClass("fr-unprocessed");var i=f.node.deepestParent(t.get(0));if(i){for(var n=t.get(0),r="",s="";n=n.parentNode,f.node.isBlock(n)||(r+=f.node.closeTagString(n),s=f.node.openTagString(n)+s),n!=i;);var o=f.node.openTagString(t.get(0))+t.html()+f.node.closeTagString(t.get(0));t.replaceWith('<span id="fr-break"></span>');var a=i.outerHTML;a=a.replace(/<span id="fr-break"><\/span>/g,r+o+s),i.outerHTML=a}e=f.$el.find(".fr-marker.fr-unprocessed").toArray()}f.html.cleanEmptyTags(),f.selection.restore()}}function m(e,t,i){if(void 0===i&&(i={}),!1===f.events.trigger("link.beforeInsert",[e,t,i]))return!1;var n=f.image?f.image.get():null;n||"A"==f.el.tagName?"A"==f.el.tagName&&f.$el.focus():(f.selection.restore(),f.popups.hide("link.insert"));var r=e;f.opts.linkConvertEmailAddress&&ze.FE.MAIL_REGEX.test(e)&&!/^mailto:.*/i.test(e)&&(e="mailto:"+e);var s=/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i;if(""===f.opts.linkAutoPrefix||new RegExp("^("+ze.FE.LinkProtocols.join("|")+"):.","i").test(e)||/^data:image.*/i.test(e)||/^(https?:|ftps?:|file:|)\/\//i.test(e)||s.test(e)||["/","{","[","#","("].indexOf((e||"")[0])<0&&(e=f.opts.linkAutoPrefix+e),e=f.helpers.sanitizeURL(e),f.opts.linkAlwaysBlank&&(i.target="_blank"),f.opts.linkAlwaysNoFollow&&(i.rel="nofollow"),"_blank"==i.target?i.rel?i.rel+=" noopener noreferrer":i.rel="noopener noreferrer":null==i.target&&(i.rel?i.rel=i.rel.replace(/noopener/,"").replace(/noreferrer/,""):i.rel=null),t=t||"",e===f.opts.linkAutoPrefix)return f.popups.get("link.insert").find('input[name="href"]').addClass("fr-error"),f.events.trigger("link.bad",[r]),!1;var o,a=u();if(a)(o=ze(a)).attr("href",e),0<t.length&&o.text()!=t&&!n&&o.text(t),n||o.prepend(ze.FE.START_MARKER).append(ze.FE.END_MARKER),o.attr(i),n||f.selection.restore();else{n?n.wrap('<a href="'+e+'"></a>'):(f.format.remove("a"),f.selection.isCollapsed()?(t=0===t.length?r:t,f.html.insert('<a href="'+e+'">'+ze.FE.START_MARKER+t+ze.FE.END_MARKER+"</a>"),f.selection.restore()):0<t.length&&t!=f.selection.text().replace(/\n/g,"")?(f.selection.remove(),f.html.insert('<a href="'+e+'">'+ze.FE.START_MARKER+t+ze.FE.END_MARKER+"</a>"),f.selection.restore()):(g(),f.format.apply("a",{href:e})));for(var l=p(),c=0;c<l.length;c++)(o=ze(l[c])).attr(i),o.removeAttr("_moz_dirty");1==l.length&&f.$wp&&!n&&(ze(l[0]).prepend(ze.FE.START_MARKER).append(ze.FE.END_MARKER),f.selection.restore())}if(n){var d=f.popups.get("link.insert");d&&d.find("input:focus").blur(),f.image.edit(n)}else h()}function v(){o();var e=u();if(e){var t=f.popups.get("link.insert");t||(t=l()),f.popups.isVisible("link.insert")||(f.popups.refresh("link.insert"),f.selection.save(),f.helpers.isMobile()&&(f.events.disableBlur(),f.$el.blur(),f.events.enableBlur())),f.popups.setContainer("link.insert",f.$sc);var i=(f.image?f.image.get():null)||ze(e),n=i.offset().left+i.outerWidth()/2,r=i.offset().top+i.outerHeight();f.popups.show("link.insert",n,r,i.outerHeight())}}function b(){f.image&&f.image.get()?f.image.back():(f.events.disableBlur(),f.selection.restore(),f.events.enableBlur(),u()&&f.$wp?(f.selection.restore(),o(),h()):"A"==f.el.tagName?(f.$el.focus(),h()):(f.popups.hide("link.insert"),f.toolbar.showInline()))}function E(){var e=f.image?f.image.getEl():null;if(e){var t=f.popups.get("link.insert");f.image.hasCaption()&&(e=e.find(".fr-img-wrap")),t||(t=l()),d(!0),f.popups.setContainer("link.insert",f.$sc);var i=e.offset().left+e.outerWidth(!0)/2,n=e.offset().top+e.outerHeight(!0);f.popups.show("link.insert",i,n,e.outerHeight())}}function y(e,t,i){void 0===i&&(i=f.opts.linkMultipleStyles),void 0===t&&(t=f.opts.linkStyles);var n=u();if(!n)return!1;if(!i){var r=Object.keys(t);r.splice(r.indexOf(e),1),ze(n).removeClass(r.join(" "))}ze(n).toggleClass(e),h()}return{_init:i,remove:t,showInsertPopup:e,usePredefined:n,insertCallback:r,insert:m,update:v,get:u,allSelected:p,back:b,imageLink:E,applyStyle:y}},ze.FE.DefineIcon("insertLink",{NAME:"link"}),ze.FE.RegisterShortcut(ze.FE.KEYCODE.K,"insertLink",null,"K"),ze.FE.RegisterCommand("insertLink",{title:"Insert Link",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("link.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("link.insert")):this.link.showInsertPopup()},plugin:"link"}),ze.FE.DefineIcon("linkOpen",{NAME:"external-link"}),ze.FE.RegisterCommand("linkOpen",{title:"Open Link",undo:!1,refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},callback:function(){var e=this.link.get();e&&this.o_win.open(e.href)},plugin:"link"}),ze.FE.DefineIcon("linkEdit",{NAME:"edit"}),ze.FE.RegisterCommand("linkEdit",{title:"Edit Link",undo:!1,refreshAfterCallback:!1,popup:!0,callback:function(){this.link.update()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),ze.FE.DefineIcon("linkRemove",{NAME:"unlink"}),ze.FE.RegisterCommand("linkRemove",{title:"Unlink",callback:function(){this.link.remove()},refresh:function(e){this.link.get()?e.removeClass("fr-hidden"):e.addClass("fr-hidden")},plugin:"link"}),ze.FE.DefineIcon("linkBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("linkBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.link.back()},refresh:function(e){var t=this.link.get()&&this.doc.hasFocus();this.image&&this.image.get()||t||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))},plugin:"link"}),ze.FE.DefineIcon("linkList",{NAME:"search"}),ze.FE.RegisterCommand("linkList",{title:"Choose Link",type:"dropdown",focus:!1,undo:!1,refreshAfterCallback:!1,html:function(){for(var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkList,i=0;i<t.length;i++)e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkList" data-param1="'+i+'">'+(t[i].displayText||t[i].text)+"</a></li>";return e+"</ul>"},callback:function(e,t){this.link.usePredefined(t)},plugin:"link"}),ze.FE.RegisterCommand("linkInsert",{focus:!1,refreshAfterCallback:!1,callback:function(){this.link.insertCallback()},refresh:function(e){this.link.get()?e.text(this.language.translate("Update")):e.text(this.language.translate("Insert"))},plugin:"link"}),ze.FE.DefineIcon("imageLink",{NAME:"link"}),ze.FE.RegisterCommand("imageLink",{title:"Insert Link",undo:!1,focus:!1,popup:!0,callback:function(){this.link.imageLink()},refresh:function(e){var t;this.link.get()?((t=e.prev()).hasClass("fr-separator")&&t.removeClass("fr-hidden"),e.addClass("fr-hidden")):((t=e.prev()).hasClass("fr-separator")&&t.addClass("fr-hidden"),e.removeClass("fr-hidden"))},plugin:"link"}),ze.FE.DefineIcon("linkStyle",{NAME:"magic"}),ze.FE.RegisterCommand("linkStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.linkStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="linkStyle" data-param1="'+i+'">'+this.language.translate(t[i])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.link.applyStyle(t)},refreshOnShow:function(e,t){var i=this.link.get();if(i){var n=ze(i);t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=n.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}},plugin:"link"}),ze.FE.PLUGINS.lists=function(f){function u(e){return'<span class="fr-open-'+e.toLowerCase()+'"></span>'}function p(e){return'<span class="fr-close-'+e.toLowerCase()+'"></span>'}function c(e,t){for(var i=[],n=0;n<e.length;n++){var r=e[n].parentNode;"LI"==e[n].tagName&&r.tagName!=t&&i.indexOf(r)<0&&i.push(r)}for(n=i.length-1;0<=n;n--){var s=ze(i[n]);s.replaceWith("<"+t.toLowerCase()+">"+s.html()+"</"+t.toLowerCase()+">")}}function n(e,t){c(e,t);var i,n=f.html.defaultTag(),r=null;e.length&&(i="rtl"==f.opts.direction||"rtl"==ze(e[0]).css("direction")?"margin-right":"margin-left");for(var s=0;s<e.length;s++)if("LI"!=e[s].tagName){var o=f.helpers.getPX(ze(e[s]).css(i))||0;(e[s].style.marginLeft=null)===r&&(r=o);var a=0<r?"<"+t+' style="'+i+": "+r+'px;">':"<"+t+">",l="</"+t+">";for(o-=r;0<o/f.opts.indentMargin;)a+="<"+t+">",l+=l,o-=f.opts.indentMargin;n&&e[s].tagName.toLowerCase()==n?ze(e[s]).replaceWith(a+"<li"+f.node.attributes(e[s])+">"+ze(e[s]).html()+"</li>"+l):ze(e[s]).wrap(a+"<li></li>"+l)}f.clean.lists()}function r(e){var t,i;for(t=e.length-1;0<=t;t--)for(i=t-1;0<=i;i--)if(ze(e[i]).find(e[t]).length||e[i]==e[t]){e.splice(t,1);break}var n=[];for(t=0;t<e.length;t++){var r=ze(e[t]),s=e[t].parentNode,o=r.attr("class");if(r.before(p(s.tagName)),"LI"==s.parentNode.tagName)r.before(p("LI")),r.after(u("LI"));else{var a="";o&&(a+=' class="'+o+'"');var l="rtl"==f.opts.direction||"rtl"==r.css("direction")?"margin-right":"margin-left";f.helpers.getPX(ze(s).css(l))&&(a+=' style="'+l+":"+f.helpers.getPX(ze(s).css(l))+'px;"'),a&&r.wrapInner("<"+f.html.defaultTag()+a+"></"+f.html.defaultTag()+">"),f.node.isEmpty(r.get(0),!0)||0!==r.find(f.html.blockTagsQuery()).length||r.append("<br>"),r.append(u("LI")),r.prepend(p("LI"))}r.after(u(s.tagName)),"LI"==s.parentNode.tagName&&(s=s.parentNode.parentNode),n.indexOf(s)<0&&n.push(s)}for(t=0;t<n.length;t++){var c=ze(n[t]),d=c.html();d=(d=d.replace(/<span class="fr-close-([a-z]*)"><\/span>/g,"</$1>")).replace(/<span class="fr-open-([a-z]*)"><\/span>/g,"<$1>"),c.replaceWith(f.node.openTagString(c.get(0))+d+f.node.closeTagString(c.get(0)))}f.$el.find("li:empty").remove(),f.$el.find("ul:empty, ol:empty").remove(),f.clean.lists(),f.html.wrap()}function s(e,t){for(var i=!0,n=0;n<e.length;n++){if("LI"!=e[n].tagName)return!1;e[n].parentNode.tagName!=t&&(i=!1)}return i}function e(e){f.selection.save(),f.html.wrap(!0,!0,!0,!0),f.selection.restore();for(var t=f.selection.blocks(),i=0;i<t.length;i++)"LI"!=t[i].tagName&&"LI"==t[i].parentNode.tagName&&(t[i]=t[i].parentNode);f.selection.save(),s(t,e)?r(t):n(t,e),f.html.unwrap(),f.selection.restore()}function t(e,t){var i=ze(f.selection.element());if(i.get(0)!=f.el){var n=i.get(0);(n="LI"!=n.tagName&&n.firstElementChild&&"LI"!=n.firstElementChild.tagName?i.parents("li").get(0):"LI"==n.tagName||n.firstElementChild?n.firstElementChild&&"LI"==n.firstElementChild.tagName?i.get(0).firstChild:i.get(0):i.parents("li").get(0))&&n.parentNode.tagName==t&&f.el.contains(n.parentNode)&&e.addClass("fr-active")}}function o(e){f.selection.save();for(var t=0;t<e.length;t++){var i=e[t].previousSibling;if(i){var n=ze(e[t]).find("> ul, > ol").last().get(0);if(n){for(var r=ze("<li>").prependTo(ze(n)),s=f.node.contents(e[t])[0];s&&!f.node.isList(s);){var o=s.nextSibling;r.append(s),s=o}ze(i).append(ze(n)),ze(e[t]).remove()}else{var a=ze(i).find("> ul, > ol").last().get(0);if(a)ze(a).append(ze(e[t]));else{var l=ze("<"+e[t].parentNode.tagName+">");ze(i).append(l),l.append(ze(e[t]))}}}}f.clean.lists(),f.selection.restore()}function a(e){f.selection.save(),r(e),f.selection.restore()}function i(e){if("indent"==e||"outdent"==e){for(var t=!1,i=f.selection.blocks(),n=[],r=0;r<i.length;r++)"LI"==i[r].tagName?(t=!0,n.push(i[r])):"LI"==i[r].parentNode.tagName&&(t=!0,n.push(i[r].parentNode));t&&("indent"==e?o(n):a(n))}}function l(){f.events.on("commands.after",i),f.events.on("keydown",function(e){if(e.which==ze.FE.KEYCODE.TAB){for(var t=f.selection.blocks(),i=[],n=0;n<t.length;n++)"LI"==t[n].tagName?i.push(t[n]):"LI"==t[n].parentNode.tagName&&i.push(t[n].parentNode);if(1<i.length||i.length&&(f.selection.info(i[0]).atStart||f.node.isEmpty(i[0])))return e.preventDefault(),e.stopPropagation(),e.shiftKey?a(i):o(i),!1}},!0)}return{_init:l,format:e,refresh:t}},ze.FE.RegisterCommand("formatUL",{title:"Unordered List",refresh:function(e){this.lists.refresh(e,"UL")},callback:function(){this.lists.format("UL")},plugin:"lists"}),ze.FE.RegisterCommand("formatOL",{title:"Ordered List",refresh:function(e){this.lists.refresh(e,"OL")},callback:function(){this.lists.format("OL")},plugin:"lists"}),ze.FE.DefineIcon("formatUL",{NAME:"list-ul"}),ze.FE.DefineIcon("formatOL",{NAME:"list-ol"}),ze.extend(ze.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),ze.FE.PLUGINS.paragraphFormat=function(o){function r(e,t){var i=o.html.defaultTag();if(t&&t.toLowerCase()!=i)if(0<e.find("ul, ol").length){var n=ze("<"+t+">");e.prepend(n);for(var r=o.node.contents(e.get(0))[0];r&&["UL","OL"].indexOf(r.tagName)<0;){var s=r.nextSibling;n.append(r),r=s}}else e.html("<"+t+">"+e.html()+"</"+t+">")}function s(e,t){var i=o.html.defaultTag();t||(t='div class="fr-temp-div" data-empty="true"'),t.toLowerCase()==i?e.replaceWith(e.html()):e.replaceWith(ze("<"+t+">").html(e.html()))}function a(e,t){var i=o.html.defaultTag();t||(t='div class="fr-temp-div"'+(o.node.isEmpty(e.get(0),!0)?' data-empty="true"':"")),t.toLowerCase()==i?(o.node.isEmpty(e.get(0),!0)||e.append("<br/>"),e.replaceWith(e.html())):e.replaceWith(ze("<"+t+">").html(e.html()))}function l(e,t){t||(t='div class="fr-temp-div"'+(o.node.isEmpty(e.get(0),!0)?' data-empty="true"':"")),e.replaceWith(ze("<"+t+" "+o.node.attributes(e.get(0))+">").html(e.html()).removeAttr("data-empty"))}function e(e){"N"==e&&(e=o.html.defaultTag()),o.selection.save(),o.html.wrap(!0,!0,!0,!0),o.selection.restore();var t=o.selection.blocks();o.selection.save(),o.$el.find("pre").attr("skip",!0);for(var i=0;i<t.length;i++)if(t[i].tagName!=e&&!o.node.isList(t[i])){var n=ze(t[i]);"LI"==t[i].tagName?r(n,e):"LI"==t[i].parentNode.tagName&&t[i]?s(n,e):0<=["TD","TH"].indexOf(t[i].parentNode.tagName)?a(n,e):l(n,e)}o.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){ze(this).prev().append("<br>"+ze(this).html()),ze(this).remove()}),o.$el.find("pre").removeAttr("skip"),o.html.unwrap(),o.selection.restore()}function t(e,t){var i=o.selection.blocks();if(i.length){var n=i[0],r="N",s=o.html.defaultTag();n.tagName.toLowerCase()!=s&&n!=o.el&&(r=n.tagName),t.find('.fr-command[data-param1="'+r+'"]').addClass("fr-active").attr("aria-selected",!0)}else t.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function i(e){if(o.opts.paragraphFormatSelection){var t=o.selection.blocks();if(t.length){var i=t[0],n="N",r=o.html.defaultTag();i.tagName.toLowerCase()!=r&&i!=o.el&&(n=i.tagName),0<=["LI","TD","TH"].indexOf(n)&&(n="N"),e.find("> span").text(o.language.translate(o.opts.paragraphFormat[n]))}else e.find("> span").text(o.language.translate(o.opts.paragraphFormat.N))}}return{apply:e,refreshOnShow:t,refresh:i}},ze.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(e){return e.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var i in t)if(t.hasOwnProperty(i)){var n=this.shortcuts.get("paragraphFormat."+i);n=n?'<span class="fr-shortcut">'+n+"</span>":"",e+='<li role="presentation"><'+("N"==i?this.html.defaultTag()||"DIV":i)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></"+("N"==i?this.html.defaultTag()||"DIV":i)+"></li>"}return e+"</ul>"},title:"Paragraph Format",callback:function(e,t){this.paragraphFormat.apply(t)},refresh:function(e){this.paragraphFormat.refresh(e)},refreshOnShow:function(e,t){this.paragraphFormat.refreshOnShow(e,t)},plugin:"paragraphFormat"}),ze.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"}),ze.extend(ze.FE.DEFAULTS,{paragraphStyles:{"fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"},paragraphMultipleStyles:!0}),ze.FE.PLUGINS.paragraphStyle=function(a){function e(e,t,i){void 0===t&&(t=a.opts.paragraphStyles),void 0===i&&(i=a.opts.paragraphMultipleStyles);var n="";i||((n=Object.keys(t)).splice(n.indexOf(e),1),n=n.join(" ")),a.selection.save(),a.html.wrap(!0,!0,!0,!0),a.selection.restore();var r=a.selection.blocks();a.selection.save();for(var s=ze(r[0]).hasClass(e),o=0;o<r.length;o++)ze(r[o]).removeClass(n).toggleClass(e,!s),ze(r[o]).hasClass("fr-temp-div")&&ze(r[o]).removeClass("fr-temp-div"),""===ze(r[o]).attr("class")&&ze(r[o]).removeAttr("class");a.html.unwrap(),a.selection.restore()}function t(e,t){var i=a.selection.blocks();if(i.length){var n=ze(i[0]);t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=n.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}function i(){}return{_init:i,apply:e,refreshOnShow:t}},ze.FE.RegisterCommand("paragraphStyle",{type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command '+i+'" tabIndex="-1" role="option" data-cmd="paragraphStyle" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+"</ul>"},title:"Paragraph Style",callback:function(e,t){this.paragraphStyle.apply(t)},refreshOnShow:function(e,t){this.paragraphStyle.refreshOnShow(e,t)},plugin:"paragraphStyle"}),ze.FE.DefineIcon("paragraphStyle",{NAME:"magic"}),ze.FE.PLUGINS.print=function(r){function e(){var e=r.$el.html(),t=null;r.shared.print_iframe?t=r.shared.print_iframe:((t=document.createElement("iframe")).name="fr-print",t.style.position="fixed",t.style.top="0",t.style.left="-9999px",t.style.height="100%",t.style.width="0",t.style.overflow="hidden",t.style["z-index"]="2147483647",t.style.tabIndex="-1",document.body.appendChild(t),t.onload=function(){setTimeout(function(){r.events.disableBlur(),window.frames["fr-print"].focus(),window.frames["fr-print"].print(),r.$win.get(0).focus(),r.events.disableBlur(),r.events.focus()},0)},r.events.on("shared.destroy",function(){t.remove()}),r.shared.print_iframe=t);var i=t.contentWindow;i.document.open(),i.document.write("<!DOCTYPE html><html><head><title>"+document.title+"</title>"),Array.prototype.forEach.call(document.querySelectorAll("style"),function(e){e=e.cloneNode(!0),i.document.write(e.outerHTML)});var n=document.querySelectorAll("link[rel=stylesheet]");Array.prototype.forEach.call(n,function(e){var t=document.createElement("link");t.rel=e.rel,t.href=e.href,t.media="print",t.type="text/css",t.media="all",i.document.write(t.outerHTML)}),i.document.write('</head><body style="text-align: '+("rtl"==r.opts.direction?"right":"left")+"; direction: "+r.opts.direction+';"><div class="fr-view">'),i.document.write(e),i.document.write("</div></body></html>"),i.document.close()}return{run:e}},ze.FE.DefineIcon("print",{NAME:"print"}),ze.FE.RegisterCommand("print",{title:"Print",undo:!1,focus:!1,plugin:"print",callback:function(){this.print.run()}}),ze.extend(ze.FE.DEFAULTS,{quickInsertButtons:["image","video","embedly","table","ul","ol","hr"],quickInsertTags:["p","div","h1","h2","h3","h4","h5","h6","pre","blockquote"]}),ze.FE.QUICK_INSERT_BUTTONS={},ze.FE.DefineIcon("quickInsert",{PATH:'<path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/>',template:"svg"}),ze.FE.RegisterQuickInsertButton=function(e,t){ze.FE.QUICK_INSERT_BUTTONS[e]=ze.extend({undo:!0},t)},ze.FE.RegisterQuickInsertButton("image",{icon:"insertImage",requiredPlugin:"image",title:"Insert Image",undo:!1,callback:function(){var e=this;e.shared.$qi_image_input||(e.shared.$qi_image_input=ze('<input accept="image/*" name="quickInsertImage'+this.id+'" style="display: none;" type="file">'),ze("body:first").append(e.shared.$qi_image_input),e.events.$on(e.shared.$qi_image_input,"change",function(){var e=ze(this).data("inst");this.files&&(e.quickInsert.hide(),e.image.upload(this.files)),ze(this).val("")},!0)),e.$qi_image_input=e.shared.$qi_image_input,e.helpers.isMobile()&&e.selection.save(),e.$qi_image_input.data("inst",e).trigger("click")}}),ze.FE.RegisterQuickInsertButton("video",{icon:"insertVideo",requiredPlugin:"video",title:"Insert Video",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of the video you want to insert."));e&&this.video.insertByURL(e)}}),ze.FE.RegisterQuickInsertButton("embedly",{icon:"embedly",requiredPlugin:"embedly",title:"Embed URL",undo:!1,callback:function(){var e=prompt(this.language.translate("Paste the URL of any web content you want to insert."));e&&this.embedly.add(e)}}),ze.FE.RegisterQuickInsertButton("table",{icon:"insertTable",requiredPlugin:"table",title:"Insert Table",callback:function(){this.table.insert(2,2)}}),ze.FE.RegisterQuickInsertButton("ol",{icon:"formatOL",requiredPlugin:"lists",title:"Ordered List",callback:function(){this.lists.format("OL")}}),ze.FE.RegisterQuickInsertButton("ul",{icon:"formatUL",requiredPlugin:"lists",title:"Unordered List",callback:function(){this.lists.format("UL")}}),ze.FE.RegisterQuickInsertButton("hr",{icon:"insertHR",title:"Insert Horizontal Line",callback:function(){this.commands.insertHR()}}),ze.FE.PLUGINS.quickInsert=function(o){function t(e){var t,i,n;t=e.offset().top-o.$box.offset().top,i=0-c.outerWidth(),n=(c.outerHeight()-e.outerHeight())/2,o.opts.iframe&&(t+=o.$iframe.offset().top-o.helpers.scrollTop()),c.hasClass("fr-on")&&0<=t&&d.css("top",t-n),0<=t&&t-n<=o.$box.outerHeight()-e.outerHeight()?(c.hasClass("fr-hidden")&&(c.hasClass("fr-on")&&r(),c.removeClass("fr-hidden")),c.css("top",t-n)):c.hasClass("fr-visible")&&(c.addClass("fr-hidden"),a()),c.css("left",i)}function i(e){c||s(),c.hasClass("fr-on")&&a(),o.$box.append(c),t(e),c.data("tag",e),c.addClass("fr-visible")}function e(){if(o.core.hasFocus()){var e=o.selection.element();o.node.isBlock(e)||(e=o.node.blockParent(e)),e&&o.node.isEmpty(e)&&o.node.isElement(e.parentNode)&&0<=o.opts.quickInsertTags.indexOf(e.tagName.toLowerCase())?c&&c.data("tag").is(ze(e))&&c.hasClass("fr-on")?a():o.selection.isCollapsed()&&i(ze(e)):n()}}function n(){c&&(o.html.checkIfEmpty(),c.hasClass("fr-on")&&a(),c.removeClass("fr-visible fr-on"),c.css("left",-9999).css("top",-9999))}function r(e){if(e&&e.preventDefault(),c.hasClass("fr-on")&&!c.hasClass("fr-hidden"))a();else{if(!o.shared.$qi_helper){for(var t=o.opts.quickInsertButtons,i='<div class="fr-qi-helper">',n=0,r=0;r<t.length;r++){var s=ze.FE.QUICK_INSERT_BUTTONS[t[r]];s&&(!s.requiredPlugin||ze.FE.PLUGINS[s.requiredPlugin]&&0<=o.opts.pluginsEnabled.indexOf(s.requiredPlugin))&&(i+='<a class="fr-btn fr-floating-btn" role="button" title="'+o.language.translate(s.title)+'" tabIndex="-1" data-cmd="'+t[r]+'" style="transition-delay: '+.025*n+++'s;">'+o.icon.create(s.icon)+"</a>")}i+="</div>",o.shared.$qi_helper=ze(i),o.tooltip.bind(o.shared.$qi_helper,"> a.fr-btn")}(d=o.shared.$qi_helper).appendTo(o.$box),setTimeout(function(){d.css("top",parseFloat(c.css("top"))),d.css("left",parseFloat(c.css("left"))+c.outerWidth()),d.find("a").addClass("fr-size-1"),c.addClass("fr-on")},10)}}function a(){var e=o.$box.find(".fr-qi-helper");e.length&&(e.find("a").removeClass("fr-size-1"),e.css("left",-9999),c.hasClass("fr-hidden")||c.removeClass("fr-on"))}function s(){o.shared.$quick_insert||(o.shared.$quick_insert=ze('<div class="fr-quick-insert"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+o.language.translate("Quick Insert")+'">'+o.icon.create("quickInsert")+"</a></div>")),c=o.shared.$quick_insert,o.tooltip.bind(o.$box,".fr-quick-insert > a.fr-floating-btn"),o.events.on("destroy",function(){c.removeClass("fr-on").appendTo(ze("body:first")).css("left",-9999).css("top",-9999),d&&(a(),d.appendTo(ze("body:first")))},!0),o.events.on("shared.destroy",function(){c.html("").removeData().remove(),c=null,d&&(d.html("").removeData().remove(),d=null)},!0),o.events.on("commands.before",n),o.events.on("commands.after",function(){o.popups.areVisible()||e()}),o.events.bindClick(o.$box,".fr-quick-insert > a",r),o.events.bindClick(o.$box,".fr-qi-helper > a.fr-btn",function(e){var t=ze(e.currentTarget).data("cmd");ze.FE.QUICK_INSERT_BUTTONS[t].callback.apply(o,[e.currentTarget]),ze.FE.QUICK_INSERT_BUTTONS[t].undo&&o.undo.saveStep(),o.quickInsert.hide()}),o.events.$on(o.$wp,"scroll",function(){c.hasClass("fr-visible")&&t(c.data("tag"))})}function l(){if(!o.$wp)return!1;o.opts.iframe&&o.$el.parent("html").find("head").append('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">'),o.popups.onShow("image.edit",n),o.events.on("mouseup",e),o.helpers.isMobile()&&o.events.$on(ze(o.o_doc),"selectionchange",e),o.events.on("blur",n),o.events.on("keyup",e),o.events.on("keydown",function(){setTimeout(function(){e()},0)})}var c,d;return{_init:l,hide:n}},ze.FE.PLUGINS.quote=function(n){function r(e){for(;e.parentNode&&e.parentNode!=n.el;)e=e.parentNode;return e}function t(){var e,t=n.selection.blocks();for(e=0;e<t.length;e++)t[e]=r(t[e]);n.selection.save();var i=ze("<blockquote>");for(i.insertBefore(t[0]),e=0;e<t.length;e++)i.append(t[e]);n.html.unwrap(),n.selection.restore()}function i(){var e,t=n.selection.blocks();for(e=0;e<t.length;e++)"BLOCKQUOTE"!=t[e].tagName&&(t[e]=ze(t[e]).parentsUntil(n.$el,"BLOCKQUOTE").get(0));for(n.selection.save(),e=0;e<t.length;e++)t[e]&&ze(t[e]).replaceWith(t[e].innerHTML);n.html.unwrap(),n.selection.restore()}function e(e){n.selection.save(),n.html.wrap(!0,!0,!0,!0),n.selection.restore(),"increase"==e?t():"decrease"==e&&i()}return{apply:e}},ze.FE.RegisterShortcut(ze.FE.KEYCODE.SINGLE_QUOTE,"quote","increase","'"),ze.FE.RegisterShortcut(ze.FE.KEYCODE.SINGLE_QUOTE,"quote","decrease","'",!0),ze.FE.RegisterCommand("quote",{title:"Quote",type:"dropdown",options:{increase:"Increase",decrease:"Decrease"},callback:function(e,t){this.quote.apply(t)},plugin:"quote"}),ze.FE.DefineIcon("quote",{NAME:"quote-left"}),ze.extend(ze.FE.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),ze.FE.PLUGINS.save=function(s){function o(e,t){s.events.trigger("save.error",[{code:e,message:u[e]},t])}function t(t){if(void 0===t&&(t=s.html.get()),!1===s.events.trigger("save.before"))return!1;if(s.opts.saveURL){var e={};for(var i in s.opts.saveParams)if(s.opts.saveParams.hasOwnProperty(i)){var n=s.opts.saveParams[i];e[i]="function"==typeof n?n.call(this):n}var r={};r[s.opts.saveParam]=t,ze.ajax({type:s.opts.saveMethod,url:s.opts.saveURL,data:ze.extend(r,e),crossDomain:s.opts.requestWithCORS,xhrFields:{withCredentials:s.opts.requestWithCredentials},headers:s.opts.requestHeaders}).done(function(e){l=t,s.events.trigger("save.after",[e])}).fail(function(e){o(f,e.response||e.responseText)})}else o(d)}function e(){clearTimeout(a),a=setTimeout(function(){var e=s.html.get();(l!=e||c)&&(c=!1,t(l=e))},s.opts.saveInterval)}function i(){e(),c=!1}function n(){c=!0}function r(){s.opts.saveInterval&&(l=s.html.get(),s.events.on("contentChanged",e),s.events.on("keydown destroy",function(){clearTimeout(a)}))}var a=null,l=null,c=!1,d=1,f=2,u={};return u[d]="Missing saveURL option.",u[f]="Something went wrong during save.",{_init:r,save:t,reset:i,force:n}},ze.FE.DefineIcon("save",{NAME:"floppy-o"}),ze.FE.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"}),ze.extend(ze.FE.DEFAULTS,{specialCharactersSets:[{title:"Latin",list:[{"char":"&iexcl;",desc:"INVERTED EXCLAMATION MARK"},{"char":"&cent;",desc:"CENT SIGN"},{"char":"&pound;",desc:"POUND SIGN"},{"char":"&curren;",desc:"CURRENCY SIGN"},{"char":"&yen;",desc:"YEN SIGN"},{"char":"&brvbar;",desc:"BROKEN BAR"},{"char":"&sect;",desc:"SECTION SIGN"},{"char":"&uml;",desc:"DIAERESIS"},{"char":"&copy;",desc:"COPYRIGHT SIGN"},{"char":"&trade;",desc:"TRADEMARK SIGN"},{"char":"&ordf;",desc:"FEMININE ORDINAL INDICATOR"},{"char":"&laquo;",desc:"LEFT-POINTING DOUBLE ANGLE QUOTATION MARK"},{"char":"&not;",desc:"NOT SIGN"},{"char":"&reg;",desc:"REGISTERED SIGN"},{"char":"&macr;",desc:"MACRON"},{"char":"&deg;",desc:"DEGREE SIGN"},{"char":"&plusmn;",desc:"PLUS-MINUS SIGN"},{"char":"&sup2;",desc:"SUPERSCRIPT TWO"},{"char":"&sup3;",desc:"SUPERSCRIPT THREE"},{"char":"&acute;",desc:"ACUTE ACCENT"},{"char":"&micro;",desc:"MICRO SIGN"},{"char":"&para;",desc:"PILCROW SIGN"},{"char":"&middot;",desc:"MIDDLE DOT"},{"char":"&cedil;",desc:"CEDILLA"},{"char":"&sup1;",desc:"SUPERSCRIPT ONE"},{"char":"&ordm;",desc:"MASCULINE ORDINAL INDICATOR"},{"char":"&raquo;",desc:"RIGHT-POINTING DOUBLE ANGLE QUOTATION MARK"},{"char":"&frac14;",desc:"VULGAR FRACTION ONE QUARTER"},{"char":"&frac12;",desc:"VULGAR FRACTION ONE HALF"},{"char":"&frac34;",desc:"VULGAR FRACTION THREE QUARTERS"},{"char":"&iquest;",desc:"INVERTED QUESTION MARK"},{"char":"&Agrave;",desc:"LATIN CAPITAL LETTER A WITH GRAVE"},{"char":"&Aacute;",desc:"LATIN CAPITAL LETTER A WITH ACUTE"},{"char":"&Acirc;",desc:"LATIN CAPITAL LETTER A WITH CIRCUMFLEX"},{"char":"&Atilde;",desc:"LATIN CAPITAL LETTER A WITH TILDE"},{"char":"&Auml;",desc:"LATIN CAPITAL LETTER A WITH DIAERESIS "},{"char":"&Aring;",desc:"LATIN CAPITAL LETTER A WITH RING ABOVE"},{"char":"&AElig;",desc:"LATIN CAPITAL LETTER AE"},{"char":"&Ccedil;",desc:"LATIN CAPITAL LETTER C WITH CEDILLA"},{"char":"&Egrave;",desc:"LATIN CAPITAL LETTER E WITH GRAVE"},{"char":"&Eacute;",desc:"LATIN CAPITAL LETTER E WITH ACUTE"},{"char":"&Ecirc;",desc:"LATIN CAPITAL LETTER E WITH CIRCUMFLEX"},{"char":"&Euml;",desc:"LATIN CAPITAL LETTER E WITH DIAERESIS"},{"char":"&Igrave;",desc:"LATIN CAPITAL LETTER I WITH GRAVE"},{"char":"&Iacute;",desc:"LATIN CAPITAL LETTER I WITH ACUTE"},{"char":"&Icirc;",desc:"LATIN CAPITAL LETTER I WITH CIRCUMFLEX"},{"char":"&Iuml;",desc:"LATIN CAPITAL LETTER I WITH DIAERESIS"},{"char":"&ETH;",desc:"LATIN CAPITAL LETTER ETH"},{"char":"&Ntilde;",desc:"LATIN CAPITAL LETTER N WITH TILDE"},{"char":"&Ograve;",desc:"LATIN CAPITAL LETTER O WITH GRAVE"},{"char":"&Oacute;",desc:"LATIN CAPITAL LETTER O WITH ACUTE"},{"char":"&Ocirc;",desc:"LATIN CAPITAL LETTER O WITH CIRCUMFLEX"},{"char":"&Otilde;",desc:"LATIN CAPITAL LETTER O WITH TILDE"},{"char":"&Ouml;",desc:"LATIN CAPITAL LETTER O WITH DIAERESIS"},{"char":"&times;",desc:"MULTIPLICATION SIGN"},{"char":"&Oslash;",desc:"LATIN CAPITAL LETTER O WITH STROKE"},{"char":"&Ugrave;",desc:"LATIN CAPITAL LETTER U WITH GRAVE"},{"char":"&Uacute;",desc:"LATIN CAPITAL LETTER U WITH ACUTE"},{"char":"&Ucirc;",desc:"LATIN CAPITAL LETTER U WITH CIRCUMFLEX"},{"char":"&Uuml;",desc:"LATIN CAPITAL LETTER U WITH DIAERESIS"},{"char":"&Yacute;",desc:"LATIN CAPITAL LETTER Y WITH ACUTE"},{"char":"&THORN;",desc:"LATIN CAPITAL LETTER THORN"},{"char":"&szlig;",desc:"LATIN SMALL LETTER SHARP S"},{"char":"&agrave;",desc:"LATIN SMALL LETTER A WITH GRAVE"},{"char":"&aacute;",desc:"LATIN SMALL LETTER A WITH ACUTE "},{"char":"&acirc;",desc:"LATIN SMALL LETTER A WITH CIRCUMFLEX"},{"char":"&atilde;",desc:"LATIN SMALL LETTER A WITH TILDE"},{"char":"&auml;",desc:"LATIN SMALL LETTER A WITH DIAERESIS"},{"char":"&aring;",desc:"LATIN SMALL LETTER A WITH RING ABOVE"},{"char":"&aelig;",desc:"LATIN SMALL LETTER AE"},{"char":"&ccedil;",desc:"LATIN SMALL LETTER C WITH CEDILLA"},{"char":"&egrave;",desc:"LATIN SMALL LETTER E WITH GRAVE"},{"char":"&eacute;",desc:"LATIN SMALL LETTER E WITH ACUTE"},{"char":"&ecirc;",desc:"LATIN SMALL LETTER E WITH CIRCUMFLEX"},{"char":"&euml;",desc:"LATIN SMALL LETTER E WITH DIAERESIS"},{"char":"&igrave;",desc:"LATIN SMALL LETTER I WITH GRAVE"},{"char":"&iacute;",desc:"LATIN SMALL LETTER I WITH ACUTE"},{"char":"&icirc;",desc:"LATIN SMALL LETTER I WITH CIRCUMFLEX"},{"char":"&iuml;",desc:"LATIN SMALL LETTER I WITH DIAERESIS"},{"char":"&eth;",desc:"LATIN SMALL LETTER ETH"},{"char":"&ntilde;",desc:"LATIN SMALL LETTER N WITH TILDE"},{"char":"&ograve;",desc:"LATIN SMALL LETTER O WITH GRAVE"},{"char":"&oacute;",desc:"LATIN SMALL LETTER O WITH ACUTE"},{"char":"&ocirc;",desc:"LATIN SMALL LETTER O WITH CIRCUMFLEX"},{"char":"&otilde;",desc:"LATIN SMALL LETTER O WITH TILDE"},{"char":"&ouml;",desc:"LATIN SMALL LETTER O WITH DIAERESIS"},{"char":"&divide;",desc:"DIVISION SIGN"},{"char":"&oslash;",desc:"LATIN SMALL LETTER O WITH STROKE"},{"char":"&ugrave;",desc:"LATIN SMALL LETTER U WITH GRAVE"},{"char":"&uacute;",desc:"LATIN SMALL LETTER U WITH ACUTE"
},{"char":"&ucirc;",desc:"LATIN SMALL LETTER U WITH CIRCUMFLEX"},{"char":"&uuml;",desc:"LATIN SMALL LETTER U WITH DIAERESIS"},{"char":"&yacute;",desc:"LATIN SMALL LETTER Y WITH ACUTE"},{"char":"&thorn;",desc:"LATIN SMALL LETTER THORN"},{"char":"&yuml;",desc:"LATIN SMALL LETTER Y WITH DIAERESIS"}]},{title:"Greek",list:[{"char":"&Alpha;",desc:"GREEK CAPITAL LETTER ALPHA"},{"char":"&Beta;",desc:"GREEK CAPITAL LETTER BETA"},{"char":"&Gamma;",desc:"GREEK CAPITAL LETTER GAMMA"},{"char":"&Delta;",desc:"GREEK CAPITAL LETTER DELTA"},{"char":"&Epsilon;",desc:"GREEK CAPITAL LETTER EPSILON"},{"char":"&Zeta;",desc:"GREEK CAPITAL LETTER ZETA"},{"char":"&Eta;",desc:"GREEK CAPITAL LETTER ETA"},{"char":"&Theta;",desc:"GREEK CAPITAL LETTER THETA"},{"char":"&Iota;",desc:"GREEK CAPITAL LETTER IOTA"},{"char":"&Kappa;",desc:"GREEK CAPITAL LETTER KAPPA"},{"char":"&Lambda;",desc:"GREEK CAPITAL LETTER LAMBDA"},{"char":"&Mu;",desc:"GREEK CAPITAL LETTER MU"},{"char":"&Nu;",desc:"GREEK CAPITAL LETTER NU"},{"char":"&Xi;",desc:"GREEK CAPITAL LETTER XI"},{"char":"&Omicron;",desc:"GREEK CAPITAL LETTER OMICRON"},{"char":"&Pi;",desc:"GREEK CAPITAL LETTER PI"},{"char":"&Rho;",desc:"GREEK CAPITAL LETTER RHO"},{"char":"&Sigma;",desc:"GREEK CAPITAL LETTER SIGMA"},{"char":"&Tau;",desc:"GREEK CAPITAL LETTER TAU"},{"char":"&Upsilon;",desc:"GREEK CAPITAL LETTER UPSILON"},{"char":"&Phi;",desc:"GREEK CAPITAL LETTER PHI"},{"char":"&Chi;",desc:"GREEK CAPITAL LETTER CHI"},{"char":"&Psi;",desc:"GREEK CAPITAL LETTER PSI"},{"char":"&Omega;",desc:"GREEK CAPITAL LETTER OMEGA"},{"char":"&alpha;",desc:"GREEK SMALL LETTER ALPHA"},{"char":"&beta;",desc:"GREEK SMALL LETTER BETA"},{"char":"&gamma;",desc:"GREEK SMALL LETTER GAMMA"},{"char":"&delta;",desc:"GREEK SMALL LETTER DELTA"},{"char":"&epsilon;",desc:"GREEK SMALL LETTER EPSILON"},{"char":"&zeta;",desc:"GREEK SMALL LETTER ZETA"},{"char":"&eta;",desc:"GREEK SMALL LETTER ETA"},{"char":"&theta;",desc:"GREEK SMALL LETTER THETA"},{"char":"&iota;",desc:"GREEK SMALL LETTER IOTA"},{"char":"&kappa;",desc:"GREEK SMALL LETTER KAPPA"},{"char":"&lambda;",desc:"GREEK SMALL LETTER LAMBDA"},{"char":"&mu;",desc:"GREEK SMALL LETTER MU"},{"char":"&nu;",desc:"GREEK SMALL LETTER NU"},{"char":"&xi;",desc:"GREEK SMALL LETTER XI"},{"char":"&omicron;",desc:"GREEK SMALL LETTER OMICRON"},{"char":"&pi;",desc:"GREEK SMALL LETTER PI"},{"char":"&rho;",desc:"GREEK SMALL LETTER RHO"},{"char":"&sigmaf;",desc:"GREEK SMALL LETTER FINAL SIGMA"},{"char":"&sigma;",desc:"GREEK SMALL LETTER SIGMA"},{"char":"&tau;",desc:"GREEK SMALL LETTER TAU"},{"char":"&upsilon;",desc:"GREEK SMALL LETTER UPSILON"},{"char":"&phi;",desc:"GREEK SMALL LETTER PHI"},{"char":"&chi;",desc:"GREEK SMALL LETTER CHI"},{"char":"&psi;",desc:"GREEK SMALL LETTER PSI"},{"char":"&omega;",desc:"GREEK SMALL LETTER OMEGA"},{"char":"&thetasym;",desc:"GREEK THETA SYMBOL"},{"char":"&upsih;",desc:"GREEK UPSILON WITH HOOK SYMBOL"},{"char":"&straightphi;",desc:"GREEK PHI SYMBOL"},{"char":"&piv;",desc:"GREEK PI SYMBOL"},{"char":"&Gammad;",desc:"GREEK LETTER DIGAMMA"},{"char":"&gammad;",desc:"GREEK SMALL LETTER DIGAMMA"},{"char":"&varkappa;",desc:"GREEK KAPPA SYMBOL"},{"char":"&varrho;",desc:"GREEK RHO SYMBOL"},{"char":"&straightepsilon;",desc:"GREEK LUNATE EPSILON SYMBOL"},{"char":"&backepsilon;",desc:"GREEK REVERSED LUNATE EPSILON SYMBOL"}]},{title:"Cyrillic",list:[{"char":"&#x400",desc:"CYRILLIC CAPITAL LETTER IE WITH GRAVE"},{"char":"&#x401",desc:"CYRILLIC CAPITAL LETTER IO"},{"char":"&#x402",desc:"CYRILLIC CAPITAL LETTER DJE"},{"char":"&#x403",desc:"CYRILLIC CAPITAL LETTER GJE"},{"char":"&#x404",desc:"CYRILLIC CAPITAL LETTER UKRAINIAN IE"},{"char":"&#x405",desc:"CYRILLIC CAPITAL LETTER DZE"},{"char":"&#x406",desc:"CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I"},{"char":"&#x407",desc:"CYRILLIC CAPITAL LETTER YI"},{"char":"&#x408",desc:"CYRILLIC CAPITAL LETTER JE"},{"char":"&#x409",desc:"CYRILLIC CAPITAL LETTER LJE"},{"char":"&#x40A",desc:"CYRILLIC CAPITAL LETTER NJE"},{"char":"&#x40B",desc:"CYRILLIC CAPITAL LETTER TSHE"},{"char":"&#x40C",desc:"CYRILLIC CAPITAL LETTER KJE"},{"char":"&#x40D",desc:"CYRILLIC CAPITAL LETTER I WITH GRAVE"},{"char":"&#x40E",desc:"CYRILLIC CAPITAL LETTER SHORT U"},{"char":"&#x40F",desc:"CYRILLIC CAPITAL LETTER DZHE"},{"char":"&#x410",desc:"CYRILLIC CAPITAL LETTER A"},{"char":"&#x411",desc:"CYRILLIC CAPITAL LETTER BE"},{"char":"&#x412",desc:"CYRILLIC CAPITAL LETTER VE"},{"char":"&#x413",desc:"CYRILLIC CAPITAL LETTER GHE"},{"char":"&#x414",desc:"CYRILLIC CAPITAL LETTER DE"},{"char":"&#x415",desc:"CYRILLIC CAPITAL LETTER IE"},{"char":"&#x416",desc:"CYRILLIC CAPITAL LETTER ZHE"},{"char":"&#x417",desc:"CYRILLIC CAPITAL LETTER ZE"},{"char":"&#x418",desc:"CYRILLIC CAPITAL LETTER I"},{"char":"&#x419",desc:"CYRILLIC CAPITAL LETTER SHORT I"},{"char":"&#x41A",desc:"CYRILLIC CAPITAL LETTER KA"},{"char":"&#x41B",desc:"CYRILLIC CAPITAL LETTER EL"},{"char":"&#x41C",desc:"CYRILLIC CAPITAL LETTER EM"},{"char":"&#x41D",desc:"CYRILLIC CAPITAL LETTER EN"},{"char":"&#x41E",desc:"CYRILLIC CAPITAL LETTER O"},{"char":"&#x41F",desc:"CYRILLIC CAPITAL LETTER PE"},{"char":"&#x420",desc:"CYRILLIC CAPITAL LETTER ER"},{"char":"&#x421",desc:"CYRILLIC CAPITAL LETTER ES"},{"char":"&#x422",desc:"CYRILLIC CAPITAL LETTER TE"},{"char":"&#x423",desc:"CYRILLIC CAPITAL LETTER U"},{"char":"&#x424",desc:"CYRILLIC CAPITAL LETTER EF"},{"char":"&#x425",desc:"CYRILLIC CAPITAL LETTER HA"},{"char":"&#x426",desc:"CYRILLIC CAPITAL LETTER TSE"},{"char":"&#x427",desc:"CYRILLIC CAPITAL LETTER CHE"},{"char":"&#x428",desc:"CYRILLIC CAPITAL LETTER SHA"},{"char":"&#x429",desc:"CYRILLIC CAPITAL LETTER SHCHA"},{"char":"&#x42A",desc:"CYRILLIC CAPITAL LETTER HARD SIGN"},{"char":"&#x42B",desc:"CYRILLIC CAPITAL LETTER YERU"},{"char":"&#x42C",desc:"CYRILLIC CAPITAL LETTER SOFT SIGN"},{"char":"&#x42D",desc:"CYRILLIC CAPITAL LETTER E"},{"char":"&#x42E",desc:"CYRILLIC CAPITAL LETTER YU"},{"char":"&#x42F",desc:"CYRILLIC CAPITAL LETTER YA"},{"char":"&#x430",desc:"CYRILLIC SMALL LETTER A"},{"char":"&#x431",desc:"CYRILLIC SMALL LETTER BE"},{"char":"&#x432",desc:"CYRILLIC SMALL LETTER VE"},{"char":"&#x433",desc:"CYRILLIC SMALL LETTER GHE"},{"char":"&#x434",desc:"CYRILLIC SMALL LETTER DE"},{"char":"&#x435",desc:"CYRILLIC SMALL LETTER IE"},{"char":"&#x436",desc:"CYRILLIC SMALL LETTER ZHE"},{"char":"&#x437",desc:"CYRILLIC SMALL LETTER ZE"},{"char":"&#x438",desc:"CYRILLIC SMALL LETTER I"},{"char":"&#x439",desc:"CYRILLIC SMALL LETTER SHORT I"},{"char":"&#x43A",desc:"CYRILLIC SMALL LETTER KA"},{"char":"&#x43B",desc:"CYRILLIC SMALL LETTER EL"},{"char":"&#x43C",desc:"CYRILLIC SMALL LETTER EM"},{"char":"&#x43D",desc:"CYRILLIC SMALL LETTER EN"},{"char":"&#x43E",desc:"CYRILLIC SMALL LETTER O"},{"char":"&#x43F",desc:"CYRILLIC SMALL LETTER PE"},{"char":"&#x440",desc:"CYRILLIC SMALL LETTER ER"},{"char":"&#x441",desc:"CYRILLIC SMALL LETTER ES"},{"char":"&#x442",desc:"CYRILLIC SMALL LETTER TE"},{"char":"&#x443",desc:"CYRILLIC SMALL LETTER U"},{"char":"&#x444",desc:"CYRILLIC SMALL LETTER EF"},{"char":"&#x445",desc:"CYRILLIC SMALL LETTER HA"},{"char":"&#x446",desc:"CYRILLIC SMALL LETTER TSE"},{"char":"&#x447",desc:"CYRILLIC SMALL LETTER CHE"},{"char":"&#x448",desc:"CYRILLIC SMALL LETTER SHA"},{"char":"&#x449",desc:"CYRILLIC SMALL LETTER SHCHA"},{"char":"&#x44A",desc:"CYRILLIC SMALL LETTER HARD SIGN"},{"char":"&#x44B",desc:"CYRILLIC SMALL LETTER YERU"},{"char":"&#x44C",desc:"CYRILLIC SMALL LETTER SOFT SIGN"},{"char":"&#x44D",desc:"CYRILLIC SMALL LETTER E"},{"char":"&#x44E",desc:"CYRILLIC SMALL LETTER YU"},{"char":"&#x44F",desc:"CYRILLIC SMALL LETTER YA"},{"char":"&#x450",desc:"CYRILLIC SMALL LETTER IE WITH GRAVE"},{"char":"&#x451",desc:"CYRILLIC SMALL LETTER IO"},{"char":"&#x452",desc:"CYRILLIC SMALL LETTER DJE"},{"char":"&#x453",desc:"CYRILLIC SMALL LETTER GJE"},{"char":"&#x454",desc:"CYRILLIC SMALL LETTER UKRAINIAN IE"},{"char":"&#x455",desc:"CYRILLIC SMALL LETTER DZE"},{"char":"&#x456",desc:"CYRILLIC SMALL LETTER BYELORUSSIAN-UKRAINIAN I"},{"char":"&#x457",desc:"CYRILLIC SMALL LETTER YI"},{"char":"&#x458",desc:"CYRILLIC SMALL LETTER JE"},{"char":"&#x459",desc:"CYRILLIC SMALL LETTER LJE"},{"char":"&#x45A",desc:"CYRILLIC SMALL LETTER NJE"},{"char":"&#x45B",desc:"CYRILLIC SMALL LETTER TSHE"},{"char":"&#x45C",desc:"CYRILLIC SMALL LETTER KJE"},{"char":"&#x45D",desc:"CYRILLIC SMALL LETTER I WITH GRAVE"},{"char":"&#x45E",desc:"CYRILLIC SMALL LETTER SHORT U"},{"char":"&#x45F",desc:"CYRILLIC SMALL LETTER DZHE"}]},{title:"Punctuation",list:[{"char":"&ndash;",desc:"EN DASH"},{"char":"&mdash;",desc:"EM DASH"},{"char":"&lsquo;",desc:"LEFT SINGLE QUOTATION MARK"},{"char":"&rsquo;",desc:"RIGHT SINGLE QUOTATION MARK"},{"char":"&sbquo;",desc:"SINGLE LOW-9 QUOTATION MARK"},{"char":"&ldquo;",desc:"LEFT DOUBLE QUOTATION MARK"},{"char":"&rdquo;",desc:"RIGHT DOUBLE QUOTATION MARK"},{"char":"&bdquo;",desc:"DOUBLE LOW-9 QUOTATION MARK"},{"char":"&dagger;",desc:"DAGGER"},{"char":"&Dagger;",desc:"DOUBLE DAGGER"},{"char":"&bull;",desc:"BULLET"},{"char":"&hellip;",desc:"HORIZONTAL ELLIPSIS"},{"char":"&permil;",desc:"PER MILLE SIGN"},{"char":"&prime;",desc:"PRIME"},{"char":"&Prime;",desc:"DOUBLE PRIME"},{"char":"&lsaquo;",desc:"SINGLE LEFT-POINTING ANGLE QUOTATION MARK"},{"char":"&rsaquo;",desc:"SINGLE RIGHT-POINTING ANGLE QUOTATION MARK"},{"char":"&oline;",desc:"OVERLINE"},{"char":"&frasl;",desc:"FRACTION SLASH"}]},{title:"Currency",list:[{"char":"&#x20A0",desc:"EURO-CURRENCY SIGN"},{"char":"&#x20A1",desc:"COLON SIGN"},{"char":"&#x20A2",desc:"CRUZEIRO SIGN"},{"char":"&#x20A3",desc:"FRENCH FRANC SIGN"},{"char":"&#x20A4",desc:"LIRA SIGN"},{"char":"&#x20A5",desc:"MILL SIGN"},{"char":"&#x20A6",desc:"NAIRA SIGN"},{"char":"&#x20A7",desc:"PESETA SIGN"},{"char":"&#x20A8",desc:"RUPEE SIGN"},{"char":"&#x20A9",desc:"WON SIGN"},{"char":"&#x20AA",desc:"NEW SHEQEL SIGN"},{"char":"&#x20AB",desc:"DONG SIGN"},{"char":"&#x20AC",desc:"EURO SIGN"},{"char":"&#x20AD",desc:"KIP SIGN"},{"char":"&#x20AE",desc:"TUGRIK SIGN"},{"char":"&#x20AF",desc:"DRACHMA SIGN"},{"char":"&#x20B0",desc:"GERMAN PENNY SYMBOL"},{"char":"&#x20B1",desc:"PESO SIGN"},{"char":"&#x20B2",desc:"GUARANI SIGN"},{"char":"&#x20B3",desc:"AUSTRAL SIGN"},{"char":"&#x20B4",desc:"HRYVNIA SIGN"},{"char":"&#x20B5",desc:"CEDI SIGN"},{"char":"&#x20B6",desc:"LIVRE TOURNOIS SIGN"},{"char":"&#x20B7",desc:"SPESMILO SIGN"},{"char":"&#x20B8",desc:"TENGE SIGN"},{"char":"&#x20B9",desc:"INDIAN RUPEE SIGN"}]},{title:"Arrows",list:[{"char":"&#x2190",desc:"LEFTWARDS ARROW"},{"char":"&#x2191",desc:"UPWARDS ARROW"},{"char":"&#x2192",desc:"RIGHTWARDS ARROW"},{"char":"&#x2193",desc:"DOWNWARDS ARROW"},{"char":"&#x2194",desc:"LEFT RIGHT ARROW"},{"char":"&#x2195",desc:"UP DOWN ARROW"},{"char":"&#x2196",desc:"NORTH WEST ARROW"},{"char":"&#x2197",desc:"NORTH EAST ARROW"},{"char":"&#x2198",desc:"SOUTH EAST ARROW"},{"char":"&#x2199",desc:"SOUTH WEST ARROW"},{"char":"&#x219A",desc:"LEFTWARDS ARROW WITH STROKE"},{"char":"&#x219B",desc:"RIGHTWARDS ARROW WITH STROKE"},{"char":"&#x219C",desc:"LEFTWARDS WAVE ARROW"},{"char":"&#x219D",desc:"RIGHTWARDS WAVE ARROW"},{"char":"&#x219E",desc:"LEFTWARDS TWO HEADED ARROW"},{"char":"&#x219F",desc:"UPWARDS TWO HEADED ARROW"},{"char":"&#x21A0",desc:"RIGHTWARDS TWO HEADED ARROW"},{"char":"&#x21A1",desc:"DOWNWARDS TWO HEADED ARROW"},{"char":"&#x21A2",desc:"LEFTWARDS ARROW WITH TAIL"},{"char":"&#x21A3",desc:"RIGHTWARDS ARROW WITH TAIL"},{"char":"&#x21A4",desc:"LEFTWARDS ARROW FROM BAR"},{"char":"&#x21A5",desc:"UPWARDS ARROW FROM BAR"},{"char":"&#x21A6",desc:"RIGHTWARDS ARROW FROM BAR"},{"char":"&#x21A7",desc:"DOWNWARDS ARROW FROM BAR"},{"char":"&#x21A8",desc:"UP DOWN ARROW WITH BASE"},{"char":"&#x21A9",desc:"LEFTWARDS ARROW WITH HOOK"},{"char":"&#x21AA",desc:"RIGHTWARDS ARROW WITH HOOK"},{"char":"&#x21AB",desc:"LEFTWARDS ARROW WITH LOOP"},{"char":"&#x21AC",desc:"RIGHTWARDS ARROW WITH LOOP"},{"char":"&#x21AD",desc:"LEFT RIGHT WAVE ARROW"},{"char":"&#x21AE",desc:"LEFT RIGHT ARROW WITH STROKE"},{"char":"&#x21AF",desc:"DOWNWARDS ZIGZAG ARROW"},{"char":"&#x21B0",desc:"UPWARDS ARROW WITH TIP LEFTWARDS"},{"char":"&#x21B1",desc:"UPWARDS ARROW WITH TIP RIGHTWARDS"},{"char":"&#x21B2",desc:"DOWNWARDS ARROW WITH TIP LEFTWARDS"},{"char":"&#x21B3",desc:"DOWNWARDS ARROW WITH TIP RIGHTWARDS"},{"char":"&#x21B4",desc:"RIGHTWARDS ARROW WITH CORNER DOWNWARDS"},{"char":"&#x21B5",desc:"DOWNWARDS ARROW WITH CORNER LEFTWARDS"},{"char":"&#x21B6",desc:"ANTICLOCKWISE TOP SEMICIRCLE ARROW"},{"char":"&#x21B7",desc:"CLOCKWISE TOP SEMICIRCLE ARROW"},{"char":"&#x21B8",desc:"NORTH WEST ARROW TO LONG BAR"},{"char":"&#x21B9",desc:"LEFTWARDS ARROW TO BAR OVER RIGHTWARDS ARROW TO BAR"},{"char":"&#x21BA",desc:"ANTICLOCKWISE OPEN CIRCLE ARROW"},{"char":"&#x21BB",desc:"CLOCKWISE OPEN CIRCLE ARROW"},{"char":"&#x21BC",desc:"LEFTWARDS HARPOON WITH BARB UPWARDS"},{"char":"&#x21BD",desc:"LEFTWARDS HARPOON WITH BARB DOWNWARDS"},{"char":"&#x21BE",desc:"UPWARDS HARPOON WITH BARB RIGHTWARDS"},{"char":"&#x21BF",desc:"UPWARDS HARPOON WITH BARB LEFTWARDS"},{"char":"&#x21C0",desc:"RIGHTWARDS HARPOON WITH BARB UPWARDS"},{"char":"&#x21C1",desc:"RIGHTWARDS HARPOON WITH BARB DOWNWARDS"},{"char":"&#x21C2",desc:"DOWNWARDS HARPOON WITH BARB RIGHTWARDS"},{"char":"&#x21C3",desc:"DOWNWARDS HARPOON WITH BARB LEFTWARDS"},{"char":"&#x21C4",desc:"RIGHTWARDS ARROW OVER LEFTWARDS ARROW"},{"char":"&#x21C5",desc:"UPWARDS ARROW LEFTWARDS OF DOWNWARDS ARROW"},{"char":"&#x21C6",desc:"LEFTWARDS ARROW OVER RIGHTWARDS ARROW"},{"char":"&#x21C7",desc:"LEFTWARDS PAIRED ARROWS"},{"char":"&#x21C8",desc:"UPWARDS PAIRED ARROWS"},{"char":"&#x21C9",desc:"RIGHTWARDS PAIRED ARROWS"},{"char":"&#x21CA",desc:"DOWNWARDS PAIRED ARROWS"},{"char":"&#x21CB",desc:"LEFTWARDS HARPOON OVER RIGHTWARDS HARPOON"},{"char":"&#x21CC",desc:"RIGHTWARDS HARPOON OVER LEFTWARDS HARPOON"},{"char":"&#x21CD",desc:"LEFTWARDS DOUBLE ARROW WITH STROKE"},{"char":"&#x21CE",desc:"LEFT RIGHT DOUBLE ARROW WITH STROKE"},{"char":"&#x21CF",desc:"RIGHTWARDS DOUBLE ARROW WITH STROKE"},{"char":"&#x21D0",desc:"LEFTWARDS DOUBLE ARROW"},{"char":"&#x21D1",desc:"UPWARDS DOUBLE ARROW"},{"char":"&#x21D2",desc:"RIGHTWARDS DOUBLE ARROW"},{"char":"&#x21D3",desc:"DOWNWARDS DOUBLE ARROW"},{"char":"&#x21D4",desc:"LEFT RIGHT DOUBLE ARROW"},{"char":"&#x21D5",desc:"UP DOWN DOUBLE ARROW"},{"char":"&#x21D6",desc:"NORTH WEST DOUBLE ARROW"},{"char":"&#x21D7",desc:"NORTH EAST DOUBLE ARROW"},{"char":"&#x21D8",desc:"SOUTH EAST DOUBLE ARROW"},{"char":"&#x21D9",desc:"SOUTH WEST DOUBLE ARROW"},{"char":"&#x21DA",desc:"LEFTWARDS TRIPLE ARROW"},{"char":"&#x21DB",desc:"RIGHTWARDS TRIPLE ARROW"},{"char":"&#x21DC",desc:"LEFTWARDS SQUIGGLE ARROW"},{"char":"&#x21DD",desc:"RIGHTWARDS SQUIGGLE ARROW"},{"char":"&#x21DE",desc:"UPWARDS ARROW WITH DOUBLE STROKE"},{"char":"&#x21DF",desc:"DOWNWARDS ARROW WITH DOUBLE STROKE"},{"char":"&#x21E0",desc:"LEFTWARDS DASHED ARROW"},{"char":"&#x21E1",desc:"UPWARDS DASHED ARROW"},{"char":"&#x21E2",desc:"RIGHTWARDS DASHED ARROW"},{"char":"&#x21E3",desc:"DOWNWARDS DASHED ARROW"},{"char":"&#x21E4",desc:"LEFTWARDS ARROW TO BAR"},{"char":"&#x21E5",desc:"RIGHTWARDS ARROW TO BAR"},{"char":"&#x21E6",desc:"LEFTWARDS WHITE ARROW"},{"char":"&#x21E7",desc:"UPWARDS WHITE ARROW"},{"char":"&#x21E8",desc:"RIGHTWARDS WHITE ARROW"},{"char":"&#x21E9",desc:"DOWNWARDS WHITE ARROW"},{"char":"&#x21EA",desc:"UPWARDS WHITE ARROW FROM BAR"},{"char":"&#x21EB",desc:"UPWARDS WHITE ARROW ON PEDESTAL"},{"char":"&#x21EC",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH HORIZONTAL BAR"},{"char":"&#x21ED",desc:"UPWARDS WHITE ARROW ON PEDESTAL WITH VERTICAL BAR"},{"char":"&#x21EE",desc:"UPWARDS WHITE DOUBLE ARROW"},{"char":"&#x21EF",desc:"UPWARDS WHITE DOUBLE ARROW ON PEDESTAL"},{"char":"&#x21F0",desc:"RIGHTWARDS WHITE ARROW FROM WALL"},{"char":"&#x21F1",desc:"NORTH WEST ARROW TO CORNER"},{"char":"&#x21F2",desc:"SOUTH EAST ARROW TO CORNER"},{"char":"&#x21F3",desc:"UP DOWN WHITE ARROW"},{"char":"&#x21F4",desc:"RIGHT ARROW WITH SMALL CIRCLE"},{"char":"&#x21F5",desc:"DOWNWARDS ARROW LEFTWARDS OF UPWARDS ARROW"},{"char":"&#x21F6",desc:"THREE RIGHTWARDS ARROWS"},{"char":"&#x21F7",desc:"LEFTWARDS ARROW WITH VERTICAL STROKE"},{"char":"&#x21F8",desc:"RIGHTWARDS ARROW WITH VERTICAL STROKE"},{"char":"&#x21F9",desc:"LEFT RIGHT ARROW WITH VERTICAL STROKE"},{"char":"&#x21FA",desc:"LEFTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FB",desc:"RIGHTWARDS ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FC",desc:"LEFT RIGHT ARROW WITH DOUBLE VERTICAL STROKE"},{"char":"&#x21FD",desc:"LEFTWARDS OPEN-HEADED ARROW"},{"char":"&#x21FE",desc:"RIGHTWARDS OPEN-HEADED ARROW"},{"char":"&#x21FF",desc:"LEFT RIGHT OPEN-HEADED ARROW"}]},{title:"Math",list:[{"char":"&forall;",desc:"FOR ALL"},{"char":"&part;",desc:"PARTIAL DIFFERENTIAL"},{"char":"&exist;",desc:"THERE EXISTS"},{"char":"&empty;",desc:"EMPTY SET"},{"char":"&nabla;",desc:"NABLA"},{"char":"&isin;",desc:"ELEMENT OF"},{"char":"&notin;",desc:"NOT AN ELEMENT OF"},{"char":"&ni;",desc:"CONTAINS AS MEMBER"},{"char":"&prod;",desc:"N-ARY PRODUCT"},{"char":"&sum;",desc:"N-ARY SUMMATION"},{"char":"&minus;",desc:"MINUS SIGN"},{"char":"&lowast;",desc:"ASTERISK OPERATOR"},{"char":"&radic;",desc:"SQUARE ROOT"},{"char":"&prop;",desc:"PROPORTIONAL TO"},{"char":"&infin;",desc:"INFINITY"},{"char":"&ang;",desc:"ANGLE"},{"char":"&and;",desc:"LOGICAL AND"},{"char":"&or;",desc:"LOGICAL OR"},{"char":"&cap;",desc:"INTERSECTION"},{"char":"&cup;",desc:"UNION"},{"char":"&int;",desc:"INTEGRAL"},{"char":"&there4;",desc:"THEREFORE"},{"char":"&sim;",desc:"TILDE OPERATOR"},{"char":"&cong;",desc:"APPROXIMATELY EQUAL TO"},{"char":"&asymp;",desc:"ALMOST EQUAL TO"},{"char":"&ne;",desc:"NOT EQUAL TO"},{"char":"&equiv;",desc:"IDENTICAL TO"},{"char":"&le;",desc:"LESS-THAN OR EQUAL TO"},{"char":"&ge;",desc:"GREATER-THAN OR EQUAL TO"},{"char":"&sub;",desc:"SUBSET OF"},{"char":"&sup;",desc:"SUPERSET OF"},{"char":"&nsub;",desc:"NOT A SUBSET OF"},{"char":"&sube;",desc:"SUBSET OF OR EQUAL TO"},{"char":"&supe;",desc:"SUPERSET OF OR EQUAL TO"},{"char":"&oplus;",desc:"CIRCLED PLUS"},{"char":"&otimes;",desc:"CIRCLED TIMES"},{"char":"&perp;",desc:"UP TACK"}]},{title:"Misc",list:[{"char":"&spades;",desc:"BLACK SPADE SUIT"},{"char":"&clubs;",desc:"BLACK CLUB SUIT"},{"char":"&hearts;",desc:"BLACK HEART SUIT"},{"char":"&diams;",desc:"BLACK DIAMOND SUIT"},{"char":"&#x2669",desc:"QUARTER NOTE"},{"char":"&#x266A",desc:"EIGHTH NOTE"},{"char":"&#x266B",desc:"BEAMED EIGHTH NOTES"},{"char":"&#x266C",desc:"BEAMED SIXTEENTH NOTES"},{"char":"&#x266D",desc:"MUSIC FLAT SIGN"},{"char":"&#x266E",desc:"MUSIC NATURAL SIGN"},{"char":"&#x2600",desc:"BLACK SUN WITH RAYS"},{"char":"&#x2601",desc:"CLOUD"},{"char":"&#x2602",desc:"UMBRELLA"},{"char":"&#x2603",desc:"SNOWMAN"},{"char":"&#x2615",desc:"HOT BEVERAGE"},{"char":"&#x2618",desc:"SHAMROCK"},{"char":"&#x262F",desc:"YIN YANG"},{"char":"&#x2714",desc:"HEAVY CHECK MARK"},{"char":"&#x2716",desc:"HEAVY MULTIPLICATION X"},{"char":"&#x2744",desc:"SNOWFLAKE"},{"char":"&#x275B",desc:"HEAVY SINGLE TURNED COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275C",desc:"HEAVY SINGLE COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275D",desc:"HEAVY DOUBLE TURNED COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x275E",desc:"HEAVY DOUBLE COMMA QUOTATION MARK ORNAMENT"},{"char":"&#x2764",desc:"HEAVY BLACK HEART"}]}]}),ze.FE.PLUGINS.specialCharacters=function(a){function e(){}function n(){for(var e='<div class="fr-special-characters-modal">',t=0;t<ze.FE.DEFAULTS.specialCharactersSets.length;t++){for(var i=ze.FE.DEFAULTS.specialCharactersSets[t],n=i.list,r='<div class="fr-special-characters-list"><p class="fr-special-characters-title">'+a.language.translate(i.title)+"</p>",s=0;s<n.length;s++){var o=n[s];r+='<span class="fr-command fr-special-character" tabIndex="-1" role="button" value="'+o["char"]+'" title="'+o.desc+'">'+o["char"]+'<span class="fr-sr-only">'+a.language.translate(o.desc)+"&nbsp;&nbsp;&nbsp;</span></span>"}e+=r+"</div>"}return e+"</div>"}function o(e,t){a.events.disableBlur(),e.focus(),t.preventDefault(),t.stopPropagation()}function r(){a.events.$on(c,"keydown",function(e){var t=e.which,i=c.find("span.fr-special-character:focus:first");if(!(i.length||t!=ze.FE.KEYCODE.F10||a.keys.ctrlKey(e)||e.shiftKey)&&e.altKey)return o(c.find("span.fr-special-character:first"),e),!1;if(t==ze.FE.KEYCODE.TAB||t==ze.FE.KEYCODE.ARROW_LEFT||t==ze.FE.KEYCODE.ARROW_RIGHT){var n=null,r=null,s=!1;return t==ze.FE.KEYCODE.ARROW_LEFT||t==ze.FE.KEYCODE.ARROW_RIGHT?(r=t==ze.FE.KEYCODE.ARROW_RIGHT,s=!0):r=!e.shiftKey,i.length?(s&&(n=r?i.nextAll("span.fr-special-character:first"):i.prevAll("span.fr-special-character:first")),n&&n.length||((n=r?i.parent().next().find("span.fr-special-character:first"):i.parent().prev().find("span.fr-special-character:"+(s?"last":"first"))).length||(n=c.find("span.fr-special-character:"+(r?"first":"last"))))):n=c.find("span.fr-special-character:"+(r?"first":"last")),o(n,e),!1}if(t!=ze.FE.KEYCODE.ENTER||!i.length)return!0;(l.data("instance")||a).specialCharacters.insert(i)},!0)}function t(){if(!l){var e="<h4>"+a.language.translate("Special Characters")+"</h4>",t=n(),i=a.modals.create(d,e,t);l=i.$modal,i.$head,c=i.$body,a.events.$on(ze(a.o_win),"resize",function(){(l.data("instance")||a).modals.resize(d)}),a.events.bindClick(c,".fr-special-character",function(e){var t=l.data("instance")||a,i=ze(e.currentTarget);t.specialCharacters.insert(i)}),r()}a.modals.show(d),a.modals.resize(d)}function i(){a.modals.hide(d)}function s(e){a.specialCharacters.hide(),a.undo.saveStep(),a.html.insert(e.attr("value"),!0),a.undo.saveStep()}var l,c,d="special_characters";return{_init:e,show:t,hide:i,insert:s}},ze.FroalaEditor.DefineIcon("specialCharacters",{template:"text",NAME:"&#937;"}),ze.FE.RegisterCommand("specialCharacters",{title:"Special Characters",icon:"specialCharacters",undo:!1,focus:!1,modal:!0,callback:function(){this.specialCharacters.show()},plugin:"specialCharacters",showOnMobile:!1}),ze.extend(ze.FE.POPUP_TEMPLATES,{"table.insert":"[_BUTTONS_][_ROWS_COLUMNS_]","table.edit":"[_BUTTONS_]","table.colors":"[_BUTTONS_][_COLORS_]"}),ze.extend(ze.FE.DEFAULTS,{tableInsertMaxSize:10,tableEditButtons:["tableHeader","tableRemove","|","tableRows","tableColumns","tableStyle","-","tableCells","tableCellBackground","tableCellVerticalAlign","tableCellHorizontalAlign","tableCellStyle"],tableInsertButtons:["tableBack","|"],tableResizer:!0,tableResizerOffset:5,tableResizingLimit:30,tableColorsButtons:["tableBack","|"],tableColors:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],tableColorsStep:7,tableCellStyles:{"fr-highlighted":"Highlighted","fr-thick":"Thick"},tableStyles:{"fr-dashed-borders":"Dashed Borders","fr-alternate-rows":"Alternate Rows"},tableCellMultipleStyles:!0,tableMultipleStyles:!0,tableInsertHelper:!0,tableInsertHelperOffset:15}),ze.FE.PLUGINS.table=function(y){function e(){var e=y.$tb.find('.fr-command[data-cmd="insertTable"]'),t=y.popups.get("table.insert");if(t||(t=s()),!t.hasClass("fr-active")){y.popups.refresh("table.insert"),y.popups.setContainer("table.insert",y.$tb);var i=e.offset().left+e.outerWidth()/2,n=e.offset().top+(y.opts.toolbarBottom?10:e.outerHeight()-10);y.popups.show("table.insert",i,n,e.outerHeight())}}function p(){var e=N();if(e){var t=y.popups.get("table.edit");if(t||(t=l()),t){y.popups.setContainer("table.edit",y.$sc);var i=W(e),n=(i.left+i.right)/2,r=i.bottom;y.popups.show("table.edit",n,r,i.bottom-i.top),y.edit.isDisabled()&&(y.toolbar.disable(),y.$el.removeClass("fr-no-selection"),y.edit.on(),y.button.bulkRefresh(),y.selection.setAtEnd(y.$el.find(".fr-selected-cell:last").get(0)),y.selection.restore())}}}function n(){var e=N();if(e){var t=y.popups.get("table.colors");t||(t=c()),y.popups.setContainer("table.colors",y.$sc);var i=W(e),n=(i.left+i.right)/2,r=i.bottom;h(),y.popups.show("table.colors",n,r,i.bottom-i.top)}}function r(){0===ve().length&&y.toolbar.enable()}function s(e){if(e)return y.popups.onHide("table.insert",function(){y.popups.get("table.insert").find('.fr-table-size .fr-select-table-size > span[data-row="1"][data-col="1"]').trigger("mouseenter")}),!0;var t="";0<y.opts.tableInsertButtons.length&&(t='<div class="fr-buttons">'+y.button.buildList(y.opts.tableInsertButtons)+"</div>");var i={buttons:t,rows_columns:o()},n=y.popups.create("table.insert",i);return y.events.$on(n,"mouseenter",".fr-table-size .fr-select-table-size .fr-table-cell",function(e){f(ze(e.currentTarget))},!0),a(n),n}function f(e){var t=e.data("row"),i=e.data("col"),n=e.parent();n.siblings(".fr-table-size-info").html(t+" &times; "+i),n.find("> span").removeClass("hover fr-active-item");for(var r=1;r<=y.opts.tableInsertMaxSize;r++)for(var s=0;s<=y.opts.tableInsertMaxSize;s++){var o=n.find('> span[data-row="'+r+'"][data-col="'+s+'"]');r<=t&&s<=i?o.addClass("hover"):r<=t+1||r<=2&&!y.helpers.isMobile()?o.css("display","inline-block"):2<r&&!y.helpers.isMobile()&&o.css("display","none")}e.addClass("fr-active-item")}function o(){for(var e='<div class="fr-table-size"><div class="fr-table-size-info">1 &times; 1</div><div class="fr-select-table-size">',t=1;t<=y.opts.tableInsertMaxSize;t++){for(var i=1;i<=y.opts.tableInsertMaxSize;i++){var n="inline-block";2<t&&!y.helpers.isMobile()&&(n="none");var r="fr-table-cell ";1==t&&1==i&&(r+=" hover"),e+='<span class="fr-command '+r+'" tabIndex="-1" data-cmd="tableInsert" data-row="'+t+'" data-col="'+i+'" data-param1="'+t+'" data-param2="'+i+'" style="display: '+n+';" role="button"><span></span><span class="fr-sr-only">'+t+" &times; "+i+"&nbsp;&nbsp;&nbsp;</span></span>"}e+='<div class="new-line"></div>'}return e+"</div></div>"}function a(e){y.events.$on(e,"focus","[tabIndex]",function(e){f(ze(e.currentTarget))}),y.events.on("popup.tab",function(e){var t=ze(e.currentTarget);if(!y.popups.isVisible("table.insert")||!t.is("span, a"))return!0;var i,n=e.which;if(ze.FE.KEYCODE.ARROW_UP==n||ze.FE.KEYCODE.ARROW_DOWN==n||ze.FE.KEYCODE.ARROW_LEFT==n||ze.FE.KEYCODE.ARROW_RIGHT==n){if(t.is("span.fr-table-cell")){var r=t.parent().find("span.fr-table-cell"),s=r.index(t),o=y.opts.tableInsertMaxSize,a=s%o,l=Math.floor(s/o);ze.FE.KEYCODE.ARROW_UP==n?l=Math.max(0,l-1):ze.FE.KEYCODE.ARROW_DOWN==n?l=Math.min(y.opts.tableInsertMaxSize-1,l+1):ze.FE.KEYCODE.ARROW_LEFT==n?a=Math.max(0,a-1):ze.FE.KEYCODE.ARROW_RIGHT==n&&(a=Math.min(y.opts.tableInsertMaxSize-1,a+1));var c=l*o+a,d=ze(r.get(c));f(d),y.events.disableBlur(),d.focus(),i=!1}}else ze.FE.KEYCODE.ENTER==n&&(y.button.exec(t),i=!1);return!1===i&&(e.preventDefault(),e.stopPropagation()),i},!0)}function l(e){if(e)return y.popups.onHide("table.edit",r),!0;if(0<y.opts.tableEditButtons.length){var t={buttons:'<div class="fr-buttons">'+y.button.buildList(y.opts.tableEditButtons)+"</div>"},i=y.popups.create("table.edit",t);return y.events.$on(y.$wp,"scroll.table-edit",function(){y.popups.isVisible("table.edit")&&p()}),i}return!1}function c(){var e="";0<y.opts.tableColorsButtons.length&&(e='<div class="fr-buttons fr-table-colors-buttons">'+y.button.buildList(y.opts.tableColorsButtons)+"</div>");var t={buttons:e,colors:d()},i=y.popups.create("table.colors",t);return y.events.$on(y.$wp,"scroll.table-colors",function(){y.popups.isVisible("table.colors")&&n()}),u(i),i}function d(){for(var e='<div class="fr-table-colors">',t=0;t<y.opts.tableColors.length;t++)0!==t&&t%y.opts.tableColorsStep==0&&(e+="<br>"),"REMOVE"!=y.opts.tableColors[t]?e+='<span class="fr-command" style="background: '+y.opts.tableColors[t]+';" tabIndex="-1" role="button" data-cmd="tableCellBackgroundColor" data-param1="'+y.opts.tableColors[t]+'"><span class="fr-sr-only">'+y.language.translate("Color")+" "+y.opts.tableColors[t]+"&nbsp;&nbsp;&nbsp;</span></span>":e+='<span class="fr-command" data-cmd="tableCellBackgroundColor" tabIndex="-1" role="button" data-param1="REMOVE" title="'+y.language.translate("Clear Formatting")+'">'+y.icon.create("tableColorRemove")+'<span class="fr-sr-only">'+y.language.translate("Clear Formatting")+"</span></span>";return e+"</div>"}function u(p){y.events.on("popup.tab",function(e){var t=ze(e.currentTarget);if(!y.popups.isVisible("table.colors")||!t.is("span"))return!0;var i=e.which,n=!0;if(ze.FE.KEYCODE.TAB==i){var r=p.find(".fr-buttons");n=!y.accessibility.focusToolbar(r,!!e.shiftKey)}else if(ze.FE.KEYCODE.ARROW_UP==i||ze.FE.KEYCODE.ARROW_DOWN==i||ze.FE.KEYCODE.ARROW_LEFT==i||ze.FE.KEYCODE.ARROW_RIGHT==i){var s=t.parent().find("span.fr-command"),o=s.index(t),a=y.opts.colorsStep,l=Math.floor(s.length/a),c=o%a,d=Math.floor(o/a)*a+c,f=l*a;ze.FE.KEYCODE.ARROW_UP==i?d=((d-a)%f+f)%f:ze.FE.KEYCODE.ARROW_DOWN==i?d=(d+a)%f:ze.FE.KEYCODE.ARROW_LEFT==i?d=((d-1)%f+f)%f:ze.FE.KEYCODE.ARROW_RIGHT==i&&(d=(d+1)%f);var u=ze(s.get(d));y.events.disableBlur(),u.focus(),n=!1}else ze.FE.KEYCODE.ENTER==i&&(y.button.exec(t),n=!1);return!1===n&&(e.preventDefault(),e.stopPropagation()),n},!0)}function h(){var e=y.popups.get("table.colors"),t=y.$el.find(".fr-selected-cell:first");e.find(".fr-selected-color").removeClass("fr-selected-color fr-active-item"),e.find('span[data-param1="'+y.helpers.RGBToHex(t.css("background-color"))+'"]').addClass("fr-selected-color fr-active-item")}function t(e,t){var i,n,r='<table style="width: 100%;" class="fr-inserted-table"><tbody>',s=100/t;for(i=0;i<e;i++){for(r+="<tr>",n=0;n<t;n++)r+='<td style="width: '+s.toFixed(4)+'%;">',0===i&&0===n&&(r+=ze.FE.MARKERS),r+="<br></td>";r+="</tr>"}r+="</tbody></table>",y.html.insert(r),y.selection.restore();var o=y.$el.find(".fr-inserted-table");o.removeClass("fr-inserted-table"),y.events.trigger("table.inserted",[o.get(0)])}function g(){if(0<ve().length){var e=be();y.selection.setBefore(e.get(0))||y.selection.setAfter(e.get(0)),y.selection.restore(),y.popups.hide("table.edit"),e.remove(),y.toolbar.enable()}}function i(){var e=be();if(0<e.length&&0===e.find("th").length){var t,i="<thead><tr>",n=0;for(e.find("tr:first > td").each(function(){var e=ze(this);n+=parseInt(e.attr("colspan"),10)||1}),t=0;t<n;t++)i+="<th><br></th>";i+="</tr></thead>",e.prepend(i),p()}}function m(){var e=be(),t=e.find("thead");if(0<t.length)if(0===e.find("tbody tr").length)g();else if(t.remove(),0<ve().length)p();else{y.popups.hide("table.edit");var i=e.find("tbody tr:first td:first").get(0);i&&(y.selection.setAtEnd(i),y.selection.restore())}}function v(e){var t=be();if(0<t.length){if(0<y.$el.find("th.fr-selected-cell").length&&"above"==e)return;var i,n,r,s=N(),o=B(s);n="above"==e?o.min_i:o.max_i;var a="<tr>";for(i=0;i<s[n].length;i++)if("below"==e&&n<s.length-1&&s[n][i]==s[n+1][i]||"above"==e&&0<n&&s[n][i]==s[n-1][i]){if(0===i||0<i&&s[n][i]!=s[n][i-1]){var l=ze(s[n][i]);l.attr("rowspan",parseInt(l.attr("rowspan"),10)+1)}}else a+="<td><br></td>";a+="</tr>",r=ze(0<y.$el.find("th.fr-selected-cell").length&&"below"==e?t.find("tbody").not(t.find("table tbody")):t.find("tr").not(t.find("table tr")).get(n)),"below"==e?"TBODY"==r.prop("tagName")?r.prepend(a):r.after(a):"above"==e&&(r.before(a),y.popups.isVisible("table.edit")&&p())}}function b(){var e=be();if(0<e.length){var t,i,n,r=N(),s=B(r);if(0===s.min_i&&s.max_i==r.length-1)g();else{for(t=s.max_i;t>=s.min_i;t--){for(n=ze(e.find("tr").not(e.find("table tr")).get(t)),i=0;i<r[t].length;i++)if(0===i||r[t][i]!=r[t][i-1]){var o=ze(r[t][i]);if(1<parseInt(o.attr("rowspan"),10)){var a=parseInt(o.attr("rowspan"),10)-1;1==a?o.removeAttr("rowspan"):o.attr("rowspan",a)}if(t<r.length-1&&r[t][i]==r[t+1][i]&&(0===t||r[t][i]!=r[t-1][i])){for(var l=r[t][i],c=i;0<c&&r[t][c]==r[t][c-1];)c--;0===c?ze(e.find("tr").not(e.find("table tr")).get(t+1)).prepend(l):ze(r[t+1][c-1]).after(l)}}var d=n.parent();n.remove(),0===d.find("tr").length&&d.remove(),r=N(e)}A(0,r.length-1,0,r[0].length-1,e),0<s.min_i?y.selection.setAtEnd(r[s.min_i-1][0]):y.selection.setAtEnd(r[0][0]),y.selection.restore(),y.popups.hide("table.edit")}}}function E(l){var e=be();if(0<e.length){var c,d=N(),t=B(d);c="before"==l?t.min_j:t.max_j;var i,f=100/d[0].length,u=100/(d[0].length+1);e.find("th, td").each(function(){(i=ze(this)).data("old-width",i.outerWidth()/e.outerWidth()*100)}),e.find("tr").not(e.find("table tr")).each(function(e){for(var t,i=ze(this),n=0,r=0;n-1<c;){if(!(t=i.find("> th, > td").get(r))){t=null;break}t==d[e][n]?(n+=parseInt(ze(t).attr("colspan"),10)||1,r++):(n+=parseInt(ze(d[e][n]).attr("colspan"),10)||1,"after"==l&&(t=0===r?-1:i.find("> th, > td").get(r-1)))}var s,o=ze(t);if("after"==l&&c<n-1||"before"==l&&0<c&&d[e][c]==d[e][c-1]){if(0===e||0<e&&d[e][c]!=d[e-1][c]){var a=parseInt(o.attr("colspan"),10)+1;o.attr("colspan",a),o.css("width",(o.data("old-width")*u/f+u).toFixed(4)+"%"),o.removeData("old-width")}
}else s=0<i.find("th").length?'<th style="width: '+u.toFixed(4)+'%;"><br></th>':'<td style="width: '+u.toFixed(4)+'%;"><br></td>',-1==t?i.prepend(s):null==t?i.append(s):"before"==l?o.before(s):"after"==l&&o.after(s)}),e.find("th, td").each(function(){(i=ze(this)).data("old-width")&&(i.css("width",(i.data("old-width")*u/f).toFixed(4)+"%"),i.removeData("old-width"))}),y.popups.isVisible("table.edit")&&p()}}function _(){var e=be();if(0<e.length){var t,i,n,r=N(),s=B(r);if(0===s.min_j&&s.max_j==r[0].length-1)g();else{var o=100/r[0].length,a=100/(r[0].length-s.max_j+s.min_j-1);for(e.find("th, td").each(function(){(n=ze(this)).hasClass("fr-selected-cell")||n.data("old-width",n.outerWidth()/e.outerWidth()*100)}),i=s.max_j;i>=s.min_j;i--)for(t=0;t<r.length;t++)if(0===t||r[t][i]!=r[t-1][i])if(n=ze(r[t][i]),1<(parseInt(n.attr("colspan"),10)||1)){var l=parseInt(n.attr("colspan"),10)-1;1==l?n.removeAttr("colspan"):n.attr("colspan",l),n.css("width",((n.data("old-width")-ce(i,r))*a/o).toFixed(4)+"%"),n.removeData("old-width")}else{var c=ze(n.parent().get(0));n.remove(),0===c.find("> th, > td").length&&(0===c.prev().length||0===c.next().length||c.prev().find("> th[rowspan], > td[rowspan]").length<c.prev().find("> th, > td").length)&&c.remove()}A(0,r.length-1,0,r[0].length-1,e),0<s.min_j?y.selection.setAtEnd(r[s.min_i][s.min_j-1]):y.selection.setAtEnd(r[s.min_i][0]),y.selection.restore(),y.popups.hide("table.edit"),e.find("th, td").each(function(){(n=ze(this)).data("old-width")&&(n.css("width",(n.data("old-width")*a/o).toFixed(4)+"%"),n.removeData("old-width"))})}}}function T(e,t,i){var n,r,s,o,a,l=0,c=N(i);for(t=Math.min(t,c[0].length-1),r=e;r<=t;r++)if(!(e<r&&c[0][r]==c[0][r-1])&&1<(o=parseInt(c[0][r].getAttribute("colspan"),10)||1)&&c[0][r]==c[0][r+1])for(l=o-1,n=1;n<c.length;n++)if(c[n][r]!=c[n-1][r]){for(s=r;s<r+o;s++)if(1<(a=parseInt(c[n][s].getAttribute("colspan"),10)||1)&&c[n][s]==c[n][s+1])s+=l=Math.min(l,a-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&w(c,l,"colspan",0,c.length-1,e,t)}function C(e,t,i){var n,r,s,o,a,l=0,c=N(i);for(t=Math.min(t,c.length-1),n=e;n<=t;n++)if(!(e<n&&c[n][0]==c[n-1][0])&&1<(o=parseInt(c[n][0].getAttribute("rowspan"),10)||1)&&c[n][0]==c[n+1][0])for(l=o-1,r=1;r<c[0].length;r++)if(c[n][r]!=c[n][r-1]){for(s=n;s<n+o;s++)if(1<(a=parseInt(c[s][r].getAttribute("rowspan"),10)||1)&&c[s][r]==c[s+1][r])s+=l=Math.min(l,a-1);else if(!(l=Math.max(0,l-1)))break;if(!l)break}l&&w(c,l,"rowspan",e,t,0,c[0].length-1)}function w(e,t,i,n,r,s,o){var a,l,c;for(a=n;a<=r;a++)for(l=s;l<=o;l++)n<a&&e[a][l]==e[a-1][l]||s<l&&e[a][l]==e[a][l-1]||1<(c=parseInt(e[a][l].getAttribute(i),10)||1)&&(1<c-t?e[a][l].setAttribute(i,c-t):e[a][l].removeAttribute(i))}function A(e,t,i,n,r){C(e,t,r),T(i,n,r)}function S(){if(1<ve().length&&(0===y.$el.find("th.fr-selected-cell").length||0===y.$el.find("td.fr-selected-cell").length)){M();var e,t,i=B(N()),n=y.$el.find(".fr-selected-cell"),r=ze(n[0]),s=r.parent().find(".fr-selected-cell"),o=r.closest("table"),a=r.html(),l=0;for(e=0;e<s.length;e++)l+=ze(s[e]).outerWidth();for(r.css("width",(l/o.outerWidth()*100).toFixed(4)+"%"),i.min_j<i.max_j&&r.attr("colspan",i.max_j-i.min_j+1),i.min_i<i.max_i&&r.attr("rowspan",i.max_i-i.min_i+1),e=1;e<n.length;e++)"<br>"!=(t=ze(n[e])).html()&&""!==t.html()&&(a+="<br>"+t.html()),t.remove();r.html(a),y.selection.setAtEnd(r.get(0)),y.selection.restore(),y.toolbar.enable(),C(i.min_i,i.max_i,o);var c=o.find("tr:empty");for(e=c.length-1;0<=e;e--)ze(c[e]).remove();T(i.min_j,i.max_j,o),p()}}function x(){if(1==ve().length){var e=y.$el.find(".fr-selected-cell"),t=e.parent(),i=e.closest("table"),n=parseInt(e.attr("rowspan"),10),r=N(),s=O(e.get(0),r),o=e.clone().html("<br>");if(1<n){var a=Math.ceil(n/2);1<a?e.attr("rowspan",a):e.removeAttr("rowspan"),1<n-a?o.attr("rowspan",n-a):o.removeAttr("rowspan");for(var l=s.row+a,c=0===s.col?s.col:s.col-1;0<=c&&(r[l][c]==r[l][c-1]||0<l&&r[l][c]==r[l-1][c]);)c--;-1==c?ze(i.find("tr").not(i.find("table tr")).get(l)).prepend(o):ze(r[l][c]).after(o)}else{var d,f=ze("<tr>").append(o);for(d=0;d<r[0].length;d++)if(0===d||r[s.row][d]!=r[s.row][d-1]){var u=ze(r[s.row][d]);u.is(e)||u.attr("rowspan",(parseInt(u.attr("rowspan"),10)||1)+1)}t.after(f)}$(),y.popups.hide("table.edit")}}function R(){if(1==ve().length){var e=y.$el.find(".fr-selected-cell"),t=parseInt(e.attr("colspan"),10)||1,i=e.parent().outerWidth(),n=e.outerWidth(),r=e.clone().html("<br>"),s=N(),o=O(e.get(0),s);if(1<t){var a=Math.ceil(t/2);n=de(o.col,o.col+a-1,s)/i*100;var l=de(o.col+a,o.col+t-1,s)/i*100;1<a?e.attr("colspan",a):e.removeAttr("colspan"),1<t-a?r.attr("colspan",t-a):r.removeAttr("colspan"),e.css("width",n.toFixed(4)+"%"),r.css("width",l.toFixed(4)+"%")}else{var c;for(c=0;c<s.length;c++)if(0===c||s[c][o.col]!=s[c-1][o.col]){var d=ze(s[c][o.col]);if(!d.is(e)){var f=(parseInt(d.attr("colspan"),10)||1)+1;d.attr("colspan",f)}}n=n/i*100/2,e.css("width",n.toFixed(4)+"%"),r.css("width",n.toFixed(4)+"%")}e.after(r),$(),y.popups.hide("table.edit")}}function k(e){"REMOVE"!=e?y.$el.find(".fr-selected-cell").css("background-color",y.helpers.HEXtoRGB(e)):y.$el.find(".fr-selected-cell").css("background-color","")}function L(e){y.$el.find(".fr-selected-cell").css("vertical-align",e)}function D(e){y.$el.find(".fr-selected-cell").css("text-align",e)}function I(e,t,i,n){if(0<t.length){if(!i){var r=Object.keys(n);r.splice(r.indexOf(e),1),t.removeClass(r.join(" "))}t.toggleClass(e)}}function N(e){var c=[];if(null==(e=e||null)&&0<ve().length&&(e=be()),e)return e.find("tr").not(e.find("table tr")).each(function(a,e){var t=ze(e),l=0;t.find("> th, > td").each(function(e,t){for(var i=ze(t),n=parseInt(i.attr("colspan"),10)||1,r=parseInt(i.attr("rowspan"),10)||1,s=a;s<a+r;s++)for(var o=l;o<l+n;o++)c[s]||(c[s]=[]),c[s][o]?l++:c[s][o]=t;l+=n})}),c}function O(e,t){for(var i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++)if(t[i][n]==e)return{row:i,col:n}}function F(e,t,i){for(var n=e+1,r=t+1;n<i.length;){if(i[n][t]!=i[e][t]){n--;break}n++}for(n==i.length&&n--;r<i[e].length;){if(i[e][r]!=i[e][t]){r--;break}r++}return r==i[e].length&&r--,{row:n,col:r}}function M(){y.el.querySelector(".fr-cell-fixed")&&y.el.querySelector(".fr-cell-fixed").classList.remove("fr-cell-fixed"),y.el.querySelector(".fr-cell-handler")&&y.el.querySelector(".fr-cell-handler").classList.remove("fr-cell-handler")}function $(){var e=y.$el.find(".fr-selected-cell");0<e.length&&e.each(function(){var e=ze(this);e.removeClass("fr-selected-cell"),""===e.attr("class")&&e.removeAttr("class")}),M()}function P(){setTimeout(function(){y.selection.clear(),y.$el.addClass("fr-no-selection"),y.$el.blur()},0)}function B(e){var t=y.$el.find(".fr-selected-cell");if(0<t.length){var i,n=e.length,r=0,s=e[0].length,o=0;for(i=0;i<t.length;i++){var a=O(t[i],e),l=F(a.row,a.col,e);n=Math.min(a.row,n),r=Math.max(l.row,r),s=Math.min(a.col,s),o=Math.max(l.col,o)}return{min_i:n,max_i:r,min_j:s,max_j:o}}return null}function H(e,t,i,n,r){var s,o,a,l,c=e,d=t,f=i,u=n;for(s=c;s<=d;s++)(1<(parseInt(ze(r[s][f]).attr("rowspan"),10)||1)||1<(parseInt(ze(r[s][f]).attr("colspan"),10)||1))&&(l=F((a=O(r[s][f],r)).row,a.col,r),c=Math.min(a.row,c),d=Math.max(l.row,d),f=Math.min(a.col,f),u=Math.max(l.col,u)),(1<(parseInt(ze(r[s][u]).attr("rowspan"),10)||1)||1<(parseInt(ze(r[s][u]).attr("colspan"),10)||1))&&(l=F((a=O(r[s][u],r)).row,a.col,r),c=Math.min(a.row,c),d=Math.max(l.row,d),f=Math.min(a.col,f),u=Math.max(l.col,u));for(o=f;o<=u;o++)(1<(parseInt(ze(r[c][o]).attr("rowspan"),10)||1)||1<(parseInt(ze(r[c][o]).attr("colspan"),10)||1))&&(l=F((a=O(r[c][o],r)).row,a.col,r),c=Math.min(a.row,c),d=Math.max(l.row,d),f=Math.min(a.col,f),u=Math.max(l.col,u)),(1<(parseInt(ze(r[d][o]).attr("rowspan"),10)||1)||1<(parseInt(ze(r[d][o]).attr("colspan"),10)||1))&&(l=F((a=O(r[d][o],r)).row,a.col,r),c=Math.min(a.row,c),d=Math.max(l.row,d),f=Math.min(a.col,f),u=Math.max(l.col,u));return c==e&&d==t&&f==i&&u==n?{min_i:e,max_i:t,min_j:i,max_j:n}:H(c,d,f,u,r)}function W(e){var t=B(e),i=ze(e[t.min_i][t.min_j]),n=ze(e[t.min_i][t.max_j]),r=ze(e[t.max_i][t.min_j]);return{left:i.offset().left,right:n.offset().left+n.outerWidth(),top:i.offset().top,bottom:r.offset().top+r.outerHeight()}}function U(e,t){if(ze(e).is(t))$(),y.edit.on(),ze(e).addClass("fr-selected-cell");else{P(),y.edit.off();var i=N(),n=O(e,i),r=O(t,i),s=H(Math.min(n.row,r.row),Math.max(n.row,r.row),Math.min(n.col,r.col),Math.max(n.col,r.col),i);$(),e.classList.add("fr-cell-fixed"),t.classList.add("fr-cell-handler");for(var o=s.min_i;o<=s.max_i;o++)for(var a=s.min_j;a<=s.max_j;a++)ze(i[o][a]).addClass("fr-selected-cell")}}function K(e){var t=null,i=ze(e.target);return"TD"==e.target.tagName||"TH"==e.target.tagName?t=e.target:0<i.closest("td").length?t=i.closest("td").get(0):0<i.closest("th").length&&(t=i.closest("th").get(0)),0===y.$el.find(t).length?null:t}function z(){$(),y.popups.hide("table.edit")}function Y(e){var t=K(e);if(0<ve().length&&!t&&z(),!y.edit.isDisabled()||y.popups.isVisible("table.edit"))if(1!=e.which||1==e.which&&y.helpers.isMac()&&e.ctrlKey)(3==e.which||1==e.which&&y.helpers.isMac()&&e.ctrlKey)&&t&&z();else if(Ae=!0,t){0<ve().length&&!e.shiftKey&&z(),e.stopPropagation(),y.events.trigger("image.hideResizer"),y.events.trigger("video.hideResizer"),we=!0;var i=t.tagName.toLowerCase();e.shiftKey&&0<y.$el.find(i+".fr-selected-cell").length?ze(y.$el.find(i+".fr-selected-cell").closest("table")).is(ze(t).closest("table"))?U(Se,t):P():((y.keys.ctrlKey(e)||e.shiftKey)&&(1<ve().length||0===ze(t).find(y.selection.element()).length&&!ze(t).is(y.selection.element()))&&P(),U(Se=t,Se))}}function j(e){if(we||y.$tb.is(e.target)||y.$tb.is(ze(e.target).closest(y.$tb.get(0)))||(0<ve().length&&y.toolbar.enable(),$()),!(1!=e.which||1==e.which&&y.helpers.isMac()&&e.ctrlKey)&&(Ae=!1,we&&(we=!1,K(e)||1!=ve().length?0<ve().length&&(y.selection.isCollapsed()?p():$()):$()),Re)){Re=!1,Te.removeClass("fr-moving"),y.$el.removeClass("fr-no-selection"),y.edit.on();var t=parseFloat(Te.css("left"))+y.opts.tableResizerOffset;y.opts.iframe&&(t-=y.$iframe.offset().left),Te.data("release-position",t),Te.removeData("max-left"),Te.removeData("max-right"),le(e),ee()}}function G(e){if(!0===we){if(ze(e.currentTarget).closest("table").is(be())){if("TD"==e.currentTarget.tagName&&0===y.$el.find("th.fr-selected-cell").length)return void U(Se,e.currentTarget);if("TH"==e.currentTarget.tagName&&0===y.$el.find("td.fr-selected-cell").length)return void U(Se,e.currentTarget)}P()}}function q(e,t){for(var i=e;i&&"TABLE"!=i.tagName&&i.parentNode!=y.el;)i=i.parentNode;if(i&&"TABLE"==i.tagName){var n=N(ze(i));"up"==t?X(O(e,n),i,n):"down"==t&&Q(O(e,n),i,n)}}function V(e,t,i,n){for(var r,s=t;s!=y.el&&"TD"!=s.tagName&&"TH"!=s.tagName&&("up"==n?r=s.previousElementSibling:"down"==n&&(r=s.nextElementSibling),!r);)s=s.parentNode;"TD"==s.tagName||"TH"==s.tagName?q(s,n):r&&("up"==n&&y.selection.setAtEnd(r),"down"==n&&y.selection.setAtStart(r))}function X(e,t,i){0<e.row?y.selection.setAtEnd(i[e.row-1][e.col]):V(e,t,i,"up")}function Q(e,t,i){var n=parseInt(i[e.row][e.col].getAttribute("rowspan"),10)||1;e.row<i.length-n?y.selection.setAtStart(i[e.row+n][e.col]):V(e,t,i,"down")}function Z(e){var t=e.which,i=y.selection.blocks();if(i.length&&("TD"==(i=i[0]).tagName||"TH"==i.tagName)){for(var n=i;n&&"TABLE"!=n.tagName&&n.parentNode!=y.el;)n=n.parentNode;if(n&&"TABLE"==n.tagName&&(ze.FE.KEYCODE.ARROW_LEFT==t||ze.FE.KEYCODE.ARROW_UP==t||ze.FE.KEYCODE.ARROW_RIGHT==t||ze.FE.KEYCODE.ARROW_DOWN==t)&&(0<ve().length&&z(),y.browser.webkit&&(ze.FE.KEYCODE.ARROW_UP==t||ze.FE.KEYCODE.ARROW_DOWN==t))){var r=y.selection.ranges(0).startContainer;if(r.nodeType==Node.TEXT_NODE&&(ze.FE.KEYCODE.ARROW_UP==t&&r.previousSibling||ze.FE.KEYCODE.ARROW_DOWN==t&&r.nextSibling))return;e.preventDefault(),e.stopPropagation();var s=N(ze(n)),o=O(i,s);return ze.FE.KEYCODE.ARROW_UP==t?X(o,n,s):ze.FE.KEYCODE.ARROW_DOWN==t&&Q(o,n,s),y.selection.restore(),!1}}}function J(){y.shared.$table_resizer||(y.shared.$table_resizer=ze('<div class="fr-table-resizer"><div></div></div>')),Te=y.shared.$table_resizer,y.events.$on(Te,"mousedown",function(e){return!y.core.sameInstance(Te)||(0<ve().length&&z(),1==e.which?(y.selection.save(),Re=!0,Te.addClass("fr-moving"),P(),y.edit.off(),Te.find("div").css("opacity",1),!1):void 0)}),y.events.$on(Te,"mousemove",function(e){if(!y.core.sameInstance(Te))return!0;Re&&(y.opts.iframe&&(e.pageX-=y.$iframe.offset().left),fe(e))}),y.events.on("shared.destroy",function(){Te.html("").removeData().remove(),Te=null},!0),y.events.on("destroy",function(){y.$el.find(".fr-selected-cell").removeClass("fr-selected-cell"),Te.hide().appendTo(ze("body:first"))},!0)}function ee(){Te&&(Te.find("div").css("opacity",0),Te.css("top",0),Te.css("left",0),Te.css("height",0),Te.find("div").css("height",0),Te.hide())}function te(){Ce&&Ce.removeClass("fr-visible").css("left","-9999px")}function ie(e,t){var i=ze(t),n=i.closest("table"),r=n.parent();if(t&&"TD"!=t.tagName&&"TH"!=t.tagName&&(0<i.closest("td").length?t=i.closest("td"):0<i.closest("th").length&&(t=i.closest("th"))),!t||"TD"!=t.tagName&&"TH"!=t.tagName)Te&&i.get(0)!=Te.get(0)&&i.parent().get(0)!=Te.get(0)&&y.core.sameInstance(Te)&&ee();else{if(i=ze(t),0===y.$el.find(i).length)return!1;var s=i.offset().left-1,o=s+i.outerWidth();if(Math.abs(e.pageX-s)<=y.opts.tableResizerOffset||Math.abs(o-e.pageX)<=y.opts.tableResizerOffset){var a,l,c,d,f,u=N(n),p=O(t,u),h=F(p.row,p.col,u),g=n.offset().top,m=n.outerHeight()-1;"rtl"!=y.opts.direction?e.pageX-s<=y.opts.tableResizerOffset?(c=s,0<p.col?(d=s-ce(p.col-1,u)+y.opts.tableResizingLimit,f=s+ce(p.col,u)-y.opts.tableResizingLimit,a=p.col-1,l=p.col):(a=null,l=0,d=n.offset().left-1-parseInt(n.css("margin-left"),10),f=n.offset().left-1+n.width()-u[0].length*y.opts.tableResizingLimit)):o-e.pageX<=y.opts.tableResizerOffset&&(c=o,h.col<u[h.row].length&&u[h.row][h.col+1]?(d=o-ce(h.col,u)+y.opts.tableResizingLimit,f=o+ce(h.col+1,u)-y.opts.tableResizingLimit,a=h.col,l=h.col+1):(a=h.col,l=null,d=n.offset().left-1+u[0].length*y.opts.tableResizingLimit,f=r.offset().left-1+r.width()+parseFloat(r.css("padding-left")))):o-e.pageX<=y.opts.tableResizerOffset?(c=o,0<p.col?(d=o-ce(p.col,u)+y.opts.tableResizingLimit,f=o+ce(p.col-1,u)-y.opts.tableResizingLimit,a=p.col,l=p.col-1):(a=null,l=0,d=n.offset().left+u[0].length*y.opts.tableResizingLimit,f=r.offset().left-1+r.width()+parseFloat(r.css("padding-left")))):e.pageX-s<=y.opts.tableResizerOffset&&(c=s,h.col<u[h.row].length&&u[h.row][h.col+1]?(d=s-ce(h.col+1,u)+y.opts.tableResizingLimit,f=s+ce(h.col,u)-y.opts.tableResizingLimit,a=h.col+1,l=h.col):(a=h.col,l=null,d=r.offset().left+parseFloat(r.css("padding-left")),f=n.offset().left-1+n.width()-u[0].length*y.opts.tableResizingLimit)),Te||J(),Te.data("table",n),Te.data("first",a),Te.data("second",l),Te.data("instance",y),y.$wp.append(Te);var v=c-y.win.pageXOffset-y.opts.tableResizerOffset,b=g-y.win.pageYOffset;y.opts.iframe&&(v+=y.$iframe.offset().left-y.helpers.scrollLeft(),b+=y.$iframe.offset().top-y.helpers.scrollTop(),d+=y.$iframe.offset().left,f+=y.$iframe.offset().left),Te.data("max-left",d),Te.data("max-right",f),Te.data("origin",c-y.win.pageXOffset),Te.css("top",b),Te.css("left",v),Te.css("height",m),Te.find("div").css("height",m),Te.css("padding-left",y.opts.tableResizerOffset),Te.css("padding-right",y.opts.tableResizerOffset),Te.show()}else y.core.sameInstance(Te)&&ee()}}function ne(e,t){if(y.$box.find(".fr-line-breaker").is(":visible"))return!1;Ce||he(),y.$box.append(Ce),Ce.data("instance",y);var i,n=ze(t).find("tr:first"),r=e.pageX,s=0,o=0;y.opts.iframe&&(s+=y.$iframe.offset().left-y.helpers.scrollLeft(),o+=y.$iframe.offset().top-y.helpers.scrollTop()),n.find("th, td").each(function(){var e=ze(this);return e.offset().left<=r&&r<e.offset().left+e.outerWidth()/2?(i=parseInt(Ce.find("a").css("width"),10),Ce.css("top",o+e.offset().top-y.win.pageYOffset-i-5),Ce.css("left",s+e.offset().left-y.win.pageXOffset-i/2),Ce.data("selected-cell",e),Ce.data("position","before"),Ce.addClass("fr-visible"),!1):e.offset().left+e.outerWidth()/2<=r&&r<e.offset().left+e.outerWidth()?(i=parseInt(Ce.find("a").css("width"),10),Ce.css("top",o+e.offset().top-y.win.pageYOffset-i-5),Ce.css("left",s+e.offset().left+e.outerWidth()-y.win.pageXOffset-i/2),Ce.data("selected-cell",e),Ce.data("position","after"),Ce.addClass("fr-visible"),!1):void 0})}function re(e,t){if(y.$box.find(".fr-line-breaker").is(":visible"))return!1;Ce||he(),y.$box.append(Ce),Ce.data("instance",y);var i,n=ze(t),r=e.pageY,s=0,o=0;y.opts.iframe&&(s+=y.$iframe.offset().left-y.helpers.scrollLeft(),o+=y.$iframe.offset().top-y.helpers.scrollTop()),n.find("tr").each(function(){var e=ze(this);return e.offset().top<=r&&r<e.offset().top+e.outerHeight()/2?(i=parseInt(Ce.find("a").css("width"),10),Ce.css("top",o+e.offset().top-y.win.pageYOffset-i/2),Ce.css("left",s+e.offset().left-y.win.pageXOffset-i-5),Ce.data("selected-cell",e.find("td:first")),Ce.data("position","above"),Ce.addClass("fr-visible"),!1):e.offset().top+e.outerHeight()/2<=r&&r<e.offset().top+e.outerHeight()?(i=parseInt(Ce.find("a").css("width"),10),Ce.css("top",o+e.offset().top+e.outerHeight()-y.win.pageYOffset-i/2),Ce.css("left",s+e.offset().left-y.win.pageXOffset-i-5),Ce.data("selected-cell",e.find("td:first")),Ce.data("position","below"),Ce.addClass("fr-visible"),!1):void 0})}function se(e,t){if(0===ve().length){var i,n,r;if(t&&("HTML"==t.tagName||"BODY"==t.tagName||y.node.isElement(t)))for(i=1;i<=y.opts.tableInsertHelperOffset;i++){if(n=y.doc.elementFromPoint(e.pageX-y.win.pageXOffset,e.pageY-y.win.pageYOffset+i),ze(n).hasClass("fr-tooltip"))return!0;if(n&&("TH"==n.tagName||"TD"==n.tagName||"TABLE"==n.tagName)&&(ze(n).parents(".fr-wrapper").length||y.opts.iframe))return ne(e,ze(n).closest("table")),!0;if(r=y.doc.elementFromPoint(e.pageX-y.win.pageXOffset+i,e.pageY-y.win.pageYOffset),ze(r).hasClass("fr-tooltip"))return!0;if(r&&("TH"==r.tagName||"TD"==r.tagName||"TABLE"==r.tagName)&&(ze(r).parents(".fr-wrapper").length||y.opts.iframe))return re(e,ze(r).closest("table")),!0}y.core.sameInstance(Ce)&&te()}}function oe(e){xe=null;var t=y.doc.elementFromPoint(e.pageX-y.win.pageXOffset,e.pageY-y.win.pageYOffset);y.opts.tableResizer&&(!y.popups.areVisible()||y.popups.areVisible()&&y.popups.isVisible("table.edit"))&&ie(e,t),!y.opts.tableInsertHelper||y.popups.areVisible()||y.$tb.hasClass("fr-inline")&&y.$tb.is(":visible")||se(e,t)}function ae(){if(Re){var e=Te.data("table").offset().top-y.win.pageYOffset;y.opts.iframe&&(e+=y.$iframe.offset().top-y.helpers.scrollTop()),Te.css("top",e)}}function le(){var e=Te.data("origin"),t=Te.data("release-position");if(e!==t){var i=Te.data("first"),n=Te.data("second"),r=Te.data("table"),s=r.outerWidth();if(y.undo.canDo()||y.undo.saveStep(),null!==i&&null!==n){var o,a,l,c=N(r),d=[],f=[],u=[],p=[];for(o=0;o<c.length;o++)a=ze(c[o][i]),l=ze(c[o][n]),d[o]=a.outerWidth(),u[o]=l.outerWidth(),f[o]=d[o]/s*100,p[o]=u[o]/s*100;for(o=0;o<c.length;o++){a=ze(c[o][i]),l=ze(c[o][n]);var h=(f[o]*(d[o]+t-e)/d[o]).toFixed(4);a.css("width",h+"%"),l.css("width",(f[o]+p[o]-h).toFixed(4)+"%")}}else{var g,m=r.parent(),v=s/m.width()*100,b=(parseInt(r.css("margin-left"),10)||0)/m.width()*100,E=(parseInt(r.css("margin-right"),10)||0)/m.width()*100;"rtl"==y.opts.direction&&0===n||"rtl"!=y.opts.direction&&0!==n?(g=(s+t-e)/s*v,r.css("margin-right","calc(100% - "+Math.round(g).toFixed(4)+"% - "+Math.round(b).toFixed(4)+"%)")):("rtl"==y.opts.direction&&0!==n||"rtl"!=y.opts.direction&&0===n)&&(g=(s-t+e)/s*v,r.css("margin-left","calc(100% - "+Math.round(g).toFixed(4)+"% - "+Math.round(E).toFixed(4)+"%)")),r.css("width",Math.round(g).toFixed(4)+"%")}y.selection.restore(),y.undo.saveStep()}Te.removeData("origin"),Te.removeData("release-position"),Te.removeData("first"),Te.removeData("second"),Te.removeData("table")}function ce(e,t){var i,n=ze(t[0][e]).outerWidth();for(i=1;i<t.length;i++)n=Math.min(n,ze(t[i][e]).outerWidth());return n}function de(e,t,i){var n,r=0;for(n=e;n<=t;n++)r+=ce(n,i);return r}function fe(e){if(1<ve().length&&Ae&&P(),!1===Ae&&!1===we&&!1===Re)xe&&clearTimeout(xe),y.edit.isDisabled()&&!y.popups.isVisible("table.edit")||(xe=setTimeout(oe,30,e));else if(Re){var t=e.pageX-y.win.pageXOffset;y.opts.iframe&&(t+=y.$iframe.offset().left);var i=Te.data("max-left"),n=Te.data("max-right");i<=t&&t<=n?Te.css("left",t-y.opts.tableResizerOffset):t<i&&parseFloat(Te.css("left"),10)>i-y.opts.tableResizerOffset?Te.css("left",i-y.opts.tableResizerOffset):n<t&&parseFloat(Te.css("left"),10)<n-y.opts.tableResizerOffset&&Te.css("left",n-y.opts.tableResizerOffset)}else Ae&&te()}function ue(e){y.node.isEmpty(e.get(0))?e.prepend(ze.FE.MARKERS):e.prepend(ze.FE.START_MARKER).append(ze.FE.END_MARKER)}function pe(e){if(e.which==ze.FE.KEYCODE.TAB){var t;if(0<ve().length)t=y.$el.find(".fr-selected-cell:last");else{var i=y.selection.element();"TD"==i.tagName||"TH"==i.tagName?t=ze(i):i!=y.el&&(0<ze(i).parentsUntil(y.$el,"td").length?t=ze(i).parents("td:first"):0<ze(i).parentsUntil(y.$el,"th").length&&(t=ze(i).parents("th:first")))}if(t)return e.preventDefault(),0<ze(y.selection.element()).parents("ol, ul").length||(z(),e.shiftKey?0<t.prev().length?ue(t.prev()):0<t.closest("tr").length&&0<t.closest("tr").prev().length?ue(t.closest("tr").prev().find("td:last")):0<t.closest("tbody").length&&0<t.closest("table").find("thead tr").length&&ue(t.closest("table").find("thead tr th:last")):0<t.next().length?ue(t.next()):0<t.closest("tr").length&&0<t.closest("tr").next().length?ue(t.closest("tr").next().find("td:first")):0<t.closest("thead").length&&0<t.closest("table").find("tbody tr").length?ue(t.closest("table").find("tbody tr td:first")):(t.addClass("fr-selected-cell"),v("below"),$(),ue(t.closest("tr").next().find("td:first"))),y.selection.restore(),!1)}}function he(){y.shared.$ti_helper||(y.shared.$ti_helper=ze('<div class="fr-insert-helper"><a class="fr-floating-btn" role="button" tabIndex="-1" title="'+y.language.translate("Insert")+'"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M22,16.75 L16.75,16.75 L16.75,22 L15.25,22.000 L15.25,16.75 L10,16.75 L10,15.25 L15.25,15.25 L15.25,10 L16.75,10 L16.75,15.25 L22,15.25 L22,16.75 Z"/></svg></a></div>'),y.events.bindClick(y.shared.$ti_helper,"a",function(){var e=Ce.data("selected-cell"),t=Ce.data("position"),i=Ce.data("instance")||y;"before"==t?(e.addClass("fr-selected-cell"),i.table.insertColumn(t),e.removeClass("fr-selected-cell")):"after"==t?(e.addClass("fr-selected-cell"),i.table.insertColumn(t),e.removeClass("fr-selected-cell")):"above"==t?(e.addClass("fr-selected-cell"),i.table.insertRow(t),e.removeClass("fr-selected-cell")):"below"==t&&(e.addClass("fr-selected-cell"),i.table.insertRow(t),e.removeClass("fr-selected-cell")),te()}),y.events.on("shared.destroy",function(){y.shared.$ti_helper.html("").removeData().remove(),y.shared.$ti_helper=null},!0),y.events.$on(y.shared.$ti_helper,"mousemove",function(e){e.stopPropagation()},!0),y.events.$on(ze(y.o_win),"scroll",function(){te()},!0),y.events.$on(y.$wp,"scroll",function(){te()},!0)),Ce=y.shared.$ti_helper,y.events.on("destroy",function(){Ce=null}),y.tooltip.bind(y.$box,".fr-insert-helper > a.fr-floating-btn")}function ge(){Se=null,clearTimeout(xe)}function me(){0<ve().length?p():(y.popups.hide("table.insert"),y.toolbar.showInline())}function ve(){return y.el.querySelectorAll(".fr-selected-cell")}function be(){var e=ve();if(e.length){for(var t=e[0];t&&"TABLE"!=t.tagName&&t.parentNode!=y.el;)t=t.parentNode;return ze(t&&"TABLE"==t.tagName?t:[])}return ze([])}function Ee(e){if(e.altKey&&e.which==ze.FE.KEYCODE.SPACE){var t,i=y.selection.element();if("TD"==i.tagName||"TH"==i.tagName?t=i:0<ze(i).closest("td").length?t=ze(i).closest("td").get(0):0<ze(i).closest("th").length&&(t=ze(i).closest("th").get(0)),t)return e.preventDefault(),U(t,t),p(),!1}}function ye(e){var t=ve();if(0<t.length){var i,n,r=N(),s=e.which;1==t.length?n=i=t[0]:(i=y.el.querySelector(".fr-cell-fixed"),n=y.el.querySelector(".fr-cell-handler"));var o=O(n,r);if(ze.FE.KEYCODE.ARROW_RIGHT==s){if(o.col<r[0].length-1)return U(i,r[o.row][o.col+1]),!1}else if(ze.FE.KEYCODE.ARROW_DOWN==s){if(o.row<r.length-1)return U(i,r[o.row+1][o.col]),!1}else if(ze.FE.KEYCODE.ARROW_LEFT==s){if(0<o.col)return U(i,r[o.row][o.col-1]),!1}else if(ze.FE.KEYCODE.ARROW_UP==s&&0<o.row)return U(i,r[o.row-1][o.col]),!1}}function _e(){if(!y.$wp)return!1;if(!y.helpers.isMobile()){Re=we=Ae=!1,y.events.$on(y.$el,"mousedown",Y),y.popups.onShow("image.edit",function(){$(),we=Ae=!1}),y.popups.onShow("link.edit",function(){$(),we=Ae=!1}),y.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&$()}),y.events.$on(y.$el,"mouseenter","th, td",G),y.events.$on(y.$win,"mouseup",j),y.opts.iframe&&y.events.$on(ze(y.o_win),"mouseup",j),y.events.$on(y.$win,"mousemove",fe),y.events.$on(ze(y.o_win),"scroll",ae),y.events.on("contentChanged",function(){0<ve().length&&(p(),y.$el.find("img").on("load.selected-cells",function(){ze(this).off("load.selected-cells"),0<ve().length&&p()}))}),y.events.$on(ze(y.o_win),"resize",function(){$()}),y.events.on("toolbar.esc",function(){if(0<ve().length)return y.events.disableBlur(),y.events.focus(),!1},!0),y.events.$on(y.$el,"keydown",function(e){e.shiftKey?!1===ye(e)&&setTimeout(function(){p()},0):Z(e)}),y.events.on("keydown",function(e){if(!1===pe(e))return!1;var t=ve();if(0<t.length){if(0<t.length&&y.keys.ctrlKey(e)&&e.which==ze.FE.KEYCODE.A)return $(),y.popups.isVisible("table.edit")&&y.popups.hide("table.edit"),t=[],!0;if(e.which==ze.FE.KEYCODE.ESC&&y.popups.isVisible("table.edit"))return $(),y.popups.hide("table.edit"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),t=[],!1;if(1<t.length&&e.which==ze.FE.KEYCODE.BACKSPACE){y.undo.saveStep();for(var i=0;i<t.length;i++)ze(t[i]).html("<br>"),i==t.length-1&&ze(t[i]).prepend(ze.FE.MARKERS);return y.selection.restore(),y.undo.saveStep(),t=[],!1}if(1<t.length&&e.which!=ze.FE.KEYCODE.F10&&!y.keys.isBrowserAction(e))return e.preventDefault(),t=[],!1}else if(t=[],!1===Ee(e))return!1},!0);var t=[];y.events.on("html.beforeGet",function(){t=ve();for(var e=0;e<t.length;e++)t[e].className=(t[e].className||"").replace(/fr-selected-cell/g,"")}),y.events.on("html.afterGet",function(){for(var e=0;e<t.length;e++)t[e].className=(t[e].className?t[e].className.trim()+" ":"")+"fr-selected-cell";t=[]}),s(!0),l(!0)}y.events.on("destroy",ge)}var Te,Ce,we,Ae,Se,xe,Re;return{_init:_e,insert:t,remove:g,insertRow:v,deleteRow:b,insertColumn:E,deleteColumn:_,mergeCells:S,splitCellVertically:R,splitCellHorizontally:x,addHeader:i,removeHeader:m,setBackground:k,showInsertPopup:e,showEditPopup:p,showColorsPopup:n,back:me,verticalAlign:L,horizontalAlign:D,applyStyle:I,selectedTable:be,selectedCells:ve}},ze.FE.DefineIcon("insertTable",{NAME:"table"}),ze.FE.RegisterCommand("insertTable",{title:"Insert Table",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("table.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("table.insert")):this.table.showInsertPopup()},plugin:"table"}),ze.FE.RegisterCommand("tableInsert",{callback:function(e,t,i){this.table.insert(t,i),this.popups.hide("table.insert")}}),ze.FE.DefineIcon("tableHeader",{NAME:"header"}),ze.FE.RegisterCommand("tableHeader",{title:"Table Header",focus:!1,toggle:!0,callback:function(){this.popups.get("table.edit").find('.fr-command[data-cmd="tableHeader"]').hasClass("fr-active")?this.table.removeHeader():this.table.addHeader()},refresh:function(e){var t=this.table.selectedTable();0<t.length&&(0===t.find("th").length?e.removeClass("fr-active").attr("aria-pressed",!1):e.addClass("fr-active").attr("aria-pressed",!0))}}),ze.FE.DefineIcon("tableRows",{NAME:"bars"}),ze.FE.RegisterCommand("tableRows",{type:"dropdown",focus:!1,title:"Row",options:{above:"Insert row above",below:"Insert row below","delete":"Delete row"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableRows.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableRows" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+"</ul>"},callback:function(e,t){"above"==t||"below"==t?this.table.insertRow(t):this.table.deleteRow()}}),ze.FE.DefineIcon("tableColumns",{NAME:"bars fa-rotate-90"}),ze.FE.RegisterCommand("tableColumns",{type:"dropdown",focus:!1,title:"Column",options:{before:"Insert column before",after:"Insert column after","delete":"Delete column"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableColumns.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableColumns" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+"</ul>"},callback:function(e,t){"before"==t||"after"==t?this.table.insertColumn(t):this.table.deleteColumn()}}),ze.FE.DefineIcon("tableCells",{NAME:"square-o"}),ze.FE.RegisterCommand("tableCells",{type:"dropdown",focus:!1,title:"Cell",options:{merge:"Merge cells","vertical-split":"Vertical split","horizontal-split":"Horizontal split"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableCells.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCells" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+"</ul>"},callback:function(e,t){"merge"==t?this.table.mergeCells():"vertical-split"==t?this.table.splitCellVertically():this.table.splitCellHorizontally()},refreshOnShow:function(e,t){1<this.$el.find(".fr-selected-cell").length?(t.find('a[data-param1="vertical-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="horizontal-split"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="merge"]').removeClass("fr-disabled").attr("aria-disabled",!1)):(t.find('a[data-param1="merge"]').addClass("fr-disabled").attr("aria-disabled",!0),t.find('a[data-param1="vertical-split"]').removeClass("fr-disabled").attr("aria-disabled",!1),t.find('a[data-param1="horizontal-split"]').removeClass("fr-disabled").attr("aria-disabled",!1))}}),ze.FE.DefineIcon("tableRemove",{NAME:"trash"}),ze.FE.RegisterCommand("tableRemove",{title:"Remove Table",focus:!1,callback:function(){this.table.remove()}}),ze.FE.DefineIcon("tableStyle",{NAME:"paint-brush"}),ze.FE.RegisterCommand("tableStyle",{title:"Table Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableStyle" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell").closest("table"),this.opts.tableMultipleStyles,this.opts.tableStyles)},refreshOnShow:function(e,t){var i=this.$el.find(".fr-selected-cell").closest("table");i&&t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=i.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),ze.FE.DefineIcon("tableCellBackground",{NAME:"tint"}),ze.FE.RegisterCommand("tableCellBackground",{title:"Cell Background",focus:!1,popup:!0,callback:function(){this.table.showColorsPopup()}}),ze.FE.RegisterCommand("tableCellBackgroundColor",{undo:!0,focus:!1,callback:function(e,t){this.table.setBackground(t)}}),ze.FE.DefineIcon("tableBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("tableBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.table.back()},refresh:function(e){0!==this.table.selectedCells().length||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.DefineIcon("tableCellVerticalAlign",{NAME:"arrows-v"}),ze.FE.RegisterCommand("tableCellVerticalAlign",{type:"dropdown",focus:!1,title:"Vertical Align",options:{Top:"Align Top",Middle:"Align Middle",Bottom:"Align Bottom"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableCellVerticalAlign.options
;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellVerticalAlign" data-param1="'+i.toLowerCase()+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(i)+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.verticalAlign(t)},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.$el.find(".fr-selected-cell").css("vertical-align")+'"]').addClass("fr-active").attr("aria-selected",!0)}}),ze.FE.DefineIcon("tableCellHorizontalAlign",{NAME:"align-left"}),ze.FE.DefineIcon("align-left",{NAME:"align-left"}),ze.FE.DefineIcon("align-right",{NAME:"align-right"}),ze.FE.DefineIcon("align-center",{NAME:"align-center"}),ze.FE.DefineIcon("align-justify",{NAME:"align-justify"}),ze.FE.RegisterCommand("tableCellHorizontalAlign",{type:"dropdown",focus:!1,title:"Horizontal Align",options:{left:"Align Left",center:"Align Center",right:"Align Right",justify:"Align Justify"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.tableCellHorizontalAlign.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="tableCellHorizontalAlign" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.icon.create("align-"+i)+'<span class="fr-sr-only">'+this.language.translate(t[i])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.table.horizontalAlign(t)},refresh:function(e){var t=this.table.selectedCells();t.length&&e.find("> *:first").replaceWith(this.icon.create("align-"+this.helpers.getAlignment(ze(t[0]))))},refreshOnShow:function(e,t){t.find('.fr-command[data-param1="'+this.helpers.getAlignment(this.$el.find(".fr-selected-cell:first"))+'"]').addClass("fr-active").attr("aria-selected",!0)}}),ze.FE.DefineIcon("tableCellStyle",{NAME:"magic"}),ze.FE.RegisterCommand("tableCellStyle",{title:"Cell Style",type:"dropdown",focus:!1,html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.tableCellStyles;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="tableCellStyle" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.language.translate(t[i])+"</a></li>");return e+"</ul>"},callback:function(e,t){this.table.applyStyle(t,this.$el.find(".fr-selected-cell"),this.opts.tableCellMultipleStyles,this.opts.tableCellStyles)},refreshOnShow:function(e,t){var i=this.$el.find(".fr-selected-cell:first");i&&t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=i.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),ze.FE.DefineIcon("tableColorRemove",{NAME:"eraser"}),ze.FE.URLRegEx="(^| |\\u00A0)("+ze.FE.LinkRegEx+"|([a-z0-9+-_.]{1,}@[a-z0-9+-_.]{1,}))$",ze.FE.PLUGINS.url=function(a){function t(e,t,i){for(var n="";i.length&&"."==i[i.length-1];)n+=".",i=i.substring(0,i.length-1);var r=i;return a.opts.linkConvertEmailAddress&&ze.FE.MAIL_REGEX.test(r)&&!/^mailto:.*/i.test(r)&&(r="mailto:"+r),/^((http|https|ftp|ftps|mailto|tel|sms|notes|data)\:)/i.test(r)||(r="//"+r),(t||"")+"<a"+(a.opts.linkAlwaysBlank?' target="_blank"':"")+(o?' rel="'+o+'"':"")+' href="'+r+'">'+i.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</a>"+n}function i(){return new RegExp(ze.FE.URLRegEx,"gi")}function l(e){return a.opts.linkAlwaysNoFollow&&(o="nofollow"),a.opts.linkAlwaysBlank&&(o?o+=" noopener noreferrer":o="noopener noreferrer"),e.replace(i(),t)}function n(e){return!!e&&("A"===e.tagName||!(!e.parentNode||e.parentNode==a.el)&&n(e.parentNode))}function r(e){var t=e.split(" ");return t[t.length-1]}function s(){var e=a.selection.ranges(0).startContainer;if(!e||e.nodeType!==Node.TEXT_NODE)return!1;if(n(e))return!1;if(i().test(r(e.textContent)))ze(e).before(l(e.textContent)),e.parentNode.removeChild(e);else if(e.previousSibling&&"A"===e.previousSibling.tagName){var t=e.previousSibling.innerText+e.textContent;i().test(r(t))&&(ze(e.previousSibling).replaceWith(l(t)),e.parentNode.removeChild(e))}}function e(){a.events.on("paste.afterCleanup",function(e){var t=a.doc.createElement("div");t.innerHTML=e;for(var i=a.doc.createTreeWalker(t,NodeFilter.SHOW_TEXT,a.node.filter(function(e){return new RegExp(ze.FE.URLRegEx,"gi").test(e.textContent)}),!1),n=[];i.nextNode();){var r=i.currentNode;n.push(r)}for(var s=0;s<n.length;s++){var o=n[s];ze(o).after(l(o.textContent)).remove()}return t.innerHTML}),a.events.on("keydown",function(e){var t=e.which;!a.selection.isCollapsed()||t!=ze.FE.KEYCODE.ENTER&&t!=ze.FE.KEYCODE.SPACE&&t!=ze.FE.KEYCODE.PERIOD||s()},!0)}var o=null;return{_init:e}},ze.extend(ze.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:"https://i.froala.com/upload"}),ze.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"//www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?/i,url_text:"//player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"//www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"//rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&\/]+)\/?(?:[^_.&]+)?/g,url_text:"//play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],ze.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,ze.FE.PLUGINS.video=function(f){function u(){var e=f.popups.get("video.insert");e.find(".fr-video-by-url-layer input").val("").trigger("change");var t=e.find(".fr-video-embed-layer textarea");t.val("").trigger("change"),(t=e.find(".fr-video-upload-layer input")).val("").trigger("change")}function i(){var e=f.$tb.find('.fr-command[data-cmd="insertVideo"]'),t=f.popups.get("video.insert");if(t||(t=s()),c(),!t.hasClass("fr-active")){f.popups.refresh("video.insert"),f.popups.setContainer("video.insert",f.$tb);var i=e.offset().left+e.outerWidth()/2,n=e.offset().top+(f.opts.toolbarBottom?10:e.outerHeight()-10);f.popups.show("video.insert",i,n,e.outerHeight())}}function n(){var e=f.popups.get("video.edit");if(e||(e=z()),e){f.popups.setContainer("video.edit",f.$sc),f.popups.refresh("video.edit");var t=me.find("iframe, embed, video"),i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();f.popups.show("video.edit",i,n,t.outerHeight())}}function s(e){if(e)return f.popups.onRefresh("video.insert",u),f.popups.onHide("image.insert",ne),!0;var t="";1<f.opts.videoInsertButtons.length&&(t='<div class="fr-buttons">'+f.button.buildList(f.opts.videoInsertButtons)+"</div>");var i,n="",r=f.opts.videoInsertButtons.indexOf("videoUpload"),s=f.opts.videoInsertButtons.indexOf("videoByURL"),o=f.opts.videoInsertButtons.indexOf("videoEmbed");0<=s&&(i=" fr-active",(r<s&&0<=r||o<s&&0<=o)&&(i=""),n='<div class="fr-video-by-url-layer fr-layer'+i+'" id="fr-video-by-url-layer-'+f.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+f.id+'" type="text" placeholder="'+f.language.translate("Paste in a video URL")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+f.language.translate("Insert")+"</button></div></div>");var a="";0<=o&&(i=" fr-active",(r<o&&0<=r||s<o&&0<=s)&&(i=""),a='<div class="fr-video-embed-layer fr-layer'+i+'" id="fr-video-embed-layer-'+f.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+f.id+'" type="text" placeholder="'+f.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+f.language.translate("Insert")+"</button></div></div>");var l="";0<=r&&(i=" fr-active",(o<r&&0<=o||s<r&&0<=s)&&(i=""),l='<div class="fr-video-upload-layer fr-layer'+i+'" id="fr-video-upload-layer-'+f.id+'"><strong>'+f.language.translate("Drop video")+"</strong><br>("+f.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+f.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+f.id+'" role="button"></div></div>');var c={buttons:t,by_url_layer:n,embed_layer:a,upload_layer:l,progress_bar:'<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>'},d=f.popups.create("video.insert",c);return W(d),d}function e(e){var t,i,n=f.popups.get("video.insert");if(!me&&!f.opts.toolbarInline){var r=f.$tb.find('.fr-command[data-cmd="insertVideo"]');t=r.offset().left+r.outerWidth()/2,i=r.offset().top+(f.opts.toolbarBottom?10:r.outerHeight()-10)}f.opts.toolbarInline&&(i=n.offset().top-f.helpers.getPX(n.css("margin-top")),n.hasClass("fr-above")&&(i+=n.outerHeight())),n.find(".fr-layer").removeClass("fr-active"),n.find(".fr-"+e+"-layer").addClass("fr-active"),f.popups.show("video.insert",t,i,0),f.accessibility.focusPopup(n)}function t(e){f.popups.get("video.insert").find(".fr-video-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function a(e){f.popups.get("video.insert").find(".fr-video-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function o(e){f.popups.get("video.insert").find(".fr-video-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function r(e){f.events.focus(!0),f.selection.restore();var t=!1;me&&(ie(),t=!0),f.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+e+"</span>",!1,f.opts.videoSplitHTML),f.popups.hide("video.insert");var i=f.$el.find(".fr-jiv");i.removeClass("fr-jiv"),re(i,f.opts.videoDefaultDisplay,f.opts.videoDefaultAlign),i.toggleClass("fr-draggable",f.opts.videoMove),f.events.trigger(t?"video.replaced":"video.inserted",[i])}function p(){var e=ze(this);f.popups.hide("video.insert"),e.removeClass("fr-uploading"),e.parent().next().is("br")&&e.parent().next().remove(),b(e.parent()),f.events.trigger("video.loaded",[e.parent()])}function l(a,e,l,c,d){f.edit.off(),g("Loading video"),e&&(a=f.helpers.sanitizeURL(a));var t=function(){var e,t;if(c){f.undo.canDo()||c.find("video").hasClass("fr-uploading")||f.undo.saveStep();var i=c.find("video").data("fr-old-src"),n=c.data("fr-replaced");c.data("fr-replaced",!1),f.$wp?((e=c.clone()).find("video").removeData("fr-old-src").removeClass("fr-uploading"),e.find("video").off("canplay"),i&&c.find("video").attr("src",i),c.replaceWith(e)):e=c;for(var r=e.find("video").get(0).attributes,s=0;s<r.length;s++){var o=r[s];0===o.nodeName.indexOf("data-")&&e.find("video").removeAttr(o.nodeName)}if(void 0!==l)for(t in l)l.hasOwnProperty(t)&&"link"!=t&&e.find("video").attr("data-"+t,l[t]);e.find("video").on("canplay",p),e.find("video").attr("src",a),f.edit.on(),I(),f.undo.saveStep(),f.$el.blur(),f.events.trigger(n?"video.replaced":"video.inserted",[e,d])}else e=A(a,l,p),I(),f.undo.saveStep(),f.events.trigger("video.inserted",[e,d])};h("Loading video"),t()}function h(e){var t=f.popups.get("video.insert");if(t||(t=s()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-video-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),me){var i=me.find("video");f.popups.setContainer("video.insert",f.$sc);var n=i.offset().left+i.width()/2,r=i.offset().top+i.height();f.popups.show("video.insert",n,r,i.outerHeight())}void 0===e&&g(f.language.translate("Uploading"),0)}function c(e){var t=f.popups.get("video.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-video-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||f.$el.find("video.fr-error").length)){if(f.events.focus(),f.$el.find("video.fr-error").length&&(f.$el.find("video.fr-error").parent().remove(),f.undo.saveStep(),f.undo.run(),f.undo.dropRedo()),!f.$wp&&me){var i=me;F(!0),f.selection.setAfter(i.find("video").get(0)),f.selection.restore()}f.popups.hide("video.insert")}}function g(e,t){var i=f.popups.get("video.insert");if(i){var n=i.find(".fr-video-progress-bar-layer");n.find("h3").text(e+(t?" "+t+"%":"")),n.removeClass("fr-error"),t?(n.find("div").removeClass("fr-indeterminate"),n.find("div > span").css("width",t+"%")):n.find("div").addClass("fr-indeterminate")}}function d(e){h();var t=f.popups.get("video.insert").find(".fr-video-progress-bar-layer");t.addClass("fr-error");var i=t.find("h3");i.text(e),f.events.disableBlur(),i.focus()}function m(e){void 0===e&&(e=f.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||"");var t=null;if(/^http/.test(e)||(e="https://"+e),f.helpers.isURL(e))for(var i=0;i<ze.FE.VIDEO_PROVIDERS.length;i++){var n=ze.FE.VIDEO_PROVIDERS[i];if(n.test_regex.test(e)&&new RegExp(f.opts.videoAllowedProviders.join("|")).test(n.provider)){t=e.replace(n.url_regex,n.url_text),t=n.html.replace(/\{url\}/,t);break}}t?r(t):f.events.trigger("video.linkError",[e])}function v(e){void 0===e&&(e=f.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""),0!==e.length&&ze.FE.VIDEO_EMBED_REGEX.test(e)?r(e):f.events.trigger("video.codeError",[e])}function b(e){O.call(e.get(0))}function E(e){try{if(!1===f.events.trigger("video.uploaded",[e],!0))return f.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(K(Ee,e),!1)}catch(i){return K(_e,e),!1}}function y(e){try{var t=ze(e).find("Location").text(),i=ze(e).find("Key").text();return!1===f.events.trigger("video.uploadedToS3",[t,i,e],!0)?(f.edit.on(),!1):t}catch(s){return K(_e,e),!1}}function _(e){g("Loading video");var t=this.status,i=this.response,n=this.responseXML,r=this.responseText;try{if(f.opts.videoUploadToS3)if(201==t){var s=y(n);s&&l(s,!1,[],e,i||n)}else K(_e,i||n);else if(200<=t&&t<300){var o=E(r);o&&l(o.link,!1,o,e,i||r)}else K(ye,i||r)}catch(a){K(_e,i||r)}}function T(){K(_e,this.response||this.responseText||this.responseXML)}function C(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;g(f.language.translate("Uploading"),t)}}function w(){f.edit.on(),c(!0)}function A(e,t,i){var n,r="";if(t&&void 0!==t)for(n in t)t.hasOwnProperty(n)&&"link"!=n&&(r+=" data-"+n+'="'+t[n]+'"');var s=f.opts.videoDefaultWidth;s&&"auto"!=s&&(s+="px");var o=ze('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+f.opts.videoDefaultDisplay[0]+("center"!=f.opts.videoDefaultAlign?" fr-fv"+f.opts.videoDefaultAlign[0]:"")+'"><video src="'+e+'" '+r+(s?' style="width: '+s+';" ':"")+" controls>"+f.language.translate("Your browser does not support HTML5 video.")+"</video></span>");o.toggleClass("fr-draggable",f.opts.videoMove),f.edit.on(),f.events.focus(!0),f.selection.restore(),f.undo.saveStep(),f.opts.videoSplitHTML?f.markers.split():f.markers.insert();var a=f.$el.find(".fr-marker");return f.node.isLastSibling(a)&&a.parent().hasClass("fr-deletable")&&a.insertAfter(a.parent()),a.replaceWith(o),f.html.wrap(),f.selection.clear(),o.find("video").get(0).readyState>o.find("video").get(0).HAVE_FUTURE_DATA||f.helpers.isIOS()?i.call(o.find("video").get(0)):o.find("video").on("canplaythrough load",i),o}function S(e){if(!f.core.sameInstance(ge))return!0;e.preventDefault(),e.stopPropagation();var t=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),i=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!t||!i)return!1;if("mousedown"==e.type){var n=f.$oel.get(0).ownerDocument,r=n.defaultView||n.parentWindow,s=!1;try{s=r.location!=r.parent.location&&!(r.$&&r.$.FE)}catch(o){}s&&r.frameElement&&(t+=f.helpers.getPX(ze(r.frameElement).offset().left)+r.frameElement.clientLeft,i=e.clientY+f.helpers.getPX(ze(r.frameElement).offset().top)+r.frameElement.clientTop)}f.undo.canDo()||f.undo.saveStep(),(he=ze(this)).data("start-x",t),he.data("start-y",i),pe.show(),f.popups.hideAll(),$()}function x(e){if(!f.core.sameInstance(ge))return!0;if(he){e.preventDefault();var t=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null),i=e.pageY||(e.originalEvent.touches?e.originalEvent.touches[0].pageY:null);if(!t||!i)return!1;var n=he.data("start-x"),r=he.data("start-y");he.data("start-x",t),he.data("start-y",i);var s=t-n,o=i-r,a=me.find("iframe, embed, video"),l=a.width(),c=a.height();(he.hasClass("fr-hnw")||he.hasClass("fr-hsw"))&&(s=0-s),(he.hasClass("fr-hnw")||he.hasClass("fr-hne"))&&(o=0-o),a.css("width",l+s),a.css("height",c+o),a.removeAttr("width"),a.removeAttr("height"),N()}}function R(e){if(!f.core.sameInstance(ge))return!0;he&&me&&(e&&e.stopPropagation(),he=null,pe.hide(),N(),n(),f.undo.saveStep())}function k(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function L(e,t,i,n){return e.pageX=t,e.pageY=t,S.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,n)),e.pageY=e.pageY+i*Math.floor(Math.pow(1.1,n)),x.call(this,e),R.call(this,e),++n}function D(){var e;if(f.shared.$video_resizer?(ge=f.shared.$video_resizer,pe=f.shared.$vid_overlay,f.events.on("destroy",function(){ge.removeClass("fr-active").appendTo(ze("body:first"))},!0)):(f.shared.$video_resizer=ze('<div class="fr-video-resizer"></div>'),ge=f.shared.$video_resizer,f.events.$on(ge,"mousedown",function(e){e.stopPropagation()},!0),f.opts.videoResize&&(ge.append(k("nw")+k("ne")+k("sw")+k("se")),f.shared.$vid_overlay=ze('<div class="fr-video-overlay"></div>'),pe=f.shared.$vid_overlay,e=ge.get(0).ownerDocument,ze(e).find("body:first").append(pe))),f.events.on("shared.destroy",function(){ge.html("").removeData().remove(),ge=null,f.opts.videoResize&&(pe.remove(),pe=null)},!0),f.helpers.isMobile()||f.events.$on(ze(f.o_win),"resize.video",function(){F(!0)}),f.opts.videoResize){e=ge.get(0).ownerDocument,f.events.$on(ge,f._mousedown,".fr-handler",S),f.events.$on(ze(e),f._mousemove,x),f.events.$on(ze(e.defaultView||e.parentWindow),f._mouseup,R),f.events.$on(pe,"mouseleave",R);var n=1,r=null,s=0;f.events.on("keydown",function(e){if(me){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,i=e.which;(i!==r||200<e.timeStamp-s)&&(n=1),(i==ze.FE.KEYCODE.EQUALS||f.browser.mozilla&&i==ze.FE.KEYCODE.FF_EQUALS)&&t&&!e.altKey?n=L.call(this,e,1,1,n):(i==ze.FE.KEYCODE.HYPHEN||f.browser.mozilla&&i==ze.FE.KEYCODE.FF_HYPHEN)&&t&&!e.altKey&&(n=L.call(this,e,2,-1,n)),r=i,s=e.timeStamp}}),f.events.on("keyup",function(){n=1})}}function I(){var e,t=Array.prototype.slice.call(f.el.querySelectorAll("video")),i=[];for(e=0;e<t.length;e++)i.push(t[e].getAttribute("src")),ze(t[e]).toggleClass("fr-draggable",f.opts.videoMove),""===t[e].getAttribute("class")&&t[e].removeAttribute("class"),""===t[e].getAttribute("style")&&t[e].removeAttribute("style");if(ve)for(e=0;e<ve.length;e++)i.indexOf(ve[e].getAttribute("src"))<0&&f.events.trigger("video.removed",[ze(ve[e])]);ve=t}function N(){ge||D(),(f.$wp||f.$sc).append(ge),ge.data("instance",f);var e=me.find("iframe, embed, video");ge.css("top",(f.opts.iframe?e.offset().top-1:e.offset().top-f.$wp.offset().top-1)+f.$wp.scrollTop()).css("left",(f.opts.iframe?e.offset().left-1:e.offset().left-f.$wp.offset().left-1)+f.$wp.scrollLeft()).css("width",e.outerWidth()).css("height",e.height()).addClass("fr-active")}function O(e){if(e&&"touchend"==e.type&&be)return!0;if(e&&f.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;if(f.edit.isDisabled())return!1;for(var t=0;t<ze.FE.INSTANCES.length;t++)ze.FE.INSTANCES[t]!=f&&ze.FE.INSTANCES[t].events.trigger("video.hideResizer");f.toolbar.disable(),f.helpers.isMobile()&&(f.events.disableBlur(),f.$el.blur(),f.events.enableBlur()),me=ze(this),ze(this).addClass("fr-active"),f.opts.iframe&&f.size.syncIframe(),ce(),N(),n(),f.selection.clear(),f.button.bulkRefresh(),f.events.trigger("image.hideResizer")}function F(e){me&&(P()||!0===e)&&(ge.removeClass("fr-active"),f.toolbar.enable(),me.removeClass("fr-active"),me=null,$())}function M(){f.shared.vid_exit_flag=!0}function $(){f.shared.vid_exit_flag=!1}function P(){return f.shared.vid_exit_flag}function B(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var i=t.files[0];if(i&&i.type&&-1!==i.type.indexOf("video")){f.markers.remove(),f.markers.insertAtPoint(e.originalEvent),f.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),f.popups.hideAll();var n=f.popups.get("video.insert");return n||(n=s()),f.popups.setContainer("video.insert",f.$sc),f.popups.show("video.insert",e.originalEvent.pageX,e.originalEvent.pageY),h(),0<=f.opts.videoAllowedTypes.indexOf(i.type.replace(/video\//g,""))?H(t.files):K(Ce),e.preventDefault(),e.stopPropagation(),!1}}}function H(e){if(void 0!==e&&0<e.length){if(!1===f.events.trigger("video.beforeUpload",[e]))return!1;var t,i=e[0];if(i.size>f.opts.videoMaxSize)return K(Te),!1;if(f.opts.videoAllowedTypes.indexOf(i.type.replace(/video\//g,""))<0)return K(Ce),!1;if(f.drag_support.formdata&&(t=f.drag_support.formdata?new FormData:null),t){var n;if(!1!==f.opts.videoUploadToS3)for(n in t.append("key",f.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(i.name||"untitled")),t.append("success_action_status","201"),t.append("X-Requested-With","xhr"),t.append("Content-Type",i.type),f.opts.videoUploadToS3.params)f.opts.videoUploadToS3.params.hasOwnProperty(n)&&t.append(n,f.opts.videoUploadToS3.params[n]);for(n in f.opts.videoUploadParams)f.opts.videoUploadParams.hasOwnProperty(n)&&t.append(n,f.opts.videoUploadParams[n]);t.append(f.opts.videoUploadParam,i);var r=f.opts.videoUploadURL;f.opts.videoUploadToS3&&(r=f.opts.videoUploadToS3.uploadURL?f.opts.videoUploadToS3.uploadURL:"https://"+f.opts.videoUploadToS3.region+".amazonaws.com/"+f.opts.videoUploadToS3.bucket);var s=f.core.getXHR(r,f.opts.videoUploadMethod);s.onload=function(){_.call(s,me)},s.onerror=T,s.upload.onprogress=C,s.onabort=w,h(),f.events.disableBlur(),f.edit.off(),f.events.enableBlur();var o=f.popups.get("video.insert");o&&o.off("abortUpload").on("abortUpload",function(){4!=s.readyState&&s.abort()}),s.send(t)}}}function W(n){f.events.$on(n,"dragover dragenter",".fr-video-upload-layer",function(){return ze(this).addClass("fr-drop"),!1},!0),f.events.$on(n,"dragleave dragend",".fr-video-upload-layer",function(){return ze(this).removeClass("fr-drop"),!1},!0),f.events.$on(n,"drop",".fr-video-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),ze(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;if(t&&t.files){var i=n.data("instance")||f;i.events.disableBlur(),i.video.upload(t.files),i.events.enableBlur()}},!0),f.helpers.isIOS()&&f.events.$on(n,"touchstart",'.fr-video-upload-layer input[type="file"]',function(){ze(this).trigger("click")},!0),f.events.$on(n,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var e=n.data("instance")||f;e.events.disableBlur(),n.find("input:focus").blur(),e.events.enableBlur(),e.video.upload(this.files)}ze(this).val("")},!0)}function U(){f.events.on("drop",B,!0),f.events.on("mousedown window.mousedown",M),f.events.on("window.touchmove",$),f.events.on("mouseup window.mouseup",F),f.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&F()}),f.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){F(!0)})}function K(e,t){f.edit.on(),me&&me.find("video").addClass("fr-error"),d(f.language.translate("Something went wrong. Please try again.")),f.events.trigger("video.error",[{code:e,message:we[e]},t])}function z(){var e="";if(0<f.opts.videoEditButtons.length){e+='<div class="fr-buttons">',e+=f.button.buildList(f.opts.videoEditButtons);var t={buttons:e+="</div>"},i=f.popups.create("video.edit",t);return f.events.$on(f.$wp,"scroll.video-edit",function(){me&&f.popups.isVisible("video.edit")&&(f.events.disableBlur(),b(me))}),i}return!1}function Y(){if(me){var e=f.popups.get("video.size"),t=me.find("iframe, embed, video");e.find('input[name="width"]').val(t.get(0).style.width||t.attr("width")).trigger("change"),e.find('input[name="height"]').val(t.get(0).style.height||t.attr("height")).trigger("change")}}function j(){var e=f.popups.get("video.size");e||(e=G()),c(),f.popups.refresh("video.size"),f.popups.setContainer("video.size",f.$sc);var t=me.find("iframe, embed, video"),i=t.offset().left+t.width()/2,n=t.offset().top+t.height();f.popups.show("video.size",i,n,t.height())}function G(e){if(e)return f.popups.onRefresh("video.size",Y),!0;var t={buttons:'<div class="fr-buttons">'+f.button.buildList(f.opts.videoSizeButtons)+"</div>",size_layer:'<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+f.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+f.id+'" type="text" name="width" placeholder="'+f.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+f.id+'" type="text" name="height" placeholder="'+f.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+f.language.translate("Update")+"</button></div></div>"},i=f.popups.create("video.size",t);return f.events.$on(f.$wp,"scroll",function(){me&&f.popups.isVisible("video.size")&&(f.events.disableBlur(),b(me))}),i}function q(e){if(void 0===e&&(e=me),e){if(e.hasClass("fr-fvl"))return"left";if(e.hasClass("fr-fvr"))return"right";if(e.hasClass("fr-dvb")||e.hasClass("fr-dvi"))return"center";if("block"==e.css("display")){if("left"==e.css("text-algin"))return"left";if("right"==e.css("text-align"))return"right"}else{if("left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function V(e){me.removeClass("fr-fvr fr-fvl"),!f.opts.htmlUntouched&&f.opts.useClasses?"left"==e?me.addClass("fr-fvl"):"right"==e&&me.addClass("fr-fvr"):re(me,Z(),e),ce(),N(),n(),f.selection.clear()}function X(e){if(!me)return!1;e.find("> *:first").replaceWith(f.icon.create("video-align-"+q()))}function Q(e,t){me&&t.find('.fr-command[data-param1="'+q()+'"]').addClass("fr-active").attr("aria-selected",!0)}function Z(e){void 0===e&&(e=me);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function J(e){me.removeClass("fr-dvi fr-dvb"),!f.opts.htmlUntouched&&f.opts.useClasses?"inline"==e?me.addClass("fr-dvi"):"block"==e&&me.addClass("fr-dvb"):re(me,e,q()),ce(),N(),n(),f.selection.clear()}function ee(e,t){me&&t.find('.fr-command[data-param1="'+Z()+'"]').addClass("fr-active").attr("aria-selected",!0)}function te(){var e=f.popups.get("video.insert");e||(e=s()),f.popups.isVisible("video.insert")||(c(),f.popups.refresh("video.insert"),f.popups.setContainer("video.insert",f.$sc));var t=me.offset().left+me.width()/2,i=me.offset().top+me.height();f.popups.show("video.insert",t,i,me.outerHeight())}function ie(){if(me&&!1!==f.events.trigger("video.beforeRemove",[me])){var e=me;f.popups.hideAll(),F(!0),f.selection.setBefore(e.get(0))||f.selection.setAfter(e.get(0)),e.remove(),f.selection.restore(),f.html.fillEmptyBlocks(),f.events.trigger("video.removed",[e])}}function ne(){c()}function re(e,t,i){!f.opts.htmlUntouched&&f.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv"+i[0]+" fr-dv"+t[0])):"inline"==t?(e.css({display:"inline-block"}),"center"==i?e.css({"float":"none"}):"left"==i?e.css({"float":"left"}):e.css({"float":"right"})):(e.css({display:"block",clear:"both"}),"left"==i?e.css({textAlign:"left"}):"right"==i?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}function se(e){e.hasClass("fr-dvi")||e.hasClass("fr-dvb")||(e.addClass("fr-fv"+q(e)[0]),e.addClass("fr-dv"+Z(e)[0]))}function oe(e){re(e,e.hasClass("fr-dvb")?"block":e.hasClass("fr-dvi")?"inline":null,e.hasClass("fr-fvl")?"left":e.hasClass("fr-fvr")?"right":q(e)),e.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl")}function ae(){f.$el.find("video").filter(function(){return 0===ze(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),f.$el.find("embed, iframe").filter(function(){if(f.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),0<ze(this).parents("span.fr-video").length)return!1;for(var e=ze(this).attr("src"),t=0;t<ze.FE.VIDEO_PROVIDERS.length;t++){var i=ze.FE.VIDEO_PROVIDERS[t];if(i.test_regex.test(e)&&new RegExp(f.opts.videoAllowedProviders.join("|")).test(i.provider))return!0}return!1}).map(function(){return 0===ze(this).parents("object").length?this:ze(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var e=f.$el.find("span.fr-video, video"),t=0;t<e.length;t++){var i=ze(e[t]);!f.opts.htmlUntouched&&f.opts.useClasses?(se(i),f.opts.videoTextNear||i.removeClass("fr-dvi").addClass("fr-dvb")):f.opts.htmlUntouched||f.opts.useClasses||oe(i)}e.toggleClass("fr-draggable",f.opts.videoMove)}function le(){U(),f.helpers.isMobile()&&(f.events.$on(f.$el,"touchstart","span.fr-video",function(){be=!1}),f.events.$on(f.$el,"touchmove",function(){be=!0})),f.events.on("html.set",ae),ae(),f.events.$on(f.$el,"mousedown","span.fr-video",function(e){e.stopPropagation()}),f.events.$on(f.$el,"click touchend","span.fr-video",O),f.events.on("keydown",function(e){var t=e.which;return!me||t!=ze.FE.KEYCODE.BACKSPACE&&t!=ze.FE.KEYCODE.DELETE?me&&t==ze.FE.KEYCODE.ESC?(F(!0),e.preventDefault(),!1):me&&t!=ze.FE.KEYCODE.F10&&!f.keys.isBrowserAction(e)?(e.preventDefault(),!1):void 0:(e.preventDefault(),ie(),f.undo.saveStep(),!1)},!0),f.events.on("toolbar.esc",function(){if(me)return f.events.disableBlur(),f.events.focus(),!1},!0),f.events.on("toolbar.focusEditor",function(){if(me)return!1},!0),f.events.on("keydown",function(){f.$el.find("span.fr-video:empty").remove()}),s(!0),G(!0)}function ce(){if(me){f.selection.clear();var e=f.doc.createRange();e.selectNode(me.get(0)),f.selection.get().addRange(e)}}function de(){me?(f.events.disableBlur(),me.trigger("click")):(f.events.disableBlur(),f.selection.restore(),f.events.enableBlur(),f.popups.hide("video.insert"),f.toolbar.showInline())}function fe(e,t){if(me){var i=f.popups.get("video.size"),n=me.find("iframe, embed, video");n.css("width",e||i.find('input[name="width"]').val()),
n.css("height",t||i.find('input[name="height"]').val()),n.get(0).style.width&&n.removeAttr("width"),n.get(0).style.height&&n.removeAttr("height"),i.find("input:focus").blur(),setTimeout(function(){me.trigger("click")},f.helpers.isAndroid()?50:0)}}function ue(){return me}var pe,he,ge,me,ve,be,Ee=2,ye=3,_e=4,Te=5,Ce=6,we={};return we[1]="Video cannot be loaded from the passed link.",we[Ee]="No link in upload response.",we[ye]="Error during file upload.",we[_e]="Parsing response failed.",we[Te]="File is too large.",we[Ce]="Video file type is invalid.",we[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",f.shared.vid_exit_flag=!1,{_init:le,showInsertPopup:i,showLayer:e,refreshByURLButton:t,refreshEmbedButton:a,refreshUploadButton:o,upload:H,insertByURL:m,insertEmbed:v,insert:r,align:V,refreshAlign:X,refreshAlignOnShow:Q,display:J,refreshDisplayOnShow:ee,remove:ie,hideProgressBar:c,showSizePopup:j,replace:te,back:de,setSize:fe,get:ue}},ze.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),ze.FE.DefineIcon("insertVideo",{NAME:"video-camera"}),ze.FE.DefineIcon("videoByURL",{NAME:"link"}),ze.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(e){this.video.refreshByURLButton(e)}}),ze.FE.DefineIcon("videoEmbed",{NAME:"code"}),ze.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(e){this.video.refreshEmbedButton(e)}}),ze.FE.DefineIcon("videoUpload",{NAME:"upload"}),ze.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(e){this.video.refreshUploadButton(e)}}),ze.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),ze.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),ze.FE.DefineIcon("videoDisplay",{NAME:"star"}),ze.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.video.display(t)},refresh:function(e){this.opts.videoTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.video.refreshDisplayOnShow(e,t)}}),ze.FE.DefineIcon("video-align",{NAME:"align-left"}),ze.FE.DefineIcon("video-align-left",{NAME:"align-left"}),ze.FE.DefineIcon("video-align-right",{NAME:"align-right"}),ze.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),ze.FE.DefineIcon("videoAlign",{NAME:"align-center"}),ze.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.videoAlign.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.icon.create("video-align-"+i)+'<span class="fr-sr-only">'+this.language.translate(t[i])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.video.align(t)},refresh:function(e){this.video.refreshAlign(e)},refreshOnShow:function(e,t){this.video.refreshAlignOnShow(e,t)}}),ze.FE.DefineIcon("videoReplace",{NAME:"exchange"}),ze.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),ze.FE.DefineIcon("videoRemove",{NAME:"trash"}),ze.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),ze.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),ze.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),ze.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(e){this.video.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),ze.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}}),ze.extend(ze.FE.DEFAULTS,{wordDeniedTags:[],wordDeniedAttrs:[],wordAllowedStyleProps:["font-family","font-size","background","color","width","text-align","vertical-align","background-color","padding","margin","height","margin-top","margin-left","margin-right","margin-bottom","text-decoration","font-weight","font-style"],wordPasteModal:!0}),ze.FE.PLUGINS.wordPaste=function(y){function e(){y.events.on("paste.wordPaste",function(e){return a=e,y.opts.wordPasteModal?t():n(!0),!1})}function r(){var e='<div class="fr-word-paste-modal" style="padding: 20px 20px 10px 20px;">';return e+='<p style="text-align: left;">'+y.language.translate("The pasted content is coming from a Microsoft Word document. Do you want to keep the format or clean it up?")+"</p>",(e+='<div style="text-align: right; margin-top: 50px;"><button class="fr-remove-word fr-command">'+y.language.translate("Clean")+'</button> <button class="fr-keep-word fr-command">'+y.language.translate("Keep")+"</button></div>")+"</div>"}function t(){if(!o){var e='<h4><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 74.95 73.23" style="height: 25px; vertical-align: text-bottom; margin-right: 5px; display: inline-block"><defs><style>.a{fill:#2a5699;}.b{fill:#fff;}</style></defs><path class="a" d="M615.15,827.22h5.09V834c9.11.05,18.21-.09,27.32.05a2.93,2.93,0,0,1,3.29,3.25c.14,16.77,0,33.56.09,50.33-.09,1.72.17,3.63-.83,5.15-1.24.89-2.85.78-4.3.84-8.52,0-17,0-25.56,0v6.81h-5.32c-13-2.37-26-4.54-38.94-6.81q0-29.8,0-59.59c13.05-2.28,26.11-4.5,39.17-6.83Z" transform="translate(-575.97 -827.22)"/><path class="b" d="M620.24,836.59h28.1v54.49h-28.1v-6.81h22.14v-3.41H620.24v-4.26h22.14V873.2H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24v-4.26h22.14v-3.41H620.24V846h22.14v-3.41H620.24Zm-26.67,15c1.62-.09,3.24-.16,4.85-.25,1.13,5.75,2.29,11.49,3.52,17.21,1-5.91,2-11.8,3.06-17.7,1.7-.06,3.41-.15,5.1-.26-1.92,8.25-3.61,16.57-5.71,24.77-1.42.74-3.55,0-5.24.09-1.13-5.64-2.45-11.24-3.47-16.9-1,5.5-2.29,10.95-3.43,16.42q-2.45-.13-4.92-.3c-1.41-7.49-3.07-14.93-4.39-22.44l4.38-.18c.88,5.42,1.87,10.82,2.64,16.25,1.2-5.57,2.43-11.14,3.62-16.71Z" transform="translate(-575.97 -827.22)"/></svg> '+y.language.translate("Word Paste Detected")+"</h4>",t=r(),i=y.modals.create(S,e,t),n=i.$body;o=i.$modal,i.$modal.addClass("fr-middle"),y.events.bindClick(n,"button.fr-remove-word",function(){(o.data("instance")||y).wordPaste.clean()}),y.events.bindClick(n,"button.fr-keep-word",function(){(o.data("instance")||y).wordPaste.clean(!0)}),y.events.$on(ze(y.o_win),"resize",function(){y.modals.resize(S)})}y.modals.show(S),y.modals.resize(S)}function i(){y.modals.hide(S)}function n(e){var t=y.opts.wordAllowedStyleProps;e||(y.opts.wordAllowedStyleProps=[]),0===(a=(a=(a=a.replace(/^[\n\r]*/g,"").replace(/^ /g,"")).replace(/[\r\n]* {2,}/g," ").replace(/ {2,}[\r\n]*/g," ")).replace(/>[ \n\r]*</g,"><")).indexOf("<colgroup>")&&(a="<table>"+a+"</table>"),a=s(a,y.paste.getRtfClipboard()),a=y.paste.removeEmptyTags(a),i(),y.paste.clean(a,!0,!0),y.opts.wordAllowedStyleProps=t}function _(e){e.parentNode&&e.parentNode.removeChild(e)}function l(e,t){if(t(e))for(var i=e.firstChild;i;){var n=i,r=i.previousSibling;i=i.nextSibling,l(n,t),n.previousSibling||n.nextSibling||n.parentNode||!i||r==i.previousSibling||!i.parentNode?n.previousSibling||n.nextSibling||n.parentNode||!i||i.previousSibling||i.nextSibling||i.parentNode||(r?i=r.nextSibling?r.nextSibling.nextSibling:null:e.firstChild&&(i=e.firstChild.nextSibling)):i=r?r.nextSibling:e.firstChild}}function T(e){if(!e.getAttribute("style")||!/mso-list:[\s]*l/gi.test(e.getAttribute("style").replace(/\n/gi,"")))return!1;try{if(!e.querySelector('[style="mso-list:Ignore"]'))return!1}catch(y){return!1}return!0}function p(e){return e.getAttribute("style").replace(/\n/gi,"").replace(/.*level([0-9]+?).*/gi,"$1")}function h(e,t){var i=e.cloneNode(!0);if(i.firstElementChild&&"A"==i.firstElementChild.tagName&&(i=i.firstElementChild),-1!=["H1","H2","H3","H4","H5","H6"].indexOf(e.tagName)){var n=document.createElement(e.tagName.toLowerCase());n.setAttribute("style",e.getAttribute("style")),n.innerHTML=i.innerHTML,i.innerHTML=n.outerHTML}l(i,function(e){return e.nodeType==Node.ELEMENT_NODE&&("mso-list:Ignore"==e.getAttribute("style")&&e.parentNode.removeChild(e),u(e,t)),!0});var r=i.innerHTML;return r.replace(/<!--[\s\S]*?-->/gi,"")}function g(e,t){var i=/[0-9a-zA-Z]./gi,n=!1;e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.firstChild&&!(n=n||i.test(e.firstElementChild.firstElementChild.firstChild.data||""))&&e.firstElementChild.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.firstElementChild.firstChild&&(n=n||i.test(e.firstElementChild.firstElementChild.firstElementChild.firstChild.data||""));var r=n?"ol":"ul",s=p(e),o="<"+r+"><li>"+h(e,t),a=e.nextElementSibling,l=e.parentNode;for(_(e),e=null;a&&T(a);){var c=a.previousElementSibling,d=p(a);if(s<d)o+=g(a,t).outerHTML;else{if(d<s)break;o+="</li><li>"+h(a,t)}if(s=d,a.previousElementSibling||a.nextElementSibling||a.parentNode){var f=a;a=a.nextElementSibling,_(f),f=null}else a=c?c.nextElementSibling:l.firstElementChild}o+="</li></"+r+">";var u=document.createElement("div");return u.innerHTML=o,u.firstElementChild}function m(e,t){for(var i=document.createElement(t),n=0;n<e.attributes.length;n++){var r=e.attributes[n].name;i.setAttribute(r,e.getAttribute(r))}return i.innerHTML=e.innerHTML,e.parentNode.replaceChild(i,e),i}function v(e,t){y.node.clearAttributes(e);for(var i=e.firstElementChild,n=0,r=!1,s=null;i;){i.firstElementChild&&-1!=i.firstElementChild.tagName.indexOf("W:")&&(i.innerHTML=i.firstElementChild.innerHTML),(s=i.getAttribute("width"))||r||(r=!0),n+=parseInt(s,10),(!i.firstChild||i.firstChild&&i.firstChild.data==ze.FE.UNICODE_NBSP)&&(i.firstChild&&_(i.firstChild),i.innerHTML="<br>");for(var o=i.firstElementChild,a=1==i.children.length;o;)"P"!=o.tagName||T(o)||a&&C(o),o=o.nextElementSibling;if(t){var l=i.getAttribute("class");if(l){var c=(l=w(l)).match(/xl[0-9]+/gi);if(c){var d="."+c[0];t[d]&&A(i,t[d])}}t.td&&A(i,t.td)}var f=i.getAttribute("style");f&&(f=w(f))&&";"!=f.slice(-1)&&(f+=";");var u=i.getAttribute("valign");if(!u&&f){var p=f.match(/vertical-align:.+?[; "]{1,1}/gi);p&&(u=p[p.length-1].replace(/vertical-align:(.+?)[; "]{1,1}/gi,"$1"))}var h=null;if(f){var g=f.match(/text-align:.+?[; "]{1,1}/gi);g&&(h=g[g.length-1].replace(/text-align:(.+?)[; "]{1,1}/gi,"$1")),"general"==h&&(h=null)}var m=null;if(f){var v=f.match(/background:.+?[; "]{1,1}/gi);v&&(m=v[v.length-1].replace(/background:(.+?)[; "]{1,1}/gi,"$1"))}var b=i.getAttribute("colspan"),E=i.getAttribute("rowspan");b&&i.setAttribute("colspan",b),E&&i.setAttribute("rowspan",E),u&&(i.style["vertical-align"]=u),h&&(i.style["text-align"]=h),m&&(i.style["background-color"]=m),s&&i.setAttribute("width",s),i=i.nextElementSibling}for(i=e.firstElementChild;i;)s=i.getAttribute("width"),r?i.removeAttribute("width"):i.setAttribute("width",100*parseInt(s,10)/n+"%"),i=i.nextElementSibling}function C(e){var t=e.parentNode,i=e.getAttribute("align");i&&(t&&"TD"==t.tagName?t.setAttribute("style",t.getAttribute("style")+"text-align:"+i+";"):e.style["text-align"]=i,e.removeAttribute("align"))}function w(e){return e.replace(/\n|\r|\n\r|&quot;/g,"")}function A(e,t,i){if(t){var n=e.getAttribute("style");n&&";"!=n.slice(-1)&&(n+=";"),t&&";"!=t.slice(-1)&&(t+=";"),t=t.replace(/\n/gi,"");var r=null;r=i?(n||"")+t:t+(n||""),e.setAttribute("style",r)}}function c(e){var t=e.getAttribute("style");if(t){(t=w(t))&&";"!=t.slice(-1)&&(t+=";");var i=t.match(/(^|\S+?):.+?;{1,1}/gi);if(i){for(var n={},r=0;r<i.length;r++){var s=i[r].split(":");2==s.length&&("text-align"==s[0]&&"SPAN"==e.tagName||(n[s[0]]=s[1]))}var o="";for(var a in n)if(n.hasOwnProperty(a)){if("font-size"==a&&"pt;"==n[a].slice(-3)){var l=null;try{l=parseFloat(n[a].slice(0,-3),10)}catch(p){}l&&(l=Math.round(1.33*l),n[a]=l+"px;")}o+=a+":"+n[a]}o&&e.setAttribute("style",o)}}}function f(e){for(var t=e.match(/[0-9a-f]{2}/gi),i=[],n=0;n<t.length;n++)i.push(String.fromCharCode(parseInt(t[n],16)));var r=i.join("");return btoa(r)}function d(e,t){if(t){var i;if("IMG"==e.tagName){var n=e.getAttribute("src");if(!n||-1==n.indexOf("file://"))return;i=x[e.getAttribute("v:shapes")]}else i=e.parentNode.getAttribute("o:spid");if(i){var r="hplid"+i.substring(8),s=t.split(r);if(!s||2==s.length){var o=s[1].split("bliptag");if(!(o&&o.length<2)){var a=null;if(-1!=o[0].indexOf("pngblip")?a="image/png":-1!=o[0].indexOf("jpegblip")&&(a="image/jpeg"),a){var l=o[1].split("}");if(!(l&&l.length<2)){var c;if(2<l.length&&-1!=l[0].indexOf("blipuid"))c=l[1].split(" ");else{if((c=l[0].split(" "))&&c.length<2)return;c.shift()}var d="data:"+a+";base64,"+f(c.join(""));"IMG"===e.tagName?(e.src=d,e.setAttribute("data-fr-image-pasted",!0)):ze(e.parentNode).before('<img data-fr-image-pasted="true" src="'+d+'" style="'+e.parentNode.getAttribute("style")+'">').remove()}}}}}}}function u(e,t){var i=e.tagName,n=i.toLowerCase();if(e.firstElementChild&&("I"==e.firstElementChild.tagName?m(e.firstElementChild,"em"):"B"==e.firstElementChild.tagName&&m(e.firstElementChild,"strong")),-1!=["SCRIPT","APPLET","EMBED","NOFRAMES","NOSCRIPT"].indexOf(i))return _(e),!1;"O:P"==i&&"&nbsp;"==e.innerHTML&&(e.innerHTML=ze.FE.INVISIBLE_SPACE);var r=-1,s=["META","LINK","XML","ST1:","O:","W:","FONT"];for(r=0;r<s.length;r++)if(-1!=i.indexOf(s[r]))return e.innerHTML&&(e.outerHTML=e.innerHTML),_(e),!1;if("TD"!=i){var o=e.getAttribute("class");if(t&&o){var a=(o=w(o)).split(" ");for(r=0;r<a.length;r++){var l=[],c="."+a[r];l.push(c),c=n+c,l.push(c);for(var d=0;d<l.length;d++)t[l[d]]&&A(e,t[l[d]])}e.removeAttribute("class")}t&&t[n]&&A(e,t[n])}if(-1!=["P","H1","H2","H3","H4","H5","H6","PRE"].indexOf(i)){var f=e.getAttribute("class");if(f&&(t&&t[i.toLowerCase()+"."+f]&&A(e,t[i.toLowerCase()+"."+f]),-1!=f.toLowerCase().indexOf("mso"))){var u=w(f);(u=u.replace(/[0-9a-z-_]*mso[0-9a-z-_]*/gi,""))?e.setAttribute("class",u):e.removeAttribute("class")}var p=e.getAttribute("style");if(p){var h=p.match(/text-align:.+?[; "]{1,1}/gi);h&&h[h.length-1].replace(/(text-align:.+?[; "]{1,1})/gi,"$1")}C(e)}if("TR"==i&&v(e,t),"A"==i&&!e.attributes.getNamedItem("href")&&e.innerHTML&&(e.outerHTML=e.innerHTML),"TD"!=i&&"TH"!=i||e.innerHTML||(e.innerHTML="<br>"),"TABLE"==i&&(e.style.width="100%"),e.getAttribute("lang")&&e.removeAttribute("lang"),e.getAttribute("style")&&-1!=e.getAttribute("style").toLowerCase().indexOf("mso")){var g=w(e.getAttribute("style"));(g=g.replace(/[0-9a-z-_]*mso[0-9a-z-_]*:.+?(;{1,1}|$)/gi,""))?e.setAttribute("style",g):e.removeAttribute("style")}return!0}function b(e){var t={},i=e.getElementsByTagName("style");if(i.length){var n=i[0].innerHTML.match(/[\S ]+\s+{[\s\S]+?}/gi);if(n)for(var r=0;r<n.length;r++){var s=n[r],o=s.replace(/([\S ]+\s+){[\s\S]+?}/gi,"$1"),a=s.replace(/[\S ]+\s+{([\s\S]+?)}/gi,"$1");o=o.replace(/^[\s]|[\s]$/gm,""),a=a.replace(/^[\s]|[\s]$/gm,""),o=o.replace(/\n|\r|\n\r/g,""),a=a.replace(/\n|\r|\n\r/g,"");for(var l=o.split(", "),c=0;c<l.length;c++)t[l[c]]=a}}return t}function E(e){for(var t=e.split("v:shape"),i=1;i<t.length;i++){var n=t[i],r=n.split(' id="')[1];if(r&&1<r.length){r=r.split('"')[0];var s=n.split(' o:spid="')[1];s&&1<s.length&&(s=s.split('"')[0],x[r]=s)}}}function s(e,t){E(e=e.replace(/[.\s\S\w\W<>]*(<html[^>]*>[.\s\S\w\W<>]*<\/html>)[.\s\S\w\W<>]*/gi,"$1"));var i=(new DOMParser).parseFromString(e,"text/html"),n=i.head,r=i.body,s=b(n);l(r,function(e){if(e.nodeType==Node.TEXT_NODE&&/\n|\u00a0/.test(e.data)){if(!/\S| /.test(e.data))return e.data==ze.FE.UNICODE_NBSP?(e.data="\u200b",!0):(_(e),!1);e.data=e.data.replace(/\n/gi," ")}return!0}),l(r,function(e){return e.nodeType!=Node.ELEMENT_NODE||"V:IMAGEDATA"!=e.tagName&&"IMG"!=e.tagName||d(e,t),!0}),l(r,function(e){if(e.nodeType==Node.TEXT_NODE)return e.data=e.data.replace(/<br>(\n|\r)/gi,"<br>"),!1;if(e.nodeType==Node.ELEMENT_NODE){if(T(e)){var t=e.parentNode,i=e.previousSibling,n=g(e,s),r=null;return(r=i?i.nextSibling:t.firstChild)?t.insertBefore(n,r):t.appendChild(n),!1}return u(e,s)}return e.nodeType!=Node.COMMENT_NODE||(_(e),!1)}),l(r,function(e){if(e.nodeType==Node.ELEMENT_NODE){var t=e.tagName;if(!e.innerHTML&&-1==["BR","IMG"].indexOf(t)){for(var i=e.parentNode;i&&(_(e),!(e=i).innerHTML);)i=e.parentNode;return!1}c(e)}return!0});var o=r.outerHTML,a=y.opts.htmlAllowedStyleProps;return y.opts.htmlAllowedStyleProps=y.opts.wordAllowedStyleProps,o=y.clean.html(o,y.opts.wordDeniedTags,y.opts.wordDeniedAttrs,!1),y.opts.htmlAllowedStyleProps=a,o}var o,a,S="word_paste",x={};return{_init:e,clean:n}}}),$(document).ready(function(){$(".froala-editor").each(function(){var e={};e=$.extend({},e,$(this).data("options")),$(this).froalaEditor(e)})}),function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),i(t)}:i(window.jQuery)}(function(ze){ze.extend(ze.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),ze.extend(ze.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,imageUploadURL:"https://i.froala.com/upload",imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),ze.FE.PLUGINS.image=function(d){function c(){var e=d.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val(""),Re&&e.val(Re.attr("src")),e.trigger("change")}function i(){var e=d.$tb.find('.fr-command[data-cmd="insertImage"]'),t=d.popups.get("image.insert");if(t||(t=$()),b(),!t.hasClass("fr-active"))if(d.popups.refresh("image.insert"),d.popups.setContainer("image.insert",d.$tb),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,n=e.offset().top+(d.opts.toolbarBottom?10:e.outerHeight()-10);d.popups.show("image.insert",i,n,e.outerHeight())}else d.position.forSelection(t),d.popups.show("image.insert")}function r(){var e=d.popups.get("image.edit");if(e||(e=m()),e){var t=we();Se()&&(t=t.find(".fr-img-wrap")),d.popups.setContainer("image.edit",d.$sc),d.popups.refresh("image.edit");var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();d.popups.show("image.edit",i,n,t.outerHeight())}}function f(){b()}function n(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+he(e)[0]),e.addClass("fr-di"+ge(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function s(e){ue(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":he(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function a(){for(var e="IMG"==d.el.tagName?[d.el]:d.el.querySelectorAll("img"),t=0;t<e.length;t++){var i=ze(e[t]);!d.opts.htmlUntouched&&d.opts.useClasses?((0<=d.opts.imageEditButtons.indexOf("imageAlign")||0<=d.opts.imageEditButtons.indexOf("imageDisplay"))&&n(i),d.opts.imageTextNear||i.removeClass("fr-dii").addClass("fr-dib")):d.opts.htmlUntouched||d.opts.useClasses||(0<=d.opts.imageEditButtons.indexOf("imageAlign")||0<=d.opts.imageEditButtons.indexOf("imageDisplay"))&&s(i),d.opts.iframe&&i.on("load",d.size.syncIframe)}}function u(e){void 0===e&&(e=!0);var t,i=Array.prototype.slice.call(d.el.querySelectorAll("img")),n=[];for(t=0;t<i.length;t++)n.push(i[t].getAttribute("src")),ze(i[t]).toggleClass("fr-draggable",d.opts.imageMove),""===i[t].getAttribute("class")&&i[t].removeAttribute("class"),""===i[t].getAttribute("style")&&i[t].removeAttribute("style");if(We)for(t=0;t<We.length;t++)n.indexOf(We[t].getAttribute("src"))<0&&d.events.trigger("image.removed",[ze(We[t])]);if(We&&e){var r=[];for(t=0;t<We.length;t++)r.push(We[t].getAttribute("src"));for(t=0;t<i.length;t++)r.indexOf(i[t].getAttribute("src"))<0&&d.events.trigger("image.loaded",[ze(i[t])])}We=i}function l(){if(ke||X(),!Re)return!1;var e=d.$wp||d.$sc;e.append(ke),ke.data("instance",d);var t=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),i=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);i-=d.helpers.getPX(e.css("border-left-width")),t-=d.helpers.getPX(e.css("border-top-width")),d.$el.is("img")&&d.$sc.is("body")&&(i=t=0);var n=we();Se()&&(n=n.find(".fr-img-wrap")),ke.css("top",(d.opts.iframe?n.offset().top:n.offset().top+t)-1).css("left",(d.opts.iframe?n.offset().left:n.offset().left+i)-1).css("width",n.get(0).getBoundingClientRect().width).css("height",n.get(0).getBoundingClientRect().height).addClass("fr-active")}function t(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function o(e){if(!d.core.sameInstance(ke))return!0;if(e.preventDefault(),e.stopPropagation(),d.$el.find("img.fr-error").left)return!1;d.undo.canDo()||d.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if("mousedown"==e.type){var i=d.$oel.get(0).ownerDocument,n=i.defaultView||i.parentWindow,r=!1;try{r=n.location!=n.parent.location&&!(n.$&&n.$.FE)}catch(l){}r&&n.frameElement&&(t+=d.helpers.getPX(ze(n.frameElement).offset().left)+n.frameElement.clientLeft)}(Le=ze(this)).data("start-x",t),Le.data("start-width",Re.width()),Le.data("start-height",Re.height());var s=Re.width();if(d.opts.imageResizeWithPercent){var o=Re.parentsUntil(d.$el,d.html.blockTagsQuery()).get(0)||d.el;Re.css("width",(s/ze(o).outerWidth()*100).toFixed(2)+"%")}else Re.css("width",s);De.show(),d.popups.hideAll(),de()}function p(e){if(!d.core.sameInstance(ke))return!0;var t;if(Le&&Re){if(e.preventDefault(),d.$el.find("img.fr-error").left)return!1;var i=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null);if(!i)return!1;var n=i-Le.data("start-x"),r=Le.data("start-width");if((Le.hasClass("fr-hnw")||Le.hasClass("fr-hsw"))&&(n=0-n),d.opts.imageResizeWithPercent){var s=Re.parentsUntil(d.$el,d.html.blockTagsQuery()).get(0)||d.el;r=((r+n)/ze(s).outerWidth()*100).toFixed(2),d.opts.imageRoundPercent&&(r=Math.round(r)),Re.css("width",r+"%"),(t=(d.helpers.getPX(Re.css("width"))/ze(s).outerWidth()*100).toFixed(2))!==r&&Re.css("width",t+"%"),Re.css("height","").removeAttr("height")}else r+n>=d.opts.imageMinWidth&&(Se()&&Re.parent().css("width",r+n),Re.css("width",r+n)),(t=d.helpers.getPX(Re.css("width")))!==r+n&&Re.css("width",t),(Re.attr("style")||"").match(/(^height:)|(; *height:)/)&&Re.css("height",Le.data("start-height")*Re.width()/Le.data("start-width"));l(),d.events.trigger("image.resize",[Ce()])}}function h(e){if(!d.core.sameInstance(ke))return!0;if(Le&&Re){if(e&&e.stopPropagation(),d.$el.find("img.fr-error").left)return!1;Le=null,De.hide(),l(),r(),d.undo.saveStep(),d.events.trigger("image.resizeEnd",[Ce()])}}function g(e,t,i){d.edit.on(),Re&&Re.addClass("fr-error"),y(d.language.translate("Something went wrong. Please try again.")),!Re&&i&&Q(i),d.events.trigger("image.error",[{code:e,message:He[e]},t,i])}function m(e){if(e)return d.$wp&&d.events.$on(d.$wp,"scroll",function(){Re&&d.popups.isVisible("image.edit")&&(d.events.disableBlur(),_(Re))}),!0;var t="";if(0<d.opts.imageEditButtons.length){t+='<div class="fr-buttons">',t+=d.button.buildList(d.opts.imageEditButtons);var i={buttons:t+="</div>"};return d.popups.create("image.edit",i)}return!1}function v(e){var t=d.popups.get("image.insert");if(t||(t=$()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),Re){var i=we();d.popups.setContainer("image.insert",d.$sc);var n=i.offset().left+i.width()/2,r=i.offset().top+i.height();d.popups.show("image.insert",n,r,i.outerHeight())}void 0===e&&E(d.language.translate("Uploading"),0)}function b(e){var t=d.popups.get("image.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||d.$el.find("img.fr-error").length)){if(d.events.focus(),d.$el.find("img.fr-error").length&&(d.$el.find("img.fr-error").remove(),d.undo.saveStep(),d.undo.run(),d.undo.dropRedo()),!d.$wp&&Re){var i=Re;le(!0),d.selection.setAfter(i.get(0)),d.selection.restore()}d.popups.hide("image.insert")}}function E(e,t){var i=d.popups.get("image.insert");if(i){var n=i.find(".fr-image-progress-bar-layer");n.find("h3").text(e+(t?" "+t+"%":"")),n.removeClass("fr-error"),t?(n.find("div").removeClass("fr-indeterminate"),n.find("div > span").css("width",t+"%")):n.find("div").addClass("fr-indeterminate")}}function y(e){v();var t=d.popups.get("image.insert").find(".fr-image-progress-bar-layer");t.addClass("fr-error");var i=t.find("h3");i.text(e),d.events.disableBlur(),i.focus()}function e(){var e=d.popups.get("image.insert").find(".fr-image-by-url-layer input");if(0<e.val().length){if(v(),E(d.language.translate("Loading image")),d.opts.imageUploadRemoteUrls&&d.opts.imageCORSProxy){var t=new XMLHttpRequest;t.open("GET",d.opts.imageCORSProxy+"/"+e.val(),!0),t.responseType="blob",t.onload=function(){200==this.status&&I([new Blob([this.response],{type:"image/png"})],Re)},t.send()}else C(e.val(),!0,[],Re);e.val(""),e.blur()}}function _(e){ae.call(e.get(0))}function T(){var e=ze(this);d.popups.hide("image.insert"),e.removeClass("fr-uploading"),e.next().is("br")&&e.next().remove(),_(e),d.events.trigger("image.loaded",[e])}function C(o,e,a,l,c){d.edit.off(),E(d.language.translate("Loading image")),e&&(o=d.helpers.sanitizeURL(o));var t=new Image;t.onload=function(){var e,t;if(l){d.undo.canDo()||l.hasClass("fr-uploading")||d.undo.saveStep();var i=l.data("fr-old-src");l.data("fr-image-pasted")&&(i=null),d.$wp?((e=l.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),i&&l.attr("src",i),l.replaceWith(e)):e=l;for(var n=e.get(0).attributes,r=0;r<n.length;r++){var s=n[r];0===s.nodeName.indexOf("data-")&&e.removeAttr(s.nodeName)}if(void 0!==a)for(t in a)a.hasOwnProperty(t)&&"link"!=t&&e.attr("data-"+t,a[t]);e.on("load",T),e.attr("src",o),d.edit.on(),u(!1),d.undo.saveStep(),d.$el.blur(),d.events.trigger(i?"image.replaced":"image.inserted",[e,c])}else e=k(o,a,T),u(!1),d.undo.saveStep(),d.$el.blur(),d.events.trigger("image.inserted",[e,c])},t.onerror=function(){g(Ne)},v(d.language.translate("Loading image")),t.src=o}function w(e){try{if(!1===d.events.trigger("image.uploaded",[e],!0))return d.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(g(Oe,e),!1)}catch(i){return g(Me,e),!1}}function A(e){try{var t=ze(e).find("Location").text(),i=ze(e).find("Key").text();return!1===d.events.trigger("image.uploadedToS3",[t,i,e],!0)?(d.edit.on(),!1):t}catch(f){return g(Me,e),!1}}function S(e){E(d.language.translate("Loading image"));var t=this.status,i=this.response,n=this.responseXML,r=this.responseText;try{if(d.opts.imageUploadToS3)if(201==t){var s=A(n);s&&C(s,!1,[],e,i||n)}else g(Me,i||n,e);else if(200<=t&&t<300){var o=w(r);o&&C(o.link,!1,o,e,i||r)}else g(Fe,i||r,e)}catch(a){g(Me,i||r,e)}}function x(){g(Me,this.response||this.responseText||this.responseXML)}function R(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;E(d.language.translate("Uploading"),t)}}function k(e,t,i){var n,r="";if(t&&void 0!==t)for(n in t)t.hasOwnProperty(n)&&"link"!=n&&(r+=" data-"+n+'="'+t[n]+'"');var s=d.opts.imageDefaultWidth;s&&"auto"!=s&&(s+=d.opts.imageResizeWithPercent?"%":"px");var o=ze('<img src="'+e+'"'+r+(s?' style="width: '+s+';"':"")+">");ue(o,d.opts.imageDefaultDisplay,d.opts.imageDefaultAlign),o.on("load",i),o.on("error",function(){g(Be)}),d.edit.on(),d.events.focus(!0),d.selection.restore(),d.undo.saveStep(),d.opts.imageSplitHTML?d.markers.split():d.markers.insert();var a=d.$el.find(".fr-marker");return a.length?(a.parent().is("hr")&&a.parent().after(a),d.node.isLastSibling(a)&&a.parent().hasClass("fr-deletable")&&a.insertAfter(a.parent()),a.replaceWith(o)):d.$el.append(o),d.html.wrap(),d.selection.clear(),o}function L(){d.edit.on(),b(!0)}function D(t,i,e,r){function s(){var e=ze(this);e.off("load"),e.addClass("fr-uploading"),e.next().is("br")&&e.next().remove(),d.placeholder.refresh(),_(e),l(),v(),d.edit.off(),t.onload=function(){S.call(t,e)},t.onerror=x,t.upload.onprogress=R,t.onabort=L,e.off("abortUpload").on("abortUpload",function(){4!=t.readyState&&t.abort()}),t.send(i)}var o=new FileReader;o.addEventListener("load",function(){var e=o.result;if(o.result.indexOf("svg+xml")<0){for(var t=atob(o.result.split(",")[1]),i=[],n=0;n<t.length;n++)i.push(t.charCodeAt(n));e=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:"image/jpeg"}))}r?(r.on("load",s),r.one("error",function(){r.off("load"),r.attr("src",r.data("fr-old-src")),g(Be)}),d.edit.on(),d.undo.saveStep(),r.data("fr-old-src",r.attr("src")),r.attr("src",e)):k(e,null,s)},!1),o.readAsDataURL(e)}function I(e,t){if(void 0!==e&&0<e.length){if(!1===d.events.trigger("image.beforeUpload",[e,t]))return!1;var i,n=e[0];if(n.name||(n.name=(new Date).getTime()+".jpg"),n.size>d.opts.imageMaxSize)return g($e),!1;if(d.opts.imageAllowedTypes.indexOf(n.type.replace(/image\//g,""))<0)return g(Pe),!1;if(d.drag_support.formdata&&(i=d.drag_support.formdata?new FormData:null),i){var r;if(!1!==d.opts.imageUploadToS3)for(r in i.append("key",d.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(n.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",n.type),d.opts.imageUploadToS3.params)d.opts.imageUploadToS3.params.hasOwnProperty(r)&&i.append(r,d.opts.imageUploadToS3.params[r]);for(r in d.opts.imageUploadParams)d.opts.imageUploadParams.hasOwnProperty(r)&&i.append(r,d.opts.imageUploadParams[r]);i.append(d.opts.imageUploadParam,n,n.name);var s=d.opts.imageUploadURL;d.opts.imageUploadToS3&&(s=d.opts.imageUploadToS3.uploadURL?d.opts.imageUploadToS3.uploadURL:"https://"+d.opts.imageUploadToS3.region+".amazonaws.com/"+d.opts.imageUploadToS3.bucket),D(d.core.getXHR(s,d.opts.imageUploadMethod),i,n,t||Re)}}}function N(n){d.events.$on(n,"dragover dragenter",".fr-image-upload-layer",function(){return ze(this).addClass("fr-drop"),!1},!0),d.events.$on(n,"dragleave dragend",".fr-image-upload-layer",function(){return ze(this).removeClass("fr-drop"),!1},!0),d.events.$on(n,"drop",".fr-image-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),ze(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;if(t&&t.files){var i=n.data("instance")||d;i.events.disableBlur(),i.image.upload(t.files),i.events.enableBlur()}},!0),d.helpers.isIOS()&&d.events.$on(n,"touchstart",'.fr-image-upload-layer input[type="file"]',function(){ze(this).trigger("click")},!0),d.events.$on(n,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var e=n.data("instance")||d;e.events.disableBlur(),n.find("input:focus").blur(),e.events.enableBlur(),e.image.upload(this.files,Re)}ze(this).val("")},!0)}function O(e){if(e.is("img")&&0<e.parents(".fr-img-caption").length)return e.parents(".fr-img-caption")}function F(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var i=t.files[0]
;if(i&&i.type&&-1!==i.type.indexOf("image")){if(!d.opts.imageUpload)return e.preventDefault(),e.stopPropagation(),!1;d.markers.remove(),d.markers.insertAtPoint(e.originalEvent),d.$el.find(".fr-marker").replaceWith(ze.FE.MARKERS),0===d.$el.find(".fr-marker").length&&d.selection.setAtEnd(d.el),d.popups.hideAll();var n=d.popups.get("image.insert");n||(n=$()),d.popups.setContainer("image.insert",d.$sc);var r=e.originalEvent.pageX,s=e.originalEvent.pageY;return d.opts.iframe&&(s+=d.$iframe.offset().top,r+=d.$iframe.offset().left),d.popups.show("image.insert",r,s),v(),0<=d.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))?(le(!0),I(t.files)):g(Pe),e.preventDefault(),e.stopPropagation(),!1}}}function M(){d.events.$on(d.$el,d._mousedown,"IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;d.helpers.isMobile()||d.selection.clear(),Ie=!0,d.popups.areVisible()&&d.events.disableBlur(),d.browser.msie&&(d.events.disableBlur(),d.$el.attr("contenteditable",!1)),d.draggable||"touchstart"==e.type||e.preventDefault(),e.stopPropagation()}),d.events.$on(d.$el,d._mouseup,"IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;Ie&&(Ie=!1,e.stopPropagation(),d.browser.msie&&(d.$el.attr("contenteditable",!0),d.events.enableBlur()))}),d.events.on("keyup",function(e){if(e.shiftKey&&""===d.selection.text().replace(/\n/g,"")&&d.keys.isArrow(e.which)){var t=d.selection.element(),i=d.selection.endElement();t&&"IMG"==t.tagName?_(ze(t)):i&&"IMG"==i.tagName&&_(ze(i))}},!0),d.events.on("drop",F),d.events.on("element.beforeDrop",O),d.events.on("mousedown window.mousedown",ce),d.events.on("window.touchmove",de),d.events.on("mouseup window.mouseup",function(){if(Re)return le(),!1;de()}),d.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&le()}),d.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){Ie=!1,le(!0)}),d.events.on("modals.hide",function(){Re&&(_e(),d.selection.clear())})}function $(e){if(e)return d.popups.onRefresh("image.insert",c),d.popups.onHide("image.insert",f),!0;var t,i="";d.opts.imageUpload||d.opts.imageInsertButtons.splice(d.opts.imageInsertButtons.indexOf("imageUpload"),1),1<d.opts.imageInsertButtons.length&&(i='<div class="fr-buttons">'+d.button.buildList(d.opts.imageInsertButtons)+"</div>");var n=d.opts.imageInsertButtons.indexOf("imageUpload"),r=d.opts.imageInsertButtons.indexOf("imageByURL"),s="";0<=n&&(t=" fr-active",0<=r&&r<n&&(t=""),s='<div class="fr-image-upload-layer'+t+' fr-layer" id="fr-image-upload-layer-'+d.id+'"><strong>'+d.language.translate("Drop image")+"</strong><br>("+d.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+d.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+d.id+'" role="button"></div></div>');var o="";0<=r&&(t=" fr-active",0<=n&&n<r&&(t=""),o='<div class="fr-image-by-url-layer'+t+' fr-layer" id="fr-image-by-url-layer-'+d.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+d.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+d.language.translate("Insert")+"</button></div></div>");var a={buttons:i,upload_layer:s,by_url_layer:o,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},l=d.popups.create("image.insert",a);return d.$wp&&d.events.$on(d.$wp,"scroll",function(){Re&&d.popups.isVisible("image.insert")&&ye()}),N(l),l}function P(){Re&&d.popups.get("image.alt").find("input").val(Re.attr("alt")||"").trigger("change")}function B(){var e=d.popups.get("image.alt");e||(e=H()),b(),d.popups.refresh("image.alt"),d.popups.setContainer("image.alt",d.$sc);var t=we();Se()&&(t=t.find(".fr-img-wrap"));var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();d.popups.show("image.alt",i,n,t.outerHeight())}function H(e){if(e)return d.popups.onRefresh("image.alt",P),!0;var t={buttons:'<div class="fr-buttons">'+d.button.buildList(d.opts.imageAltButtons)+"</div>",alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+d.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+d.id+'" type="text" placeholder="'+d.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+d.language.translate("Update")+"</button></div></div>"},i=d.popups.create("image.alt",t);return d.$wp&&d.events.$on(d.$wp,"scroll.image-alt",function(){Re&&d.popups.isVisible("image.alt")&&B()}),i}function W(e){if(Re){var t=d.popups.get("image.alt");Re.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),_(Re)}}function U(){if(Re){var e=d.popups.get("image.size");e.find('input[name="width"]').val(Re.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(Re.get(0).style.height).trigger("change")}}function K(){var e=d.popups.get("image.size");e||(e=z()),b(),d.popups.refresh("image.size"),d.popups.setContainer("image.size",d.$sc);var t=we();Se()&&(t=t.find(".fr-img-wrap"));var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();d.popups.show("image.size",i,n,t.outerHeight())}function z(e){if(e)return d.popups.onRefresh("image.size",U),!0;var t={buttons:'<div class="fr-buttons">'+d.button.buildList(d.opts.imageSizeButtons)+"</div>",size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+d.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+d.id+'" type="text" name="width" placeholder="'+d.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+d.id+'" type="text" name="height" placeholder="'+d.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+d.language.translate("Update")+"</button></div></div>"},i=d.popups.create("image.size",t);return d.$wp&&d.events.$on(d.$wp,"scroll.image-size",function(){Re&&d.popups.isVisible("image.size")&&K()}),i}function Y(e,t){if(Re){var i=d.popups.get("image.size");e=e||i.find('input[name="width"]').val()||"",t=t||i.find('input[name="height"]').val()||"";var n=/^[\d]+((px)|%)*$/g;e.match(n)?Re.css("width",e):Re.css("width",""),t.match(n)?Re.css("height",t):Re.css("height",""),Se()&&(e.match(n)?Re.parent().css("width",e):Re.parent().css("width",""),t.match(n)?Re.parent().css("height",t):Re.parent().css("height","")),i.find("input:focus").blur(),_(Re)}}function j(e){var t,i,n=d.popups.get("image.insert");if(Re||d.opts.toolbarInline){if(Re){var r=we();Se()&&(r=r.find(".fr-img-wrap")),i=r.offset().top+r.outerHeight(),t=r.offset().left+r.outerWidth()/2}}else{var s=d.$tb.find('.fr-command[data-cmd="insertImage"]');t=s.offset().left+s.outerWidth()/2,i=s.offset().top+(d.opts.toolbarBottom?10:s.outerHeight()-10)}!Re&&d.opts.toolbarInline&&(i=n.offset().top-d.helpers.getPX(n.css("margin-top")),n.hasClass("fr-above")&&(i+=n.outerHeight())),n.find(".fr-layer").removeClass("fr-active"),n.find(".fr-"+e+"-layer").addClass("fr-active"),d.popups.show("image.insert",t,i,Re?Re.outerHeight():0),d.accessibility.focusPopup(n)}function G(e){d.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function q(e){d.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function V(e,t,i,n){return e.pageX=t,o.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,n)),p.call(this,e),h.call(this,e),++n}function X(){var e;if(d.shared.$image_resizer?(ke=d.shared.$image_resizer,De=d.shared.$img_overlay,d.events.on("destroy",function(){ke.removeClass("fr-active").appendTo(ze("body:first"))},!0)):(d.shared.$image_resizer=ze('<div class="fr-image-resizer"></div>'),ke=d.shared.$image_resizer,d.events.$on(ke,"mousedown",function(e){e.stopPropagation()},!0),d.opts.imageResize&&(ke.append(t("nw")+t("ne")+t("sw")+t("se")),d.shared.$img_overlay=ze('<div class="fr-image-overlay"></div>'),De=d.shared.$img_overlay,e=ke.get(0).ownerDocument,ze(e).find("body:first").append(De))),d.events.on("shared.destroy",function(){ke.html("").removeData().remove(),ke=null,d.opts.imageResize&&(De.remove(),De=null)},!0),d.helpers.isMobile()||d.events.$on(ze(d.o_win),"resize",function(){Re&&!Re.hasClass("fr-uploading")?le(!0):Re&&(l(),ye(),v(!1))}),d.opts.imageResize){e=ke.get(0).ownerDocument,d.events.$on(ke,d._mousedown,".fr-handler",o),d.events.$on(ze(e),d._mousemove,p),d.events.$on(ze(e.defaultView||e.parentWindow),d._mouseup,h),d.events.$on(De,"mouseleave",h);var n=1,r=null,s=0;d.events.on("keydown",function(e){if(Re){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,i=e.which;(i!==r||200<e.timeStamp-s)&&(n=1),(i==ze.FE.KEYCODE.EQUALS||d.browser.mozilla&&i==ze.FE.KEYCODE.FF_EQUALS)&&t&&!e.altKey?n=V.call(this,e,1,1,n):(i==ze.FE.KEYCODE.HYPHEN||d.browser.mozilla&&i==ze.FE.KEYCODE.FF_HYPHEN)&&t&&!e.altKey?n=V.call(this,e,2,-1,n):d.keys.ctrlKey(e)||i!=ze.FE.KEYCODE.ENTER||(Re.before("<br>"),_(Re)),r=i,s=e.timeStamp}},!0),d.events.on("keyup",function(){n=1})}}function Q(e){(e=e||we())&&!1!==d.events.trigger("image.beforeRemove",[e])&&(d.popups.hideAll(),_e(),le(!0),d.undo.canDo()||d.undo.saveStep(),e.get(0)==d.el?e.removeAttr("src"):("A"==e.get(0).parentNode.tagName?(d.selection.setBefore(e.get(0).parentNode)||d.selection.setAfter(e.get(0).parentNode)||e.parent().after(ze.FE.MARKERS),ze(e.get(0).parentNode).remove()):(d.selection.setBefore(e.get(0))||d.selection.setAfter(e.get(0))||e.after(ze.FE.MARKERS),e.remove()),d.html.fillEmptyBlocks(),d.selection.restore()),d.undo.saveStep())}function Z(e){var t=e.which;if(Re&&(t==ze.FE.KEYCODE.BACKSPACE||t==ze.FE.KEYCODE.DELETE))return e.preventDefault(),e.stopPropagation(),Q(),!1;if(Re&&t==ze.FE.KEYCODE.ESC){var i=Re;return le(!0),d.selection.setAfter(i.get(0)),d.selection.restore(),e.preventDefault(),!1}if(Re&&(t==ze.FE.KEYCODE.ARROW_LEFT||t==ze.FE.KEYCODE.ARROW_RIGHT)){var n=Re.get(0);return le(!0),t==ze.FE.KEYCODE.ARROW_LEFT?d.selection.setBefore(n):d.selection.setAfter(n),d.selection.restore(),e.preventDefault(),!1}return Re&&t!=ze.FE.KEYCODE.F10&&!d.keys.isBrowserAction(e)?(e.preventDefault(),e.stopPropagation(),!1):void 0}function J(e){if(e&&"IMG"==e.tagName)d.node.hasClass(e,"fr-uploading")||d.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):d.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),i=0;i<t.length;i++)J(t[i])}function ee(){var n;(M(),"IMG"==d.el.tagName&&d.$el.addClass("fr-view"),d.events.$on(d.$el,d.helpers.isMobile()&&!d.helpers.isWindowsPhone()?"touchend":"click","IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',ae),d.helpers.isMobile()&&(d.events.$on(d.$el,"touchstart","IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(){Ue=!1}),d.events.$on(d.$el,"touchmove",function(){Ue=!0})),d.$wp?(d.events.on("window.keydown keydown",Z,!0),d.events.on("keyup",function(e){if(Re&&e.which==ze.FE.KEYCODE.ENTER)return!1},!0)):d.events.$on(d.$win,"keydown",Z),d.events.on("toolbar.esc",function(){if(Re){if(d.$wp)d.events.disableBlur(),d.events.focus();else{var e=Re;le(!0),d.selection.setAfter(e.get(0)),d.selection.restore()}return!1}},!0),d.events.on("toolbar.focusEditor",function(){if(Re)return!1},!0),d.events.on("window.cut window.copy",function(e){Re&&d.popups.isVisible("image.edit")&&!d.popups.get("image.edit").find(":focus").length&&(_e(),d.paste.saveCopiedText(Re.get(0).outerHTML,"\n"),"copy"==e.type?setTimeout(function(){_(Re)}):(le(!0),d.undo.saveStep(),setTimeout(function(){d.undo.saveStep()},0)))},!0),d.browser.msie&&d.events.on("keydown",function(e){if(!d.selection.isCollapsed()||!Re)return!0;var t=e.which;t==ze.FE.KEYCODE.C&&d.keys.ctrlKey(e)?d.events.trigger("window.copy"):t==ze.FE.KEYCODE.X&&d.keys.ctrlKey(e)&&d.events.trigger("window.cut")}),d.events.$on(ze(d.o_win),"keydown",function(e){var t=e.which;if(Re&&t==ze.FE.KEYCODE.BACKSPACE)return e.preventDefault(),!1}),d.events.$on(d.$win,"keydown",function(e){var t=e.which;Re&&Re.hasClass("fr-uploading")&&t==ze.FE.KEYCODE.ESC&&Re.trigger("abortUpload")}),d.events.on("destroy",function(){Re&&Re.hasClass("fr-uploading")&&Re.trigger("abortUpload")}),d.events.on("paste.before",se),d.events.on("paste.beforeCleanup",oe),d.events.on("paste.after",ie),d.events.on("html.set",a),d.events.on("html.inserted",a),a(),d.events.on("destroy",function(){We=[]}),d.events.on("html.processGet",J),d.opts.imageOutputSize)&&d.events.on("html.beforeGet",function(){n=d.el.querySelectorAll("img");for(var e=0;e<n.length;e++){var t=n[e].style.width||ze(n[e]).width(),i=n[e].style.height||ze(n[e]).height();t&&n[e].setAttribute("width",(""+t).replace(/px/,"")),i&&n[e].setAttribute("height",(""+i).replace(/px/,""))}});d.opts.iframe&&d.events.on("image.loaded",d.size.syncIframe),d.$wp&&(u(),d.events.on("contentChanged",u)),d.events.$on(ze(d.o_win),"orientationchange.image",function(){setTimeout(function(){Re&&_(Re)},100)}),m(!0),$(!0),z(!0),H(!0),d.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Q(e),!1})}function te(e){if(!1===d.events.trigger("image.beforePasteUpload",[e]))return!1;Re=ze(e),l(),r(),ye(),v();for(var t=atob(ze(e).attr("src").split(",")[1]),i=[],n=0;n<t.length;n++)i.push(t.charCodeAt(n));I([new Blob([new Uint8Array(i)],{type:"image/jpeg"})],Re)}function ie(){d.opts.imagePaste?d.$el.find("img[data-fr-image-pasted]").each(function(e,i){if(d.opts.imagePasteProcess){var t=d.opts.imageDefaultWidth;t&&"auto"!=t&&(t+=d.opts.imageResizeWithPercent?"%":"px"),ze(i).css("width",t).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((d.opts.imageDefaultDisplay?"fr-di"+d.opts.imageDefaultDisplay[0]:"")+(d.opts.imageDefaultAlign&&"center"!=d.opts.imageDefaultAlign?" fr-fi"+d.opts.imageDefaultAlign[0]:""))}if(0===i.src.indexOf("data:"))te(i);else if(0===i.src.indexOf("blob:")||0===i.src.indexOf("http")&&d.opts.imageUploadRemoteUrls&&d.opts.imageCORSProxy){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var e=d.o_doc.createElement("CANVAS"),t=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,t.drawImage(this,0,0),i.src=e.toDataURL("image/png"),te(i)},n.src=(0===i.src.indexOf("blob:")?"":d.opts.imageCORSProxy+"/")+i.src}else 0!==i.src.indexOf("http")||0===i.src.indexOf("https://mail.google.com/mail")?(d.selection.save(),ze(i).remove(),d.selection.restore()):ze(i).removeAttr("data-fr-image-pasted")}):d.$el.find("img[data-fr-image-pasted]").remove()}function ne(e){var t=e.target.result,i=d.opts.imageDefaultWidth;i&&"auto"!=i&&(i+=d.opts.imageResizeWithPercent?"%":"px"),d.html.insert('<img data-fr-image-pasted="true" class="'+(d.opts.imageDefaultDisplay?"fr-di"+d.opts.imageDefaultDisplay[0]:"")+(d.opts.imageDefaultAlign&&"center"!=d.opts.imageDefaultAlign?" fr-fi"+d.opts.imageDefaultAlign[0]:"")+'" src="'+t+'"'+(i?' style="width: '+i+';"':"")+">"),d.events.trigger("paste.after")}function re(e){var t=new FileReader;t.onload=ne,t.readAsDataURL(e)}function se(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var i=0;i<e.clipboardData.items.length&&!(t=e.clipboardData.items[i].getAsFile());i++);if(t)return re(t),!1}}function oe(e){return e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function ae(e){if("false"==ze(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable"))return!0;if(e&&"touchend"==e.type&&Ue)return!0;if(e&&d.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;for(var t=0;t<ze.FE.INSTANCES.length;t++)ze.FE.INSTANCES[t]!=d&&ze.FE.INSTANCES[t].events.trigger("image.hideResizer");d.toolbar.disable(),e&&(e.stopPropagation(),e.preventDefault()),d.helpers.isMobile()&&(d.events.disableBlur(),d.$el.blur(),d.events.enableBlur()),d.opts.iframe&&d.size.syncIframe(),Re=ze(this),d.browser.msie||_e(),l(),r(),d.browser.msie||d.selection.clear(),d.helpers.isIOS()&&(d.events.disableBlur(),d.$el.blur()),d.button.bulkRefresh(),d.events.trigger("video.hideResizer")}function le(e){Re&&(fe()||!0===e)&&(d.toolbar.enable(),ke.removeClass("fr-active"),d.popups.hide("image.edit"),Re=null,de())}function ce(){Ke=!0}function de(){Ke=!1}function fe(){return Ke}function ue(e,t,i){!d.opts.htmlUntouched&&d.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),i&&e.addClass("fr-fi"+i[0]),t&&e.addClass("fr-di"+t[0])):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:d.opts.imageDefaultMargin}),"center"==i?e.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*d.opts.imageDefaultMargin+"px)"}):"left"==i?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - "+d.opts.imageDefaultMargin+"px)"}):e.css({"float":"right",marginRight:0,maxWidth:"calc(100% - "+d.opts.imageDefaultMargin+"px)"})):"block"==t&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:d.opts.imageDefaultMargin+"px auto"}),"left"==i?e.css({marginLeft:0}):"right"==i&&e.css({marginRight:0}))}function pe(e){var t=we();t.removeClass("fr-fir fr-fil"),!d.opts.htmlUntouched&&d.opts.useClasses?"left"==e?t.addClass("fr-fil"):"right"==e&&t.addClass("fr-fir"):ue(t,ge(),e),_e(),l(),r(),d.selection.clear()}function he(e){if(void 0===e&&(e=we()),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function ge(e){void 0===e&&(e=we());var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function me(e){Re&&e.find("> *:first").replaceWith(d.icon.create("image-align-"+he()))}function ve(e,t){Re&&t.find('.fr-command[data-param1="'+he()+'"]').addClass("fr-active").attr("aria-selected",!0)}function be(e){var t=we();t.removeClass("fr-dii fr-dib"),!d.opts.htmlUntouched&&d.opts.useClasses?"inline"==e?t.addClass("fr-dii"):"block"==e&&t.addClass("fr-dib"):ue(t,e,he()),_e(),l(),r(),d.selection.clear()}function Ee(e,t){Re&&t.find('.fr-command[data-param1="'+ge()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ye(){var e=d.popups.get("image.insert");e||(e=$()),d.popups.isVisible("image.insert")||(b(),d.popups.refresh("image.insert"),d.popups.setContainer("image.insert",d.$sc));var t=we();Se()&&(t=t.find(".fr-img-wrap"));var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();d.popups.show("image.insert",i,n,t.outerHeight(!0))}function _e(){if(Re){d.events.disableBlur(),d.selection.clear();var e=d.doc.createRange();e.selectNode(Re.get(0)),d.selection.get().addRange(e),d.events.enableBlur()}}function Te(){Re?(d.events.disableBlur(),ze(".fr-popup input:focus").blur(),_(Re)):(d.events.disableBlur(),d.selection.restore(),d.events.enableBlur(),d.popups.hide("image.insert"),d.toolbar.showInline())}function Ce(){return Re}function we(){return Se()?Re.parents(".fr-img-caption:first"):Re}function Ae(e,t,i){if(void 0===t&&(t=d.opts.imageStyles),void 0===i&&(i=d.opts.imageMultipleStyles),!Re)return!1;if(!i){var n=Object.keys(t);n.splice(n.indexOf(e),1),Re.removeClass(n.join(" "))}"object"==typeof t[e]?(Re.removeAttr("style"),Re.css(t[e].style)):Re.toggleClass(e),_(Re)}function Se(){return!!Re&&0<Re.parents(".fr-img-caption").length}function xe(){var e;Re&&!Se()?((e=Re).parent().is("a")&&(e=Re.parent()),e.wrap('<span contenteditable="false" class="fr-img-caption '+Re.attr("class")+'" draggable="false"></span>'),e.wrap('<span class="fr-img-wrap"></span>'),e.after('<span class="fr-inner" contenteditable="true">'+ze.FE.START_MARKER+"Image caption"+ze.FE.END_MARKER+"</span>"),Re.removeAttr("class"),Re.parent().css("width",Re.width()),le(!0),d.selection.restore()):(e=we(),Re.insertAfter(e),Re.attr("class",e.attr("class").replace("fr-img-caption","")),e.remove(),_(Re))}var Re,ke,Le,De,Ie=!1,Ne=1,Oe=2,Fe=3,Me=4,$e=5,Pe=6,Be=8,He={};He[Ne]="Image cannot be loaded from the passed link.",He[Oe]="No link in upload response.",He[Fe]="Error during file upload.",He[Me]="Parsing response failed.",He[$e]="File is too large.",He[Pe]="Image file type is invalid.",He[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",He[Be]="Image file is corrupted.";var We,Ue,Ke=!1;return{_init:ee,showInsertPopup:i,showLayer:j,refreshUploadButton:G,refreshByURLButton:q,upload:I,insertByURL:e,align:pe,refreshAlign:me,refreshAlignOnShow:ve,display:be,refreshDisplayOnShow:Ee,replace:ye,back:Te,get:Ce,getEl:we,insert:C,showProgressBar:v,remove:Q,hideProgressBar:b,applyStyle:Ae,showAltPopup:B,showSizePopup:K,setAlt:W,setSize:Y,toggleCaption:xe,hasCaption:Se,exitEdit:le,edit:_}},ze.FE.DefineIcon("insertImage",{NAME:"image"}),ze.FE.RegisterShortcut(ze.FE.KEYCODE.P,"insertImage",null,"P"),ze.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),ze.FE.DefineIcon("imageUpload",{NAME:"upload"}),ze.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),ze.FE.DefineIcon("imageByURL",{NAME:"link"}),ze.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),ze.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),ze.FE.DefineIcon("imageDisplay",{NAME:"star"}),ze.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),ze.FE.DefineIcon("image-align",{NAME:"align-left"}),ze.FE.DefineIcon("image-align-left",{NAME:"align-left"}),ze.FE.DefineIcon("image-align-right",{NAME:"align-right"}),ze.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),ze.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),ze.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=ze.FE.COMMANDS.imageAlign.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.icon.create("image-align-"+i)+'<span class="fr-sr-only">'+this.language.translate(t[i])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),ze.FE.DefineIcon("imageReplace",{NAME:"exchange"}),ze.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),ze.FE.DefineIcon("imageRemove",{NAME:"trash"}),ze.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),ze.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),ze.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),ze.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),ze.FE.DefineIcon("imageStyle",{NAME:"magic"}),ze.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];"object"==typeof n&&(n=n.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+i+'">'+this.language.translate(n)+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(e,t){var i=this.image.get();i&&t.find(".fr-command").each(function(){var e=ze(this).data("param1"),t=i.hasClass(e);ze(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),ze.FE.DefineIcon("imageAlt",{NAME:"info"}),ze.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),ze.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),ze.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),ze.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),ze.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}}),ze.FE.DefineIcon("imageCaption",{NAME:"commenting"}),ze.FE.RegisterCommand("imageCaption",{undo:!0,focus:!1,title:"Image Caption",refreshAfterCallback:!0,callback:function(){this.image.toggleCaption()},refresh:function(e){this.image.get()&&e.toggleClass("fr-active",this.image.hasCaption())}})}),$(function(){$("#article_content").froalaEditor({imageUploadParam:"image_param",imageUploadURL:"/upload_image",imageManagerLoadURL:"/load_image",imageManagerDeleteURL:"/delete_image",imageUploadParams:{id:"my_editor"},imageUploadMethod:"POST",imageMaxSize:5242880,imageAllowedTypes:["jpeg","jpg","png"]}).on("froalaEditor.image.beforeUpload",function(){console.log(1)}).on("froalaEditor.image.uploaded",function(){console.log(2)}).on("froalaEditor.image.inserted",function(){console.log(3)}).on("froalaEditor.image.replaced",function(){console.log(4)})});